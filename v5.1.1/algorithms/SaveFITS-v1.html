<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SaveFITS v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SaveFocusedXYE v1" href="SaveFocusedXYE-v1.html" />
    <link rel="prev" title="SaveDspacemap v1" href="SaveDspacemap-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>5.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="savefits-v1">
<span id="algm-savefits"></span><span id="algm-savefits-v1"></span><h1>SaveFITS v1<a class="headerlink" href="#savefits-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/SaveFITS-v1_dlg.png"><img alt="../_images/SaveFITS-v1_dlg.png" class="screenshot" src="../_images/SaveFITS-v1_dlg.png" style="width: 399px;" /></a>
<p class="caption"><span class="caption-text"><strong>SaveFITS</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a></li>
<li><a class="reference internal" href="#usage" id="id6">Usage</a></li>
<li><a class="reference internal" href="#source" id="id7">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Saves image data from a workspace in FITS (Flexible Image Transport System) format</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="LoadFITS-v1.html#algm-loadfits"><span class="std std-ref">LoadFITS</span></a>, <a class="reference internal" href="SaveNXTomo-v1.html#algm-savenxtomo"><span class="std std-ref">SaveNXTomo</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="3%" />
<col width="18%" />
<col width="5%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Workspace holding an image (with one spectrum per pixel row).</td>
</tr>
<tr class="row-odd"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Name of the output file where the image is saved. Allowed extensions: [‘.fits’]</td>
</tr>
<tr class="row-even"><td>BitDepth</td>
<td>Input</td>
<td>number</td>
<td>16</td>
<td>The bit depth or number of bits per pixel to use for the output image(s). Only 16 bits is supported at the moment. Allowed values: [‘8’, ‘16’, ‘32’]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm saves an image from a workspace into a file in FITS
format. FITS stands for <a class="reference external" href="http://en.wikipedia.org/wiki/FITS">Flexible Image Transport System</a>.</p>
<p>The input matrix workspace must have one spectrum per row (and one bin
per column). This corresponds to the workspaces loaded by
<a class="reference internal" href="LoadFITS-v1.html#algm-loadfits"><span class="std std-ref">LoadFITS v1</span></a> when its option LoadAsRectImg is true (note its
default is false). The first spectrum corresponds to the first
(topmost) row and the last spectrum corresponds to the last (bottom)
column. Images stored in this type of workspace can be displayed with
a “color fill plot” or plot2D.</p>
<p>The current implementation of this algorithm only supports:
- 2D files (FITS images with two axes).
- 8, 16 or 32 bits as pixel bit depth (only for integer types)</p>
<p>The files produced by this algorithm follow the FITS standard and can
be loaded by widespread software and libraries such as <a class="reference external" href="http://fiji.sc">ImageJ/Fiji</a>, <a class="reference external" href="http://heasarc.gsfc.nasa.gov/ftools/fv/">fv</a> or
<a class="reference external" href="http://docs.astropy.org/en/stable/io/fits/index.html">pyfits</a>. The
files include the following basic standard headers: SIMPLE, BITPIX,
NAXIS, (NAXIS1 and NAXIS2), EXTEND, and a COMMENT header with the
format description.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="LoadFITS-v1.html#algm-loadfits"><span class="std std-ref">LoadFITS v1</span></a>.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id6">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - LoadSaveLoadFITS</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Load an image</span>
<span class="n">wsg_name</span> <span class="o">=</span> <span class="s1">&#39;images&#39;</span>
<span class="n">wsg</span> <span class="o">=</span> <span class="n">LoadFITS</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;FITS_small_01.fits&#39;</span><span class="p">,</span> <span class="n">LoadAsRectImg</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="n">wsg_name</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">wsg</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">save_name</span> <span class="o">=</span> <span class="s1">&#39;out_fits_example.fits&#39;</span>
<span class="n">SaveFITS</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="n">save_name</span><span class="p">,</span> <span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">)</span>

<span class="n">wsg_reload_name</span> <span class="o">=</span> <span class="s1">&#39;images_reloaded&#39;</span>
<span class="n">wsg_reload</span> <span class="o">=</span> <span class="n">LoadFITS</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="n">save_name</span><span class="p">,</span> <span class="n">LoadAsRectImg</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="n">wsg_reload_name</span><span class="p">)</span>
<span class="n">ws_reload</span> <span class="o">=</span> <span class="n">wsg_reload</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Compare</span>
<span class="n">bpp_log</span> <span class="o">=</span> <span class="s1">&#39;BITPIX&#39;</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">log</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getLogData</span><span class="p">(</span><span class="n">bpp_log</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bits per pixel in first image: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">log</span><span class="p">)))</span>
    <span class="n">log_reload</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getLogData</span><span class="p">(</span><span class="n">bpp_log</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bits per pixel in second image: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">log_reload</span><span class="p">)))</span>
<span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not find the keyword &#39;</span><span class="si">{0}</span><span class="s2">&#39; in the FITS file&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bpp_log</span><span class="p">))</span>

<span class="n">axis1_log</span> <span class="o">=</span> <span class="s1">&#39;NAXIS1&#39;</span>
<span class="n">axis2_log</span> <span class="o">=</span> <span class="s1">&#39;NAXIS2&#39;</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">log1</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getLogData</span><span class="p">(</span><span class="n">axis1_log</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
    <span class="n">log2</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getLogData</span><span class="p">(</span><span class="n">axis2_log</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Image size in first image: </span><span class="si">{0}</span><span class="s2"> x </span><span class="si">{1}</span><span class="s2"> pixels&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">log1</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">log2</span><span class="p">)))</span>
    <span class="n">log1_reload</span> <span class="o">=</span> <span class="n">ws_reload</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getLogData</span><span class="p">(</span><span class="n">axis1_log</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
    <span class="n">log2_reload</span> <span class="o">=</span> <span class="n">ws_reload</span><span class="o">.</span><span class="n">getRun</span><span class="p">()</span><span class="o">.</span><span class="n">getLogData</span><span class="p">(</span><span class="n">axis2_log</span><span class="p">)</span><span class="o">.</span><span class="n">value</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Image size in second image: </span><span class="si">{0}</span><span class="s2"> x </span><span class="si">{1}</span><span class="s2"> pixels&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">log1_reload</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">log2_reload</span><span class="p">)))</span>
<span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not find the keywords &#39;</span><span class="si">{}</span><span class="s2">&#39; and &#39;</span><span class="si">{}</span><span class="s2">&#39; in this FITS file&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">axis1_log</span><span class="p">,</span> <span class="n">axis2_log</span><span class="p">))</span>

<span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span> <span class="o">=</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">33</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Pixel value at coordinates (</span><span class="si">{0}</span><span class="s2">,</span><span class="si">{1}</span><span class="s2">), first image: </span><span class="si">{2:.1f}</span><span class="s2">, second image: </span><span class="si">{3:.1f}</span><span class="s2">&quot;</span><span class="o">.</span>
       <span class="nb">format</span><span class="p">(</span><span class="n">pos_x</span><span class="p">,</span> <span class="n">pos_y</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="n">pos_y</span><span class="p">)[</span><span class="n">pos_x</span><span class="p">],</span> <span class="n">ws_reload</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="n">pos_y</span><span class="p">)[</span><span class="n">pos_x</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Bits per pixel in first image: 16
Bits per pixel in second image: 16
Image size in first image: 512 x 512 pixels
Image size in second image: 512 x 512 pixels
Pixel value at coordinates (22,33), first image: 63.0, second image: 63.0
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Imaging.html">DataHandling\Imaging</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id7">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/98431db1d0022558632d1e088c9c4b21d35b9356/Framework/DataHandling/inc/MantidDataHandling/SaveFITS.h">SaveFITS.h</a> <em>(last modified: 2020-03-25)</em></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/98431db1d0022558632d1e088c9c4b21d35b9356/Framework/DataHandling/src/SaveFITS.cpp">SaveFITS.cpp</a> <em>(last modified: 2020-04-07)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SaveDspacemap-v1.html" title="Previous Chapter: SaveDspacemap v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SaveDspacemap v1</span>
    </a>
  </li>
  <li>
    <a href="SaveFocusedXYE-v1.html" title="Next Chapter: SaveFocusedXYE v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SaveFocusedXYE v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2020-10-23.<br/>
    </p>
  </div>
</footer>
  </body>
</html>