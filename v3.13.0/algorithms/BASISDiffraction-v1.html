<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>BASISDiffraction v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="BASISReduction v1" href="BASISReduction-v1.html" />
    <link rel="prev" title="AverageLogData v1" href="AverageLogData-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.13</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="basisdiffraction-v1">
<span id="algm-basisdiffraction"></span><span id="algm-basisdiffraction-v1"></span><h1>BASISDiffraction v1<a class="headerlink" href="#basisdiffraction-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/BASISDiffraction-v1_dlg.png"><img alt="../_images/BASISDiffraction-v1_dlg.png" class="screenshot" src="../_images/BASISDiffraction-v1_dlg.png" style="width: 228px;" /></a>
<p class="caption"><strong>BASISDiffraction</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id2">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a><ul>
<li><a class="reference internal" href="#determine-single-crystal-diffraction" id="id5">Determine Single Crystal Diffraction</a><ul>
<li><a class="reference internal" href="#sample-orientation" id="id6">Sample orientation</a></li>
<li><a class="reference internal" href="#diffraction-preferences" id="id7">Diffraction preferences</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id8">Usage</a></li>
<li><a class="reference internal" href="#source" id="id9">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Multiple-file BASIS reduction for diffraction detectors.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="AlignDetectors-v1.html#algm-aligndetectors"><em>AlignDetectors</em></a>, <a class="reference internal" href="DiffractionFocussing-v2.html#algm-diffractionfocussing"><em>DiffractionFocussing</em></a>, <a class="reference internal" href="SNSPowderReduction-v1.html#algm-snspowderreduction"><em>SNSPowderReduction</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="3%" />
<col width="12%" />
<col width="32%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RunNumbers</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Sample run numbers</td>
</tr>
<tr class="row-odd"><td>MaskFile</td>
<td>Input</td>
<td>string</td>
<td>/SNS/BSS/shared/autoreduce/new_masks_08_12_2015/BASIS_Mask_default_diff.xml</td>
<td>See documentation for latest mask files. Allowed extensions: [&#8216;.xml&#8217;]</td>
</tr>
<tr class="row-even"><td>LambdaRange</td>
<td>Input</td>
<td>dbl list</td>
<td>5.86,6.75</td>
<td>Incoming neutron wavelength range</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output Workspace. If background is subtracted, _data and _background workspaces will also be generated</td>
</tr>
<tr class="row-even"><td>BackgroundRuns</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Background run numbers</td>
</tr>
<tr class="row-odd"><td>BackgroundScale</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The background will be scaled by this number before being subtracted.</td>
</tr>
<tr class="row-even"><td>VanadiumRuns</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Vanadium run numbers</td>
</tr>
<tr class="row-odd"><td>SingleCrystalDiffraction</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Calculate diffraction pattern?</td>
</tr>
<tr class="row-even"><td>PsiAngleLog</td>
<td>Input</td>
<td>string</td>
<td>SE50Rot</td>
<td>log entry storing rotation of the samplearound the vertical axis</td>
</tr>
<tr class="row-odd"><td>PsiOffset</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Add this quantity to PsiAngleLog</td>
</tr>
<tr class="row-even"><td>LatticeSizes</td>
<td>Input</td>
<td>dbl list</td>
<td>0,0,0</td>
<td>three item comma-separated list &#8220;a, b, c&#8221;</td>
</tr>
<tr class="row-odd"><td>LatticeAngles</td>
<td>Input</td>
<td>dbl list</td>
<td>90,90,90</td>
<td>three item comma-separated list &#8220;alpha, beta, gamma&#8221;</td>
</tr>
<tr class="row-even"><td>VectorU</td>
<td>Input</td>
<td>dbl list</td>
<td>1,0,0</td>
<td>three item, comma-separated, HKL indexesof the diffracting plane</td>
</tr>
<tr class="row-odd"><td>VectorV</td>
<td>Input</td>
<td>dbl list</td>
<td>0,1,0</td>
<td>three item, comma-separated, HKL indexesof the direction perpendicular to VectorVand the vertical axis</td>
</tr>
<tr class="row-even"><td>Uproj</td>
<td>Input</td>
<td>dbl list</td>
<td>1,0,0</td>
<td>three item comma-separated Abscissa viewof the diffraction pattern</td>
</tr>
<tr class="row-odd"><td>Vproj</td>
<td>Input</td>
<td>dbl list</td>
<td>0,1,0</td>
<td>three item comma-separated Ordinate viewof the diffraction pattern</td>
</tr>
<tr class="row-even"><td>Wproj</td>
<td>Input</td>
<td>dbl list</td>
<td>0,0,1</td>
<td>Hidden axis view</td>
</tr>
<tr class="row-odd"><td>NBins</td>
<td>Input</td>
<td>number</td>
<td>400</td>
<td>number of bins in the HKL slice</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><strong>Run numbers</strong>:
The syntax for the run numbers designation allows runs to be segregated
into sets. The semicolon symbol &#8221;;&#8221; is used to separate the runs into sets.
Runs within each set are jointly reduced. However, when
<em>Single Crystal Diffraction</em> is selected, all run numbers provided will be reduced
together.</p>
<p>Examples:</p>
<ul class="simple">
<li>2144-2147,2149,2156  is a single set. All runs jointly reduced.</li>
<li>2144-2147,2149;2156  is set 2144-2147,2149 and set 2156. The sets are reduced separately from each other (except for <em>Single Crystal Diffraction</em>).</li>
</ul>
<p><strong>Mask file</strong>: The default mask (BASIS_Mask_default_diff.xml) covers all
inelastic detectors as well as the tips of the diffraction tubes. The file
is in directory /SNS/BSS/shared/autoreduce/new_masks_08_12_2015.</p>
<p><strong>Lambda Range</strong>: a list containing a minimum and maximum values are required.
Incoming neutrons with a wavelength outside this range will be filtered out.
The default range is [5.86, 6.75].</p>
<p><strong>OutputWorkspace</strong>: a two-dimensional <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><em>MDHistoWorkspace</em></a>
containing the intensities projected onto the reciprocal slice, integrated over
the independent axis <em>Wproj</em>. The diffraction pattern can be visualized with
the <a class="reference external" href="http://www.mantidproject.org/SliceViewer">SliceViewer</a>.</p>
<p><strong>Background runs</strong>: one or more run numbers to describe the background, and a
scaling factor between zero and one.</p>
<p><strong>Vanadium runs</strong>: a set of runs to be reduced jointly provide an incoherent
and isotropic scattering to determine instrument efficiency per detector. If
no vanadium is provided, all detectors are assumed to have the same efficiency</p>
<div class="section" id="determine-single-crystal-diffraction">
<h3><a class="toc-backref" href="#id5">Determine Single Crystal Diffraction</a><a class="headerlink" href="#determine-single-crystal-diffraction" title="Permalink to this headline">¶</a></h3>
<p>Creates a diffraction pattern from a set of runs
implementing a rotational scan of the sample around the vertical axis. The
corresponding goniometer&#8217;s rotation should be logged under log name
<strong>PsiAngleLog</strong>. Option <strong>PsiOffset</strong> allows user to enter a shift for this
angle.</p>
<div class="section" id="sample-orientation">
<h4><a class="toc-backref" href="#id6">Sample orientation</a><a class="headerlink" href="#sample-orientation" title="Permalink to this headline">¶</a></h4>
<p><strong>VectorU</strong>: Vector along k_i, when goniometer is at offset.</p>
<p><strong>VectorV</strong>: In plane vector perpendicular to VectorU, when goniometer is at
offset.</p>
</div>
<div class="section" id="diffraction-preferences">
<h4><a class="toc-backref" href="#id7">Diffraction preferences</a><a class="headerlink" href="#diffraction-preferences" title="Permalink to this headline">¶</a></h4>
<p>Most of the scattering occurs in the plane defined by VectorU and VectorV.
Please choose Uproj and Vproj defining a plane that is as close as possible
to the scattering plane.</p>
<p><strong>Uproj</strong>: Defines the first projection vector. Default (1,0,0).</p>
<p><strong>Vproj</strong>: Defines the second projection vector. Default (0,1,0).</p>
<p><strong>Wproj</strong>: Defines the third projection vector. Default (0,0,1).</p>
<p><strong>Nbins</strong>: the diffraction pattern to be viewed is partitioned into an
Nbins x Nbins grid, each grid rectangle assigned a particular scattered
intensity.</p>
<p>If background is provided, two additional workspaces
are generated. Workspace <em>_bkg</em> will contain the scattered intensity by the
background, and workspace <em>_dat</em> will contain the scattered intensity by
the sample with <em>no</em> background subtracted.</p>
<p><em>Timing</em>: 10 to 15 seconds per sample run. A typical scan made up of 50 runs
will take about 10 minutes to complete.</p>
</div>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id8">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Determine single crystal diffraction pattern:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">BASISDiffraction</span>
<span class="n">BASISDiffraction</span><span class="p">(</span><span class="n">SingleCrystalDiffraction</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                 <span class="n">RunNumbers</span><span class="o">=</span><span class="s">&#39;74799-74869&#39;</span><span class="p">,</span>
                 <span class="n">VanadiumRuns</span><span class="o">=</span><span class="s">&#39;75524-75526&#39;</span><span class="p">,</span>
                 <span class="n">BackgroundRuns</span><span class="o">=</span><span class="s">&#39;75527&#39;</span><span class="p">,</span>
                 <span class="n">PsiAngleLog</span><span class="o">=</span><span class="s">&#39;SE50Rot&#39;</span><span class="p">,</span>
                 <span class="n">PsiOffset</span><span class="o">=-</span><span class="mf">27.0</span><span class="p">,</span>
                 <span class="n">LatticeSizes</span><span class="o">=</span><span class="p">[</span><span class="mf">10.71</span><span class="p">,</span> <span class="mf">10.71</span><span class="p">,</span> <span class="mf">10.71</span><span class="p">],</span>
                 <span class="n">LatticeAngles</span><span class="o">=</span><span class="p">[</span><span class="mf">90.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">],</span>
                      <span class="n">VectorU</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                 <span class="n">VectorV</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                 <span class="n">Uproj</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                 <span class="n">Vproj</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
                 <span class="n">Wproj</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                 <span class="n">Nbins</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span>
                 <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/BASISDiffraction_syngle_crystal_diffraction.png" src="../_images/BASISDiffraction_syngle_crystal_diffraction.png" />
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Diffraction/Reduction.html">Diffraction\Reduction</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id9">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/fac942f0ecd8b18481b6a1cc7225ecff7aae436c/Framework/PythonInterface/plugins/algorithms/BASISDiffraction.py">BASISDiffraction.py</a> <em>(last modified: 2018-04-09)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="AverageLogData-v1.html" title="Previous Chapter: AverageLogData v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; AverageLogData v...</span>
    </a>
  </li>
  <li>
    <a href="BASISReduction-v1.html" title="Next Chapter: BASISReduction v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">BASISReduction v... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2018-07-25.<br/>
    </p>
  </div>
</footer>
  </body>
</html>