<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SingleCrystalDiffuseReduction v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="SliceMD v1" href="SliceMD-v1.html" />
    <link rel="prev" title="SimulatedDensityOfStates v1" href="SimulatedDensityOfStates-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.13</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="singlecrystaldiffusereduction-v1">
<span id="algm-singlecrystaldiffusereduction"></span><span id="algm-singlecrystaldiffusereduction-v1"></span><h1>SingleCrystalDiffuseReduction v1<a class="headerlink" href="#singlecrystaldiffusereduction-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/SingleCrystalDiffuseReduction-v1_dlg.png"><img alt="../_images/SingleCrystalDiffuseReduction-v1_dlg.png" class="screenshot" src="../_images/SingleCrystalDiffuseReduction-v1_dlg.png" style="width: 258px;" /></a>
<p class="caption"><strong>SingleCrystalDiffuseReduction</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id2">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a><ul>
<li><a class="reference internal" href="#masking" id="id5">Masking</a></li>
<li><a class="reference internal" href="#background" id="id6">Background</a></li>
<li><a class="reference internal" href="#symmetries" id="id7">Symmetries</a></li>
<li><a class="reference internal" href="#temporary-workspaces" id="id8">Temporary Workspaces</a></li>
</ul>
</li>
<li><a class="reference internal" href="#workflow" id="id9">Workflow</a></li>
<li><a class="reference internal" href="#usage" id="id10">Usage</a></li>
<li><a class="reference internal" href="#related-algorithms" id="id11">Related Algorithms</a></li>
<li><a class="reference internal" href="#source" id="id12">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Single Crystal Diffuse Scattering Reduction, normalisation, symmetry and background substraction</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><em>ConvertToMD</em></a>, <a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><em>MDNormSCD</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="3%" />
<col width="11%" />
<col width="11%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>list of str lists</td>
<td><em>Mandatory</em></td>
<td>Files to combine in reduction. Allowed extensions: [&#8216;_event.nxs&#8217;, &#8216;.nxs.h5&#8217;, &#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>Background</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Background run. Allowed extensions: [&#8216;_event.nxs&#8217;, &#8216;.nxs.h5&#8217;, &#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-even"><td>BackgroundScale</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The background will be scaled by this number before being subtracted.</td>
</tr>
<tr class="row-odd"><td>FilterByTofMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Optional: To exclude events that do not fall within a range of times-of-flight. This is the minimum accepted value in microseconds. Keep blank to load all events.</td>
</tr>
<tr class="row-even"><td>FilterByTofMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Optional: To exclude events that do not fall within a range of times-of-flight. This is the maximum accepted value in microseconds. Keep blank to load all events.</td>
</tr>
<tr class="row-odd"><td>SolidAngle</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>An input workspace containing momentum integrated vanadium (a measureof the solid angle). See <a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><em>MDnormSCD</em></a> for details. Allowed extensions: [&#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-even"><td>Flux</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>An input workspace containing momentum dependent flux. See <a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><em>MDnormSCD</em></a> for details. Allowed extensions: [&#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>MomentumMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Minimum value in momentum. The max of this value and the flux momentum minimum will be used.</td>
</tr>
<tr class="row-even"><td>MomentumMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Maximum value in momentum. The min of this value and the flux momentum maximum will be used.</td>
</tr>
<tr class="row-odd"><td>UBMatrix</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Path to an ISAW-style UB matrix text file. See <a class="reference internal" href="LoadIsawUB-v1.html#algm-loadisawub"><em>LoadIsawUB</em></a>. Allowed extensions: [&#8216;.mat&#8217;, &#8216;.ub&#8217;, &#8216;.txt&#8217;]</td>
</tr>
<tr class="row-even"><td>SetGoniometer</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Set which Goniometer to use. See <a class="reference internal" href="SetGoniometer-v1.html#algm-setgoniometer"><em>SetGoniometer</em></a></td>
</tr>
<tr class="row-odd"><td>Goniometers</td>
<td>Input</td>
<td>string</td>
<td>None, Specify Individually</td>
<td>Set the axes and motor names according to goniometers that we define in the code (Universal defined for SNS). Allowed values: [&#8216;None, Specify Individually&#8217;, &#8216;Universal&#8217;]</td>
</tr>
<tr class="row-even"><td>Axis0</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Axis0: name, x,y,z, 1/-1 (1 for ccw, -1 for cw rotation). A number of degrees can be used instead of name. Leave blank for no axis</td>
</tr>
<tr class="row-odd"><td>Axis1</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Axis1: name, x,y,z, 1/-1 (1 for ccw, -1 for cw rotation). A number of degrees can be used instead of name. Leave blank for no axis</td>
</tr>
<tr class="row-even"><td>Axis2</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Axis2: name, x,y,z, 1/-1 (1 for ccw, -1 for cw rotation). A number of degrees can be used instead of name. Leave blank for no axis</td>
</tr>
<tr class="row-odd"><td>LoadInstrument</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Load a different instrument IDF onto the data from a file. See <a class="reference internal" href="LoadInstrument-v1.html#algm-loadinstrument"><em>LoadInstrument</em></a>. Allowed extensions: [&#8216;.xml&#8217;]</td>
</tr>
<tr class="row-even"><td>DetCal</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Load an ISAW DetCal calibration onto the data from a file. See <a class="reference internal" href="LoadIsawDetCal-v1.html#algm-loadisawdetcal"><em>LoadIsawDetCal</em></a>. Allowed extensions: [&#8216;.detcal&#8217;]</td>
</tr>
<tr class="row-odd"><td>MaskFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Masking file for masking. Supported file format is XML and ISIS ASCII. See <a class="reference internal" href="LoadMask-v1.html#algm-loadmask"><em>LoadMask</em></a>. Allowed extensions: [&#8216;.xml&#8217;, &#8216;.msk&#8217;]</td>
</tr>
<tr class="row-even"><td>SymmetryOps</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>If specified the symmetry will be applied, can be space group name or number, or list individual symmetries.</td>
</tr>
<tr class="row-odd"><td>Uproj</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Defines the first projection vector of the target Q coordinate system in <strong>Q3D</strong> mode - Default (1,0,0)</td>
</tr>
<tr class="row-even"><td>Vproj</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Defines the second projection vector of the target Q coordinate system in <strong>Q3D</strong> mode - Default (0,1,0).</td>
</tr>
<tr class="row-odd"><td>Wproj</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Defines the third projection vector of the target Q coordinate system in <strong>Q3D</strong> mode. - Default (0,0,1)</td>
</tr>
<tr class="row-even"><td>BinningDim0</td>
<td>Input</td>
<td>dbl list</td>
<td>-5.05,5.05,101</td>
<td>Binning parameters for the 0th dimension. Enter it as acomma-separated list of values with theformat: &#8216;minimum,maximum,number_of_bins&#8217;.</td>
</tr>
<tr class="row-odd"><td>BinningDim1</td>
<td>Input</td>
<td>dbl list</td>
<td>-5.05,5.05,101</td>
<td>Binning parameters for the 1st dimension. Enter it as acomma-separated list of values with theformat: &#8216;minimum,maximum,number_of_bins&#8217;.</td>
</tr>
<tr class="row-even"><td>BinningDim2</td>
<td>Input</td>
<td>dbl list</td>
<td>-5.05,5.05,101</td>
<td>Binning parameters for the 2nd dimension. Enter it as acomma-separated list of values with theformat: &#8216;minimum,maximum,number_of_bins&#8217;.</td>
</tr>
<tr class="row-odd"><td>KeepTemporaryWorkspaces</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If True the normalization and data workspaces in addition to the normalized data will be outputted</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output Workspace. If background is subtracted _data and _background workspaces will also be made.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Developed for CORELLI but should work on any instrument. This workflow
algorithm loops over a series of runs combining them with correct
normalisation, subtract the background and apply symmetry. The
resulting workspace is a <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><em>MDHistoWorkspace</em></a>
containing a volume of scattering.</p>
<p>The input filename follows the syntax from
<a class="reference internal" href="../api/python/mantid/api/MultipleFileProperty.html#mantid.api.MultipleFileProperty" title="mantid.api.MultipleFileProperty"><tt class="xref py py-obj docutils literal"><span class="pre">MultipleFileProperty</span></tt></a></p>
<p>This workflow makes use of <a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><em>ConvertToMD</em></a> and
<a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><em>MDNormSCD</em></a> so these should be reviewed to
better understand all the options. An example of creating the Solid
Angle and Flux workspaces are included in <a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><em>MDNormSCD</em></a>. <a class="reference internal" href="MDNormSCDPreprocessIncoherent-v1.html#algm-mdnormscdpreprocessincoherent"><em>MDNormSCDPreprocessIncoherent</em></a> can be used to process Vanadium
data for the Solid Angle and Flux workspaces.</p>
<p>The resulting workspaces can be saved and loaded with <a class="reference internal" href="SaveMD-v2.html#algm-savemd"><em>SaveMD</em></a> and <a class="reference internal" href="LoadMD-v1.html#algm-loadmd"><em>LoadMD</em></a> respectively.</p>
<div class="section" id="masking">
<h3><a class="toc-backref" href="#id5">Masking</a><a class="headerlink" href="#masking" title="Permalink to this headline">¶</a></h3>
<p>The mask from the solid angle workspace is copied to the
data. Additional masking is provided by a masking file. A masking file
can be created my masking a data file then saving it using
<a class="reference internal" href="SaveMask-v1.html#algm-savemask"><em>SaveMask</em></a>.</p>
</div>
<div class="section" id="background">
<h3><a class="toc-backref" href="#id6">Background</a><a class="headerlink" href="#background" title="Permalink to this headline">¶</a></h3>
<p>The background is processed the same as the data except that the
Goniometer is copied from the data before setting the <a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a>. If a
background is included three workspaces are create. If
&#8220;OutputWorkspace&#8221; is set to &#8220;ws&#8221; you will get the following.</p>
<p>&#8220;ws_normalizedBackground&#8221; containing the normalised background.</p>
<p>&#8220;ws_normalizedData&#8221; containing the normalised data.</p>
<p>And &#8220;ws&#8221; where</p>
<div class="math">
<p><img src="../_images/math/6a84d73fefd33c2d635db58c496c4beccdb4604e.png" alt="ws = ws\_normalizedData - ws\_normalizedBackground * BackgroundScale"/></p>
</div><p>Should the background scale not be correct this allows you to redo the
background subtraction without rerunning the reduction.</p>
<p>If no background is used then the &#8220;ws&#8221; is just the normalised data.</p>
</div>
<div class="section" id="symmetries">
<h3><a class="toc-backref" href="#id7">Symmetries</a><a class="headerlink" href="#symmetries" title="Permalink to this headline">¶</a></h3>
<p>The symmetry is applied by manipulating the <a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a>.
The SymmetryOps parameters can either be defined as a <a class="reference internal" href="../concepts/PointAndSpaceGroups.html#point-and-space-groups"><em>space group</em></a> (number or name) were all the symmetries for that group
is applied, or you can specify individual <a class="reference internal" href="../concepts/SymmetryGroups.html#symmetry-groups"><em>symmetries</em></a> to apply.</p>
<p>For example setting SymmetryOps to &#8220;P 31 2 1&#8221;, &#8220;152&#8221; or &#8220;x,y,z;
-y,x-y,z+1/3; -x+y,-x,z+2/3; y,x,-z; x-y,-y,-z+2/3; -x,-x+y,-z+1/3&#8221;
are equivalent.</p>
</div>
<div class="section" id="temporary-workspaces">
<h3><a class="toc-backref" href="#id8">Temporary Workspaces</a><a class="headerlink" href="#temporary-workspaces" title="Permalink to this headline">¶</a></h3>
<p>If the KeepTemporaryWorkspaces option is True the data and the
normalization in addition to the nomalized data will be
outputted. This allows you to run separate instances of
SingleCrystalDiffuseReduction and combine the results. They will have
names &#8220;ws_data&#8221; and &#8220;ws_normalization&#8221;
respectively.</p>
<p>Where</p>
<div class="math">
<p><img src="../_images/math/8bdab87341508a4832cd17090dfdaafc5e2c8a41.png" alt="ws\_normalizedData = \frac{ws\_data}{ws\_normalization}"/></p>
</div><p>If background is subtracted there will be similar
&#8220;ws_background_data&#8221; and
&#8220;ws_background_normalization&#8221; for the background.</p>
<p>Where</p>
<div class="math">
<p><img src="../_images/math/3be2949bd5b01b272b392152b26b7c20222516ad.png" alt="ws\_normalizedBackground = \frac{ws\_background\_data}{ws\_backgournd\_normalization}"/></p>
</div></div>
</div>
<div class="section" id="workflow">
<h2><a class="toc-backref" href="#id9">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/SingleCrystalDiffuseReduction-v1.png" src="../_images/SingleCrystalDiffuseReduction-v1.png" />
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id10">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Single file</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CORELLI_29782&#39;</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">BinningDim0</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim1</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim2</span><span class="o">=</span><span class="s">&#39;-0.1,0.1,1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_single.png" src="../_images/SingleCrystalDiffuseReduction_corelli_single.png" />
</div>
<p><strong>Multiple files</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">BinningDim0</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim1</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim2</span><span class="o">=</span><span class="s">&#39;-0.1,0.1,1&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple.png" />
</div>
<p><strong>Single file with symmetry</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CORELLI_29782&#39;</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">BinningDim0</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim1</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim2</span><span class="o">=</span><span class="s">&#39;-0.1,0.1,1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOps</span><span class="o">=</span><span class="s">&quot;P 31 2 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_single_sym.png" src="../_images/SingleCrystalDiffuseReduction_corelli_single_sym.png" />
</div>
<p><strong>Multiple files with symmetry</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">BinningDim0</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim1</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim2</span><span class="o">=</span><span class="s">&#39;-0.1,0.1,1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOps</span><span class="o">=</span><span class="s">&quot;P 31 2 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym.png" />
</div>
<p><strong>Multiple files with symmetry and background substraction</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                              <span class="n">Background</span><span class="o">=</span><span class="s">&#39;CORELLI_28124&#39;</span><span class="p">,</span>
                              <span class="n">BackgroundScale</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">BinningDim0</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim1</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim2</span><span class="o">=</span><span class="s">&#39;-0.1,0.1,1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOps</span><span class="o">=</span><span class="s">&quot;P 31 2 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg.png" />
</div>
<p><strong>Reading in elastic Corelli autoreduced data</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;/SNS/CORELLI/IPTS-15526/shared/autoreduce/CORELLI_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">run</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;_elastic.nxs&#39;</span> <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">29782</span><span class="p">,</span><span class="mi">29818</span><span class="p">,</span><span class="mi">10</span><span class="p">)),</span>
                              <span class="n">Background</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/IPTS-15796/shared/autoreduce/CORELLI_28124_elastic.nxs&#39;</span><span class="p">,</span>
                              <span class="n">BackgroundScale</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">BinningDim0</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim1</span><span class="o">=</span><span class="s">&#39;-10.05,10.05,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim2</span><span class="o">=</span><span class="s">&#39;-0.1,0.1,1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOps</span><span class="o">=</span><span class="s">&quot;P 31 2 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg_elastic.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg_elastic.png" />
</div>
<p><strong>Defining the axis to be [H,H,0], [H,-H,0], [0,0,L]</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SingleCrystalDiffuseReduction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                              <span class="n">Background</span><span class="o">=</span><span class="s">&#39;CORELLI_28124&#39;</span><span class="p">,</span>
                              <span class="n">BackgroundScale</span><span class="o">=</span><span class="mf">0.95</span><span class="p">,</span>
                              <span class="n">SolidAngle</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/SolidAngle20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">Flux</span><span class="o">=</span><span class="s">&#39;/SNS/CORELLI/shared/Vanadium/2016B/Spectrum20160720NoCC.nxs&#39;</span><span class="p">,</span>
                              <span class="n">UBMatrix</span><span class="o">=</span><span class="s">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">,</span>
                              <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                              <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                              <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                              <span class="n">Uproj</span><span class="o">=</span><span class="s">&#39;1,1,0&#39;</span><span class="p">,</span>
                              <span class="n">Vproj</span><span class="o">=</span><span class="s">&#39;1,-1,0&#39;</span><span class="p">,</span>
                              <span class="n">Wproj</span><span class="o">=</span><span class="s">&#39;0,0,1&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim0</span><span class="o">=</span><span class="s">&#39;-7.5375,7.5375,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim1</span><span class="o">=</span><span class="s">&#39;-13.165625,13.165625,201&#39;</span><span class="p">,</span>
                              <span class="n">BinningDim2</span><span class="o">=</span><span class="s">&#39;-0.1,0.1,1&#39;</span><span class="p">,</span>
                              <span class="n">SymmetryOps</span><span class="o">=</span><span class="s">&quot;P 31 2 1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure">
<img alt="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg_HH0.png" src="../_images/SingleCrystalDiffuseReduction_corelli_multiple_sym_bkg_HH0.png" />
</div>
</div>
<div class="section" id="related-algorithms">
<h2><a class="toc-backref" href="#id11">Related Algorithms</a><a class="headerlink" href="#related-algorithms" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><em>MDNormSCD</em></a> is the algorithm performing the normalisation of a single file.</p>
<p><a class="reference internal" href="DeltaPDF3D-v1.html#algm-deltapdf3d"><em>DeltaPDF3D</em></a> calculates the 3D-ΔPDF from the resulting workspace of this algorithm.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Diffraction/Reduction.html">Diffraction\Reduction</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id12">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/fac942f0ecd8b18481b6a1cc7225ecff7aae436c/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/SingleCrystalDiffuseReduction.py">SingleCrystalDiffuseReduction.py</a> <em>(last modified: 2018-04-09)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SimulatedDensityOfStates-v1.html" title="Previous Chapter: SimulatedDensityOfStates v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SimulatedDensity...</span>
    </a>
  </li>
  <li>
    <a href="SliceMD-v1.html" title="Next Chapter: SliceMD v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SliceMD v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2018-07-25.<br/>
    </p>
  </div>
</footer>
  </body>
</html>