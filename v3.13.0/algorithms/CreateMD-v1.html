<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CreateMD v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.13.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="CreateMDHistoWorkspace v1" href="CreateMDHistoWorkspace-v1.html" />
    <link rel="prev" title="CreateLogTimeCorrection v1" href="CreateLogTimeCorrection-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.13</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="createmd-v1">
<span id="algm-createmd"></span><span id="algm-createmd-v1"></span><h1>CreateMD v1<a class="headerlink" href="#createmd-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/CreateMD-v1_dlg.png"><img alt="../_images/CreateMD-v1_dlg.png" class="screenshot" src="../_images/CreateMD-v1_dlg.png" style="width: 206px;" /></a>
<p class="caption"><strong>CreateMD</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id3">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id4">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id5">Properties</a></li>
<li><a class="reference internal" href="#description" id="id6">Description</a><ul>
<li><a class="reference internal" href="#setting-the-ub-matrix" id="id7">Setting the UB matrix</a></li>
<li><a class="reference internal" href="#goniometer-settings" id="id8">Goniometer Settings</a></li>
<li><a class="reference internal" href="#efix" id="id9">EFix</a></li>
<li><a class="reference internal" href="#merging-individually-converted-runs" id="id10">Merging Individually Converted Runs</a></li>
<li><a class="reference internal" href="#additional-information" id="id11">Additional Information</a></li>
<li><a class="reference internal" href="#workflow" id="id12">Workflow</a></li>
<li><a class="reference internal" href="#conversion-of-multiple-input-files-example" id="id13"><strong>Conversion Of Multiple Input Files Example</strong></a></li>
<li><a class="reference internal" href="#conversion-of-a-single-input-workspace-example" id="id14"><strong>Conversion Of A Single Input Workspace Example</strong></a><ul>
<li><a class="reference internal" href="#output" id="id15">Output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conversion-of-multiple-input-workspaces-example" id="id16"><strong>Conversion Of Multiple Input Workspaces Example</strong></a><ul>
<li><a class="reference internal" href="#id1" id="id17">Output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#multi-conversion-example-without-altering-original-workspaces-inplace-false" id="id18"><strong>Multi Conversion Example Without Altering Original Workspaces (InPlace=False)</strong></a><ul>
<li><a class="reference internal" href="#id2" id="id19">Output</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#source" id="id20">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id3">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Creates an MDWorkspace in the Q3D, HKL frame</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id4">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="CreateMDWorkspace-v1.html#algm-createmdworkspace"><em>CreateMDWorkspace</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id5">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="3%" />
<col width="14%" />
<col width="4%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><em>MDEventWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>MDEventWorkspace with new data appended.</td>
</tr>
<tr class="row-odd"><td>DataSources</td>
<td>Input</td>
<td>str list</td>
<td><em>Mandatory</em></td>
<td>Input workspaces to process, or filenames to load and process</td>
</tr>
<tr class="row-even"><td>EFix</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>datasource energy values in meV</td>
</tr>
<tr class="row-odd"><td>Emode</td>
<td>Input</td>
<td>string</td>
<td>Direct</td>
<td>Analysis mode [&#8216;Elastic&#8217;, &#8216;Direct&#8217;, &#8216;Indirect&#8217;]. Allowed values: [&#8216;Elastic&#8217;, &#8216;Direct&#8217;, &#8216;Indirect&#8217;]</td>
</tr>
<tr class="row-even"><td>Alatt</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>Lattice parameters</td>
</tr>
<tr class="row-odd"><td>Angdeg</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>Lattice angles</td>
</tr>
<tr class="row-even"><td>u</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>Lattice vector parallel to neutron beam</td>
</tr>
<tr class="row-odd"><td>v</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>Lattice vector perpendicular to neutron beam in the horizontal plane</td>
</tr>
<tr class="row-even"><td>Psi</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Psi rotation in degrees. Optional or one entry per run.</td>
</tr>
<tr class="row-odd"><td>Gl</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>gl rotation in degrees. Optional or one entry per run.</td>
</tr>
<tr class="row-even"><td>Gs</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>gs rotation in degrees. Optional or one entry per run.</td>
</tr>
<tr class="row-odd"><td>InPlace</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Execute conversions to MD and Merge in one-step. Less memory overhead.</td>
</tr>
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The name of the Nexus file to write, as a full or relative path. Only used if FileBackEnd is true. Allowed extensions: [&#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>FileBackEnd</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, Filename must also be specified. The algorithm will create the specified file in addition to an output workspace. The workspace will load data from the file on demand in order to reduce memory use.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id6">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This workflow algorithm creates MDWorkspaces in the Q3D, HKL frame using <a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><em>ConvertToMD v1</em></a>.</p>
<p>Using the FileBackEnd and Filename properties the algorithm can produce a file-backed workspace.
Note that this will significantly increase the execution time of the algorithm.</p>
<div class="section" id="setting-the-ub-matrix">
<h3><a class="toc-backref" href="#id7">Setting the UB matrix</a><a class="headerlink" href="#setting-the-ub-matrix" title="Permalink to this headline">¶</a></h3>
<p><em>u</em> and <em>v</em> are required. <em>u</em> and <em>v</em> are both 3-element vectors. These specify how the crystal&#8217;s axes were oriented relative to the spectrometer in the setup for which you define psi to be zero. <em>u</em> specifies the lattice vector that is parallel to the incident neutron beam, whilst <em>v</em> is a vector perpendicular to this in the horizontal plane. In <a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a> notation, <em>u</em> and <em>v</em> provide the U matrix. See <a class="reference internal" href="SetUB-v1.html#algm-setub"><em>SetUB v1</em></a>. <em>Alatt</em> and <em>Angdeg</em> are the lattice parameters in Angstroms and lattice angles in degrees respectively. Both are 3-element vectors. These form the B-matrix.</p>
</div>
<div class="section" id="goniometer-settings">
<h3><a class="toc-backref" href="#id8">Goniometer Settings</a><a class="headerlink" href="#goniometer-settings" title="Permalink to this headline">¶</a></h3>
<p>If goniometer settings have been provided then these will be applied to the input workspace(s). For multiple input workspaces, you will need to provide goniometer settings (<em>Psi</em>, <em>Gl</em>, <em>Gs</em>) as vectors where each element of the vector corresponds to the workspace in the order listed in <em>InputWorkspaces</em>. You do not need to provide the goniometer settings at all. If you run <a class="reference internal" href="SetGoniometer-v1.html#algm-setgoniometer"><em>SetGoniometer v1</em></a> individually on the input workspace prior to running CreateMD, then those settings will not be overwritten by CreateMD.</p>
</div>
<div class="section" id="efix">
<h3><a class="toc-backref" href="#id9">EFix</a><a class="headerlink" href="#efix" title="Permalink to this headline">¶</a></h3>
<p>The EFix value may be provided for input workspaces. Specifying a single value, will ensure that that value is applied to all input DataSources. EFix can also be provided as an array provided that the array is the same length as the DeataSources, in this case, the EFix values will be matched to the DataSources based on index. EFix has units of meV.</p>
</div>
<div class="section" id="merging-individually-converted-runs">
<h3><a class="toc-backref" href="#id10">Merging Individually Converted Runs</a><a class="headerlink" href="#merging-individually-converted-runs" title="Permalink to this headline">¶</a></h3>
<p>If a sequence of input workspaces are provided, and <em>InPlace</em> is False, then these are individually processed as above, and are merged together via <a class="reference internal" href="MergeMD-v1.html#algm-mergemd"><em>MergeMD v1</em></a>. Intermediate workspaces are not kept. If <em>InPlace</em> is applied conversion and merging are done in the same step. This requires less memory overhead, however input workspaces are altered.</p>
</div>
<div class="section" id="additional-information">
<h3><a class="toc-backref" href="#id11">Additional Information</a><a class="headerlink" href="#additional-information" title="Permalink to this headline">¶</a></h3>
<p>CreateMD steps use <a class="reference internal" href="ConvertToMDMinMaxGlobal-v1.html#algm-converttomdminmaxglobal"><em>ConvertToMDMinMaxGlobal v1</em></a> to determine the min and max possible extents prior to running <a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><em>ConvertToMD v1</em></a> on each run.</p>
<div class="figure">
<img alt="HoraceOrientation.png" src="../_images/HoraceOrientation.png" />
<p class="caption"><a class="reference external" href="http://horace.isis.rl.ac.uk/Generating_SQW_files">Horace</a> style orientation used by CreateMD. DSPI and Omega in the image have no meaning in Mantid and are not required by this algorithm.</p>
</div>
</div>
<div class="section" id="workflow">
<h3><a class="toc-backref" href="#id12">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/CreateMD-v1_wkflw.png" src="../_images/CreateMD-v1_wkflw.png" />
</div>
<div class="section" id="conversion-of-multiple-input-files-example">
<h3><a class="toc-backref" href="#id13"><strong>Conversion Of Multiple Input Files Example</strong></a><a class="headerlink" href="#conversion-of-multiple-input-files-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c"># Create arrays of run numbers and corresponding values of psi</span>
<span class="n">run_numbers</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15052</span><span class="p">,</span> <span class="mi">15098</span><span class="p">)</span>
<span class="n">psi_array</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">92.0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="c"># Create list of file names from run numbers</span>
<span class="n">input_runs</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;/path/to/data/instr_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">run_number</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;.nxspe&#39;</span> <span class="k">for</span> <span class="n">run_number</span> <span class="ow">in</span> <span class="n">run_numbers</span><span class="p">]</span>

<span class="n">md_ws</span> <span class="o">=</span> <span class="n">CreateMD</span><span class="p">(</span><span class="n">input_runs</span><span class="p">,</span> <span class="n">Emode</span><span class="o">=</span><span class="s">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">2.87</span><span class="p">,</span> <span class="mf">2.87</span><span class="p">,</span> <span class="mf">2.87</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">Psi</span><span class="o">=</span><span class="n">psi_array</span><span class="p">,</span> <span class="n">EFix</span><span class="o">=</span><span class="mf">400.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="conversion-of-a-single-input-workspace-example">
<h3><a class="toc-backref" href="#id14"><strong>Conversion Of A Single Input Workspace Example</strong></a><a class="headerlink" href="#conversion-of-a-single-input-workspace-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create some input data.</span>
<span class="n">current_ws</span> <span class="o">=</span> <span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="n">Instrument</span><span class="o">=</span><span class="s">&#39;MAR&#39;</span><span class="p">,</span> <span class="n">BinParams</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">UnitX</span><span class="o">=</span><span class="s">&#39;DeltaE&#39;</span><span class="p">)</span>
<span class="n">AddSampleLog</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">current_ws</span><span class="p">,</span><span class="n">LogName</span><span class="o">=</span><span class="s">&#39;Ei&#39;</span><span class="p">,</span><span class="n">LogText</span><span class="o">=</span><span class="s">&#39;3.0&#39;</span><span class="p">,</span><span class="n">LogType</span><span class="o">=</span><span class="s">&#39;Number&#39;</span><span class="p">)</span>

<span class="c"># Execute CreateMD</span>
<span class="n">new_mdew</span> <span class="o">=</span> <span class="n">CreateMD</span><span class="p">(</span><span class="n">current_ws</span><span class="p">,</span> <span class="n">Emode</span><span class="o">=</span><span class="s">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">1.4165</span><span class="p">,</span> <span class="mf">1.4165</span><span class="p">,</span><span class="mf">1.4165</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">Psi</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Gs</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">Gl</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c"># Show dimensionality and dimension names</span>
<span class="n">ndims</span> <span class="o">=</span> <span class="n">new_mdew</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ndims</span><span class="p">):</span>
    <span class="n">dim</span> <span class="o">=</span> <span class="n">new_mdew</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dim</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
</pre></div>
</div>
<div class="section" id="output">
<h4><a class="toc-backref" href="#id15">Output</a><a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">H</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">K</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">L</span><span class="p">]</span>
<span class="n">DeltaE</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="conversion-of-multiple-input-workspaces-example">
<h3><a class="toc-backref" href="#id16"><strong>Conversion Of Multiple Input Workspaces Example</strong></a><a class="headerlink" href="#conversion-of-multiple-input-workspaces-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create multiple runs</span>
<span class="n">input_runs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">psi</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">gs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">gl</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="n">current_ws</span> <span class="o">=</span> <span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="n">Instrument</span><span class="o">=</span><span class="s">&#39;MAR&#39;</span><span class="p">,</span> <span class="n">BinParams</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">UnitX</span><span class="o">=</span><span class="s">&#39;DeltaE&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;input_ws_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">input_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_ws</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>
    <span class="n">psi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">gs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c"># Convert and merge</span>
<span class="n">new_merged</span> <span class="o">=</span> <span class="n">CreateMD</span><span class="p">(</span><span class="n">input_runs</span><span class="p">,</span> <span class="n">Emode</span><span class="o">=</span><span class="s">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">1.4165</span><span class="p">,</span> <span class="mf">1.4165</span><span class="p">,</span><span class="mf">1.4165</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">Psi</span><span class="o">=</span><span class="n">psi</span><span class="p">,</span> <span class="n">Gl</span><span class="o">=</span><span class="n">gl</span><span class="p">,</span> <span class="n">Gs</span><span class="o">=</span><span class="n">gs</span><span class="p">,</span> <span class="n">EFix</span><span class="o">=</span><span class="mf">3.0</span><span class="p">)</span>

<span class="c"># Show dimensionality and dimension names</span>
<span class="n">ndims</span> <span class="o">=</span> <span class="n">new_merged</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ndims</span><span class="p">):</span>
    <span class="n">dim</span> <span class="o">=</span> <span class="n">new_merged</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dim</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
</pre></div>
</div>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id17">Output</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">H</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">K</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">L</span><span class="p">]</span>
<span class="n">DeltaE</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="multi-conversion-example-without-altering-original-workspaces-inplace-false">
<h3><a class="toc-backref" href="#id18"><strong>Multi Conversion Example Without Altering Original Workspaces (InPlace=False)</strong></a><a class="headerlink" href="#multi-conversion-example-without-altering-original-workspaces-inplace-false" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create multiple runs</span>
<span class="n">input_runs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">psi</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">gs</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="n">gl</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
    <span class="n">current_ws</span> <span class="o">=</span> <span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="n">Instrument</span><span class="o">=</span><span class="s">&#39;MAR&#39;</span><span class="p">,</span> <span class="n">BinParams</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">UnitX</span><span class="o">=</span><span class="s">&#39;DeltaE&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;input_ws_&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="n">input_runs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_ws</span><span class="o">.</span><span class="n">name</span><span class="p">())</span>
    <span class="n">psi</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="mi">5</span> <span class="o">*</span> <span class="n">i</span><span class="p">))</span>
    <span class="n">gl</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="n">gs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>

<span class="c"># Convert and merge. ConversionToMD done in place.</span>
<span class="n">new_merged</span> <span class="o">=</span> <span class="n">CreateMD</span><span class="p">(</span><span class="n">input_runs</span><span class="p">,</span> <span class="n">Emode</span><span class="o">=</span><span class="s">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">1.4165</span><span class="p">,</span> <span class="mf">1.4165</span><span class="p">,</span><span class="mf">1.4165</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="n">Psi</span><span class="o">=</span><span class="n">psi</span><span class="p">,</span> <span class="n">Gl</span><span class="o">=</span><span class="n">gl</span><span class="p">,</span> <span class="n">Gs</span><span class="o">=</span><span class="n">gs</span><span class="p">,</span> <span class="n">EFix</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">InPlace</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

<span class="c"># Show dimensionality and dimension names</span>
<span class="n">ndims</span> <span class="o">=</span> <span class="n">new_merged</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ndims</span><span class="p">):</span>
    <span class="n">dim</span> <span class="o">=</span> <span class="n">new_merged</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">dim</span><span class="o">.</span><span class="n">getName</span><span class="p">())</span>
</pre></div>
</div>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id19">Output</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">H</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">K</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span>
<span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">L</span><span class="p">]</span>
<span class="n">DeltaE</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/MDAlgorithms.html">MDAlgorithms</a></p>
</div>
</div>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id20">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/fac942f0ecd8b18481b6a1cc7225ecff7aae436c/Framework/MDAlgorithms/src/CreateMD.cpp">CreateMD.cpp</a> <em>(last modified: 2017-03-29)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/fac942f0ecd8b18481b6a1cc7225ecff7aae436c/Framework/MDAlgorithms/inc/MantidMDAlgorithms/CreateMD.h">CreateMD.h</a> <em>(last modified: 2018-04-09)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CreateLogTimeCorrection-v1.html" title="Previous Chapter: CreateLogTimeCorrection v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CreateLogTimeCor...</span>
    </a>
  </li>
  <li>
    <a href="CreateMDHistoWorkspace-v1.html" title="Next Chapter: CreateMDHistoWorkspace v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CreateMDHistoWor... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2018-07-25.<br/>
    </p>
  </div>
</footer>
  </body>
</html>