<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>IndirectILLEnergyTransfer v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.10.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="IndirectILLReduction v1" href="IndirectILLReduction-v1.html" />
    <link rel="prev" title="IndirectFlatPlateAbsorption v2" href="IndirectFlatPlateAbsorption-v2.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.10</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="indirectillenergytransfer-v1">
<span id="algm-indirectillenergytransfer"></span><span id="algm-indirectillenergytransfer-v1"></span><h1>IndirectILLEnergyTransfer v1<a class="headerlink" href="#indirectillenergytransfer-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/IndirectILLEnergyTransfer-v1_dlg.png"><img alt="../_images/IndirectILLEnergyTransfer-v1_dlg.png" class="screenshot" src="../_images/IndirectILLEnergyTransfer-v1_dlg.png" style="width: 364px;" /></a>
<p class="caption"><strong>IndirectILLEnergyTransfer</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#workflow" id="id4">Workflow</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Performs initial energy transfer reduction for ILL indirect geometry data, instrument IN16B.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="2%" />
<col width="6%" />
<col width="5%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Run</td>
<td>Input</td>
<td>list of str lists</td>
<td><em>Mandatory</em></td>
<td>File path of run (s). Allowed values: [&#8216;nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>MapFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Filename of the detector grouping map file to use.  By default all the pixels will be summed per each tube.  Use .map or .xml file (see GroupDetectors documentation) only if different range is needed for each tube. Allowed values: [&#8216;map&#8217;, &#8216;xml&#8217;]</td>
</tr>
<tr class="row-even"><td>ManualPSDIntegrationRange</td>
<td>Input</td>
<td>int list</td>
<td>1,128</td>
<td>Integration range of vertical pixels in each PSD tube.  By default all the pixels will be summed per each tube.  Use this option if the same range (other than default) is needed for all the tubes.</td>
</tr>
<tr class="row-odd"><td>Analyser</td>
<td>Input</td>
<td>string</td>
<td>silicon</td>
<td>Analyser crystal. Allowed values: [&#8216;silicon&#8217;]</td>
</tr>
<tr class="row-even"><td>Reflection</td>
<td>Input</td>
<td>string</td>
<td>111</td>
<td>Analyser reflection. Allowed values: [&#8216;111&#8217;, &#8216;311&#8217;]</td>
</tr>
<tr class="row-odd"><td>CropDeadMonitorChannels</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether or not to exclude the first and last few channels with 0 monitor count in the energy transfer formula.</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td>WorkspaceGroup</td>
<td><em>Mandatory</em></td>
<td>Group name for the reduced workspace(s).</td>
</tr>
<tr class="row-odd"><td>SpectrumAxis</td>
<td>Input</td>
<td>string</td>
<td>SpectrumNumber</td>
<td>The spectrum axis conversion target. Allowed values: [&#8216;SpectrumNumber&#8217;, &#8216;2Theta&#8217;, &#8216;Q&#8217;, &#8216;Q2&#8217;]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This is a part of multi-algorithm reduction workflow for <strong>IN16B</strong> indirect geometry instrument at <strong>ILL</strong>.
It handles the first steps of the reduction chain, such as grouping of the detectors, normalizing to monitor dependent on the reduction type.
It performs transformation of the axes; x-axis from channel number to energy transfer, and optionally y-axis to scattering angle or elastic momentum transfer.
It handles <strong>automatically</strong> all three types of data (QENS, EFWS, IFWS) recorded with or without mirror sense.
Note, that following the standard, the <tt class="docutils literal"><span class="pre">Unit</span></tt> for energy transfer (<tt class="docutils literal"><span class="pre">DeltaE</span></tt>) will be mili-elevtron-volts (<tt class="docutils literal"><span class="pre">mev</span></tt>).
This algorithm is intended to handle only single file at a time, although if multiple files are given, they will be automatically summed at raw level, i.e. while loading.
In this case <tt class="docutils literal"><span class="pre">MergeRuns</span></tt> algorithm will be invoked, which will forbid the merges across different types of data
(e.g. different mirror senses, doppler energy or velocity profiles).
Note, that this algorithm is compatible with the data recorded from 03.2014 onwards
(i.e. where Doppler&#8217;s <tt class="docutils literal"><span class="pre">mirror_sense</span></tt>, <tt class="docutils literal"><span class="pre">maximum_delta_energy</span></tt> and <tt class="docutils literal"><span class="pre">velocity_profile</span></tt> entries are defined in <tt class="docutils literal"><span class="pre">.nxs</span></tt> files).
It returns a <a class="reference internal" href="../concepts/WorkspaceGroup.html#workspacegroup"><em>WorkspaceGroup</em></a>, containing one (no mirror sense) or two workspaces (with mirror sense) for left and right wings respectively.
This algorithm is <strong>not</strong> intended to be used directly by the end users. Instead it is used as a child algorithm by <a class="reference internal" href="IndirectILLReductionQENS-v1.html#algm-indirectillreductionqens"><em>IndirectILLReductionQENS</em></a>
and <a class="reference internal" href="IndirectILLReductionFWS-v1.html#algm-indirectillreductionfws"><em>IndirectILLReductionFWS</em></a> for QENS and FWS type of reductions correspondingly.</p>
</div>
<div class="section" id="workflow">
<h2><a class="toc-backref" href="#id4">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/IndirectILLEnergyTransfer-v1_wkflw.png" src="../_images/IndirectILLEnergyTransfer-v1_wkflw.png" />
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - IndirectILLEnergyTransfer : QENS data without mirror sense</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">IndirectILLEnergyTransfer</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;ILL/IN16B/090661.nxs&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;Reduced workspace has </span><span class="si">%d</span><span class="s"> wing&quot;</span> <span class="o">%</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;which has </span><span class="si">%d</span><span class="s"> spectra&quot;</span> <span class="o">%</span> <span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;and </span><span class="si">%d</span><span class="s"> bins&quot;</span> <span class="o">%</span> <span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Reduced workspace has 1 wing
which has 18 spectra
and 1024 bins
</pre></div>
</div>
<p><strong>Example - IndirectILLEnergyTransfer : QENS data with mirror sense</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">IndirectILLEnergyTransfer</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;ILL/IN16B/136553:136555.nxs&#39;</span><span class="p">,</span> <span class="n">CropDeadMonitorChannels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;Reduced workspace has </span><span class="si">%d</span><span class="s"> wings&quot;</span> <span class="o">%</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;which have </span><span class="si">%d</span><span class="s"> spectra&quot;</span> <span class="o">%</span> <span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;and </span><span class="si">%d</span><span class="s"> bins&quot;</span> <span class="o">%</span> <span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Reduced workspace has 2 wings
which have 18 spectra
and 1017 bins
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Workflow/MIDAS.html">Workflow\MIDAS</a> | <a class="reference external" href="categories/Workflow/Inelastic.html">Workflow\Inelastic</a> | <a class="reference external" href="categories/Inelastic/Indirect.html">Inelastic\Indirect</a> | <a class="reference external" href="categories/Inelastic/Reduction.html">Inelastic\Reduction</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/0e727092bfa714fd0d7f12ee4b2c3bb864e1ef06/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/IndirectILLEnergyTransfer.py">IndirectILLEnergyTransfer.py</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="IndirectFlatPlateAbsorption-v2.html" title="Previous Chapter: IndirectFlatPlateAbsorption v2"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; IndirectFlatPlat...</span>
    </a>
  </li>
  <li>
    <a href="IndirectILLReduction-v1.html" title="Next Chapter: IndirectILLReduction v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">IndirectILLReduc... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>