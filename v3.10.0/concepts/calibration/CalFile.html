<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CalFile</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.10.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../../index.html" />
    <link rel="up" title="Calibration" href="index.html" />
    <link rel="next" title="Engineering Calibration" href="EngineeringCalibration.html" />
    <link rel="prev" title="After Tube Calibration" href="AfterTubeCalibration.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.10</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="calfile">
<span id="id1"></span><h1>CalFile<a class="headerlink" href="#calfile" title="Permalink to this headline">¶</a></h1>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>The CalFile is a calibration file originally created for use in the
Ariel powder diffraction data reduction package.</p>
<p>Files using this format with the .cal extension are still used by
several algorithms in Mantid.</p>
</div>
<div class="section" id="file-format">
<h2>File Format<a class="headerlink" href="#file-format" title="Permalink to this headline">¶</a></h2>
<p>The file is a simple text file with the following format</p>
<div class="highlight-none"><div class="highlight"><pre>#  number  UDET  offset  select  group
   0        611  0.0000000  1    0
   1        612  0.0000000  1    0
   2        601  0.0000000  0    0
            ...
  19     101001 -0.0497075  1    2
  20     101002 -0.3515893  1    2
  21     101003 -0.2803879  0    2
            ...
 349     201001  0.0525040  1    3
 350     201002  0.0538936  1    3
 351     201003  0.0535027  1    3
            ...
</pre></div>
</div>
<p>The first column is simply an index, the second is a UDET identifier for
the detector, the third column corresponds to an offset in
<img class="math" src="../../_images/math/e02b27d275df6a73a7b50265464da007b816490a.png" alt="\delta d/d" style="vertical-align: -5px"/> (this is usually applied in Mantid using the
<a class="reference internal" href="../../algorithms/AlignDetectors-v1.html#algm-aligndetectors"><em>AlignDetectors</em></a> algorithm). The fourth column is a
flag to indicate whether the detector is selected and should be used in
<a class="reference internal" href="../../algorithms/DiffractionFocussing-v2.html#algm-diffractionfocussing"><em>DiffractionFocussing</em></a>. The fifth column
indicates the group this detector belongs to (number &gt;=1), zero is not
considered as a group.</p>
</div>
<div class="section" id="masking">
<h2>Masking<a class="headerlink" href="#masking" title="Permalink to this headline">¶</a></h2>
<p>The most important columns for masking are the <strong>UDET</strong> and the
<strong>select</strong> column. The <strong>number</strong>, <strong>offset</strong> and <strong>group</strong> entries are
ignored.</p>
</div>
<div class="section" id="algorithms-that-work-with-calfiles">
<h2>Algorithms that work with CalFiles<a class="headerlink" href="#algorithms-that-work-with-calfiles" title="Permalink to this headline">¶</a></h2>
<div class="section" id="using-calfiles">
<h3>Using CalFiles<a class="headerlink" href="#using-calfiles" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/AlignDetectors-v1.html#algm-aligndetectors"><em>AlignDetectors</em></a> will apply the offset from a CalFile while converting the data from time of flight to wavelength.</li>
<li><a class="reference internal" href="../../algorithms/DiffractionFocussing-v2.html#algm-diffractionfocussing"><em>DiffractionFocussing</em></a> uses the selection and grouping columns of a CalFile to focus the diffraction data.</li>
</ul>
</div>
<div class="section" id="loading-and-saving-calfiles">
<h3>Loading and saving CalFiles<a class="headerlink" href="#loading-and-saving-calfiles" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/LoadCalFile-v1.html#algm-loadcalfile"><em>LoadCalFile</em></a> will load the CalFile into separate offset, masking and grouping workspaces.</li>
<li><a class="reference internal" href="../../algorithms/SaveCalFile-v1.html#algm-savecalfile"><em>SaveCalFile</em></a> will save a CalFile from separate offset, masking and grouping workspaces.</li>
<li><a class="reference internal" href="../../algorithms/MaskWorkspaceToCalFile-v1.html#algm-maskworkspacetocalfile"><em>MaskWorkspaceToCalFile</em></a> will save a mask workspace as a CalFile.</li>
<li><a class="reference internal" href="../../algorithms/ReadGroupsFromFile-v1.html#algm-readgroupsfromfile"><em>ReadGroupsFromFile</em></a> Reads the groups from a CalFile, and output a 2D workspace containing on the Y-axis the values of the Group each detector belongs to. This is used to visualize the grouping scheme for powder diffractometers.</li>
</ul>
</div>
<div class="section" id="creating-calfiles">
<h3>Creating CalFiles<a class="headerlink" href="#creating-calfiles" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/CalibrateRectangularDetectors-v1.html#algm-calibraterectangulardetectors"><em>CalibrateRectangularDetectors</em></a> will output a CalFile if the SaveAs property is set to &#8220;Calibration&#8221;.</li>
<li><a class="reference internal" href="../../algorithms/GetDetectorOffsets-v1.html#algm-getdetectoroffsets"><em>GetDetectorOffsets</em></a> will output a CalFile if the GroupingFilename is set.</li>
<li><a class="reference internal" href="../../algorithms/CreateCalFileByNames-v1.html#algm-createcalfilebynames"><em>CreateCalFileByNames</em></a> will create a CalFile with the grouping column set according to a list of bank names.</li>
<li><a class="reference internal" href="../../algorithms/CreateDummyCalFile-v1.html#algm-createdummycalfile"><em>CreateDummyCalFile</em></a> creates a CalFile from a workspace. All of the offsets will be zero, and the pixels will be all grouped into one group.</li>
</ul>
</div>
<div class="section" id="merging-calfiles">
<h3>Merging CalFiles<a class="headerlink" href="#merging-calfiles" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/MergeCalFiles-v1.html#algm-mergecalfiles"><em>MergeCalFiles</em></a> combines the data contained in two CalFiles, based on the selections offsets, selections and groups can be merged. The matching rows are determined by UDET. Any unmatched records are added at the end of the file.</li>
</ul>
<p><strong>Category</strong>: <a class="reference external" href="../categories/Calibration.html">Calibration</a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="AfterTubeCalibration.html" title="Previous Chapter: After Tube Calibration"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; After Tube Calib...</span>
    </a>
  </li>
  <li>
    <a href="EngineeringCalibration.html" title="Next Chapter: Engineering Calibration"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Engineering Cali... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>