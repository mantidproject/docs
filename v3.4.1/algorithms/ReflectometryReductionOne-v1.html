<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ReflectometryReductionOne v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="ReflectometryReductionOneAuto v1" href="ReflectometryReductionOneAuto-v1.html" />
    <link rel="prev" title="RefinePowderInstrumentParameters v3" href="RefinePowderInstrumentParameters-v3.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="reflectometryreductionone-v1">
<span id="algm-reflectometryreductionone"></span><span id="algm-reflectometryreductionone-v1"></span><h1>ReflectometryReductionOne v1<a class="headerlink" href="#reflectometryreductionone-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/ReflectometryReductionOne-v1_dlg.png"><img alt="../_images/ReflectometryReductionOne-v1_dlg.png" class="screenshot" src="../_images/ReflectometryReductionOne-v1_dlg.png" style="width: 290px;" /></a>
<p class="caption"><strong>ReflectometryReductionOne</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#workflow" id="id4">Workflow</a></li>
<li><a class="reference internal" href="#analysis-modes" id="id5">Analysis Modes</a></li>
<li><a class="reference internal" href="#transmission-runs" id="id6">Transmission Runs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id7">Usage</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Reduces a single TOF/Lambda reflectometry run into a mod Q vs I/I0 workspace. Performs transmission corrections.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="2%" />
<col width="12%" />
<col width="6%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Run to reduce.</td>
</tr>
<tr class="row-odd"><td>AnalysisMode</td>
<td>Input</td>
<td>string</td>
<td>PointDetectorAnalysis</td>
<td>The type of analysis to perform. Point detector or multi detector.</td>
</tr>
<tr class="row-even"><td>RegionOfInterest</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>Indices of the spectra a pair (lower, upper) that mark the ranges that correspond to the region of interest (reflected beam) in multi-detector mode.</td>
</tr>
<tr class="row-odd"><td>RegionOfDirectBeam</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>Indices of the spectra a pair (lower, upper) that mark the ranges that correspond to the direct beam in multi-detector mode.</td>
</tr>
<tr class="row-even"><td>I0MonitorIndex</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>I0 monitor index</td>
</tr>
<tr class="row-odd"><td>ProcessingInstructions</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Processing instructions on workspace indexes to yield only the detectors of interest. See [[PerformIndexOperations]] for details.</td>
</tr>
<tr class="row-even"><td>WavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength minimum in angstroms</td>
</tr>
<tr class="row-odd"><td>WavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength maximum in angstroms</td>
</tr>
<tr class="row-even"><td>WavelengthStep</td>
<td>Input</td>
<td>number</td>
<td>0.05</td>
<td>Wavelength rebinning step in angstroms. Defaults to 0.05. Used for rebinning intermediate workspaces converted into wavelength.</td>
</tr>
<tr class="row-odd"><td>MonitorBackgroundWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength minimum for monitor background in angstroms.</td>
</tr>
<tr class="row-even"><td>MonitorBackgroundWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength maximum for monitor background in angstroms.</td>
</tr>
<tr class="row-odd"><td>MonitorIntegrationWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength minimum for integration in angstroms.</td>
</tr>
<tr class="row-even"><td>MonitorIntegrationWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength maximum for integration in angstroms.</td>
</tr>
<tr class="row-odd"><td>DetectorComponentName</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Name of the detector component i.e. point-detector. If these are not specified, the algorithm will attempt lookup using a standard naming convention.</td>
</tr>
<tr class="row-even"><td>SampleComponentName</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Name of the sample component i.e. some-surface-holder. If these are not specified, the algorithm will attempt lookup using a standard naming convention.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output Workspace IvsQ.</td>
</tr>
<tr class="row-even"><td>OutputWorkspaceWavelength</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Output Workspace IvsLam. Intermediate workspace.</td>
</tr>
<tr class="row-odd"><td>ThetaIn</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Final theta value in degrees. Optional, this value will be calculated internally and provided as ThetaOut if not provided.</td>
</tr>
<tr class="row-even"><td>ThetaOut</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Calculated final theta in degrees.</td>
</tr>
<tr class="row-odd"><td>CorrectDetectorPositions</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Correct detector positions using ThetaIn (if given)</td>
</tr>
<tr class="row-even"><td>FirstTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>First transmission run, or the low wavelength transmission run if SecondTransmissionRun is also provided.</td>
</tr>
<tr class="row-odd"><td>SecondTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Second, high wavelength transmission run. Optional. Causes the FirstTransmissionRun to be treated as the low wavelength transmission run.</td>
</tr>
<tr class="row-even"><td>Params</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>A comma separated list of first bin boundary, width, last bin boundary. These parameters are used for stitching together transmission runs. Values are in wavelength (angstroms). This input is only needed if a SecondTransmission run is provided.</td>
</tr>
<tr class="row-odd"><td>StartOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Start wavelength for stitching transmission runs together</td>
</tr>
<tr class="row-even"><td>EndOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>End wavelength (angstroms) for stitching transmission runs together</td>
</tr>
<tr class="row-odd"><td>StrictSpectrumChecking</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Enforces spectrum number checking prior to normalisation</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Reduces a single TOF reflectometry run into a mod Q vs I/I0 workspace.
Performs transmission corrections. Handles both point detector and
multidetector cases. The algorithm can correct detector locations based
on an input theta value.</p>
<p>Historically the work performed by this algorithm was known as the Quick
script.</p>
<div class="section" id="workflow">
<h3><a class="toc-backref" href="#id4">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/ReflectometryReductionOne-v1_wkflw.png" src="../_images/ReflectometryReductionOne-v1_wkflw.png" />
</div>
<div class="section" id="analysis-modes">
<h3><a class="toc-backref" href="#id5">Analysis Modes</a><a class="headerlink" href="#analysis-modes" title="Permalink to this headline">¶</a></h3>
<p>The default analysis mode is <em>PointDetectorAnalysis</em>. Only this mode
supports Transmission corrections (see below). For PointAnalysisMode the
analysis can be roughly reduced to IvsLam = DetectorWS / sum(I0) /
TransmissionWS / sum(I0). The normalization by tranmission run(s) is
optional. If necessary, input workspaces are converted to <em>Wavelength</em>
first via <a class="reference internal" href="ConvertUnits-v1.html#algm-convertunits"><em>ConvertUnits v1</em></a>.</p>
<p>IvsQ is calculated via <a class="reference internal" href="ConvertUnits-v1.html#algm-convertunits"><em>ConvertUnits v1</em></a> into units of
<em>MomentumTransfer</em>. Corrections may be applied prior to the
transformation to ensure that the detectors are in the correct location
according to the input Theta value. Corrections are only enabled when a
Theta input value has been provided.</p>
</div>
<div class="section" id="transmission-runs">
<h3><a class="toc-backref" href="#id6">Transmission Runs</a><a class="headerlink" href="#transmission-runs" title="Permalink to this headline">¶</a></h3>
<p>Transmission correction is a normalization step, which may be applied to
<em>PointDetectorAnalysis</em> reduction.</p>
<p>Transmission runs are expected to be in TOF. The spectra numbers in the
Transmission run workspaces must be the same as those in the Input Run
workspace. If two Transmission runs are provided then the Stitching
parameters associated with the transmission runs will also be required.
If a single Transmission run is provided, then no stitching parameters
will be needed.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id7">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Reduce a Run</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013460.nxs&#39;</span><span class="p">)</span>
<span class="c"># Basic reduction with no transmission run</span>
<span class="n">IvsQ</span><span class="p">,</span> <span class="n">IvsLam</span><span class="p">,</span> <span class="n">thetaOut</span> <span class="o">=</span> <span class="n">ReflectometryReductionOne</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">ThetaIn</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">I0MonitorIndex</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ProcessingInstructions</span><span class="o">=</span><span class="s">&#39;3:4&#39;</span><span class="p">,</span>
<span class="n">WavelengthMin</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">WavelengthMax</span><span class="o">=</span><span class="mf">17.0</span><span class="p">,</span>
<span class="n">MonitorBackgroundWavelengthMin</span><span class="o">=</span><span class="mf">15.0</span><span class="p">,</span> <span class="n">MonitorBackgroundWavelengthMax</span><span class="o">=</span><span class="mf">17.0</span><span class="p">,</span>
<span class="n">MonitorIntegrationWavelengthMin</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">MonitorIntegrationWavelengthMax</span><span class="o">=</span><span class="mf">10.0</span> <span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The first four IvsLam Y values are: [&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]),</span><span class="s">&quot;,&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">]),</span><span class="s">&quot;,&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">]),</span><span class="s">&quot;,&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">]),</span><span class="s">&quot;]&quot;</span>
<span class="k">print</span> <span class="s">&quot;The first four IvsQ Y values are: [&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]),</span><span class="s">&quot;,&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">]),</span><span class="s">&quot;,&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">]),</span><span class="s">&quot;,&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">]),</span><span class="s">&quot;]&quot;</span>
<span class="k">print</span> <span class="s">&quot;Theta out is the same as theta in:&quot;</span><span class="p">,</span><span class="n">thetaOut</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The first four IvsLam Y values are: [ 0.0 , 0.0 , 0.0 , 1.19084981351e-06 ]
The first four IvsQ Y values are: [ 3.26638386884e-05 , 5.41802219385e-05 , 4.89364938612e-05 , 5.50890537024e-05 ]
Theta out is the same as theta in: 0.7
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Reflectometry.html">Reflectometry</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Mantid.<br/>
    </p>
  </div>
</footer>
  </body>
</html>