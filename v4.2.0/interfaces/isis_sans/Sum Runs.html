<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Run Summation</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '4.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../../index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.2</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="run-summation">
<span id="isis-sans-sum-runs-tab-ref"></span><h1>Run Summation<a class="headerlink" href="#run-summation" title="Permalink to this headline">¶</a></h1>
<a class="reference internal image-reference" href="../../_images/sum_runs_page.png"><img alt="../../_images/sum_runs_page.png" class="align-center" src="../../_images/sum_runs_page.png" style="width: 800px;" /></a>
<p id="id1">The Add Runs page provides a simple tool for adding similar runs
(usually of short duration) together. The user builds a list of multiple
histogram or event files (but not mixed) before pressing the sum button to
produce a single output file in the mantid output directory.</p>
<p>The resulting &#8216;add file&#8217; is then the equivalent of having measured one
run for an extended period. The final add file is named after the first
run number that is entered.</p>
<div class="section" id="runs-to-sum">
<h2>Runs To Sum<a class="headerlink" href="#runs-to-sum" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Run Query Box</strong></td>
<td>This box is used to add runs to the summation table below. The user can enter one or
more comma separated run numbers and press <strong>Add</strong> or the enter key to search for runs
with a matching number.</td>
</tr>
<tr class="row-even"><td><strong>Run Summation List</strong></td>
<td>This list contains the files to be summed.</td>
</tr>
<tr class="row-odd"><td><strong>Browse</strong></td>
<td>This button is used to select one or more nexus files to be added to the summation
table.</td>
</tr>
<tr class="row-even"><td><strong>Manage Directories</strong></td>
<td>Opens the &#8216;Manage User Directories&#8217; window allowing the user to add/remove directories
from the mantid search path and to set the &#8216;Output Folder&#8217; where the summation result
will be saved.</td>
</tr>
<tr class="row-odd"><td><strong>Remove</strong></td>
<td>Removes an entry from the summation table. Note, this does not delete the file itself,
it just removes it from the list of files to be summed.</td>
</tr>
<tr class="row-even"><td><strong>Remove All</strong></td>
<td>Removes all entries from the summation table. As above, this will only remove the
entries from the table, not the files themselves.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="histogram-binning">
<h2>Histogram Binning<a class="headerlink" href="#histogram-binning" title="Permalink to this headline">¶</a></h2>
<p>This panel allows the user to specify the binning parameters to be applied
when summing event data. There are three different ways to add files containing
event data <a class="footnote-reference" href="#no-effect-when-non-event" id="id2">[1]</a>.</p>
<div class="section" id="custom-binning">
<h3>Custom Binning<a class="headerlink" href="#custom-binning" title="Permalink to this headline">¶</a></h3>
<p>If this option is chosen a line edit field becomes available which the user
can use to set the preferred binning boundaries. The format of this input is
identical to the format required by
the <a class="reference internal" href="../../algorithms/Rebin-v1.html"><em>Rebin Algorithm</em></a>.</p>
</div>
<div class="section" id="use-binning-from-monitors">
<h3>Use Binning From Monitors<a class="headerlink" href="#use-binning-from-monitors" title="Permalink to this headline">¶</a></h3>
<p>If this option is chosen the binning is taken from the monitors.</p>
</div>
<div class="section" id="save-as-event-data">
<h3>Save As Event Data<a class="headerlink" href="#save-as-event-data" title="Permalink to this headline">¶</a></h3>
<p>If this option is chosen, the output file will contain event data.
The output is not an event workspace but rather a group workspace, which
contains two child event workspaces, one for the added event data and one
for the added monitor data.</p>
<p>With <strong>&#8216;Overlay Event Workspaces&#8217; Disabled</strong> the event data from the files
is added using the event the <a class="reference internal" href="../../algorithms/Plus-v1.html#algm-plus"><em>Plus Algorithm</em></a>.
Timestamps of the events and of the logs are not
changed as indicated in the image below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/sum_runs_add_no_overlay.png"><img alt="../../_images/sum_runs_add_no_overlay.png" src="../../_images/sum_runs_add_no_overlay.png" style="width: 600px;" /></a>
<p class="caption">Simple addition of event data</p>
</div>
<p>With <strong>&#8216;Overlay Event Workspaces&#8217; Enabled</strong> and <strong>no Additional Time Shifts</strong>
specified, the event data of the different files is shifted on top of each
other.</p>
<p>In the case of two workspaces the time difference between them is determined
by the difference between their first entry in the proton charge log.
This time difference is then applied to all timestamps of the second workspace.</p>
<p>The second workspace is essentially laid on the first. The same principle
applies if more than two workspaces are involved as this is a pairwise
operation. The working principle is illustrated below:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/sum_runs_add_overlay.png"><img alt="../../_images/sum_runs_add_overlay.png" src="../../_images/sum_runs_add_overlay.png" style="width: 600px;" /></a>
<p class="caption">Adding two workspaces by overlaying them</p>
</div>
<p>Note that the underlying mechanism for time shifting is provided by the
<a class="reference internal" href="../../algorithms/ChangeTimeZero-v1.html#algm-changetimezero"><em>ChangeTimeZero Algorithm</em></a>.
Using this option will result in a change to the history of the underlying
data.</p>
<p>With <strong>&#8216;Overlay Event Workspaces&#8217; Enabled</strong> you can specify
<strong>Additional Time Shifts</strong>.</p>
<p>Additional time shifts are specified as a comma separated list of numbers
where each shift is the time to shift by in seconds. The list should contain
exactly <em>N-1</em> entries where <em>N</em> is the number of runs to be summed.</p>
<p>Similar to the case above the workspaces are overlaid. This specified time
shift is in addition to the actual overlay operation. A positive time shift
will shift the second workspace into the future, whereas a negative time shift
causes a shift into the past. This allows the user to fine tune the
overlay mechanism.</p>
<p>Both situations are illustrated below:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/sum_runs_pos_time_shift.png"><img alt="../../_images/sum_runs_pos_time_shift.png" src="../../_images/sum_runs_pos_time_shift.png" style="width: 500px;" /></a>
<p class="caption">Overlaid workspaces with a positive time shift (into the future).</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/sum_runs_neg_time_shift.png"><img alt="../../_images/sum_runs_neg_time_shift.png" src="../../_images/sum_runs_neg_time_shift.png" style="width: 500px;" /></a>
<p class="caption">Overlaid workspaces with a negative time shift (into the past).</p>
</div>
<p>Just as above, using this option means that the history of the underlying
data will be changed.</p>
<table class="docutils footnote" frame="void" id="no-effect-when-non-event" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>These options have no effect when adding non-event data files.</td></tr>
</tbody>
</table>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-11-18.<br/>
    </p>
  </div>
</footer>
  </body>
</html>