<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Exercises</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '4.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../../../index.html" />
    <link rel="up" title="Mantid Workbench" href="index.html" />
    <link rel="next" title="Introduction to Python" href="../../introduction_to_python/index.html" />
    <link rel="prev" title="Differences between MantidPlot and Workbench" href="04_differences.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.2</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="exercises">
<span id="id1"></span><h1>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h1>
<p>It is possible to replicate plots you&#8217;ve made previously in MantidPlot entirely using python script in Workbench.
For all these exercises do not make any changes to the default imports given by the Workbench script editor.
You can execute the script after each step to make sure that there are no errors raised.</p>
<div class="section" id="part-1">
<h2>Part 1:<a class="headerlink" href="#part-1" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Load the File &#8220;GEM38370_Focussed_Legacy.nxs&#8221; using the algorithm: <tt class="docutils literal"><span class="pre">GEM38370_Focussed_Legacy</span> <span class="pre">=</span> <span class="pre">Load(&quot;GEM38370_Focussed_Legacy&quot;)</span></tt></p>
</li>
<li><p class="first">Before plotting from workspaces you will need to set your subplot up with the Mantid projection so it can interpret them. To do this include:</p>
<p><tt class="docutils literal"><span class="pre">fig,ax</span> <span class="pre">=</span> <span class="pre">plt.subplots(subplot_kw</span> <span class="pre">=</span> <span class="pre">{&quot;projection&quot;:</span> <span class="pre">&quot;mantid&quot;})</span></tt></p>
<p>This will let you plot spectra from workspaces by including a spectrum number <tt class="docutils literal"><span class="pre">specNum</span></tt> or workspace index <tt class="docutils literal"><span class="pre">wkspIndex</span></tt> in the plot command.</p>
<p><tt class="docutils literal"><span class="pre">ax.plot(RawData,</span> <span class="pre">specNum</span> <span class="pre">=</span> <span class="pre">2)</span></tt> or <tt class="docutils literal"><span class="pre">ax.plot(RawData,</span> <span class="pre">wkspIndex</span> <span class="pre">=</span> <span class="pre">3)</span></tt></p>
</li>
<li><p class="first">Plot the other spectra 3-7.</p>
<p>Now that the subplot is set up to plot spectra you can plot other curves in the same window using the same command with a different <tt class="docutils literal"><span class="pre">specNum</span></tt>
or <tt class="docutils literal"><span class="pre">wkspIndex</span></tt>, by modifying the script you have written already you can use a <tt class="docutils literal"><span class="pre">for</span></tt> loop to plot all spectra in sequence.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">GEM38370_Focussed_Legacy</span><span class="p">,</span> <span class="n">wkspIndex</span> <span class="o">=</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">change the d-spacing axis range to 0-10 angstroms and set the x-axis to a logarithmic scale</p>
<p>Since <tt class="docutils literal"><span class="pre">ax</span></tt> is a matplotlib subplot we can us the built-in matplotlib attributes to change the the axis range <tt class="docutils literal"><span class="pre">ax.set_xlim([0.0,10.0])</span></tt> and
scale <tt class="docutils literal"><span class="pre">ax.set_xscale('symlog')</span></tt>. You can then use the <tt class="docutils literal"><span class="pre">fig.show()</span></tt> function to show your plot</p>
</li>
</ol>
<p>By following these steps you should end up with code that looks something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># The following line helps with future compatibility with Python 3</span>
<span class="c"># print must now be used as a function, e.g print(&#39;Hello&#39;,&#39;World&#39;)</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">)</span>

<span class="c"># import mantid algorithms, numpy and matplotlib</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">GEM38370_Focussed_Legacy</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&quot;GEM38370_Focussed_Legacy&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;projection&quot;</span><span class="p">:</span> <span class="s">&quot;mantid&quot;</span><span class="p">})</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">GEM38370_Focussed_Legacy</span><span class="p">,</span> <span class="n">wkspIndex</span> <span class="o">=</span> <span class="n">i</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">10.0</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s">&#39;symlog&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>That will produce a figure looking like this:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/exerciseWorkbench_part_1_figure.png"><img alt="The resulting figure from part 1." src="../../../_images/exerciseWorkbench_part_1_figure.png" style="width: 700px;" /></a>
</div>
</div>
<div class="section" id="part-2">
<h2>Part 2<a class="headerlink" href="#part-2" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Load the EventWorkspace HYS_11388_event.nxs</p>
</li>
<li><p class="first">using the <tt class="docutils literal"><span class="pre">SumSpectra()</span></tt> algorithm sum across each spectra in the workspace, assigning the result to a new workspace <tt class="docutils literal"><span class="pre">Sum</span></tt></p>
</li>
<li><p class="first">using the <tt class="docutils literal"><span class="pre">Rebin()</span></tt> algorithm rebin your new <tt class="docutils literal"><span class="pre">Sum</span></tt> workspace with bin width of 100 microseconds and events being preserved and assign it to another new workspace <tt class="docutils literal"><span class="pre">binned</span></tt>.</p>
<p><em>Hint: your</em> <tt class="docutils literal"><span class="pre">Params</span></tt> <em>should be set to 100 and</em> <tt class="docutils literal"><span class="pre">PreserveEvents</span></tt> <em>should equal</em> <tt class="docutils literal"><span class="pre">True</span></tt></p>
</li>
<li><p class="first">plot the spectrum of <tt class="docutils literal"><span class="pre">binned</span></tt> in the same was the previous part.</p>
</li>
<li><p class="first">Filter out events recored before 4000 microseconds using the <tt class="docutils literal"><span class="pre">FilterByTime()</span></tt> algorithm into a workspace called <tt class="docutils literal"><span class="pre">FilteredByTime</span></tt>, and plot <tt class="docutils literal"><span class="pre">FilteredByTime</span></tt> to the same figure.</p>
</li>
<li><p class="first">Using the Matplotlib function add a legend to your plot <tt class="docutils literal"><span class="pre">ax.legend()</span></tt> and then show your figure.</p>
</li>
</ol>
<p>By following these steps you should end up with code that looks something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># The following line helps with future compatibility with Python 3</span>
<span class="c"># print must now be used as a function, e.g print(&#39;Hello&#39;,&#39;World&#39;)</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">)</span>

<span class="c"># import mantid algorithms, numpy and matplotlib</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">HYS_11388_event</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&quot;HYS_11388_event&quot;</span><span class="p">)</span>
<span class="n">Sum</span> <span class="o">=</span> <span class="n">SumSpectra</span><span class="p">(</span><span class="n">HYS_11388_event</span><span class="p">)</span>
<span class="n">binned</span> <span class="o">=</span> <span class="n">Rebin</span><span class="p">(</span><span class="n">Sum</span><span class="p">,</span><span class="n">Params</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span><span class="n">PreserveEvents</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;projection&quot;</span><span class="p">:</span> <span class="s">&quot;mantid&quot;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">binned</span><span class="p">,</span> <span class="n">wkspIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">FilteredByTime</span> <span class="o">=</span> <span class="n">FilterByTime</span><span class="p">(</span><span class="n">binned</span><span class="p">,</span> <span class="n">StartTime</span> <span class="o">=</span> <span class="mi">4000</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">FilteredByTime</span><span class="p">,</span> <span class="n">wkspIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>That will produce a figure looking like this:</p>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/exerciseWorkbench_part_2_figure.png"><img alt="The resulting figure from part 2." src="../../../_images/exerciseWorkbench_part_2_figure.png" style="width: 700px;" /></a>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="04_differences.html" title="Previous Chapter: Differences between MantidPlot and Workbench"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Differences betw...</span>
    </a>
  </li>
  <li>
    <a href="../../introduction_to_python/index.html" title="Next Chapter: Introduction to Python"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Introduction to ... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-11-18.<br/>
    </p>
  </div>
</footer>
  </body>
</html>