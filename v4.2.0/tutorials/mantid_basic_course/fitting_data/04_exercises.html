<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Exercises</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '4.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../../../index.html" />
    <link rel="up" title="Fitting Data" href="index.html" />
    <link rel="next" title="Mantid Workbench" href="../using_workbench/index.html" />
    <link rel="prev" title="Intelligent Fitting" href="03_intelligent_fitting.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.2</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="exercises">
<span id="id1"></span><h1>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exercise-1">
<h2>Exercise 1<a class="headerlink" href="#exercise-1" title="Permalink to this headline">¶</a></h2>
<p>In this exercise we will fit a simple Gaussian on a linear background.</p>
<ol class="arabic">
<li><p class="first">Start with loading the data set (GEM38370_Focussed).</p>
</li>
<li><p class="first">Plot spectrum 4.</p>
</li>
<li><p class="first">Zoom into the peak around 5 angstroms.</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/GemSinglePeak.png"><img alt="GemSinglePeak.png" src="../../../_images/GemSinglePeak.png" style="width: 400px;" /></a></p>
</div></blockquote>
</li>
<li><p class="first">Start the fitting tool.</p>
</li>
<li><p class="first">Adjust the fitting range if needed.</p>
</li>
<li><p class="first">Make sure the fitting model is empty in the Fit Function browser. If
necessary clear it.</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/ClearModel.png"><img alt="ClearModel.png" src="../../../_images/ClearModel.png" style="width: 200px;" /></a></p>
</div></blockquote>
</li>
<li><p class="first">Add a background function. Select LinearBackground.</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/AddBackgroundOption.png"><img alt="AddBackgroundOption.png" src="../../../_images/AddBackgroundOption.png" style="width: 400px;" /></a></p>
</div></blockquote>
</li>
<li><p class="first">Add a peak. Select Gaussian.</p>
</li>
<li><p class="first">Click at peak&#8217;s maximum point to set initial values for the centre
and the height.</p>
</li>
<li><p class="first">Adjust the width.</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/PreparedToFitGaussian.png"><img alt="PreparedToFitGaussian.png" src="../../../_images/PreparedToFitGaussian.png" style="width: 400px;" /></a></p>
</div></blockquote>
</li>
<li><p class="first">Run Fit.</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/FittedGaussian.png"><img alt="FittedGaussian.png" src="../../../_images/FittedGaussian.png" style="width: 400px;" /></a></p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="exercise-2">
<h2>Exercise 2<a class="headerlink" href="#exercise-2" title="Permalink to this headline">¶</a></h2>
<p>This exercise will mainly quiz about fitting.</p>
<ol class="arabic">
<li><p class="first">Ensure that the Fit Function panel is clear using panel option
Setup-&gt;&#8217;Clear model&#8217;</p>
</li>
<li><p class="first">Load the GEM63437_focussed.nxs data. Note the workspace created is a
WorkspaceGroup. This is simply a containing workspace grouping one of
more other workspaces. This dataset has been proceed already with
Mantid. How many algorithms have been applied to this processed
dataset?</p>
</li>
<li><p class="first">Plot the spectrum in GEM63437_focussed_2, and zoom in on the area of
the three peaks</p>
</li>
<li><p class="first">Associate the plot with the Fit Function panel and set fitting range
to be between approximately 2270 and 5000 microseconds</p>
</li>
<li><p class="first">Right click on plot and select Add background... then
FlatBackground</p>
</li>
<li><p class="first">Right click on plot and add peak
IkedaCarpenterPV. This is peak function where
some parameters of the peak function may be related to instrument
geometry. As of this writing scientist(s) of the GEM instrument
modified the file MantidInstall/instrument/GEM_Parameters.xml such
that when you added the IkedaCarpenterPV peak it automatically
selected some sensible starting parameter values. This is evident
from the starting guess of the peak width but also by inspecting this
function in the Fit Function panel</p>
</li>
<li><p class="first">Hold down shift key and click on top of the two other peaks</p>
</li>
<li><p class="first">Plot (fitting) guess and what you should see is something similar to</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/ExerciseFittingMBCguess.png"><img alt="ExerciseFittingMBCguess.png" src="../../../_images/ExerciseFittingMBCguess.png" style="width: 400px;" /></a>
where the red line is the guess</p>
</div></blockquote>
</li>
<li><p class="first">Remove plot guess</p>
</li>
<li><p class="first">Fit the data with the model, where the output should be something
similar to</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/ExerciseFittingMBCfit.png"><img alt="ExerciseFittingMBCfit.png" src="../../../_images/ExerciseFittingMBCfit.png" style="width: 400px;" /></a>
where the red line is here the fit</p>
</div></blockquote>
</li>
<li><p class="first">clear the model</p>
</li>
<li><p class="first">Plot the spectrum in GEM63437_focussed_3</p>
</li>
<li><p class="first">Using the same background and peak fitting function as above fit the
region between about 2000 and 9400 microseconds, and obtain a result
similar to</p>
<blockquote>
<div><p><a class="reference internal" href="../../../_images/ExerciseFittingMBCfit_2.png"><img alt="ExerciseFittingMBCfit_2.png" src="../../../_images/ExerciseFittingMBCfit_2.png" style="width: 400px;" /></a>
<strong>Note</strong> this will take a while as it is a fit with almost 40
independent parameters to optimise.</p>
</div></blockquote>
</li>
<li><p class="first">Optionally using a similar approach try to fit the spectrum in for
example GEM63437_focussed_5</p>
</li>
</ol>
</div>
<div class="section" id="exercise-3">
<h2>Exercise 3<a class="headerlink" href="#exercise-3" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li>Load the MUSR00015189 data set.</li>
<li>Plot a spectrum.</li>
<li>Start the fitting interface.</li>
<li>Follow the steps described earlier to add and set up a user defined
function (UserFunction).</li>
<li>Define a function with Formula = h*exp(-a*x)</li>
<li>Fit the data.</li>
</ol>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="03_intelligent_fitting.html" title="Previous Chapter: Intelligent Fitting"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Intelligent Fitt...</span>
    </a>
  </li>
  <li>
    <a href="../using_workbench/index.html" title="Next Chapter: Mantid Workbench"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Mantid Workbench &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-11-18.<br/>
    </p>
  </div>
</footer>
  </body>
</html>