<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MaskAngle v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="MaskBTP v1" href="MaskBTP-v1.html" />
    <link rel="prev" title="MagFormFactorCorrection v1" href="MagFormFactorCorrection-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.2</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="maskangle-v1">
<span id="algm-maskangle"></span><span id="algm-maskangle-v1"></span><h1>MaskAngle v1<a class="headerlink" href="#maskangle-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/MaskAngle-v1_dlg.png"><img alt="../_images/MaskAngle-v1_dlg.png" class="screenshot" src="../_images/MaskAngle-v1_dlg.png" style="width: 288px;" /></a>
<p class="caption"><strong>MaskAngle</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id2">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Algorithm to mask detectors with scattering angles in a given interval (in degrees).</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="MaskDetectors-v1.html#algm-maskdetectors"><em>MaskDetectors</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="5%" />
<col width="20%" />
<col width="8%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Workspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Input workspace</td>
</tr>
<tr class="row-odd"><td>MinAngle</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Angles above MinAngle are going to be masked</td>
</tr>
<tr class="row-even"><td>MaxAngle</td>
<td>Input</td>
<td>number</td>
<td>180</td>
<td>Angles below MaxAngle are going to be masked</td>
</tr>
<tr class="row-odd"><td>Angle</td>
<td>Input</td>
<td>string</td>
<td>TwoTheta</td>
<td>Which angle to use. Allowed values: [&#8216;TwoTheta&#8217;, &#8216;Phi&#8217;, &#8216;InPlane&#8217;]</td>
</tr>
<tr class="row-even"><td>MaskedDetectors</td>
<td>Output</td>
<td>int list</td>
<td>&nbsp;</td>
<td>List of detector masked, with scattering angles between MinAngle and MaxAngle</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Algorithm to mask detectors with scattering angles in a given interval
(in degrees) By default MinAngle=0, MaxAngle=180, so if no keywords are
set, all detectors are going to be masked Returns a list of detectors
that were masked</p>
<p>When masking the phi angle the absolute value of phi is used.</p>
<p>The three angle options are subtly different:
* <tt class="docutils literal"><span class="pre">TwoTheta</span></tt> is the detector&#8217;s <img class="math" src="../_images/math/504b0e6af53e29a0871abe88050d1fd72f5c833e.png" alt="2 \theta" style="vertical-align: 0px"/> value as calcualted from the downstream beam. This is the angle from the pole and not constrained to be in-plane.
* <tt class="docutils literal"><span class="pre">Phi</span></tt> is the detector&#8217;s angle with respect to the positive z-axis not constrained to be in-plane. For many geometries this will be the same as the <tt class="docutils literal"><span class="pre">TwoTheta</span></tt> option.
* <tt class="docutils literal"><span class="pre">InPlane</span></tt> is the detector&#8217;s angle with respect to the positive z-axis constrained within the x-z-plane.</p>
<p>For the <tt class="docutils literal"><span class="pre">TwoTheta</span></tt> and <tt class="docutils literal"><span class="pre">Phi</span></tt> options, only positive angles are allowed.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Two theta example</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#Load a workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&quot;CNCS_7860&quot;</span><span class="p">)</span>

<span class="c">#Do the masking for direct beam</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">MaskAngle</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">MinAngle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">MaxAngle</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;The algorithm has masked {} detectors&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>

<span class="c">#to test check a couple of detectors</span>
<span class="n">inst</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Is the minimum element in the mask list (detector {}) masked?  {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">min</span><span class="p">()))</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Is the maximum element in the mask list (detector {}) masked?  {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">max</span><span class="p">()))</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Is a detector outside the list masked (for example detector 100)?  {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()</span>  <span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The algorithm has masked 1516 detectors
Is the minimum element in the mask list (detector 35126) masked?  True
Is the maximum element in the mask list (detector 38601) masked?  True
Is a detector outside the list masked (for example detector 100)?  False
</pre></div>
</div>
<p>The instrument view would look like:</p>
<div class="figure">
<img alt="MaskAngle.png" src="../_images/MaskAngle.png" />
</div>
<p><strong>Phi example</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#Load a workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&quot;CNCS_7860&quot;</span><span class="p">)</span>

<span class="c">#Do the masking for direct beam</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">MaskAngle</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">MinAngle</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">MaxAngle</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">Angle</span><span class="o">=</span><span class="s">&#39;Phi&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;The algorithm has masked {} detectors&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>

<span class="c">#to test check a couple of detectors</span>
<span class="n">inst</span> <span class="o">=</span> <span class="n">ws</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Is the minimum element in the mask list (detector {}) masked?  {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">min</span><span class="p">()))</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Is the maximum element in the mask list (detector {}) masked?  {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">max</span><span class="p">()))</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Is a detector outside the list masked (for example detector 100)?  {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inst</span><span class="o">.</span><span class="n">getDetector</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">isMasked</span><span class="p">()</span>  <span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The algorithm has masked 6348 detectors
Is the minimum element in the mask list (detector 29568) masked?  True
Is the maximum element in the mask list (detector 44287) masked?  True
Is a detector outside the list masked (for example detector 100)?  False
</pre></div>
</div>
<p>The instrument view would look like:</p>
<div class="figure">
<img alt="MaskAngle_phi.png" src="../_images/MaskAngle_phi.png" />
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Transforms/Masking.html">Transforms\Masking</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/242afc63eface10e47f5e9e6aeaed50e11e3eb4c/Framework/PythonInterface/plugins/algorithms/MaskAngle.py">MaskAngle.py</a> <em>(last modified: 2019-08-01)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="MagFormFactorCorrection-v1.html" title="Previous Chapter: MagFormFactorCorrection v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; MagFormFactorCor...</span>
    </a>
  </li>
  <li>
    <a href="MaskBTP-v1.html" title="Next Chapter: MaskBTP v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MaskBTP v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-11-18.<br/>
    </p>
  </div>
</footer>
  </body>
</html>