<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CreateTransmissionWorkspace v2</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="CreateTransmissionWorkspaceAuto v1" href="CreateTransmissionWorkspaceAuto-v1.html" />
    <link rel="prev" title="CreateTransmissionWorkspace v1" href="CreateTransmissionWorkspace-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.2</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="createtransmissionworkspace-v2">
<span id="algm-createtransmissionworkspace"></span><span id="algm-createtransmissionworkspace-v2"></span><h1>CreateTransmissionWorkspace v2<a class="headerlink" href="#createtransmissionworkspace-v2" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/CreateTransmissionWorkspace-v2_dlg.png"><img alt="../_images/CreateTransmissionWorkspace-v2_dlg.png" class="screenshot" src="../_images/CreateTransmissionWorkspace-v2_dlg.png" style="width: 332px;" /></a>
<p class="caption"><strong>CreateTransmissionWorkspace</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id2">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a></li>
<li><a class="reference internal" href="#previous-versions" id="id5">Previous Versions</a></li>
<li><a class="reference internal" href="#usage" id="id6">Usage</a></li>
<li><a class="reference internal" href="#source" id="id7">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Creates a transmission run workspace in wavelength from one or two input workspaces in TOF.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="CreateTransmissionWorkspaceAuto-v2.html#algm-createtransmissionworkspaceauto"><em>CreateTransmissionWorkspaceAuto</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="2%" />
<col width="12%" />
<col width="4%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>FirstTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>First transmission run. Corresponds to the low wavelength transmision run if a SecondTransmissionRun is also provided.</td>
</tr>
<tr class="row-odd"><td>SecondTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>High wavelength transmission run. Optional. Causes the first transmission run to be treated as the low wavelength transmission run.</td>
</tr>
<tr class="row-even"><td>ProcessingInstructions</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Grouping pattern on spectrum numbers to yield only the detectors of interest. See GroupDetectors for details.</td>
</tr>
<tr class="row-odd"><td>WavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength minimum in angstroms</td>
</tr>
<tr class="row-even"><td>WavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength maximum in angstroms</td>
</tr>
<tr class="row-odd"><td>I0MonitorIndex</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>I0 monitor workspace index</td>
</tr>
<tr class="row-even"><td>MonitorBackgroundWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength minimum for monitor background subtraction in angstroms.</td>
</tr>
<tr class="row-odd"><td>MonitorBackgroundWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength maximum for monitor background subtraction in angstroms.</td>
</tr>
<tr class="row-even"><td>MonitorIntegrationWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength minimum for integration in angstroms.</td>
</tr>
<tr class="row-odd"><td>MonitorIntegrationWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength maximum for integration in angstroms.</td>
</tr>
<tr class="row-even"><td>NormalizeByIntegratedMonitors</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Normalize by dividing by the integrated monitors.</td>
</tr>
<tr class="row-odd"><td>Params</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>A comma separated list of first bin boundary, width, last bin boundary. These parameters are used for stitching together transmission runs. Values are in wavelength (angstroms). This input is only needed if a SecondTransmission run is provided.</td>
</tr>
<tr class="row-even"><td>StartOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Start wavelength for stitching transmission runs together. Only used if a second transmission run is provided.</td>
</tr>
<tr class="row-odd"><td>EndOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>End wavelength (angstroms) for stitching transmission runs together. Only used if a second transmission run is provided.</td>
</tr>
<tr class="row-even"><td>ScaleRHSWorkspace</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Scale the right-hand-side or left-hand-side workspace. Only used if a second transmission run is provided.</td>
</tr>
<tr class="row-odd"><td>Debug</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether to enable the output of extra workspaces.</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Output workspace in wavelength.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Creates a transmission run workspace given one or two TOF workspaces.
If two workspaces are provided, then the first workspace is considered
a low wavelength transmission run, and the second workspace is considered
a high wavelength transmission run.</p>
<p>Both input workspaces must have X-units of TOF. They are first converted
to units of wavelength and then stitched together using <a class="reference internal" href="Stitch1D-v3.html#algm-stitch1d"><em>Stitch1D v3</em></a>,
<tt class="docutils literal"><span class="pre">Params</span></tt>, <tt class="docutils literal"><span class="pre">StartOverlap</span></tt> and <tt class="docutils literal"><span class="pre">EndOverlap</span></tt>. A single
output workspace is generated with X-units of wavelength in angstroms.</p>
<img alt="../_images/CreateTransmissionWorkspace_HighLvl-v2_wkflw.png" src="../_images/CreateTransmissionWorkspace_HighLvl-v2_wkflw.png" />
<p>The diagram above illustrates the main steps in the algorithm. Below is a more
detailed diagram describing how transmission workspaces are converted to units
of wavelength and normalized by monitors. First, detectors and monitors are
extracted from the input workspace using <a class="reference internal" href="GroupDetectors-v2.html#algm-groupdetectors"><em>GroupDetectors v2</em></a> and
<a class="reference internal" href="CropWorkspace-v1.html#algm-cropworkspace"><em>CropWorkspace v1</em></a> respectively, using <tt class="docutils literal"><span class="pre">ProcessingInstructions</span></tt> in the
first case and <tt class="docutils literal"><span class="pre">I0MonitorIndex</span></tt> in the second case. Then, each of the resulting
workspaces is converted to wavelength (note that <tt class="docutils literal"><span class="pre">AlignBins</span></tt> is set to <tt class="docutils literal"><span class="pre">True</span></tt>
for this), detectors are normalized by monitors, and the resulting workspace is
cropped in wavelength according to <tt class="docutils literal"><span class="pre">WavelengthMin</span></tt> and <tt class="docutils literal"><span class="pre">WavelengthMax</span></tt>, which
are both mandatory parameters. Note that the normalization by monitors is optional,
and only takes place if <tt class="docutils literal"><span class="pre">I0MonitorIndex</span></tt>, <tt class="docutils literal"><span class="pre">MonitorBackgroundWavelengthMin</span></tt>
and <tt class="docutils literal"><span class="pre">MonitorBackgroundWavelengthMax</span></tt> are provided. In this case, the monitor
of interest will be extracted from the input workspace, converted to wavelength, and its
background will be subtracted according to <tt class="docutils literal"><span class="pre">MonitorBackgroundWavelengthMin</span></tt>
and <tt class="docutils literal"><span class="pre">MonitorBackgroundWavelengthMax</span></tt>. If <tt class="docutils literal"><span class="pre">MonitorIntegrationWavelengthMin</span></tt>
and <tt class="docutils literal"><span class="pre">MonitorIntegrationWavelengthMax</span></tt> are provided, monitors will be integrated
according to that range. If monitors are not integrated, there is an addition step in which
detectors will be rebinned to monitors using <a class="reference internal" href="RebinToWorkspace-v1.html#algm-rebintoworkspace"><em>RebinToWorkspace v1</em></a>, to ensure that
the normalization can be performed. Below is a summary of the main steps in the algorithm.
For the sake of clarity, all possible steps are illustrated, even if some of them are
optional.</p>
<img alt="../_images/CreateTransmissionWorkspace_ConvertToWavelength-v2_wkflw.png" src="../_images/CreateTransmissionWorkspace_ConvertToWavelength-v2_wkflw.png" />
</div>
<div class="section" id="previous-versions">
<h2><a class="toc-backref" href="#id5">Previous Versions</a><a class="headerlink" href="#previous-versions" title="Permalink to this headline">¶</a></h2>
<p>This is version 2 of the algorithm. For version 1, please see <a class="reference external" href="CreateTransmissionWorkspace-v1.html">here.</a></p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id6">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - Create a transmission run</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">trans</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013463.nxs&#39;</span><span class="p">)</span>
<span class="n">transWS</span> <span class="o">=</span> <span class="n">CreateTransmissionWorkspace</span><span class="p">(</span><span class="n">FirstTransmissionRun</span> <span class="o">=</span> <span class="n">trans</span><span class="p">,</span>
                                      <span class="n">I0MonitorIndex</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
                                      <span class="n">ProcessingInstructions</span> <span class="o">=</span> <span class="s">&#39;4,5&#39;</span><span class="p">,</span>
                                      <span class="n">WavelengthMin</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                                      <span class="n">WavelengthMax</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
                                      <span class="n">MonitorBackgroundWavelengthMin</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
                                      <span class="n">MonitorBackgroundWavelengthMax</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
                                      <span class="n">MonitorIntegrationWavelengthMin</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
                                      <span class="n">MonitorIntegrationWavelengthMax</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;The first four transWS Y values are:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{:.4f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">transWS</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="n">i</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The first four transWS Y values are:
0.0052
0.0065
0.0088
0.0123
</pre></div>
</div>
<p><strong>Example - Create a transmission run from two runs</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">trans1</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013463.nxs&#39;</span><span class="p">)</span>
<span class="n">trans2</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013464.nxs&#39;</span><span class="p">)</span>
<span class="n">transWS</span> <span class="o">=</span> <span class="n">CreateTransmissionWorkspace</span><span class="p">(</span><span class="n">FirstTransmissionRun</span> <span class="o">=</span> <span class="n">trans1</span><span class="p">,</span>
                                      <span class="n">SecondTransmissionRun</span> <span class="o">=</span> <span class="n">trans2</span><span class="p">,</span>
                                      <span class="n">Params</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">0.02</span><span class="p">,</span><span class="mi">17</span><span class="p">],</span>
                                      <span class="n">StartOverlap</span> <span class="o">=</span> <span class="mf">10.0</span><span class="p">,</span>
                                      <span class="n">EndOverlap</span> <span class="o">=</span> <span class="mf">12.0</span><span class="p">,</span>
                                      <span class="n">I0MonitorIndex</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
                                      <span class="n">ProcessingInstructions</span> <span class="o">=</span> <span class="s">&#39;4,5&#39;</span><span class="p">,</span>
                                      <span class="n">WavelengthMin</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
                                      <span class="n">WavelengthMax</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
                                      <span class="n">MonitorBackgroundWavelengthMin</span> <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>
                                      <span class="n">MonitorBackgroundWavelengthMax</span> <span class="o">=</span> <span class="mi">17</span><span class="p">,</span>
                                      <span class="n">MonitorIntegrationWavelengthMin</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
                                      <span class="n">MonitorIntegrationWavelengthMax</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;The first four transWS Y values are:&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span> <span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{:.4f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">transWS</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="n">i</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The first four transWS Y values are:
0.0563
0.0561
0.0570
0.0578
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Reflectometry.html">Reflectometry</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id7">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/242afc63eface10e47f5e9e6aeaed50e11e3eb4c/Framework/Algorithms/src/CreateTransmissionWorkspace2.cpp">CreateTransmissionWorkspace2.cpp</a> <em>(last modified: 2019-10-28)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/242afc63eface10e47f5e9e6aeaed50e11e3eb4c/Framework/Algorithms/inc/MantidAlgorithms/CreateTransmissionWorkspace2.h">CreateTransmissionWorkspace2.h</a> <em>(last modified: 2019-10-28)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CreateTransmissionWorkspace-v1.html" title="Previous Chapter: CreateTransmissionWorkspace v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CreateTransmissi...</span>
    </a>
  </li>
  <li>
    <a href="CreateTransmissionWorkspaceAuto-v1.html" title="Next Chapter: CreateTransmissionWorkspaceAuto v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CreateTransmissi... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-11-18.<br/>
    </p>
  </div>
</footer>
  </body>
</html>