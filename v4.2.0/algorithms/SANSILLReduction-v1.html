<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SANSILLReduction v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="SANSLoad v1" href="SANSLoad-v1.html" />
    <link rel="prev" title="SANSILLIntegration v1" href="SANSILLIntegration-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.2</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="sansillreduction-v1">
<span id="algm-sansillreduction"></span><span id="algm-sansillreduction-v1"></span><h1>SANSILLReduction v1<a class="headerlink" href="#sansillreduction-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/SANSILLReduction-v1_dlg.png"><img alt="../_images/SANSILLReduction-v1_dlg.png" class="screenshot" src="../_images/SANSILLReduction-v1_dlg.png" style="width: 332px;" /></a>
<p class="caption"><strong>SANSILLReduction</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id2">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a></li>
<li><a class="reference internal" href="#processas" id="id5">ProcessAs</a><ul>
<li><a class="reference internal" href="#absorber" id="id6">Absorber</a></li>
<li><a class="reference internal" href="#beam" id="id7">Beam</a></li>
<li><a class="reference internal" href="#transmission" id="id8">Transmission</a></li>
<li><a class="reference internal" href="#container" id="id9">Container</a></li>
<li><a class="reference internal" href="#reference" id="id10">Reference</a></li>
<li><a class="reference internal" href="#sample" id="id11">Sample</a></li>
<li><a class="reference internal" href="#full-treatment" id="id12">Full Treatment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source" id="id13">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Performs SANS data reduction at the ILL.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="SANSILLIntegration-v1.html#algm-sansillintegration"><em>SANSILLIntegration</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="3%" />
<col width="19%" />
<col width="6%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Run</td>
<td>Input</td>
<td>list of str lists</td>
<td><em>Mandatory</em></td>
<td>File path of run(s). Allowed values: [&#8216;nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>ProcessAs</td>
<td>Input</td>
<td>string</td>
<td>Sample</td>
<td>Choose the process type. Allowed values: [&#8216;Absorber&#8217;, &#8216;Beam&#8217;, &#8216;Transmission&#8217;, &#8216;Container&#8217;, &#8216;Reference&#8217;, &#8216;Sample&#8217;]</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The output workspace based on the value of ProcessAs.</td>
</tr>
<tr class="row-odd"><td>NormaliseBy</td>
<td>Input</td>
<td>string</td>
<td>Timer</td>
<td>Choose the normalisation type. Allowed values: [&#8216;None&#8217;, &#8216;Timer&#8217;, &#8216;Monitor&#8217;]</td>
</tr>
<tr class="row-even"><td>BeamRadius</td>
<td>Input</td>
<td>number</td>
<td>0.05</td>
<td>Beam raduis [m]; used for beam center finding, transmission and flux calculations.</td>
</tr>
<tr class="row-odd"><td>BeamFinderMethod</td>
<td>Input</td>
<td>string</td>
<td>DirectBeam</td>
<td>Choose between direct beam or scattered beam method for beam center finding. Allowed values: [&#8216;DirectBeam&#8217;, &#8216;ScatteredBeam&#8217;]</td>
</tr>
<tr class="row-even"><td>SampleThickness</td>
<td>Input</td>
<td>number</td>
<td>0.1</td>
<td>Sample thickness [cm]</td>
</tr>
<tr class="row-odd"><td>AbsorberInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The name of the absorber workspace.</td>
</tr>
<tr class="row-even"><td>BeamInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The name of the empty beam input workspace.</td>
</tr>
<tr class="row-odd"><td>TransmissionInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The name of the transmission input workspace.</td>
</tr>
<tr class="row-even"><td>ContainerInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The name of the container workspace.</td>
</tr>
<tr class="row-odd"><td>ReferenceInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The name of the reference workspace.</td>
</tr>
<tr class="row-even"><td>SensitivityInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The name of the input sensitivity workspace.</td>
</tr>
<tr class="row-odd"><td>SensitivityOutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The name of the output sensitivity workspace.</td>
</tr>
<tr class="row-even"><td>MaskedInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Workspace to copy the mask from; for example, the beam stop</td>
</tr>
<tr class="row-odd"><td>FluxInputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The name of the input direct beam flux workspace.</td>
</tr>
<tr class="row-even"><td>FluxOutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The name of the output direct beam flux workspace.</td>
</tr>
<tr class="row-odd"><td>CacheSolidAngle</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether or not to cache the solid angle workspace.</td>
</tr>
<tr class="row-even"><td>WaterCrossSection</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Provide water cross-section; used only if the absolute scale is done by dividing to water.</td>
</tr>
<tr class="row-odd"><td>DefaultMaskedInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Workspace to copy the mask from; for example, the bad detector edges.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm performs SANS reduction for the instruments at the ILL.
With each call, this algorithm processes one type of data which is a part of the whole experiment.
The logic is resolved by the property <strong>ProcessAs</strong>, which governs the reduction steps based on the requested type.
It can be one of the 6: absorber, beam, transmission, container, reference and sample.
The full data treatment of the complete experiment should be build up as a chain with multiple calls of this algorithm over various types of acquisitions.
The sequence should be logical, typically as enumerated above, since the later processes need the outputs of earlier processes as input.
The common mandatory input is a run file (numor), or a list of them, in which case they will be summed at raw level, so right after loading.
The other common input is the normalisation type (time or monitor) that must be the same for all the runs in full reduction.
The common mandatory output is a workspace, but up to which step it is processed, depends on <strong>ProcessAs</strong>.</p>
</div>
<div class="section" id="processas">
<h2><a class="toc-backref" href="#id5">ProcessAs</a><a class="headerlink" href="#processas" title="Permalink to this headline">¶</a></h2>
<p>Different input properties can be specified depending on the value of <strong>ProcessAs</strong>, as summarized in the table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="45%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ProcessAs</th>
<th class="head">Input Workspace Properties</th>
<th class="head">Other Input Properties</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Absorber</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Beam</td>
<td><ul class="first last simple">
<li>AbsorberInputWorkspace</li>
</ul>
</td>
<td><ul class="first last simple">
<li>BeamRadius</li>
<li>BeamFinderMethod</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>Transmission</td>
<td><ul class="first last simple">
<li>AbsorberInputWorkspace</li>
<li><strong>BeamInputWorkspace</strong></li>
</ul>
</td>
<td><ul class="first last simple">
<li>BeamRadius</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Container</td>
<td><ul class="first last simple">
<li>AbsorberInputWorkspace</li>
<li>BeamInputWorkspace</li>
<li>TransmissionInputWorkspace</li>
</ul>
</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Reference</td>
<td><ul class="first last simple">
<li>AbsorberInputWorkspace</li>
<li>BeamInputWorkspace</li>
<li>TransmissionInputWorkspace</li>
<li>ContainerInputWorkspace</li>
<li>MaskedInputWorkspace</li>
</ul>
</td>
<td><ul class="first last simple">
<li>SampleThickness</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Sample</td>
<td><ul class="first last simple">
<li>AbsorberInputWorkspace</li>
<li>BeamInputWorkspace</li>
<li>TransmissionInputWorkspace</li>
<li>ContainerInputWorkspace</li>
<li>MaskedInputWorkspace</li>
<li>ReferenceInputWorkspace</li>
<li>SensitivityInputWorkspace</li>
</ul>
</td>
<td><ul class="first last simple">
<li>SampleThickness</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>All the input workspace properties above are optional.
For example, if processing as sample, if a container input is specified, subtraction will be performed, if not, the step will be skipped.
The only exception is when processing as transmission, when beam input workspace is mandatory.
When processing as reference there is an additional optional output workspace for sensitivity.</p>
<p>In the flowcharts below the yellow ovals represent the inputs, the grey parallelograms are the outputs for each process type.</p>
<div class="section" id="absorber">
<h3><a class="toc-backref" href="#id6">Absorber</a><a class="headerlink" href="#absorber" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/ILLSANS-v1_absorber_wkflw.png" src="../_images/ILLSANS-v1_absorber_wkflw.png" />
</div>
<div class="section" id="beam">
<h3><a class="toc-backref" href="#id7">Beam</a><a class="headerlink" href="#beam" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/ILLSANS-v1_beam_wkflw.png" src="../_images/ILLSANS-v1_beam_wkflw.png" />
</div>
<div class="section" id="transmission">
<h3><a class="toc-backref" href="#id8">Transmission</a><a class="headerlink" href="#transmission" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/ILLSANS-v1_transmission_wkflw.png" src="../_images/ILLSANS-v1_transmission_wkflw.png" />
</div>
<div class="section" id="container">
<h3><a class="toc-backref" href="#id9">Container</a><a class="headerlink" href="#container" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/ILLSANS-v1_container_wkflw.png" src="../_images/ILLSANS-v1_container_wkflw.png" />
</div>
<div class="section" id="reference">
<h3><a class="toc-backref" href="#id10">Reference</a><a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/ILLSANS-v1_reference_wkflw.png" src="../_images/ILLSANS-v1_reference_wkflw.png" />
</div>
<div class="section" id="sample">
<h3><a class="toc-backref" href="#id11">Sample</a><a class="headerlink" href="#sample" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/ILLSANS-v1_sample_wkflw.png" src="../_images/ILLSANS-v1_sample_wkflw.png" />
</div>
<div class="section" id="full-treatment">
<h3><a class="toc-backref" href="#id12">Full Treatment</a><a class="headerlink" href="#full-treatment" title="Permalink to this headline">¶</a></h3>
<p>Full treatment is built by stacking up unary reductions with corresponding <strong>ProcessAs</strong>. The diagram below illustrates the flow of processing.
Letters denote absorber (A), beam (B), transmission (T), container (C), reference (R), sample (S).
A is processed first, and passed to all the other processes.
B takes only A as input, and the output of B is needed by the rest.
T takes A and B as inputs, and the calculated transmission is used by C, R and S respectively.
C takes A, B and the container T as input, and the output is supplied to R and S respectively.
R takes A, B, its T, and C, and the output is seeded to S.
S takes A, B, its T and C, as well as R as inputs.
The output of S is passed to final step integration.</p>
<img alt="../_images/ILLSANS-v1_all_wkflw.png" src="../_images/ILLSANS-v1_all_wkflw.png" />
<p>This example below performs a complete reduction for D11 data.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For transmission calculation, the beam run and the transmission run have to be recorded at the same instrument configuration.
For beam flux normalisation and beam center movement, the beam run and the sample run have to be recorded at the same configuration.
For container subtraction, the container and the sample run have to be recorded at the same configuration.
Otherwise a warning is logged, but the execution does not stop.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - full treatment of a sample</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Load the mask (or load the sample, and mask graphically using the Instrument View)</span>
<span class="n">LoadNexusProcessed</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;D11_mask.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;mask&#39;</span><span class="p">)</span>

<span class="c"># Process the dark current Cd/B4C for water</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010455.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Absorber&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;Cdw&#39;</span><span class="p">)</span>

<span class="c"># Process the empty beam for water</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010414.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Beam&#39;</span><span class="p">,</span> <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;Dbw&#39;</span><span class="p">)</span>

<span class="c"># Water container transmission</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010446.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Transmission&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s">&#39;Dbw&#39;</span><span class="p">,</span>
                 <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;wc_tr&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Water container transmission is {0:.3f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s">&#39;wc_tr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c"># Water container</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010454.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Container&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s">&#39;Dbw&#39;</span><span class="p">,</span>
                 <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s">&#39;wc_tr&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;wc&#39;</span><span class="p">)</span>

<span class="c"># Water transmission</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010445.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Transmission&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s">&#39;Dbw&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;w_tr&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Water transmission is {0:.3f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s">&#39;w_tr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c"># Water</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010453.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Reference&#39;</span><span class="p">,</span> <span class="n">MaskedInputWorkspace</span><span class="o">=</span><span class="s">&#39;mask&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cdw&#39;</span><span class="p">,</span> <span class="n">ContainerInputWorkspace</span><span class="o">=</span><span class="s">&#39;wc&#39;</span><span class="p">,</span>
                 <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s">&#39;Dbw&#39;</span><span class="p">,</span> <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s">&#39;wc_tr&#39;</span><span class="p">,</span>
                 <span class="n">SensitivityOutputWorkspace</span><span class="o">=</span><span class="s">&#39;sens&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;water&#39;</span><span class="p">)</span>

<span class="c"># Process the dark current Cd/B4C for sample</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010462.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Absorber&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;Cd&#39;</span><span class="p">)</span>

<span class="c"># Process the empty beam for sample</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010413.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Beam&#39;</span><span class="p">,</span> <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;Db&#39;</span><span class="p">)</span>

<span class="c"># Sample container transmission</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010444.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Transmission&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s">&#39;Dbw&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;sc_tr&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Sample container transmission is {0:.3f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s">&#39;sc_tr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c"># Sample container</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010460.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Container&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s">&#39;Db&#39;</span><span class="p">,</span>
                 <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s">&#39;sc_tr&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;sc&#39;</span><span class="p">)</span>

<span class="c"># Sample transmission</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010585.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Transmission&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s">&#39;Dbw&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;s_tr&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Sample transmission is {0:.3f}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s">&#39;s_tr&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c"># Sample</span>
<span class="n">SANSILLReduction</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s">&#39;010569.nxs&#39;</span><span class="p">,</span> <span class="n">ProcessAs</span><span class="o">=</span><span class="s">&#39;Sample&#39;</span><span class="p">,</span> <span class="n">MaskedInputWorkspace</span><span class="o">=</span><span class="s">&#39;mask&#39;</span><span class="p">,</span>
                 <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s">&#39;Cd&#39;</span><span class="p">,</span> <span class="n">ContainerInputWorkspace</span><span class="o">=</span><span class="s">&#39;sc&#39;</span><span class="p">,</span>
                 <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s">&#39;Db&#39;</span><span class="p">,</span> <span class="n">SensitivityInputWorkspace</span><span class="o">=</span><span class="s">&#39;sens&#39;</span><span class="p">,</span>
                 <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s">&#39;s_tr&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;sample_flux&#39;</span><span class="p">)</span>

<span class="c"># Convert to I(Q)</span>
<span class="n">SANSILLIntegration</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;sample_flux&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;iq&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Water container transmission is 0.946
Water transmission is 0.501
Sample container transmission is 0.667
Sample transmission is 0.642
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/ILL/SANS.html">ILL\SANS</a></p>
</div>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id13">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/242afc63eface10e47f5e9e6aeaed50e11e3eb4c/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/SANSILLReduction.py">SANSILLReduction.py</a> <em>(last modified: 2019-08-30)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SANSILLIntegration-v1.html" title="Previous Chapter: SANSILLIntegration v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SANSILLIntegrati...</span>
    </a>
  </li>
  <li>
    <a href="SANSLoad-v1.html" title="Next Chapter: SANSLoad v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SANSLoad v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-11-18.<br/>
    </p>
  </div>
</footer>
  </body>
</html>