<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ReflectometryReductionOneAuto v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="Regroup v1" href="Regroup-v1.html" />
    <link rel="prev" title="ReflectometryReductionOne v1" href="ReflectometryReductionOne-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="reflectometryreductiononeauto-v1">
<span id="algm-reflectometryreductiononeauto"></span><span id="algm-reflectometryreductiononeauto-v1"></span><h1>ReflectometryReductionOneAuto v1<a class="headerlink" href="#reflectometryreductiononeauto-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/ReflectometryReductionOneAuto-v1_dlg.png"><img alt="../_images/ReflectometryReductionOneAuto-v1_dlg.png" class="screenshot" src="../_images/ReflectometryReductionOneAuto-v1_dlg.png" style="width: 290px;" /></a>
<p class="caption"><strong>ReflectometryReductionOneAuto</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#processinginstructions" id="id4">ProcessingInstructions</a></li>
<li><a class="reference internal" href="#workflow-for-workspacegroups" id="id5">Workflow for WorkspaceGroups</a></li>
<li><a class="reference internal" href="#workflow-for-polarization-correction" id="id6">Workflow for Polarization Correction</a></li>
<li><a class="reference internal" href="#polynomial-correction" id="id7">Polynomial Correction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id8">Usage</a></li>
<li><a class="reference internal" href="#source" id="id9">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Reduces a single TOF/Lambda reflectometry run into a mod Q vs I/I0 workspace. Performs transmission corrections.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="2%" />
<col width="12%" />
<col width="6%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Input run in TOF or Lambda</td>
</tr>
<tr class="row-odd"><td>RegionOfDirectBeam</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>Indices of the spectra a pair (lower, upper) that mark the ranges that correspond to the direct beam in multi-detector mode.</td>
</tr>
<tr class="row-even"><td>AnalysisMode</td>
<td>Input</td>
<td>string</td>
<td>PointDetectorAnalysis</td>
<td>Analysis Mode to Choose. Allowed values: [&#8216;PointDetectorAnalysis&#8217;, &#8216;MultiDetectorAnalysis&#8217;]</td>
</tr>
<tr class="row-odd"><td>FirstTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>First transmission run workspace in TOF or Wavelength</td>
</tr>
<tr class="row-even"><td>SecondTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Second transmission run workspace in TOF</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output workspace in wavelength q</td>
</tr>
<tr class="row-even"><td>OutputWorkspaceWavelength</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output workspace in wavelength</td>
</tr>
<tr class="row-odd"><td>Params</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>A comma separated list of first bin boundary, width, last bin boundary. These parameters are used for stitching together transmission runs. Values are in wavelength (angstroms). This input is only needed if a SecondTransmission run is provided.</td>
</tr>
<tr class="row-even"><td>StartOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Overlap in Q.</td>
</tr>
<tr class="row-odd"><td>EndOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>End overlap in Q.</td>
</tr>
<tr class="row-even"><td>I0MonitorIndex</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>I0 monitor workspace index</td>
</tr>
<tr class="row-odd"><td>ProcessingInstructions</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Grouping pattern of workspace indices to yield only the detectors of interest. See GroupDetectors for syntax.</td>
</tr>
<tr class="row-even"><td>WavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength Min in angstroms</td>
</tr>
<tr class="row-odd"><td>WavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength Max in angstroms</td>
</tr>
<tr class="row-even"><td>WavelengthStep</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength step in angstroms</td>
</tr>
<tr class="row-odd"><td>MonitorBackgroundWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Monitor wavelength background min in angstroms</td>
</tr>
<tr class="row-even"><td>MonitorBackgroundWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Monitor wavelength background max in angstroms</td>
</tr>
<tr class="row-odd"><td>MonitorIntegrationWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Monitor integral min in angstroms</td>
</tr>
<tr class="row-even"><td>MonitorIntegrationWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Monitor integral max in angstroms</td>
</tr>
<tr class="row-odd"><td>DetectorComponentName</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Name of the detector component i.e. point-detector. If these are not specified, the algorithm will attempt lookup using a standard naming convention.</td>
</tr>
<tr class="row-even"><td>SampleComponentName</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Name of the sample component i.e. some-surface-holder. If these are not specified, the algorithm will attempt lookup using a standard naming convention.</td>
</tr>
<tr class="row-odd"><td>ThetaIn</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Final theta in degrees</td>
</tr>
<tr class="row-even"><td>ThetaOut</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Calculated final theta in degrees.</td>
</tr>
<tr class="row-odd"><td>NormalizeByIntegratedMonitors</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Normalize by dividing by the integrated monitors.</td>
</tr>
<tr class="row-even"><td>CorrectDetectorPositions</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Correct detector positions using ThetaIn (if given)</td>
</tr>
<tr class="row-odd"><td>StrictSpectrumChecking</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Strict checking between spectrum numbers in input workspaces and transmission workspaces.</td>
</tr>
<tr class="row-even"><td>CorrectionAlgorithm</td>
<td>Input</td>
<td>string</td>
<td>AutoDetect</td>
<td>The type of correction to perform. Allowed values: [&#8216;None&#8217;, &#8216;AutoDetect&#8217;, &#8216;PolynomialCorrection&#8217;, &#8216;ExponentialCorrection&#8217;]</td>
</tr>
<tr class="row-odd"><td>Polynomial</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Coefficients to be passed to the PolynomialCorrection algorithm.</td>
</tr>
<tr class="row-even"><td>C0</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>C0 value to be passed to the ExponentialCorrection algorithm.</td>
</tr>
<tr class="row-odd"><td>C1</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>C1 value to be passed to the ExponentialCorrection algorithm.</td>
</tr>
<tr class="row-even"><td>PolarizationAnalysis</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>What Polarization mode will be used? None: No correction PNR: Polarized Neutron Reflectivity mode PA: Full Polarization Analysis PNR-PA. Allowed values: [&#8216;None&#8217;, &#8216;PA&#8217;, &#8216;PNR&#8217;]</td>
</tr>
<tr class="row-odd"><td>CPp</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Effective polarizing power of the polarizing system. Expressed as a ratio 0 &lt; Pp &lt; 1</td>
</tr>
<tr class="row-even"><td>CAp</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Effective polarizing power of the analyzing system. Expressed as a ratio 0 &lt; Ap &lt; 1</td>
</tr>
<tr class="row-odd"><td>CRho</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Ratio of efficiencies of polarizer spin-down to polarizer spin-up. This is characteristic of the polarizer flipper. Values are constants for each term in a polynomial expression.</td>
</tr>
<tr class="row-even"><td>CAlpha</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Ratio of efficiencies of analyzer spin-down to analyzer spin-up. This is characteristic of the analyzer flipper. Values are factors for each term in a polynomial expression.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Facade over <a class="reference internal" href="ReflectometryReductionOne-v1.html#algm-reflectometryreductionone"><em>ReflectometryReductionOne v1</em></a>.</p>
<p>Pulls numeric parameters out of the instrument parameters where possible. You can override any of these automatically applied defaults by providing your own value for the input.</p>
<p>See <a class="reference internal" href="ReflectometryReductionOne-v1.html#algm-reflectometryreductionone"><em>ReflectometryReductionOne v1</em></a> for more information on the wrapped algorithm.</p>
<div class="section" id="processinginstructions">
<h3><a class="toc-backref" href="#id4">ProcessingInstructions</a><a class="headerlink" href="#processinginstructions" title="Permalink to this headline">¶</a></h3>
<p>If ProcessingInstructions is not set its value is inferred from other properties:</p>
<ul class="simple">
<li>If AnalysisMode = PointDetectorAnalaysis and PointDetectorStart = PointDetectorStop then the spectrum specified by PointDetectorStart is used.</li>
<li>If AnalysisMode = PointDetectorAnalaysis and PointDetectorStart ≠ PointDetectorStop then the sum of the spectra from PointDetectorStart to PointDetectorStop is used.</li>
<li>If AnalysisMode = MultiDetectorAnalaysis then all of the spectra from MultiDetectorStart onwards are used.</li>
</ul>
<p>Note, the ProcessingInstructions are workspace indicies, not detector IDs. The first few workspaces may correspond to monitors, rather than detectors of interest.
For the syntax of this property, see <a class="reference internal" href="GroupDetectors-v2.html#algm-groupdetectors"><em>GroupDetectors v2</em></a>.</p>
</div>
<div class="section" id="workflow-for-workspacegroups">
<h3><a class="toc-backref" href="#id5">Workflow for WorkspaceGroups</a><a class="headerlink" href="#workflow-for-workspacegroups" title="Permalink to this headline">¶</a></h3>
<p>If a WorkspaceGroup is provided to ReflectometryReductionOneAuto, it will follow the steps shown in the diagram below to produce its output.</p>
<img alt="../_images/ReflectometryReductionOneAuto-v1-Groups_wkflw.png" src="../_images/ReflectometryReductionOneAuto-v1-Groups_wkflw.png" />
</div>
<div class="section" id="workflow-for-polarization-correction">
<h3><a class="toc-backref" href="#id6">Workflow for Polarization Correction</a><a class="headerlink" href="#workflow-for-polarization-correction" title="Permalink to this headline">¶</a></h3>
<p>If polarization correction is enabled, it is performed as an additional step once the main processing has completed.
The following diagram shows how the <a class="reference internal" href="PolarizationCorrection-v1.html#algm-polarizationcorrection"><em>PolarizationCorrection v1</em></a> algorithm is used.</p>
<img alt="../_images/ReflectometryReductionOneAuto-v1-PolarizationCorrection_wkflw.png" src="../_images/ReflectometryReductionOneAuto-v1-PolarizationCorrection_wkflw.png" />
</div>
<div class="section" id="polynomial-correction">
<h3><a class="toc-backref" href="#id7">Polynomial Correction</a><a class="headerlink" href="#polynomial-correction" title="Permalink to this headline">¶</a></h3>
<p>If no Transmission runs are provided, then polynomial correction can be
performed instead. Polynomial correction is enabled by setting the
<tt class="docutils literal"><span class="pre">CorrectionAlgorithm</span></tt> property.</p>
<p>If set to <tt class="docutils literal"><span class="pre">AutoDetect</span></tt>, it looks at the instrument
parameters for the <tt class="docutils literal"><span class="pre">correction</span></tt> parameter. If it is set to
<tt class="docutils literal"><span class="pre">polynomial</span></tt>, then polynomial correction is performed using the
<a class="reference internal" href="PolynomialCorrection-v1.html#algm-polynomialcorrection"><em>PolynomialCorrection v1</em></a> algorithm, with the polynomial string taken
from the instrument&#8217;s <tt class="docutils literal"><span class="pre">polynomial</span></tt> parameter. If the
<tt class="docutils literal"><span class="pre">correction</span></tt> parameter is set to <tt class="docutils literal"><span class="pre">exponential</span></tt> instead, then
the <a class="reference internal" href="ExponentialCorrection-v1.html#algm-exponentialcorrection"><em>ExponentialCorrection v1</em></a> algorithm is used, with C0 and C1 taken
from the instrument parameters, <tt class="docutils literal"><span class="pre">C0</span></tt> and <tt class="docutils literal"><span class="pre">C1</span></tt>.</p>
<p>These can be specified manually by setting the <tt class="docutils literal"><span class="pre">CorrectionAlgorithm</span></tt>,
<tt class="docutils literal"><span class="pre">Polynomial</span></tt>, <tt class="docutils literal"><span class="pre">C0</span></tt>, and <tt class="docutils literal"><span class="pre">C1</span></tt> properties accordingly.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id8">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Reduce a Run</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013460.nxs&#39;</span><span class="p">)</span>
<span class="c"># Basic reduction with no transmission run</span>
<span class="n">IvsQ</span><span class="p">,</span> <span class="n">IvsLam</span><span class="p">,</span> <span class="n">thetaOut</span> <span class="o">=</span> <span class="n">ReflectometryReductionOneAuto</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">ThetaIn</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The first four IvsLam Y values are: [ </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s"> ]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;The first four IvsQ Y values are: [ </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s"> ]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;Theta out is the same as theta in:&quot;</span><span class="p">,</span><span class="n">thetaOut</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The first four IvsLam Y values are: [ 0.0000e+00, 0.0000e+00, 4.9588e-07, 1.2769e-06 ]
The first four IvsQ Y values are: [ 2.1435e-05, 5.0384e-05, 5.2332e-05, 5.2042e-05 ]
Theta out is the same as theta in: 0.7
</pre></div>
</div>
<p><strong>Example - Reduce a Run with a transmission run</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013460.nxs&#39;</span><span class="p">)</span>
<span class="n">trans</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013463.nxs&#39;</span><span class="p">)</span>
<span class="c"># Basic reduction with a transmission run</span>
<span class="n">IvsQ</span><span class="p">,</span> <span class="n">IvsLam</span><span class="p">,</span> <span class="n">thetaOut</span> <span class="o">=</span> <span class="n">ReflectometryReductionOneAuto</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">FirstTransmissionRun</span><span class="o">=</span><span class="n">trans</span><span class="p">,</span> <span class="n">ThetaIn</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The first four IvsLam Y values are: [ </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s"> ]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;The first four IvsQ Y values are: [ </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s"> ]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;Theta out is the same as theta in:&quot;</span><span class="p">,</span><span class="n">thetaOut</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The first four IvsLam Y values are: [ 0.0000e+00, 0.0000e+00, 4.8592e-06, 1.0580e-05 ]
The first four IvsQ Y values are: [ 9.6396e-01, 8.8177e-01, 7.1679e-01, 6.2066e-01 ]
Theta out is the same as theta in: 0.7
</pre></div>
</div>
<p><strong>Example - Reduce a Run overloading default parameters</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013460.nxs&#39;</span><span class="p">)</span>
<span class="c"># Reduction overriding the default values for MonitorBackgroundWavelengthMin and MonitorBackgroundWavelengthMax which would otherwise be retirieved from the workspace</span>
<span class="n">IvsQ</span><span class="p">,</span> <span class="n">IvsLam</span><span class="p">,</span> <span class="n">thetaOut</span> <span class="o">=</span> <span class="n">ReflectometryReductionOneAuto</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">ThetaIn</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">MonitorBackgroundWavelengthMin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">MonitorBackgroundWavelengthMax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The first four IvsLam Y values are: [ </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s"> ]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;The first four IvsQ Y values are: [ </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s"> ]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;Theta out is the same as theta in:&quot;</span><span class="p">,</span><span class="n">thetaOut</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The first four IvsLam Y values are: [ 0.0000e+00, 0.0000e+00, 4.9108e-07, 1.2645e-06 ]
The first four IvsQ Y values are: [ 2.1227e-05, 4.9897e-05, 5.1825e-05, 5.1538e-05 ]
Theta out is the same as theta in: 0.7
</pre></div>
</div>
<p><strong>Example - Polynomial correction</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013460.nxs&#39;</span><span class="p">)</span>
<span class="c"># Set up some paramters, allowing the algorithm to automatically detect the correction to use</span>
<span class="n">SetInstrumentParameter</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="s">&quot;correction&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="s">&quot;polynomial&quot;</span><span class="p">)</span>
<span class="n">SetInstrumentParameter</span><span class="p">(</span><span class="n">run</span><span class="p">,</span> <span class="s">&quot;polynomial&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="s">&quot;0,0.5,1,2,3&quot;</span><span class="p">)</span>

<span class="n">IvsQ</span><span class="p">,</span> <span class="n">IvsLam</span><span class="p">,</span> <span class="n">thetaOut</span> <span class="o">=</span> <span class="n">ReflectometryReductionOneAuto</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">ThetaIn</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">findByName</span><span class="p">(</span><span class="n">histories</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">name</span><span class="p">()</span> <span class="o">==</span> <span class="n">name</span><span class="p">,</span> <span class="n">histories</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="c"># Find the PolynomialCorrection entry in the workspace&#39;s history</span>
<span class="n">algHist</span> <span class="o">=</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">getHistory</span><span class="p">()</span>
<span class="n">refRedOneAutoHist</span> <span class="o">=</span> <span class="n">findByName</span><span class="p">(</span><span class="n">algHist</span><span class="o">.</span><span class="n">getAlgorithmHistories</span><span class="p">(),</span> <span class="s">&quot;ReflectometryReductionOneAuto&quot;</span><span class="p">)</span>
<span class="n">refRedOneHist</span> <span class="o">=</span> <span class="n">findByName</span><span class="p">(</span><span class="n">refRedOneAutoHist</span><span class="o">.</span><span class="n">getChildHistories</span><span class="p">(),</span> <span class="s">&quot;ReflectometryReductionOne&quot;</span><span class="p">)</span>
<span class="n">polyCorHist</span> <span class="o">=</span> <span class="n">findByName</span><span class="p">(</span><span class="n">refRedOneHist</span><span class="o">.</span><span class="n">getChildHistories</span><span class="p">(),</span> <span class="s">&quot;PolynomialCorrection&quot;</span><span class="p">)</span>

<span class="n">coefProp</span> <span class="o">=</span> <span class="n">findByName</span><span class="p">(</span><span class="n">polyCorHist</span><span class="o">.</span><span class="n">getProperties</span><span class="p">(),</span> <span class="s">&quot;Coefficients&quot;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;Coefficients: &#39;&quot;</span> <span class="o">+</span> <span class="n">coefProp</span><span class="o">.</span><span class="n">value</span><span class="p">()</span> <span class="o">+</span> <span class="s">&quot;&#39;&quot;</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Coefficients: &#39;0,0.5,1,2,3&#39;
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Reflectometry/ISIS.html">Reflectometry\ISIS</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id9">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/928349c406ed0cdd1d18d429ed0a1a931814016c/Framework/Algorithms/src/ReflectometryReductionOneAuto.cpp">ReflectometryReductionOneAuto.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/928349c406ed0cdd1d18d429ed0a1a931814016c/Framework/Algorithms/inc/MantidAlgorithms/ReflectometryReductionOneAuto.h">ReflectometryReductionOneAuto.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ReflectometryReductionOne-v1.html" title="Previous Chapter: ReflectometryReductionOne v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; ReflectometryRed...</span>
    </a>
  </li>
  <li>
    <a href="Regroup-v1.html" title="Next Chapter: Regroup v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Regroup v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>