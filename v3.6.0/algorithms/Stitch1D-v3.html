<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Stitch1D v3</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="Stitch1DMany v1" href="Stitch1DMany-v1.html" />
    <link rel="prev" title="StepScan v1" href="StepScan-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="stitch1d-v3">
<span id="algm-stitch1d"></span><span id="algm-stitch1d-v3"></span><h1>Stitch1D v3<a class="headerlink" href="#stitch1d-v3" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/Stitch1D-v3_dlg.png"><img alt="../_images/Stitch1D-v3_dlg.png" class="screenshot" src="../_images/Stitch1D-v3_dlg.png" style="width: 274px;" /></a>
<p class="caption"><strong>Stitch1D</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Stitches single histogram matrix workspaces together</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="3%" />
<col width="20%" />
<col width="6%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>LHSWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>LHS input workspace.</td>
</tr>
<tr class="row-odd"><td>RHSWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>RHS input workspace.</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output stitched workspace.</td>
</tr>
<tr class="row-odd"><td>StartOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Start overlap x-value in units of x-axis. Optional.</td>
</tr>
<tr class="row-even"><td>EndOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>End overlap x-value in units of x-axis. Optional.</td>
</tr>
<tr class="row-odd"><td>Params</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Rebinning Parameters. See Rebin for format. If only a single value is provided, start and end are taken from input workspaces.</td>
</tr>
<tr class="row-even"><td>ScaleRHSWorkspace</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Scaling either with respect to workspace 1 or workspace 2</td>
</tr>
<tr class="row-odd"><td>UseManualScaleFactor</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>True to use a provided value for the scale factor.</td>
</tr>
<tr class="row-even"><td>ManualScaleFactor</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Provided value for the scale factor. Optional.</td>
</tr>
<tr class="row-odd"><td>OutScaleFactor</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>The actual used value for the scaling factor.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Stitches single histogram <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>Matrix Workspaces</em></a>
together outputting a stitched Matrix Workspace. Either the
right-hand-side or left-hand-side workspace can be chosen to be scaled.
Users must provide a Param step (single value), but the binning start
and end are calculated from the input workspaces if not provided.
Likewise, StartOverlap and EndOverlap are optional. If the StartOverlap
or EndOverlap are not provided, then these are taken to be the region of
x-axis intersection.</p>
<p>The workspaces must be histogrammed. Use
<a class="reference internal" href="ConvertToHistogram-v1.html#algm-converttohistogram"><em>ConvertToHistogram v1</em></a> on workspaces prior to
passing them to this algorithm.</p>
<p><strong>Special Value Processing</strong></p>
<p>Special values, meaning infinite and NaN double precision values, are treated in a different way by the algorithm. The processing is as follows:</p>
<ol class="arabic simple">
<li>The workspaces are initially rebinned, as prescribed by the rebin Params (determined automatically if not provided)</li>
<li>Each spectra is searched for signal values and error values that are special values. Positions and type of special value are recorded</li>
<li>Special values found in the previous step are set to zero</li>
<li>Stitching proceeds, integration will not be performed considering any special values</li>
<li>Post processing the indexes of the special values are used to put the special values back where they came from</li>
</ol>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - a basic example using stitch1D to stitch two workspaces together.</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="k">def</span> <span class="nf">gaussian</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">mu</span><span class="p">,</span> <span class="n">sigma</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Creates a gaussian peak centered on mu and with width sigma.&quot;&quot;&quot;</span>
  <span class="k">return</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span> <span class="n">sigma</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">mu</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>  <span class="o">/</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">sigma</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>

<span class="c">#create two histograms with a single peak in each one</span>
<span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">1.6</span><span class="p">,</span> <span class="mf">0.02</span><span class="p">)</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">UnitX</span><span class="o">=</span><span class="s">&quot;1/q&quot;</span><span class="p">,</span> <span class="n">DataX</span><span class="o">=</span><span class="n">x1</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">UnitX</span><span class="o">=</span><span class="s">&quot;1/q&quot;</span><span class="p">,</span> <span class="n">DataX</span><span class="o">=</span><span class="n">x2</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">gaussian</span><span class="p">(</span><span class="n">x2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="c">#stitch the histograms together</span>
<span class="n">stitched</span><span class="p">,</span> <span class="n">scale</span> <span class="o">=</span> <span class="n">Stitch1D</span><span class="p">(</span><span class="n">LHSWorkspace</span><span class="o">=</span><span class="n">ws1</span><span class="p">,</span> <span class="n">RHSWorkspace</span><span class="o">=</span><span class="n">ws2</span><span class="p">,</span> <span class="n">StartOverlap</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">EndOverlap</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span> <span class="n">Params</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<a class="reference internal image-reference" href="../_images/Stitch1D1.png"><img alt="Stitch1D output" class="align-center" src="../_images/Stitch1D1.png" style="width: 674.05px; height: 290.55px;" /></a>
<p><strong>Example - a practical example using reflectometry data and a scale factor.</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">trans1</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&#39;INTER00013463&#39;</span><span class="p">)</span>
<span class="n">trans2</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&#39;INTER00013464&#39;</span><span class="p">)</span>

<span class="n">trans1_wav</span> <span class="o">=</span> <span class="n">CreateTransmissionWorkspaceAuto</span><span class="p">(</span><span class="n">trans1</span><span class="p">)</span>
<span class="n">trans2_wav</span> <span class="o">=</span> <span class="n">CreateTransmissionWorkspaceAuto</span><span class="p">(</span><span class="n">trans2</span><span class="p">)</span>

<span class="n">stitched_wav</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">Stitch1D</span><span class="p">(</span><span class="n">trans1_wav</span><span class="p">,</span> <span class="n">trans2_wav</span><span class="p">,</span> <span class="n">UseManualScaleFactor</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">ManualScaleFactor</span><span class="o">=</span><span class="mf">0.85</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<a class="reference internal image-reference" href="../_images/Stitch1D2.png"><img alt="Stitch1D output" class="align-center" src="../_images/Stitch1D2.png" style="width: 670.15px; height: 289.25px;" /></a>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Reflectometry.html">Reflectometry</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/928349c406ed0cdd1d18d429ed0a1a931814016c/Framework/Algorithms/src/Stitch1D.cpp">Stitch1D.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/928349c406ed0cdd1d18d429ed0a1a931814016c/Framework/Algorithms/inc/MantidAlgorithms/Stitch1D.h">Stitch1D.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="StepScan-v1.html" title="Previous Chapter: StepScan v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; StepScan v1</span>
    </a>
  </li>
  <li>
    <a href="Stitch1DMany-v1.html" title="Next Chapter: Stitch1DMany v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Stitch1DMany v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>