<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>GenerateIPythonNotebook v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="GeneratePeaks v1" href="GeneratePeaks-v1.html" />
    <link rel="prev" title="GenerateGroupingSNSInelastic v1" href="GenerateGroupingSNSInelastic-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="generateipythonnotebook-v1">
<span id="algm-generateipythonnotebook"></span><span id="algm-generateipythonnotebook-v1"></span><h1>GenerateIPythonNotebook v1<a class="headerlink" href="#generateipythonnotebook-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/GenerateIPythonNotebook-v1_dlg.png"><img alt="../_images/GenerateIPythonNotebook-v1_dlg.png" class="screenshot" src="../_images/GenerateIPythonNotebook-v1_dlg.png" style="width: 363px;" /></a>
<p class="caption"><strong>GenerateIPythonNotebook</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>An Algorithm to generate an IPython notebook file to record the history of a workspace.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="4%" />
<col width="15%" />
<col width="6%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An input workspace.</td>
</tr>
<tr class="row-odd"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The name of the file into which the workspace history will be generated. Allowed extensions: [&#8216;.ipynb&#8217;]</td>
</tr>
<tr class="row-even"><td>NotebookText</td>
<td>Output</td>
<td>string</td>
<td>&nbsp;</td>
<td>Saves the history of the workspace to a variable.</td>
</tr>
<tr class="row-odd"><td>UnrollAll</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Unroll all algorithms to show just their child algorithms.</td>
</tr>
<tr class="row-even"><td>StartTimestamp</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The filter start time in the format YYYY-MM-DD HH:mm:ss</td>
</tr>
<tr class="row-odd"><td>EndTimestamp</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The filter end time in the format YYYY-MM-DD HH:mm:ss</td>
</tr>
<tr class="row-even"><td>SpecifyAlgorithmVersions</td>
<td>Input</td>
<td>string</td>
<td>Specify Old</td>
<td>When to specify which algorithm version was used by Mantid. Allowed values: [&#8216;Specify Old&#8217;, &#8216;Specify All&#8217;, &#8216;Specify None&#8217;]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Retrieves the algorithm history of the workspace and saves it to an
IPython notebook file or Python variable.</p>
<p>A time range can be specified which will restrict the algorithms in
the notebook to those which were executed between the given times,
if no end time was specified then algorithms from the start time up
to the current time will be included in the generated notebook.</p>
<p>Start and end times are given in ISO8601 format: YYYY-MM-DD HH:mm:ss,
for example 3:25 PM on July the 4th 2014 would be 2014-07-04 15:25:00.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - generate an IPython notebook for a workspace:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#create a workspace and run some operations on it</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CropWorkspace</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">XMin</span><span class="o">=</span><span class="mf">7828.162291</span><span class="p">,</span> <span class="n">XMax</span><span class="o">=</span><span class="mf">11980.906921</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Power</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Exponent</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">RenameWorkspace</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&quot;MyTestWorkspace&quot;</span><span class="p">)</span>

<span class="n">notebook_text</span> <span class="o">=</span> <span class="n">GenerateIPythonNotebook</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>
<span class="k">print</span> <span class="n">notebook_text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Example - generate a python notebook giving a range of start times:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">time</span>

<span class="c"># Do some operations on the workspace with a pause between them</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CropWorkspace</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">XMin</span><span class="o">=</span><span class="mf">7828.162291</span><span class="p">,</span> <span class="n">XMax</span><span class="o">=</span><span class="mf">11980.906921</span><span class="p">)</span>
<span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Power</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Exponent</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">RenameWorkspace</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&quot;MyTestWorkspace&quot;</span><span class="p">)</span>

<span class="c"># Get the execution time of the last algorithm and subtract 1 second</span>
<span class="n">history</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s">&#39;MyTestWorkspace&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getHistory</span><span class="p">()</span>
<span class="n">last</span> <span class="o">=</span> <span class="n">history</span><span class="o">.</span><span class="n">getAlgorithmHistory</span><span class="p">(</span><span class="n">history</span><span class="o">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">from_time</span> <span class="o">=</span> <span class="n">last</span><span class="o">.</span><span class="n">executionDate</span><span class="p">()</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="mf">1e9</span><span class="p">)</span>

<span class="c"># Generate a notebook with a given start time</span>
<span class="n">notebook_text</span> <span class="o">=</span> <span class="n">GenerateIPythonNotebook</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">StartTimestamp</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">from_time</span><span class="p">))</span>
<span class="k">print</span> <span class="n">notebook_text</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Example - generate a python notebook and save it to file:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>

<span class="c">#create a workspace and run some operations on it</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CropWorkspace</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">XMin</span><span class="o">=</span><span class="mf">7828.162291</span><span class="p">,</span> <span class="n">XMax</span><span class="o">=</span><span class="mf">11980.906921</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Power</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Exponent</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">RenameWorkspace</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&quot;MyTestWorkspace&quot;</span><span class="p">)</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">&quot;~&quot;</span><span class="p">),</span> <span class="s">&#39;mynotebook.ipynb&#39;</span><span class="p">)</span>
<span class="n">GenerateIPythonNotebook</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Filename</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">notebook</span><span class="p">:</span>
  <span class="k">print</span> <span class="n">notebook</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Utility/Python.html">Utility\Python</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/928349c406ed0cdd1d18d429ed0a1a931814016c/Framework/Algorithms/src/GenerateIPythonNotebook.cpp">GenerateIPythonNotebook.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/928349c406ed0cdd1d18d429ed0a1a931814016c/Framework/Algorithms/inc/MantidAlgorithms/GenerateIPythonNotebook.h">GenerateIPythonNotebook.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="GenerateGroupingSNSInelastic-v1.html" title="Previous Chapter: GenerateGroupingSNSInelastic v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; GenerateGrouping...</span>
    </a>
  </li>
  <li>
    <a href="GeneratePeaks-v1.html" title="Next Chapter: GeneratePeaks v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">GeneratePeaks v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>