<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SANSSensitivityCorrection v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="SANSSolidAngleCorrection v1" href="SANSSolidAngleCorrection-v1.html" />
    <link rel="prev" title="SANSReduction v1" href="SANSReduction-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="sanssensitivitycorrection-v1">
<span id="algm-sanssensitivitycorrection"></span><span id="algm-sanssensitivitycorrection-v1"></span><h1>SANSSensitivityCorrection v1<a class="headerlink" href="#sanssensitivitycorrection-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/SANSSensitivityCorrection-v1_dlg.png"><img alt="../_images/SANSSensitivityCorrection-v1_dlg.png" class="screenshot" src="../_images/SANSSensitivityCorrection-v1_dlg.png" style="width: 263px;" /></a>
<p class="caption"><strong>SANSSensitivityCorrection</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#source" id="id4">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Perform SANS sensitivity correction.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="3%" />
<col width="20%" />
<col width="14%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Flood field or sensitivity file. Allowed extensions: [&#8216;_event.nxs&#8217;, &#8216;.xml&#8217;]</td>
</tr>
<tr class="row-even"><td>UseSampleDC</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>If true, the dark current subtracted from the sample data will also be subtracted from the flood field.</td>
</tr>
<tr class="row-odd"><td>DarkCurrentFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The name of the input file to load as dark current. Allowed extensions: [&#8216;_event.nxs&#8217;, &#8216;.xml&#8217;]</td>
</tr>
<tr class="row-even"><td>MinEfficiency</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Minimum efficiency for a pixel to be considered (default: no minimum).</td>
</tr>
<tr class="row-odd"><td>MaxEfficiency</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Maximum efficiency for a pixel to be considered (default: no maximum).</td>
</tr>
<tr class="row-even"><td>BeamCenterX</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Beam position in X pixel coordinates (optional: otherwise sample beam center is used)</td>
</tr>
<tr class="row-odd"><td>BeamCenterY</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Beam position in Y pixel coordinates (optional: otherwise sample beam center is used)</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>ReductionProperties</td>
<td>Input</td>
<td>string</td>
<td>__sans_reduction_properties</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>OutputSensitivityWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>OutputMessage</td>
<td>Output</td>
<td>string</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This SANS workflow algorithm will compute the sensitivity correction
from a given flood field data set. It will apply the proper corrections
to the data according the the input property manager object. Those
corrections may include dark current subtraction, moving the beam
center, the solid angle correction, and applying a patch.</p>
<p>If an input workspace is given, the computed correction will be applied
to that workspace.</p>
<p>A Nexus file containing a pre-calculated sensitivity correction can also
be supplied for the case where we simply want to apply the correction to
an input workspace.</p>
<p>The relative detector efficiency is computed using the
<a class="reference internal" href="CalculateEfficiency-v1.html#algm-calculateefficiency"><em>CalculateEfficiency</em></a>
algorithm the following way:</p>
<p><img class="math" src="../_images/math/7ffa44c62461cee1c5421fcd2bda6c8cf82b37d7.png" alt="S(x,y)=\frac{I_{flood}(x,y)}{1/N_{pixels}\sum_{i,j}I_{flood}(i,j)}" style="vertical-align: -12px"/></p>
<p>where <img class="math" src="../_images/math/1219d39a3fec34c9d3c855b62eb3e32a51478674.png" alt="I_{flood}(x,y)" style="vertical-align: -6px"/> is the pixel count of the flood data in pixel (x,y).
If a minimum and/or maximum sensitivity is given, the pixels having an efficiency
outside the given limits are masked and the efficiency is recomputed without using
those pixels.
The sample data is then corrected by dividing the intensity in each pixels by
the efficiency S:</p>
<p><img class="math" src="../_images/math/f83dabed08302a970012ffe0d843bb175e5d7107.png" alt="I'_{sample}(x,y) = \frac{I_{sample}(x,y)}{S(x,y)}" style="vertical-align: -9px"/></p>
<p>The pixels found to have an efficiency outside the given limits are also masked
in the sample data so that they don’t enter any subsequent calculations.
If the user chose to use a dark current data set when starting the reduction
process, that dark current data will be subtracted from the flood data. The
subtraction is done before the sensitivity is calculated.
If the user chose to use the solid angle correction for the reduction process,
that correction will be applied to the flood data before the sensitivity is calculated.</p>
<p>This algorithm is usually called by
<a class="reference internal" href="SANSReduction-v1.html#algm-sansreduction"><em>SANSReduction</em></a> or <a class="reference internal" href="HFIRSANSReduction-v1.html#algm-hfirsansreduction"><em>HFIRSANSReduction</em></a>.</p>
<p><strong>Note 1</strong>: The solid angle correction is either not applied at all, or applied to both
the flood data to calculate the sensitivity correction and applied to the sample data as part of the reduction process.</p>
<p><strong>Note 2</strong>: EQSANS has the option to patch masked areas of the detector using the
efficiency calculated for the unmasked portion of each tube. This creates a sensitivity
file that covers the entire detector. This option can be enabled by using the
<a class="reference internal" href="ComputeSensitivity-v1.html#algm-computesensitivity"><em>ComputeSensitivity</em></a>
workflow algorithm to create a sensitivity workspace, which can then be saved and used
for EQSANS reduction as a pre-calculated sensitivity file.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Workflow/SANS/UsesPropertyManager.html">Workflow\SANS\UsesPropertyManager</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id4">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/928349c406ed0cdd1d18d429ed0a1a931814016c/Framework/WorkflowAlgorithms/src/SANSSensitivityCorrection.cpp">SANSSensitivityCorrection.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/928349c406ed0cdd1d18d429ed0a1a931814016c/Framework/WorkflowAlgorithms/inc/MantidWorkflowAlgorithms/SANSSensitivityCorrection.h">SANSSensitivityCorrection.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SANSReduction-v1.html" title="Previous Chapter: SANSReduction v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; SANSReduction v1</span>
    </a>
  </li>
  <li>
    <a href="SANSSolidAngleCorrection-v1.html" title="Next Chapter: SANSSolidAngleCorrection v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">SANSSolidAngleCo... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>