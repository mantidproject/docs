<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>HFIR Powder Reduction Interface</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="up" title="Interfaces" href="index.html" />
    <link rel="next" title="HFIR Single Crystal Reduction Interface" href="HFIR_4Circle_Reduction.html" />
    <link rel="prev" title="Filter Events Interface" href="FilterEventUI.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="hfir-powder-reduction-interface">
<h1>HFIR Powder Reduction Interface<a class="headerlink" href="#hfir-powder-reduction-interface" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#overview" id="id1">Overview</a></li>
<li><a class="reference internal" href="#use-cases-for-tabs" id="id2">Use cases for tabs</a></li>
</ul>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id1">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>HFIR powder reduction interface (HFIR-PDR-GUI) is a GUI to download, view and reduce data from HFIR&#8217;s powder diffractometers
in SPICE format.</p>
</div>
<div class="section" id="use-cases-for-tabs">
<h2><a class="toc-backref" href="#id2">Use cases for tabs</a><a class="headerlink" href="#use-cases-for-tabs" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ol class="arabic simple">
<li><strong>Raw Detectors</strong>: Visualize the reading of detectors directly coming out of the raw data</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Plot N lines for N Pts.;</li>
<li>Highlight (make it thicker) the Pt that is interested;</li>
<li>New from Mantid:  <em>ReadRawSpiceSignal(Pts)</em>;</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><strong>Individual Detector</strong>: Visual the readings of one detector across an experiment</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Plot the counts of any individual detector;</li>
<li>Able to change the X-axis from 2theta to arbitrary sample environment log;</li>
<li>New from Mantid: <em>ReadRawSpiceSignal(DetectorID, XLabel)</em>;</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li><strong>Normalized</strong>: Reduce one scan each time</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Plot the reduced data</li>
<li>Automatically locate detector efficiency file</li>
<li>New from Mantid: <em>ConvertCWPDMDToSpectra(ExcludedDetectors=[])</em></li>
<li>New from Mantid: <em>ConvertSpiceDataToRealSpace(DetectorEfficiencyTable)</em></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><strong>Multiple Scans</strong>: Reduce a set of scans</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Reduce a set of scans and plot in 2D/water-fall mode;</li>
<li>Able to merge all the scans;</li>
<li>New from Mantid: <em>ConvertCWPDMDToSpectra(ExcludedDetectors=[])</em></li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="5">
<li><strong>Vanadium</strong>: strip vanadium peaks</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Strip vanadium peak with unit &#8216;Degrees&#8217; because of the binning (range and step size) must be respected;</li>
<li>Peaks&#8217; position should be calculated and indicated auotmatically;</li>
<li><em>Mantid::StripPeaks()</em> will be called instread of <em>StripVadadiumPeaks()</em> because
the later one only works in d-spacing;</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="6">
<li><strong>Advanced Setup</strong></li>
</ol>
<blockquote>
<div><ul class="simple">
<li>URL for raw data files;</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="workflow-for-normalization">
<h1>Workflow for <em>Normalization</em><a class="headerlink" href="#workflow-for-normalization" title="Permalink to this headline">¶</a></h1>
<p>Here is a typical use case for reduce data via tab <em>Noramlization</em></p>
<blockquote>
<div><ol class="arabic simple">
<li>User specifies <em>Exp No</em> and <em>Scan No</em> and push button <em>Load</em>;</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>HFIR-PDR-GUI loads SPICE data according to experiment number and scan number;</li>
<li>HFIR-PDR-GUI checks whether vanadium correction file, i.e., detector efficiency file exists on server;</li>
<li>HFIR-PDR-GUI checks whether excluded detectors file exists on server;</li>
<li>HFIR-PDR-GUI checks log <strong>m1</strong> for wavelength and set to <em>Wavelength</em> ;</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>User may specify detector efficient file;</li>
<li>User specifies <em>Bin Size</em>;</li>
<li>User pushes button <em>2Theta</em>, <em>dSpacng</em>, or <em>Q</em>;</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>HFIR-PDF-GUI reduce data in unit of <em>2theta</em> by taking accounting of<ul>
<li>Detector efficiency;</li>
<li>Excluded detectors;</li>
</ul>
</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="5">
<li>HFIR-PDR-GUI plots the reduced data;</li>
<li>User may rebin by different binning parameters or unit;</li>
<li>User may push button <em>Next Scan</em> or <em>Prev Scan</em> to load and reduce other scans with current setup;</li>
<li>User may save the result by pushing button <em>Save</em>;</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="workflow-for-raw-detectors">
<h1>Workflow for <em>Raw Detectors</em><a class="headerlink" href="#workflow-for-raw-detectors" title="Permalink to this headline">¶</a></h1>
<p>Here is a typical use case for reduce data via tab <em>Noramlization</em></p>
<blockquote>
<div><ol class="arabic simple">
<li>User specifies <em>Exp No</em> and <em>Scan No</em> and push button <em>Load</em>;</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>HFIR-PDR-GUI loads SPICE data according to experiment number and scan number;</li>
<li>HFIR-PDR-GUI checks whether vanadium correction file, i.e., detector efficiency file exists on server;</li>
<li>HFIR-PDR-GUI checks whether excluded detectors file exists on server;</li>
<li>HFIR-PDR-GUI checks log <strong>m1</strong> for wavelength and set to <em>Wavelength</em> ;</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>User specifies a <em>Pt.</em> number and push button <em>Plot Raw Detector</em>;</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>HFIR-PDF-GUI plots the raw detector counts normalized by monitor count;</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>User may push button <em>Previous Pt.</em> or <em>Next Pt.</em> for the other experiment points;</li>
</ol>
</div></blockquote>
</div>
<div class="section" id="workflow-for-multiple-scans">
<h1>Workflow for <em>Multiple Scans</em><a class="headerlink" href="#workflow-for-multiple-scans" title="Permalink to this headline">¶</a></h1>
<p>It might be confusing to use the functionalities in tab <em>Multiple Scans</em>.
Here is the suggested workflow to reduce multiple scans and possibly merge them.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Set up <em>Exp No</em> and range of scan numbers;</li>
<li>Push button <em>Load All</em> to load and reduce all runs specified in previous step to single-spectrum diffraction pattern;</li>
<li>Plot all reduced scans in default;</li>
<li>Optinally plot all data in 2D fill plot;</li>
<li>User can delete some scans from the reduced scans via GUI or input text edit (not implemented yet);</li>
<li>Push button <em>Merge</em> to merge the scans;</li>
<li>Push button <em>Save All</em> to save all individual scans to files;</li>
<li>Push button <em>Save Merged</em> to save the merged scans to one file;</li>
</ol>
</div></blockquote>
<div class="section" id="hb2a-data-reduction">
<h2>HB2A Data Reduction<a class="headerlink" href="#hb2a-data-reduction" title="Permalink to this headline">¶</a></h2>
<p>Raw experimental data are to be corrected by (1) detector efficiency, (2) vanadium spectrum and etc.
Experiments are done with neutrons with various wavelengthes.
There information can be retrieved from HB2A&#8217;s data repository accessible from internet.</p>
</div>
</div>
<div class="section" id="experiment-setup-and-sample-log">
<h1>Experiment setup and sample log<a class="headerlink" href="#experiment-setup-and-sample-log" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ol class="arabic simple">
<li><strong>Wavelength</strong>: There are three settings for neutron wavelength, referenced by sample log <em>m1</em>.</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Ge 113: <img class="math" src="../_images/math/5ffe59390c1e1bd3704f52a69266db8afc4613ee.png" alt="\lambda = 2.41 \AA" style="vertical-align: -1px"/>, m1 = 9.45  (The <strong>error</strong> can be 0.05, such that in Exp 231 scan0001, m1=9.5)</li>
<li>Ge 115: <img class="math" src="../_images/math/c9d2515495f49f768af76297a9e4cce5f2e029f2.png" alt="\lambda = 1.54 \AA" style="vertical-align: -1px"/>, m1 = 0</li>
<li>Ge 117  <img class="math" src="../_images/math/55490e46f3bfc7c0d49c94992bf7bbd075493c1d.png" alt="\lambda = 1.12 \AA" style="vertical-align: -1px"/>, No used</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><strong>Collimator translation</strong>: There are two status for collimator, which is specified by sample log <em>colltrans</em></li>
</ol>
<blockquote>
<div><ul class="simple">
<li><em>IN</em>:  colltrans = 0</li>
<li><em>OUT</em>: colltrans = +/-80</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="raw-data-correction-files">
<h1>Raw data correction files<a class="headerlink" href="#raw-data-correction-files" title="Permalink to this headline">¶</a></h1>
<blockquote>
<div><ol class="arabic simple">
<li><strong>Detector efficiency</strong>:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>File name: <em>HB2A_exp0IJK__GE_abc_XY_vcorr.txt</em> where<ul>
<li>IJK is the experiment number</li>
<li>abc is the GE set up.  It can be 113, 115 or 117</li>
<li>XY is either IN or OUT.</li>
<li>Exmaple: <em>HB2A_exp0400__Ge_113_IN_vcorr.txt</em></li>
</ul>
</li>
<li>Web address: <em>http://neutron.ornl.gov/user_data/hb2a/exp400/Datafiles/HB2A_exp0IJK__Ge_abc_IN_vcorr.txt</em><ul>
<li>IJK is the experiment number</li>
<li>abc is the GE set up.  It can be 113, 115 or 117</li>
<li>XY is either IN or OUT.</li>
<li>Exmaple: <em>http://neutron.ornl.gov/user_data/hb2a/exp400/Datafiles/HB2A_exp0400__Ge_113_IN_vcorr.txt</em></li>
</ul>
</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><strong>Excluded detectors</strong>:  Some detectors might be exluded from the experiment for some reason.  It is recorded in some excluded detectors&#8217; file.</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>File name: <em>HB2A_exp0IJK__exclude_detectors.txt</em></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>IJK is the epxeriment number</li>
<li>Exmaple: <em>HB2A_exp0400__exclude_detectors.txt</em></li>
</ul>
</div></blockquote>
<ul class="simple">
<li>Web address: <em>http://neutron.ornl.gov/user_data/hb2a/expIJK/Datafiles/HB2A_exp0IJK__exclude_detectors.txt</em></li>
</ul>
<blockquote>
<div><ul class="simple">
<li>IJK is the experiment number</li>
<li>Example: <em>http://neutron.ornl.gov/user_data/hb2a/exp400/Datafiles/HB2A_exp0400__exclude_detectors.txt</em></li>
</ul>
</div></blockquote>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Detector gaps: The 2-theta gap (in unit degrees) can be changed among cycles.</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Location example: <em>http://neutron.ornl.gov/user_data/hb2a/exp400/Datafiles/HB2A_exp0400__gaps.txt</em></li>
</ul>
</div></blockquote>
</div></blockquote>
<div class="section" id="limitation">
<h2>Limitation<a class="headerlink" href="#limitation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>HFIR powder reduction GUI supports for instrument HB2A only in release 3.4.0;</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="FilterEventUI.html" title="Previous Chapter: Filter Events Interface"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Filter Events In...</span>
    </a>
  </li>
  <li>
    <a href="HFIR_4Circle_Reduction.html" title="Next Chapter: HFIR Single Crystal Reduction Interface"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">HFIR Single Crys... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>