<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LoadMcStas v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="LoadMcStasNexus v1" href="LoadMcStasNexus-v1.html" />
    <link rel="prev" title="LoadMask v1" href="LoadMask-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="loadmcstas-v1">
<span id="algm-loadmcstas"></span><span id="algm-loadmcstas-v1"></span><h1>LoadMcStas v1<a class="headerlink" href="#loadmcstas-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/LoadMcStas-v1_dlg.png"><img alt="../_images/LoadMcStas-v1_dlg.png" class="screenshot" src="../_images/LoadMcStas-v1_dlg.png" style="width: 444px;" /></a>
<p class="caption"><strong>LoadMcStas</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#mcstas-compiling-and-running" id="id4">McStas compiling and running</a></li>
<li><a class="reference internal" href="#mcstas-event-data-conventions" id="id5">McStas event data conventions</a></li>
<li><a class="reference internal" href="#tested-versions" id="id6">Tested versions</a></li>
<li><a class="reference internal" href="#references" id="id7">References</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source" id="id8">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Loads a McStas NeXus file into an workspace.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="3%" />
<col width="13%" />
<col width="5%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>The name of the Nexus file to load. Allowed extensions: [&#8216;.h5&#8217;, &#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An output workspace.</td>
</tr>
<tr class="row-even"><td>ErrorBarsSetTo1</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>When this property is set to false errors are set equal to data values, and when set to true all errors are set equal to one. This property defaults to false</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Reads a McStas Nexus file into a Mantid WorkspaceGroup with a
user-supplied name. Data generated by McStas monitor components are
stored in workspaces of type Workspace2D or Event.</p>
<p>For further information about Mcstas and Mantid see <a class="reference external" href="https://github.com/McStasMcXtrace/McCode/wiki/McStas-and-Mantid">here</a>.</p>
<p>LoadMcStas replaces LoadMcStasEventNexus. LoadMcStas can be used for
reading McStas 2.1 histogram and event data. LoadMcStasNexus can be used
for reading McStas 2.0 histogram data.</p>
<div class="section" id="mcstas-compiling-and-running">
<h3><a class="toc-backref" href="#id4">McStas compiling and running</a><a class="headerlink" href="#mcstas-compiling-and-running" title="Permalink to this headline">¶</a></h3>
<p>McStas 2.1 event data and the corresponding IDF for Mantid are generated as
follows using these commands from an xterm:</p>
<ul class="simple">
<li>Compile McStas instrument code:
<tt class="docutils literal"><span class="pre">mcstas</span> <span class="pre">templateSANS_Mantid.instr</span> <span class="pre">--trace</span></tt></li>
<li>Compile c code:
<tt class="docutils literal"><span class="pre">gcc</span> <span class="pre">-o</span> <span class="pre">templateSANS_Mantid.out</span> <span class="pre">templateSANS_Mantid.c</span> <span class="pre">-lm</span> <span class="pre">-DUSE_NEXUS</span> <span class="pre">-lNeXus</span></tt></li>
<li>Generate IDF:
<tt class="docutils literal"><span class="pre">mcdisplay</span> <span class="pre">templateSANS_Mantid.instr</span> <span class="pre">--format=Mantid</span> <span class="pre">-n0</span></tt></li>
<li>Run simulation:
<tt class="docutils literal"><span class="pre">./templateSANS_Mantid.out</span> <span class="pre">--format=Nexus</span></tt></li>
</ul>
<p>The templateSANS_Mantid.instr file used in the above example can be found in
McStas neutron suite.</p>
</div>
<div class="section" id="mcstas-event-data-conventions">
<h3><a class="toc-backref" href="#id5">McStas event data conventions</a><a class="headerlink" href="#mcstas-event-data-conventions" title="Permalink to this headline">¶</a></h3>
<p>For McStas to auto generate an IDF the McStas instrument file must obey:</p>
<ul class="simple">
<li>McStas instrument file name and the McStas defined name of the instrument must be the same
<tt class="docutils literal"><span class="pre">E.g.</span> <span class="pre">templateSANS_Mantid.instr</span> <span class="pre">and</span> <span class="pre">&quot;DEFINE</span> <span class="pre">INSTRUMENT</span> <span class="pre">templateSANS_Mantid(....</span> <span class="pre">)&quot;</span></tt></li>
<li>In the McStas instrument file the source must be named &#8220;souceMantid&#8221;
<tt class="docutils literal"><span class="pre">E.g.</span> <span class="pre">&quot;COMPONENT</span> <span class="pre">sourceMantid</span> <span class="pre">=</span> <span class="pre">Source_simple(....</span> <span class="pre">)&quot;</span></tt></li>
<li>In the McStas instrument file the sample must be named &#8220;sampleMantid&#8221;
<tt class="docutils literal"><span class="pre">E.g.</span> <span class="pre">&quot;COMPONENT</span> <span class="pre">sampleMantid</span> <span class="pre">=</span> <span class="pre">Sans_spheres(....</span> <span class="pre">)&quot;</span></tt></li>
<li>In the McStas instrument file the event monitors must be named &#8220;nD_Mantid_#&#8221;
<tt class="docutils literal"><span class="pre">E.g.</span> <span class="pre">&quot;COMPONENT</span> <span class="pre">nD_Mantid_1</span> <span class="pre">=</span> <span class="pre">Monitor_nD(....</span> <span class="pre">)&quot;</span></tt></li>
</ul>
<p>The McStas component monitor_nD must be called with the argument:
options =&#8221;mantid square x limits=[-0.2 0.2] bins=128 y limits=[-0.2 0.2] bins=128, neutron pixel t, list all neutrons&#8221;.
Number of bins and limits can be chosen freely.</p>
</div>
<div class="section" id="tested-versions">
<h3><a class="toc-backref" href="#id6">Tested versions</a><a class="headerlink" href="#tested-versions" title="Permalink to this headline">¶</a></h3>
<p>The new features added to McStas has been tested on the following platforms:</p>
<ul class="simple">
<li>Linux</li>
<li>Mac
(Use either the Intel or gcc 4.8 compiler. Simulations using Nexus format and
event data does not work using the Clang compiler.)</li>
</ul>
</div>
<div class="section" id="references">
<h3><a class="toc-backref" href="#id7">References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<p>For more information about McStas and its general usage for simulating neutron
scattering instruments and experiments visit the McStas homepage <a class="reference external" href="http://www.mcstas.org">http://www.mcstas.org</a>.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/DataHandling.html">DataHandling</a></p>
</div>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id8">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/940f1ec8a966df9d8a015c4c28a17c27d88e0d63/Code/Mantid/Framework/DataHandling/src/LoadMcStas.cpp">LoadMcStas.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/940f1ec8a966df9d8a015c4c28a17c27d88e0d63/Code/Mantid/Framework/DataHandling/inc/MantidDataHandling/LoadMcStas.h">LoadMcStas.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadMask-v1.html" title="Previous Chapter: LoadMask v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; LoadMask v1</span>
    </a>
  </li>
  <li>
    <a href="LoadMcStasNexus-v1.html" title="Next Chapter: LoadMcStasNexus v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">LoadMcStasNexus ... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>