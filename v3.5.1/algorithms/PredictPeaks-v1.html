<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PredictPeaks v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="PreprocessDetectorsToMD v1" href="PreprocessDetectorsToMD-v1.html" />
    <link rel="prev" title="PredictFractionalPeaks v1" href="PredictFractionalPeaks-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="predictpeaks-v1">
<span id="algm-predictpeaks"></span><span id="algm-predictpeaks-v1"></span><h1>PredictPeaks v1<a class="headerlink" href="#predictpeaks-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/PredictPeaks-v1_dlg.png"><img alt="../_images/PredictPeaks-v1_dlg.png" class="screenshot" src="../_images/PredictPeaks-v1_dlg.png" style="width: 301px;" /></a>
<p class="caption"><strong>PredictPeaks</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#using-hklpeaksworkspace" id="id4">Using HKLPeaksWorkspace</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Using a known crystal lattice and UB matrix, predict where single crystal peaks should be found in detector/TOF space. Creates a PeaksWorkspace containing the peaks at the expected positions.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="2%" />
<col width="8%" />
<col width="3%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An input workspace (MatrixWorkspace, MDEventWorkspace, or PeaksWorkspace) containing:   - The relevant Instrument (calibrated as needed).   - A sample with a UB matrix.   - The goniometer rotation matrix.</td>
</tr>
<tr class="row-odd"><td>WavelengthMin</td>
<td>Input</td>
<td>number</td>
<td>0.1</td>
<td>Minimum wavelength limit at which to start looking for single-crystal peaks.</td>
</tr>
<tr class="row-even"><td>WavelengthMax</td>
<td>Input</td>
<td>number</td>
<td>100</td>
<td>Maximum wavelength limit at which to stop looking for single-crystal peaks.</td>
</tr>
<tr class="row-odd"><td>MinDSpacing</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Minimum d-spacing of peaks to consider. Default = 1.0</td>
</tr>
<tr class="row-even"><td>MaxDSpacing</td>
<td>Input</td>
<td>number</td>
<td>100</td>
<td>Maximum d-spacing of peaks to consider.</td>
</tr>
<tr class="row-odd"><td>ReflectionCondition</td>
<td>Input</td>
<td>string</td>
<td>Primitive</td>
<td>Which reflection condition applies to this crystal, reducing the number of expected HKL peaks? Allowed values: [&#8216;Primitive&#8217;, &#8216;C-face centred&#8217;, &#8216;A-face centred&#8217;, &#8216;B-face centred&#8217;, &#8216;Body centred&#8217;, &#8216;All-face centred&#8217;, &#8216;Rhombohedrally centred, obverse&#8217;, &#8216;Rhombohedrally centred, reverse&#8217;, &#8216;Hexagonally centred, reverse&#8217;]</td>
</tr>
<tr class="row-even"><td>HKLPeaksWorkspace</td>
<td>Input</td>
<td>PeaksWorkspace</td>
<td>&nbsp;</td>
<td>Optional: An input PeaksWorkspace with the HKL of the peaks that we should predict.  The WavelengthMin/Max and Min/MaxDSpacing parameters are unused if this is specified.</td>
</tr>
<tr class="row-odd"><td>RoundHKL</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>When using HKLPeaksWorkspace, this will round the HKL values in the HKLPeaksWorkspace to the nearest integers if checked. Keep unchecked to use the original values</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td>PeaksWorkspace</td>
<td>&nbsp;</td>
<td>An output PeaksWorkspace.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm will predict the position of single-crystal diffraction
peaks (both in detector position/TOF and Q-space) and create an output
<a class="reference internal" href="../concepts/PeaksWorkspace.html#peaksworkspace"><em>PeaksWorkspace</em></a> containing the result.</p>
<p>This algorithm uses the InputWorkspace to determine the instrument in
use, as well as the UB Matrix and Unit Cell of the sample used. You can
use the <a class="reference internal" href="CopySample-v1.html#algm-copysample"><em>CopySample v1</em></a> algorithm (with CopyLattice=1) to
copy a UB matrix from a PeaksWorkspace to another workspace.</p>
<p>The algorithm operates by calculating the scattering direction (given
the UB matrix) for a particular HKL, and determining whether that hits a
detector. The Max/MinDSpacing parameters are used to determine what
HKL&#8217;s to try.</p>
<p>The parameters of WavelengthMin/WavelengthMax also limit the peaks
attempted to those that can be detected/produced by your instrument.</p>
<div class="section" id="using-hklpeaksworkspace">
<h3><a class="toc-backref" href="#id4">Using HKLPeaksWorkspace</a><a class="headerlink" href="#using-hklpeaksworkspace" title="Permalink to this headline">¶</a></h3>
<p>If you specify the HKLPeaksWorkspace parameter, then the algorithm will
use the list of HKL in that workspace as the starting point of HKLs,
instead of doing all HKLs within range of Max/MinDSpacing and
WavelengthMin/WavelengthMax.</p>
<p>A typical use case for this method is to use
<a class="reference internal" href="FindPeaksMD-v1.html#algm-findpeaksmd"><em>FindPeaksMD v1</em></a> followed by <a class="reference internal" href="IndexPeaks-v1.html#algm-indexpeaks"><em>IndexPeaks v1</em></a> to
find the HKL of each peak. The HKLs found will be floats, so specify
RoundHKL=True in PredictPeaks to predict the position at the exact
integer HKL. This may help locate the center of peaks.</p>
<p>Another way to use this algorithm is to use
<a class="reference internal" href="CreatePeaksWorkspace-v1.html#algm-createpeaksworkspace"><em>CreatePeaksWorkspace v1</em></a> to create a workspace
with the desired number of peaks. Use python or the GUI to enter the
desired HKLs. If these are fraction (e.g. magnetic peaks) then make sure
RoundHKL=False.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Algorithm <a class="reference internal" href="PredictFractionalPeaks-v1.html#algm-predictfractionalpeaks"><em>PredictFractionalPeaks v1</em></a></p>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Crystal.html">Crystal</a></p>
</div>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/940f1ec8a966df9d8a015c4c28a17c27d88e0d63/Code/Mantid/Framework/Crystal/src/PredictPeaks.cpp">PredictPeaks.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/940f1ec8a966df9d8a015c4c28a17c27d88e0d63/Code/Mantid/Framework/Crystal/inc/MantidCrystal/PredictPeaks.h">PredictPeaks.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PredictFractionalPeaks-v1.html" title="Previous Chapter: PredictFractionalPeaks v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; PredictFractiona...</span>
    </a>
  </li>
  <li>
    <a href="PreprocessDetectorsToMD-v1.html" title="Next Chapter: PreprocessDetectorsToMD v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">PreprocessDetect... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>