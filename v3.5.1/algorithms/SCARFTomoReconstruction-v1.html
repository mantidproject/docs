<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SCARFTomoReconstruction v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="SCDCalibratePanels v1" href="SCDCalibratePanels-v1.html" />
    <link rel="prev" title="SANSWideAngleCorrection v1" href="SANSWideAngleCorrection-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="scarftomoreconstruction-v1">
<span id="algm-scarftomoreconstruction"></span><span id="algm-scarftomoreconstruction-v1"></span><h1>SCARFTomoReconstruction v1<a class="headerlink" href="#scarftomoreconstruction-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/SCARFTomoReconstruction-v1_dlg.png"><img alt="../_images/SCARFTomoReconstruction-v1_dlg.png" class="screenshot" src="../_images/SCARFTomoReconstruction-v1_dlg.png" style="width: 216px;" /></a>
<p class="caption"><strong>SCARFTomoReconstruction</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Perform a control action on jobs running on the SCARF computer cluster at RAL, STFC (<a class="reference external" href="http://www.scarf.rl.ac.uk/">http://www.scarf.rl.ac.uk/</a>)</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="3%" />
<col width="3%" />
<col width="19%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>UserName</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Name of the user to authenticate as</td>
</tr>
<tr class="row-odd"><td>Action</td>
<td>Input</td>
<td>string</td>
<td>LogIn</td>
<td>Choose the operation to perform on the compute resource <a class="reference external" href="mailto:SCARF&#37;&#52;&#48;STFC">SCARF<span>&#64;</span>STFC</a>. Allowed values: [&#8216;LogIn&#8217;, &#8216;LogOut&#8217;, &#8216;Ping&#8217;, &#8216;Upload&#8217;, &#8216;SubmitJob&#8217;, &#8216;JobStatus&#8217;, &#8216;JobStatusByID&#8217;, &#8216;Download&#8217;, &#8216;CancelJob&#8217;]</td>
</tr>
<tr class="row-even"><td>Password</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The password for the user</td>
</tr>
<tr class="row-odd"><td>RunnablePath</td>
<td>Input</td>
<td>string</td>
<td>/work/imat/webservice_test/tomopy/imat_recon_FBP.py</td>
<td>The path (on the remote compute resource) of a file to run (example: shell or python script)</td>
</tr>
<tr class="row-even"><td>JobOptions</td>
<td>Input</td>
<td>string</td>
<td>/work/imat/webservice_test/remote_output/<a href="#id6"><span class="problematic" id="id7">test_</span></a></td>
<td>Options for the job command line, application dependent. It can include for example the NXTomo input file when using savu for tomographic reconstruction.</td>
</tr>
<tr class="row-odd"><td>JobName</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Optional name for the job, if not given then a name will be generated internally or at the compute resource</td>
</tr>
<tr class="row-even"><td>FileToUpload</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Name of the file (local, full path) to upload to the compute resource/server</td>
</tr>
<tr class="row-odd"><td>DestinationDirectory</td>
<td>Input</td>
<td>string</td>
<td>/work/imat</td>
<td>Path where to upload the file on the compute resource/server</td>
</tr>
<tr class="row-even"><td>RemoteJobsID</td>
<td>Output</td>
<td>str list</td>
<td>&nbsp;</td>
<td>ID strings for the jobs</td>
</tr>
<tr class="row-odd"><td>RemoteJobsNames</td>
<td>Output</td>
<td>str list</td>
<td>&nbsp;</td>
<td>Names of the jobs</td>
</tr>
<tr class="row-even"><td>RemoteJobsStatus</td>
<td>Output</td>
<td>str list</td>
<td>&nbsp;</td>
<td>Strings describing the current status of the jobs</td>
</tr>
<tr class="row-odd"><td>RemoteJobsCommands</td>
<td>Output</td>
<td>str list</td>
<td>&nbsp;</td>
<td>Strings with the command line run for the jobs</td>
</tr>
<tr class="row-even"><td>JobID</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>The ID of a job currently running or recently run on the compute resource</td>
</tr>
<tr class="row-odd"><td>RemoteJobName</td>
<td>Output</td>
<td>string</td>
<td>&nbsp;</td>
<td>Name of the remote job</td>
</tr>
<tr class="row-even"><td>RemoteJobStatus</td>
<td>Output</td>
<td>string</td>
<td>&nbsp;</td>
<td>Current status of the job (running, exited, etc.)</td>
</tr>
<tr class="row-odd"><td>RemoteJobCommand</td>
<td>Output</td>
<td>string</td>
<td>&nbsp;</td>
<td>Command line run remotely for this job</td>
</tr>
<tr class="row-even"><td>RemoteJobFilename</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Name of the job file to download - you can give an empty name to download  all the files of this job.</td>
</tr>
<tr class="row-odd"><td>LocalDirectory</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Path to a local directory/folder where to download files from the compute resource/server</td>
</tr>
<tr class="row-even"><td>DownloadJobID</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>ID of the job for which to download files. A job with this ID must be running or have been run on the compute resource.</td>
</tr>
<tr class="row-odd"><td>CancelJobID</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>The ID for a currently running job on <a class="reference external" href="mailto:SCARF&#37;&#52;&#48;STFC">SCARF<span>&#64;</span>STFC</a></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Algorithm to control jobs running on the SCARF computer cluster at
RAL, STFC (see <a class="reference external" href="http://www.scarf.rl.ac.uk/">http://www.scarf.rl.ac.uk/</a> for more information). This
algorithm can be used to log in and out from the cluster, and to
initiate, query the status of, or cancel a job. It has been introduced
to control tomographic reconstruction jobs but in principle it can be
used for any other task.</p>
<p>In a typical use case or session you would use the algorithm a first
time to login (for which you need to select the &#8216;LogIn&#8217; action and set
the username and password fields). After this step you can use the
algorithm again several times, to submit jobs (setting the action
&#8216;SubmitJob&#8217;), query the status of the jobs running on the computer
cluster (setting the action to &#8216;JobStatus&#8217; or &#8216;JobStatusByID&#8217;), cancel
jobs (setting the action &#8216;CancelJob&#8217;) and log out from the cluster
(action &#8216;LogOut&#8217;). You can also upload and download files. After
logging out, subsequent submit or status queries will fail with an
informative message. Note that the server will log out users every
undetermined amount of time, which depends on server settings.</p>
<p>In principle, in a simple use case, the same username will be used in
all the calls to this algorithm. This means that you type in the
username only the first time that you use this algorithm, as it will
be remembered and filled in automatically in the next calls.  But note
that it is possible to change the username passed to the algorithm
every time you call the algorithm. This means that you can use this
algorithm to control jobs for multiple users simultaneously from the
same instance of Mantid. You can use for example use the username
associated to a particular project or instrument, and in parallel your
personal username for different jobs (which can be useful to
distinguish quick tests, calibration of parameters, etc.). For this to
work, you of course need to perform a &#8216;LogIn&#8217; action for every
username that is used in submit or query status actions.</p>
<p>The &#8216;JobStatus&#8217; and &#8216;JobStatusByID&#8217; actions produce an output several
output properties with status and general information about the jobs,
as retrieved from the compute resource/server.</p>
<p>The algorithm relies on a web service provided by the SCARF computer
cluster in order to control jobs on the cluster. If you use this
algorithm from its dialog (for example starting it from the algorithm
explorer in Mantid) the password will not be shown on the screen. This
algorithm can be used interactively. In such case, it is absolutely
not recommended to call it from scripts or the Python script
interpreter window, as you will be passing passwords as plain text.</p>
<p>The alternative ways to monitor and control your jobs are via shell
login and via the web platform at <a class="reference external" href="https://portal.scarf.rl.ac.uk/">https://portal.scarf.rl.ac.uk/</a>.</p>
<p>This algorithm is used by other components of Mantid, in particular
the custom graphical interface for tomography (IMAT instrument).</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">SCARFTomoReconstruction</span><span class="p">(</span><span class="n">UserName</span><span class="o">=</span><span class="s">&#39;foouser&#39;</span><span class="p">,</span> <span class="n">Action</span><span class="o">=</span><span class="s">&#39;Login&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;ValueError, as expected, because no Password= parameter given&quot;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">SCARFTomoReconstruction</span><span class="p">(</span><span class="n">UserName</span><span class="o">=</span><span class="s">&#39;foouser&#39;</span><span class="p">,</span> <span class="n">Action</span><span class="o">=</span><span class="s">&#39;Submit&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">&quot;ValueError, as expected, as it was not previously logged on&quot;</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>ValueError, as expected, because no Password= parameter given
ValueError, as expected, as it was not previously logged on
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Remote.html">Remote</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/940f1ec8a966df9d8a015c4c28a17c27d88e0d63/Code/Mantid/Framework/RemoteAlgorithms/src/SCARFTomoReconstruction.cpp">SCARFTomoReconstruction.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/940f1ec8a966df9d8a015c4c28a17c27d88e0d63/Code/Mantid/Framework/RemoteAlgorithms/inc/MantidRemoteAlgorithms/SCARFTomoReconstruction.h">SCARFTomoReconstruction.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SANSWideAngleCorrection-v1.html" title="Previous Chapter: SANSWideAngleCorrection v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; SANSWideAngleCor...</span>
    </a>
  </li>
  <li>
    <a href="SCDCalibratePanels-v1.html" title="Next Chapter: SCDCalibratePanels v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">SCDCalibratePane... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>