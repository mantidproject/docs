<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LoadMuonNexus v2</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="LoadNMoldyn3Ascii v1" href="LoadNMoldyn3Ascii-v1.html" />
    <link rel="prev" title="LoadMuonNexus v1" href="LoadMuonNexus-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="loadmuonnexus-v2">
<span id="algm-loadmuonnexus"></span><span id="algm-loadmuonnexus-v2"></span><h1>LoadMuonNexus v2<a class="headerlink" href="#loadmuonnexus-v2" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/LoadMuonNexus-v2_dlg.png"><img alt="../_images/LoadMuonNexus-v2_dlg.png" class="screenshot" src="../_images/LoadMuonNexus-v2_dlg.png" style="width: 258px;" /></a>
<p class="caption"><strong>LoadMuonNexus</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#time-series-data" id="id4">Time series data</a></li>
<li><a class="reference internal" href="#errors" id="id5">Errors</a></li>
<li><a class="reference internal" href="#time-bin-data" id="id6">Time bin data</a></li>
<li><a class="reference internal" href="#multiperiod-data" id="id7">Multiperiod data</a></li>
<li><a class="reference internal" href="#childalgorithms-used" id="id8">ChildAlgorithms used</a></li>
</ul>
</li>
<li><a class="reference internal" href="#previous-versions" id="id9">Previous Versions</a><ul>
<li><a class="reference internal" href="#version-1" id="id10">Version 1</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source" id="id11">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>The LoadMuonNexus algorithm will read the given NeXus Muon data file Version 2 and use the results to populate the named workspace. LoadMuonNexus may be invoked by LoadNexus if it is given a NeXus file of this type.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="3%" />
<col width="13%" />
<col width="5%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>The name of the Nexus file to load. Allowed extensions: [&#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The name of the workspace to be created as the output of the algorithm. For multiperiod files, one workspace will be generated for each period</td>
</tr>
<tr class="row-even"><td>SpectrumMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Index number of the first spectrum to read (default 1)</td>
</tr>
<tr class="row-odd"><td>SpectrumMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Index of last spectrum to read (default the last spectrum)</td>
</tr>
<tr class="row-even"><td>SpectrumList</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>Array, or comma separated list, of indexes of spectra to load</td>
</tr>
<tr class="row-odd"><td>AutoGroup</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Determines whether the spectra are automatically grouped together based on the groupings in the NeXus file, only for single period data (default no)</td>
</tr>
<tr class="row-even"><td>EntryNumber</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>0 indicates that every entry is loaded, into a separate workspace within a group. A positive number identifies one entry to be loaded, into one worskspace</td>
</tr>
<tr class="row-odd"><td>MainFieldDirection</td>
<td>Output</td>
<td>string</td>
<td>&nbsp;</td>
<td>Output the main field direction if specified in Nexus file (default Transverse). Allowed values: [&#8216;Transverse&#8217;, &#8216;Longitudinal&#8217;]</td>
</tr>
<tr class="row-even"><td>TimeZero</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Time zero in units of micro-seconds (default to 0.0)</td>
</tr>
<tr class="row-odd"><td>FirstGoodData</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>First good data in units of micro-seconds (default to 0.0)</td>
</tr>
<tr class="row-even"><td>DeadTimeTable</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td>&nbsp;</td>
<td>Table or a group of tables containing detector dead times</td>
</tr>
<tr class="row-odd"><td>DetectorGroupingTable</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td>&nbsp;</td>
<td>Table or a group of tables with information about the detector grouping stored in the file (if any)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The algorithm LoadMuonNexus will read a Muon Nexus data file (original
format) and place the data into the named workspace. The file name can
be an absolute or relative path and should have the extension .nxs or
.NXS. If the file contains data for more than one period, a separate
workspace will be generated for each. After the first period the
workspace names will have &#8220;_2&#8221;, &#8220;_3&#8221;, and so on, appended to the given
workspace name. For single period data, the optional parameters can be
used to control which spectra are loaded into the workspace. If
spectrum_min and spectrum_max are given, then only that range to data
will be loaded. If a spectrum_list is given than those values will be
loaded.</p>
<ul class="simple">
<li>TODO get XML descriptions of Muon instruments. This data is not in
existing Muon Nexus files.</li>
<li>TODO load the spectra detector mapping. This may be very simple for
Muon instruments.</li>
</ul>
<div class="section" id="time-series-data">
<h3><a class="toc-backref" href="#id4">Time series data</a><a class="headerlink" href="#time-series-data" title="Permalink to this headline">¶</a></h3>
<p>The log data in the Nexus file (NX_LOG sections) will be loaded as
TimeSeriesProperty data within the workspace. Time is stored as seconds
from the Unix epoch.</p>
</div>
<div class="section" id="errors">
<h3><a class="toc-backref" href="#id5">Errors</a><a class="headerlink" href="#errors" title="Permalink to this headline">¶</a></h3>
<p>The error for each histogram count is set as the square root of the
number of counts.</p>
</div>
<div class="section" id="time-bin-data">
<h3><a class="toc-backref" href="#id6">Time bin data</a><a class="headerlink" href="#time-bin-data" title="Permalink to this headline">¶</a></h3>
<p>The <em>corrected_times</em> field of the Nexus file is used to provide time
bin data and the bin edge values are calculated from these bin centre
times.</p>
</div>
<div class="section" id="multiperiod-data">
<h3><a class="toc-backref" href="#id7">Multiperiod data</a><a class="headerlink" href="#multiperiod-data" title="Permalink to this headline">¶</a></h3>
<p>To determine if a file contains data from more than one period the field
<em>switching_states</em> is read from the Nexus file. If this value is
greater than one it is taken to be the number of periods, <img class="math" src="../_images/math/5e5bd5d2589c3ad6543a61a2a8cb97d7902f5267.png" alt="N_p" style="vertical-align: -6px"/> of
the data. In this case the <img class="math" src="../_images/math/c617c4f607e4f2b95fcaddec7b1c7c1182b5664c.png" alt="N_s" style="vertical-align: -3px"/> spectra in the <em>histogram_data</em>
field are split with <img class="math" src="../_images/math/251f1b7a750ce59452e460e8674a7893b174e5a1.png" alt="N_s/N_p" style="vertical-align: -6px"/> assigned to each period.</p>
</div>
<div class="section" id="childalgorithms-used">
<h3><a class="toc-backref" href="#id8">ChildAlgorithms used</a><a class="headerlink" href="#childalgorithms-used" title="Permalink to this headline">¶</a></h3>
<p>The ChildAlgorithms used by LoadMuonNexus are:</p>
<ul class="simple">
<li>LoadMuonLog - this reads log information from the Nexus file and uses
it to create TimeSeriesProperty entries in the workspace.</li>
<li>LoadInstrument - this algorithm looks for an XML description of the
instrument and if found reads it.</li>
<li>LoadIntstrumentFromNexus - this is called if the normal
LoadInstrument fails. As the Nexus file has limited instrument data,
this only populates a few fields.</li>
</ul>
</div>
</div>
<div class="section" id="previous-versions">
<h2><a class="toc-backref" href="#id9">Previous Versions</a><a class="headerlink" href="#previous-versions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="version-1">
<h3><a class="toc-backref" href="#id10">Version 1</a><a class="headerlink" href="#version-1" title="Permalink to this headline">¶</a></h3>
<p>Version 1 supports the loading version 1.0 of the muon nexus format.
This is still in active use, if the current version of LoadMuonNexus
detects that it has been asked to load a previous version muon nexus
file it will call the previous version of the algorithm to perform the
task.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/DataHandling.html">DataHandling</a> | <a class="reference external" href="categories/Nexus.html">Nexus</a> | <a class="reference external" href="categories/Muon.html">Muon</a></p>
</div>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id11">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/613f181e9f72836daa8dfbef179177ec3655c251/Code/Mantid/Framework/DataHandling/src/LoadMuonNexus2.cpp">LoadMuonNexus2.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/613f181e9f72836daa8dfbef179177ec3655c251/Code/Mantid/Framework/DataHandling/inc/MantidDataHandling/LoadMuonNexus2.h">LoadMuonNexus2.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadMuonNexus-v1.html" title="Previous Chapter: LoadMuonNexus v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; LoadMuonNexus v1</span>
    </a>
  </li>
  <li>
    <a href="LoadNMoldyn3Ascii-v1.html" title="Next Chapter: LoadNMoldyn3Ascii v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">LoadNMoldyn3Asci... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>