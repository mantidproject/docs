<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PhaseQuad v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="PlotAsymmetryByLogValue v1" href="PlotAsymmetryByLogValue-v1.html" />
    <link rel="prev" title="PerformIndexOperations v1" href="PerformIndexOperations-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="phasequad-v1">
<span id="algm-phasequad"></span><span id="algm-phasequad-v1"></span><h1>PhaseQuad v1<a class="headerlink" href="#phasequad-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/PhaseQuad-v1_dlg.png"><img alt="../_images/PhaseQuad-v1_dlg.png" class="screenshot" src="../_images/PhaseQuad-v1_dlg.png" style="width: 310px;" /></a>
<p class="caption"><strong>PhaseQuad</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#overview" id="id2">Overview</a></li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculate Muon squashograms from InputWorkspace and PhaseTable/PhaseList.</p>
</div>
<div class="section" id="overview">
<h2><a class="toc-backref" href="#id2">Overview</a><a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This algorithm provides a method for combining signals from multiple detector segments to form two output
signals in quadrature phase. It is of particular use when working with muon spin rotation signals measured
using highly segmented detector arrays that are typically found at pulsed muon sources (ISIS has instruments
with up to 600 detector elements). The method allows information from individual detectors to be combined in
a way that makes full use of the dataset.</p>
<p>This algorithm is frequently run as a precursor to making a Rotating Reference Frame transformation of
the dataset using the algorithm <a class="reference internal" href="RRFMuon-v1.html#algm-rrfmuon"><em>RRFMuon v1</em></a>. Both algorithms are fully described in the article
by T.M. Riseman and J.H. Brewer [Hyp. Int., 65, (1990), 1107].</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="4%" />
<col width="26%" />
<col width="8%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Name of the input workspace containing the spectra</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Name of the output workspace to hold squashograms</td>
</tr>
<tr class="row-even"><td>PhaseTable</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Name of the Phase Table</td>
</tr>
<tr class="row-odd"><td>PulseOver</td>
<td>Input</td>
<td>number</td>
<td>60</td>
<td>Bin number when the pulse is over. Mandatory if PhaseTable is provided</td>
</tr>
<tr class="row-even"><td>MeanLag</td>
<td>Input</td>
<td>number</td>
<td>127.702</td>
<td>Average Lag value over detectors</td>
</tr>
<tr class="row-odd"><td>DoublePulse</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If signal is double-pulse</td>
</tr>
<tr class="row-even"><td>PhaseList</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>A space-delimited text file with a six-row header. Allowed extensions: [&#8216;.inf&#8217;]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Assuming that the <em>InputWorkspace</em> contains measured
counts as a function of time, the algorithm returns a workspace
containing two spectra (squashograms) as a function of the same time binning.
Either <em>PhaseList</em> or <em>PhaseTable</em> must be provided. Note: The first column is ignored in both cases.</p>
<p><em>PhaseList</em> is expected to have a six-row header, including overall information, and 6 columns:</p>
<ol class="arabic simple">
<li>Boolean type, containing if detector is OK</li>
<li>Double type, containing detector asymmetry</li>
<li>Double type, containing detector phase</li>
<li>Double type, containing detector lag</li>
<li>Double type, containing detector deadtime <img class="math" src="../_images/math/5f284c9713b9515a4975ac98a8bc88f1749aa7aa.png" alt="c" style="vertical-align: 0px"/></li>
<li>Double type, containing detector deadtime <img class="math" src="../_images/math/47e031122c1df8bef662b93f6a2c0751959a98d1.png" alt="m" style="vertical-align: 0px"/></li>
</ol>
<p><em>PhaseTable</em> is expected to have four columns:</p>
<ol class="arabic simple">
<li>Boolean type, containing if detector is OK</li>
<li>Double type, containing detector asymmetry</li>
<li>Double type, containing detector phase</li>
<li>Double type, containing detector deadtime</li>
</ol>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - Computing squashograms from PhaseList:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Load a set of spectra from a EMU file</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadMuonNexus</span><span class="p">(</span><span class="s">&#39;emu00006473.nxs&#39;</span><span class="p">)</span>

<span class="c"># Create a PhaseList file with some arbitrary detector information</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">phaselist_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">&quot;~&quot;</span><span class="p">),</span><span class="s">&quot;PhaseList.txt&quot;</span><span class="p">)</span>
<span class="n">phaselist_file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">phaselist_path</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">phaselist_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;MuSR</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">phaselist_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Dummy line</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">phaselist_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Dummy line</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">phaselist_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Dummy line</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">phaselist_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Dummy line</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">phaselist_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;32 0 60 0.0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">):</span>
     <span class="n">phaselist_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;1 50.0 0.00 0 0 1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
     <span class="n">phaselist_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;1 50.0 1.57 0 0 1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="n">phaselist_file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">ows</span> <span class="o">=</span> <span class="n">PhaseQuad</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;ws&#39;</span><span class="p">,</span><span class="n">PhaseList</span><span class="o">=</span><span class="n">phaselist_path</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;Output workspace contains&quot;</span><span class="p">,</span> <span class="n">ows</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">(),</span> <span class="s">&quot;histograms&quot;</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Output workspace contains 2 histograms
</pre></div>
</div>
<p><strong>Example - Computing squashograms from PhaseTable:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Load a set of spectra from a EMU file</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadMuonNexus</span><span class="p">(</span><span class="s">&#39;emu00006473.nxs&#39;</span><span class="p">)</span>

<span class="c"># Create a PhaseTable with some arbitrary detector information</span>
<span class="n">tab</span> <span class="o">=</span> <span class="n">CreateEmptyTableWorkspace</span><span class="p">()</span>
<span class="n">tab</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;bool&#39;</span><span class="p">,</span> <span class="s">&#39;Status&#39;</span><span class="p">)</span>
<span class="n">tab</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;double&#39;</span><span class="p">,</span> <span class="s">&#39;Asymmetry&#39;</span><span class="p">)</span>
<span class="n">tab</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;double&#39;</span><span class="p">,</span> <span class="s">&#39;Phase&#39;</span><span class="p">)</span>
<span class="n">tab</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;double&#39;</span><span class="p">,</span> <span class="s">&#39;DeadTime&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">16</span><span class="p">):</span>
   <span class="n">tab</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">0.00</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
   <span class="n">tab</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mf">50.0</span><span class="p">,</span> <span class="mf">1.57</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="n">ows</span> <span class="o">=</span> <span class="n">PhaseQuad</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;ws&#39;</span><span class="p">,</span><span class="n">PhaseTable</span><span class="o">=</span><span class="s">&#39;tab&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;Output workspace contains&quot;</span><span class="p">,</span> <span class="n">ows</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">(),</span> <span class="s">&quot;histograms&quot;</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Output workspace contains 2 histograms
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Muon.html">Muon</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/613f181e9f72836daa8dfbef179177ec3655c251/Code/Mantid/Framework/Algorithms/src/PhaseQuadMuon.cpp">PhaseQuadMuon.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/613f181e9f72836daa8dfbef179177ec3655c251/Code/Mantid/Framework/Algorithms/inc/MantidAlgorithms/PhaseQuadMuon.h">PhaseQuadMuon.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PerformIndexOperations-v1.html" title="Previous Chapter: PerformIndexOperations v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; PerformIndexOper...</span>
    </a>
  </li>
  <li>
    <a href="PlotAsymmetryByLogValue-v1.html" title="Next Chapter: PlotAsymmetryByLogValue v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">PlotAsymmetryByL... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>