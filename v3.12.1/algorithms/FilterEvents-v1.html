<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>FilterEvents v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.12.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="FilterEventsByLogValuePreNexus v2" href="FilterEventsByLogValuePreNexus-v2.html" />
    <link rel="prev" title="FilterByXValue v1" href="FilterByXValue-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.12</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="filterevents-v1">
<span id="algm-filterevents"></span><span id="algm-filterevents-v1"></span><h1>FilterEvents v1<a class="headerlink" href="#filterevents-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/FilterEvents-v1_dlg.png"><img alt="../_images/FilterEvents-v1_dlg.png" class="screenshot" src="../_images/FilterEvents-v1_dlg.png" style="width: 269px;" /></a>
<p class="caption"><strong>FilterEvents</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#inputs" id="id4">Inputs</a><ul>
<li><a class="reference internal" href="#workspace-containing-splitters" id="id5">Workspace containing splitters</a><ul>
<li><a class="reference internal" href="#event-splitter" id="id6">Event splitter</a></li>
<li><a class="reference internal" href="#unit-of-input-splitters" id="id7">Unit of input splitters</a></li>
<li><a class="reference internal" href="#how-to-generate-input-workspace-containing-splitters" id="id8">How to generate input workspace containing splitters</a></li>
<li><a class="reference internal" href="#splitters-in-relative-time-or-absolute-time" id="id9">Splitters in relative time or absolute time</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#outputs" id="id10">Outputs</a></li>
<li><a class="reference internal" href="#calibration-file" id="id11">Calibration File</a></li>
<li><a class="reference internal" href="#unfiltered-events" id="id12">Unfiltered Events</a></li>
<li><a class="reference internal" href="#difference-from-filterbylogvalue" id="id13">Difference from FilterByLogValue</a></li>
<li><a class="reference internal" href="#comparing-with-other-event-filtering-algorithms" id="id14">Comparing with other event filtering algorithms</a></li>
</ul>
</li>
<li><a class="reference internal" href="#developer-s-note" id="id15">Developer&#8217;s Note</a><ul>
<li><a class="reference internal" href="#splitters-given-by-tableworkspace" id="id16">Splitters given by TableWorkspace</a></li>
<li><a class="reference internal" href="#undefined-splitting-target" id="id17">Undefined splitting target</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id18">Usage</a></li>
<li><a class="reference internal" href="#source" id="id19">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Filter events from an EventWorkspace to one or multiple EventWorkspaces according to a series of splitters.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="2%" />
<col width="12%" />
<col width="5%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>EventWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An input event workspace</td>
</tr>
<tr class="row-odd"><td>SplitterWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An input SpilltersWorskpace for filtering</td>
</tr>
<tr class="row-even"><td>OutputWorkspaceBaseName</td>
<td>Input</td>
<td>string</td>
<td>OutputWorkspace</td>
<td>The base name to use for the output workspace</td>
</tr>
<tr class="row-odd"><td>InformationWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Optional output for the information of each splitter workspace index.</td>
</tr>
<tr class="row-even"><td>OutputTOFCorrectionWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>TOFCorrectWS</td>
<td>Name of output workspace for TOF correction factor.</td>
</tr>
<tr class="row-odd"><td>FilterByPulseTime</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Filter the event by its pulse time only for slow sample environment log.  This option can make execution of algorithm faster.  But it lowers precision.</td>
</tr>
<tr class="row-even"><td>GroupWorkspaces</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Option to group all the output workspaces.  Group name will be OutputWorkspaceBaseName.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspaceIndexedFrom1</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If selected, the minimum output workspace is indexed from 1 and continuous.</td>
</tr>
<tr class="row-even"><td>CorrectionToSample</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>Type of correction on neutron events to sample time from detector time.  Allowed values: [&#8216;None&#8217;, &#8216;Customized&#8217;, &#8216;Direct&#8217;, &#8216;Elastic&#8217;, &#8216;Indirect&#8217;]</td>
</tr>
<tr class="row-odd"><td>DetectorTOFCorrectionWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Name of table workspace containing the log time correction factor for each detector.</td>
</tr>
<tr class="row-even"><td>IncidentEnergy</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Value of incident energy (Ei) in meV in direct mode.</td>
</tr>
<tr class="row-odd"><td>SpectrumWithoutDetector</td>
<td>Input</td>
<td>string</td>
<td>Skip</td>
<td>Approach to deal with spectrum without detectors.  Allowed values: [&#8216;Skip&#8217;, &#8216;Skip only if TOF correction&#8217;]</td>
</tr>
<tr class="row-even"><td>SplitSampleLogs</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>If selected, all sample logs will be splitted by the  event splitters.  It is not recommended for fast event log splitters.</td>
</tr>
<tr class="row-odd"><td>NumberOutputWS</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Number of output output workspace splitted.</td>
</tr>
<tr class="row-even"><td>DBSpectrum</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Spectrum (workspace index) for debug purpose.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspaceNames</td>
<td>Output</td>
<td>str list</td>
<td>&nbsp;</td>
<td>List of output workspaces names</td>
</tr>
<tr class="row-even"><td>RelativeTime</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Flag to indicate that in the input Matrix splitting workspace,the time indicated by X-vector is relative to either run start time or some indicted time.</td>
</tr>
<tr class="row-odd"><td>FilterStartTime</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Start time for splitters that can be parsed to DateAndTime.</td>
</tr>
<tr class="row-even"><td>TimeSeriesPropertyLogs</td>
<td>Input</td>
<td>str list</td>
<td>&nbsp;</td>
<td>List of name of sample logs of TimeSeriesProperty format. They will be either excluded from splitting if ExcludedSpecifiedLogs is specified as True. Or They will be the only TimeSeriesProperty sample logs that will be split to child workspaces.</td>
</tr>
<tr class="row-odd"><td>ExcludeSpecifiedLogs</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>If true, all the TimeSeriesProperty logs listed will be excluded from duplicating. Otherwise, only those specified logs will be split.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm filters events from an <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>Event Workspace</em></a> to one or
multiple <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>EventWorkspaces</em></a> according to an input
<a class="reference internal" href="../api/python/mantid/api/ISplittersWorkspace.html#splittersworkspace"><em>Splitters Workspace</em></a> containing a series of splitters (i.e.,
<a class="reference internal" href="../api/python/mantid/api/ISplittersWorkspace.html#splittinginterval"><em>splitting intervals</em></a>).</p>
<div class="section" id="inputs">
<h3><a class="toc-backref" href="#id4">Inputs</a><a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h3>
<p>FilterEvents takes 2 mandatory input Workspaces and 1 optional
Workspace.  One of mandatory workspace is the <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>Event Workspace</em></a>
where the events are filtered from.  The other mandatory workspace is
workspace containing splitters.  It can be a MatrixWorkspace, a TableWorkspace or
a <a class="reference internal" href="../api/python/mantid/api/ISplittersWorkspace.html#splittersworkspace"><em>SplittersWorkspace</em></a>.</p>
<p>The optional workspace is a <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a>
for information of splitters.</p>
<div class="section" id="workspace-containing-splitters">
<h4><a class="toc-backref" href="#id5">Workspace containing splitters</a><a class="headerlink" href="#workspace-containing-splitters" title="Permalink to this headline">¶</a></h4>
<p>This algorithm accepts three types of workspace that contains event splitters.
- TableWorkspace: a general TableWorkspace with at three columns
- MatrixWorkspace: a 1-spectrum MatrixWorkspace
- SplittersWorkspace: an extended TableWorkspace with restrict definition on start and stop time.</p>
<div class="section" id="event-splitter">
<h5><a class="toc-backref" href="#id6">Event splitter</a><a class="headerlink" href="#event-splitter" title="Permalink to this headline">¶</a></h5>
<p>An event splitter contains three items, start time, stop time and splitting target (index).
All the events belonged to the same splitting target will be saved to a same output EventWorkspace.</p>
</div>
<div class="section" id="unit-of-input-splitters">
<h5><a class="toc-backref" href="#id7">Unit of input splitters</a><a class="headerlink" href="#unit-of-input-splitters" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li>MatrixWorkspace:  the unit must be second.</li>
<li>TableWorkspace: the unit must be second.</li>
<li>SplittersWorkspace: by the definition of SplittersWorkspace, the unit has to be nanosecond.</li>
</ul>
</div>
<div class="section" id="how-to-generate-input-workspace-containing-splitters">
<h5><a class="toc-backref" href="#id8">How to generate input workspace containing splitters</a><a class="headerlink" href="#how-to-generate-input-workspace-containing-splitters" title="Permalink to this headline">¶</a></h5>
<p>There are two ways to generate</p>
<p>Algorithm <a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><em>GenerateEventsFilter</em></a>
creates both the <a class="reference internal" href="../api/python/mantid/api/ISplittersWorkspace.html#splittersworkspace"><em>SplittersWorkspace</em></a> and
splitter information workspace.</p>
</div>
<div class="section" id="splitters-in-relative-time-or-absolute-time">
<h5><a class="toc-backref" href="#id9">Splitters in relative time or absolute time</a><a class="headerlink" href="#splitters-in-relative-time-or-absolute-time" title="Permalink to this headline">¶</a></h5>
<p>As the SplittersWorkspace is in format of <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a>, its time, i.e., the value in X vector, can be
relative time.</p>
<p>Property <tt class="docutils literal"><span class="pre">RelativeTime</span></tt> flags that the splitters&#8217; time is relative.
Property <tt class="docutils literal"><span class="pre">FilterStartTime</span></tt> specifies the starting time of the filter.
Or the shift of time of the splitters.
If it is not specified, then the algorithm will search for sample log <tt class="docutils literal"><span class="pre">run_start</span></tt>.</p>
</div>
</div>
</div>
<div class="section" id="outputs">
<h3><a class="toc-backref" href="#id10">Outputs</a><a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h3>
<p>The output will be one or multiple workspaces according to the number of
index in splitters. The output workspace name is the combination of
parameter OutputWorkspaceBaseName and the index in splitter.</p>
</div>
<div class="section" id="calibration-file">
<h3><a class="toc-backref" href="#id11">Calibration File</a><a class="headerlink" href="#calibration-file" title="Permalink to this headline">¶</a></h3>
<p>The calibration, or say correction, from the detector to sample must be
consider in fast log. Thus a calibration file is required. The math is</p>
<p><tt class="docutils literal"><span class="pre">TOF_calibrated&nbsp;=&nbsp;TOF_raw&nbsp;*&nbsp;correction(detector&nbsp;ID).</span></tt></p>
<p>The calibration is in column data format.</p>
<p>A reasonable approximation of the correction is</p>
<p><tt class="docutils literal"><span class="pre">correction(detector_ID)&nbsp;=&nbsp;L1/(L1+L2(detector_ID))</span></tt></p>
</div>
<div class="section" id="unfiltered-events">
<h3><a class="toc-backref" href="#id12">Unfiltered Events</a><a class="headerlink" href="#unfiltered-events" title="Permalink to this headline">¶</a></h3>
<p>Some events are not inside any splitters. They are put to a workspace
name ended with &#8216;_unfiltered&#8217;.</p>
<p>If input property &#8216;OutputWorkspaceIndexedFrom1&#8217; is set to True, then
this workspace shall not be outputed.</p>
</div>
<div class="section" id="difference-from-filterbylogvalue">
<h3><a class="toc-backref" href="#id13">Difference from FilterByLogValue</a><a class="headerlink" href="#difference-from-filterbylogvalue" title="Permalink to this headline">¶</a></h3>
<p>In FilterByLogValue(), EventList.splitByTime() is used.</p>
<p>In FilterEvents, if FilterByPulse is selected true,
EventList.SplitByTime is called; otherwise, EventList.SplitByFullTime()
is called instead.</p>
<p>The difference between splitByTime and splitByFullTime is that
splitByTime filters events by pulse time, and splitByFullTime considers
both pulse time and TOF.</p>
<p>Therefore, FilterByLogValue is not suitable for fast log filtering.</p>
</div>
<div class="section" id="comparing-with-other-event-filtering-algorithms">
<h3><a class="toc-backref" href="#id14">Comparing with other event filtering algorithms</a><a class="headerlink" href="#comparing-with-other-event-filtering-algorithms" title="Permalink to this headline">¶</a></h3>
<p>Wiki page <a class="reference internal" href="../concepts/EventFiltering.html#eventfiltering"><em>Event Filtering</em></a> has a detailed introduction on event
filtering in MantidPlot.</p>
</div>
</div>
<div class="section" id="developer-s-note">
<h2><a class="toc-backref" href="#id15">Developer&#8217;s Note</a><a class="headerlink" href="#developer-s-note" title="Permalink to this headline">¶</a></h2>
<div class="section" id="splitters-given-by-tableworkspace">
<h3><a class="toc-backref" href="#id16">Splitters given by TableWorkspace</a><a class="headerlink" href="#splitters-given-by-tableworkspace" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <tt class="docutils literal"><span class="pre">start/stop</span> <span class="pre">time</span></tt> is converted to <tt class="docutils literal"><span class="pre">m_vecSplitterTime</span></tt>.</li>
<li>The splitting target (in string) is mapped to a set of continuous integers that are stored in <tt class="docutils literal"><span class="pre">m_vecSplitterGroup</span></tt>.
- The mapping will be recorded in <tt class="docutils literal"><span class="pre">m_targetIndexMap</span></tt> and <tt class="docutils literal"><span class="pre">m_wsGroupIndexTargetMap</span></tt>.
- Class variable <tt class="docutils literal"><span class="pre">m_maxTargetIndex</span></tt> is set up to record the highest target group/index,i.e., the max value of <tt class="docutils literal"><span class="pre">m_vecSplitterGroup</span></tt>.</li>
</ul>
</div>
<div class="section" id="undefined-splitting-target">
<h3><a class="toc-backref" href="#id17">Undefined splitting target</a><a class="headerlink" href="#undefined-splitting-target" title="Permalink to this headline">¶</a></h3>
<p>Indexed as <tt class="docutils literal"><span class="pre">0</span></tt> in m_vecSplitterGroup.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id18">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Filtering event without correction on TOF</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">)</span>
<span class="n">splitws</span><span class="p">,</span> <span class="n">infows</span> <span class="o">=</span> <span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">UnitOfTime</span><span class="o">=</span><span class="s">&#39;Nanoseconds&#39;</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;SampleTemp&#39;</span><span class="p">,</span>
        <span class="n">MinimumLogValue</span><span class="o">=</span><span class="mf">279.9</span><span class="p">,</span>  <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mf">279.98</span><span class="p">,</span> <span class="n">LogValueInterval</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="n">splitws</span><span class="p">,</span> <span class="n">InformationWorkspace</span><span class="o">=</span><span class="n">infows</span><span class="p">,</span>
        <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s">&#39;tempsplitws&#39;</span><span class="p">,</span>  <span class="n">GroupWorkspaces</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">FilterByPulseTime</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">OutputWorkspaceIndexedFrom1</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="n">CorrectionToSample</span> <span class="o">=</span> <span class="s">&quot;None&quot;</span><span class="p">,</span> <span class="n">SpectrumWithoutDetector</span> <span class="o">=</span> <span class="s">&quot;Skip&quot;</span><span class="p">,</span> <span class="n">SplitSampleLogs</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="n">OutputTOFCorrectionWorkspace</span><span class="o">=</span><span class="s">&#39;mock&#39;</span><span class="p">)</span>

<span class="c"># Print result</span>
<span class="n">wsgroup</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s">&quot;tempsplitws&quot;</span><span class="p">]</span>
<span class="n">wsnames</span> <span class="o">=</span> <span class="n">wsgroup</span><span class="o">.</span><span class="n">getNames</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">wsnames</span><span class="p">):</span>
    <span class="n">tmpws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;workspace </span><span class="si">%s</span><span class="s"> has </span><span class="si">%d</span><span class="s"> events&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>workspace tempsplitws_0 has 124 events
workspace tempsplitws_1 has 16915 events
workspace tempsplitws_2 has 10009 events
workspace tempsplitws_3 has 6962 events
workspace tempsplitws_4 has 22520 events
workspace tempsplitws_5 has 5133 events
workspace tempsplitws_unfiltered has 50603 events
</pre></div>
</div>
<p><strong>Example - Filtering event by a user-generated TableWorkspace</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">)</span>

<span class="c"># create TableWorkspace</span>
<span class="n">split_table_ws</span> <span class="o">=</span> <span class="n">CreateEmptyTableWorkspace</span><span class="p">()</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="s">&#39;start&#39;</span><span class="p">)</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="s">&#39;stop&#39;</span><span class="p">)</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;str&#39;</span><span class="p">,</span> <span class="s">&#39;target&#39;</span><span class="p">)</span>

<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">100.</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">])</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mf">200.</span><span class="p">,</span> <span class="mf">300.</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mf">400.</span><span class="p">,</span> <span class="mf">600.</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mf">600.</span><span class="p">,</span> <span class="mf">650.</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>

<span class="c"># filter events</span>
<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="n">split_table_ws</span><span class="p">,</span>
        <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s">&#39;tempsplitws3&#39;</span><span class="p">,</span>  <span class="n">GroupWorkspaces</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">FilterByPulseTime</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">OutputWorkspaceIndexedFrom1</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="n">CorrectionToSample</span> <span class="o">=</span> <span class="s">&quot;None&quot;</span><span class="p">,</span> <span class="n">SpectrumWithoutDetector</span> <span class="o">=</span> <span class="s">&quot;Skip&quot;</span><span class="p">,</span> <span class="n">SplitSampleLogs</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="n">OutputTOFCorrectionWorkspace</span><span class="o">=</span><span class="s">&#39;mock&#39;</span><span class="p">,</span>
        <span class="n">RelativeTime</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># Print result</span>
<span class="n">wsgroup</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s">&quot;tempsplitws3&quot;</span><span class="p">]</span>
<span class="n">wsnames</span> <span class="o">=</span> <span class="n">wsgroup</span><span class="o">.</span><span class="n">getNames</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">wsnames</span><span class="p">):</span>
    <span class="n">tmpws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;workspace </span><span class="si">%s</span><span class="s"> has </span><span class="si">%d</span><span class="s"> events&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
    <span class="n">split_log</span> <span class="o">=</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">run</span><span class="p">()</span><span class="o">.</span><span class="n">getProperty</span><span class="p">(</span><span class="s">&#39;splitter&#39;</span><span class="p">)</span>
    <span class="n">entry_0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime_as_string</span><span class="p">(</span><span class="n">split_log</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s">&#39;M8[s]&#39;</span><span class="p">)),</span> <span class="n">timezone</span><span class="o">=</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
    <span class="n">entry_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime_as_string</span><span class="p">(</span><span class="n">split_log</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s">&#39;M8[s]&#39;</span><span class="p">)),</span> <span class="n">timezone</span><span class="o">=</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;event splitter log: entry 0 and entry 1 are {0} and {1}.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">entry_0</span><span class="p">,</span> <span class="n">entry_1</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>workspace tempsplitws3_a has 77580 events
event splitter log: entry 0 and entry 1 are 2010-03-25T16:08:37Z and 2010-03-25T16:10:17Z.
workspace tempsplitws3_b has 0 events
event splitter log: entry 0 and entry 1 are 2010-03-25T16:08:37Z and 2010-03-25T16:11:57Z.
workspace tempsplitws3_c has 0 events
event splitter log: entry 0 and entry 1 are 2010-03-25T16:08:37Z and 2010-03-25T16:15:17Z.
workspace tempsplitws3_unfiltered has 34686 events
event splitter log: entry 0 and entry 1 are 2010-03-25T16:08:37Z and 2010-03-25T16:10:17Z.
</pre></div>
</div>
<p><strong>Example - Filtering event by pulse time</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">)</span>
<span class="n">splitws</span><span class="p">,</span> <span class="n">infows</span> <span class="o">=</span> <span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">UnitOfTime</span><span class="o">=</span><span class="s">&#39;Nanoseconds&#39;</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;SampleTemp&#39;</span><span class="p">,</span>
        <span class="n">MinimumLogValue</span><span class="o">=</span><span class="mf">279.9</span><span class="p">,</span>  <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mf">279.98</span><span class="p">,</span> <span class="n">LogValueInterval</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span>
    <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="n">splitws</span><span class="p">,</span>
    <span class="n">InformationWorkspace</span><span class="o">=</span><span class="n">infows</span><span class="p">,</span>
    <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s">&#39;tempsplitws&#39;</span><span class="p">,</span>
    <span class="n">GroupWorkspaces</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">FilterByPulseTime</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="n">OutputWorkspaceIndexedFrom1</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="n">CorrectionToSample</span> <span class="o">=</span> <span class="s">&quot;None&quot;</span><span class="p">,</span>
    <span class="n">SpectrumWithoutDetector</span> <span class="o">=</span> <span class="s">&quot;Skip&quot;</span><span class="p">,</span>
    <span class="n">SplitSampleLogs</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="n">OutputTOFCorrectionWorkspace</span><span class="o">=</span><span class="s">&#39;mock&#39;</span><span class="p">)</span>

<span class="c"># Print result</span>
<span class="n">wsgroup</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s">&quot;tempsplitws&quot;</span><span class="p">]</span>
<span class="n">wsnames</span> <span class="o">=</span> <span class="n">wsgroup</span><span class="o">.</span><span class="n">getNames</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">wsnames</span><span class="p">):</span>
    <span class="n">tmpws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;workspace </span><span class="si">%s</span><span class="s"> has </span><span class="si">%d</span><span class="s"> events&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>workspace tempsplitws_1 has 123 events
workspace tempsplitws_2 has 16951 events
workspace tempsplitws_3 has 9972 events
workspace tempsplitws_4 has 7019 events
workspace tempsplitws_5 has 22529 events
workspace tempsplitws_6 has 5067 events
</pre></div>
</div>
<p><strong>Example - Filtering event with correction on TOF</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">)</span>
<span class="n">splitws</span><span class="p">,</span> <span class="n">infows</span> <span class="o">=</span> <span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">UnitOfTime</span><span class="o">=</span><span class="s">&#39;Nanoseconds&#39;</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;SampleTemp&#39;</span><span class="p">,</span>
        <span class="n">MinimumLogValue</span><span class="o">=</span><span class="mf">279.9</span><span class="p">,</span>  <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mf">279.98</span><span class="p">,</span> <span class="n">LogValueInterval</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="n">splitws</span><span class="p">,</span> <span class="n">InformationWorkspace</span><span class="o">=</span><span class="n">infows</span><span class="p">,</span>
    <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s">&#39;tempsplitws&#39;</span><span class="p">,</span>
    <span class="n">GroupWorkspaces</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">FilterByPulseTime</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="n">OutputWorkspaceIndexedFrom1</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="n">CorrectionToSample</span> <span class="o">=</span> <span class="s">&quot;Direct&quot;</span><span class="p">,</span>
    <span class="n">IncidentEnergy</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">SpectrumWithoutDetector</span> <span class="o">=</span> <span class="s">&quot;Skip&quot;</span><span class="p">,</span>
    <span class="n">SplitSampleLogs</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="n">OutputTOFCorrectionWorkspace</span><span class="o">=</span><span class="s">&#39;mock&#39;</span><span class="p">)</span>

<span class="c"># Print result</span>
<span class="n">wsgroup</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s">&quot;tempsplitws&quot;</span><span class="p">]</span>
<span class="n">wsnames</span> <span class="o">=</span> <span class="n">wsgroup</span><span class="o">.</span><span class="n">getNames</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">wsnames</span><span class="p">):</span>
    <span class="n">tmpws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;workspace </span><span class="si">%s</span><span class="s"> has </span><span class="si">%d</span><span class="s"> events&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>workspace tempsplitws_0 has 123 events
workspace tempsplitws_1 has 16951 events
workspace tempsplitws_2 has 9972 events
workspace tempsplitws_3 has 7019 events
workspace tempsplitws_4 has 22514 events
workspace tempsplitws_5 has 5082 events
workspace tempsplitws_unfiltered has 50605 events
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Events/EventFiltering.html">Events\EventFiltering</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id19">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/5d6dddaa6354533ad7536be123c78a52660a8bbb/Framework/Algorithms/src/FilterEvents.cpp">FilterEvents.cpp</a> <em>(last modified: 2018-03-07)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/5d6dddaa6354533ad7536be123c78a52660a8bbb/Framework/Algorithms/inc/MantidAlgorithms/FilterEvents.h">FilterEvents.h</a> <em>(last modified: 2018-03-07)</em></p>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/5d6dddaa6354533ad7536be123c78a52660a8bbb/scripts/FilterEvents.py">FilterEvents.py</a> <em>(last modified: 2018-03-07)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="FilterByXValue-v1.html" title="Previous Chapter: FilterByXValue v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; FilterByXValue v...</span>
    </a>
  </li>
  <li>
    <a href="FilterEventsByLogValuePreNexus-v2.html" title="Next Chapter: FilterEventsByLogValuePreNexus v2"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">FilterEventsByLo... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2018-04-19.<br/>
    </p>
  </div>
</footer>
  </body>
</html>