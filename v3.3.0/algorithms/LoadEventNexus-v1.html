<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LoadEventNexus v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="LoadEventPreNexus v1" href="LoadEventPreNexus-v1.html" />
    <link rel="prev" title="LoadEmptyInstrument v1" href="LoadEmptyInstrument-v1.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.3</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="loadeventnexus-v1">
<span id="algm-loadeventnexus"></span><span id="algm-loadeventnexus-v1"></span><h1>LoadEventNexus v1<a class="headerlink" href="#loadeventnexus-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/LoadEventNexus-v1_dlg.png"><img alt="../_images/LoadEventNexus-v1_dlg.png" class="screenshot" src="../_images/LoadEventNexus-v1_dlg.png" style="width: 333px;" /></a>
<p class="caption"><strong>LoadEventNexus</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#optional-properties" id="id4">Optional properties</a></li>
<li><a class="reference internal" href="#veto-pulses" id="id5">Veto Pulses</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id6">Usage</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Loads Event NeXus files (produced by the SNS) and stores it in an EventWorkspace. Optionally, you can filter out events falling outside a range of times-of-flight and/or a time interval.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="3%" />
<col width="6%" />
<col width="4%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td>Mandatory</td>
<td>The name of the Event NeXus file to read, including its full or relative path. The file name is typically of the form INST_####_event.nxs (N.B. case sensitive if running on Linux).</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td>IEventWorkspace</td>
<td>Mandatory</td>
<td>The name of the output EventWorkspace in which to load the EventNexus file.</td>
</tr>
<tr class="row-even"><td>FilterByTofMin</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>Optional: To exclude events that do not fall within a range of times-of-flight. This is the minimum accepted value in microseconds. Keep blank to load all events.</td>
</tr>
<tr class="row-odd"><td>FilterByTofMax</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>Optional: To exclude events that do not fall within a range of times-of-flight. This is the maximum accepted value in microseconds. Keep blank to load all events.</td>
</tr>
<tr class="row-even"><td>FilterByTimeStart</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>Optional: To only include events after the provided start time, in seconds (relative to the start of the run).</td>
</tr>
<tr class="row-odd"><td>FilterByTimeStop</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>Optional: To only include events before the provided stop time, in seconds (relative to the start of the run).</td>
</tr>
<tr class="row-even"><td>NXentryName</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Optional: Name of the NXentry to load if it&#8217;s not the default.</td>
</tr>
<tr class="row-odd"><td>BankName</td>
<td>Input</td>
<td>str list</td>
<td>&nbsp;</td>
<td>Optional: To only include events from one bank. Any bank whose name does not match the given string will have no events.</td>
</tr>
<tr class="row-even"><td>SingleBankPixelsOnly</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Optional: Only applies if you specified a single bank to load with BankName. Only pixels in the specified bank will be created if true; all of the instrument&#8217;s pixels will be created otherwise.</td>
</tr>
<tr class="row-odd"><td>Precount</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Pre-count the number of events in each pixel before allocating memory (optional, default False). This can significantly reduce memory use and memory fragmentation; it may also speed up loading.</td>
</tr>
<tr class="row-even"><td>CompressTolerance</td>
<td>Input</td>
<td>number</td>
<td>-1</td>
<td>Run CompressEvents while loading (optional, leave blank or negative to not do). This specified the tolerance to use (in microseconds) when compressing.</td>
</tr>
<tr class="row-odd"><td>ChunkNumber</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>If loading the file by sections (&#8216;chunks&#8217;), this is the section number of this execution of the algorithm.</td>
</tr>
<tr class="row-even"><td>TotalChunks</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>If loading the file by sections (&#8216;chunks&#8217;), this is the total number of sections.</td>
</tr>
<tr class="row-odd"><td>LoadMonitors</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Load the monitors from the file (optional, default False).</td>
</tr>
<tr class="row-even"><td>MonitorsAsEvents</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If present, load the monitors as events. &#8216;&#8217;&#8216;WARNING:&#8217;&#8216;&#8217; WILL SIGNIFICANTLY INCREASE MEMORY USAGE (optional, default False).</td>
</tr>
<tr class="row-odd"><td>FilterMonByTofMin</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>Optional: To exclude events from monitors that do not fall within a range of times-of-flight. This is the minimum accepted value in microseconds.</td>
</tr>
<tr class="row-even"><td>FilterMonByTofMax</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>Optional: To exclude events from monitors that do not fall within a range of times-of-flight. This is the maximum accepted value in microseconds.</td>
</tr>
<tr class="row-odd"><td>FilterMonByTimeStart</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>Optional: To only include events from monitors after the provided start time, in seconds (relative to the start of the run).</td>
</tr>
<tr class="row-even"><td>FilterMonByTimeStop</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>Optional: To only include events from monitors before the provided stop time, in seconds (relative to the start of the run).</td>
</tr>
<tr class="row-odd"><td>SpectrumMin</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>The number of the first spectrum to read.</td>
</tr>
<tr class="row-even"><td>SpectrumMax</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>The number of the last spectrum to read.</td>
</tr>
<tr class="row-odd"><td>SpectrumList</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>A comma-separated list of individual spectra to read.</td>
</tr>
<tr class="row-even"><td>MetaDataOnly</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, only the meta data and sample logs will be loaded.</td>
</tr>
<tr class="row-odd"><td>LoadLogs</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Load the Sample/DAS logs from the file (default True).</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The LoadEventNeXus algorithm loads data from an EventNexus file into an
<a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>EventWorkspace</em></a>. The default histogram bin
boundaries consist of a single bin able to hold all events (in all
pixels), and will have their <a class="reference external" href="http://www.mantidproject.org/units">units</a> set to time-of-flight.
Since it is an <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>EventWorkspace</em></a>, it can be rebinned
to finer bins with no loss of data.</p>
<p>Sample logs, such as motor positions or e.g. temperature vs time, are
also loaded using the <a class="reference internal" href="LoadNexusLogs-v1.html#algm-loadnexuslogs"><em>LoadNexusLogs v1</em></a> child algorithm.</p>
<div class="section" id="optional-properties">
<h3><a class="toc-backref" href="#id4">Optional properties</a><a class="headerlink" href="#optional-properties" title="Permalink to this headline">¶</a></h3>
<p>If desired, you can filter out the events at the time of loading, by
specifying minimum and maximum time-of-flight values. This can speed up
loading and reduce memory requirements if you are only interested in a
narrow range of the times-of-flight of your data.</p>
<p>You may also filter out events by providing the start and stop times, in
seconds, relative to the first pulse (the start of the run).</p>
<p>If you wish to load only a single bank, you may enter its name and no
events from other banks will be loaded.</p>
<p>The Precount option will count the number of events in each pixel before
allocating the memory for each event list. Without this option, because
of the way vectors grow and are re-allocated, it is possible for up to
2x too much memory to be allocated for a given event list, meaning that
your EventWorkspace may occupy nearly twice as much memory as needed.
The pre-counting step takes some time but that is normally compensated
by the speed-up in avoid re-allocating, so the net result is smaller
memory footprint and approximately the same loading time.</p>
</div>
<div class="section" id="veto-pulses">
<h3><a class="toc-backref" href="#id5">Veto Pulses</a><a class="headerlink" href="#veto-pulses" title="Permalink to this headline">¶</a></h3>
<p>Veto pulses can be filtered out in a separate step using
<a class="reference internal" href="FilterByLogValue-v1.html#algm-filterbylogvalue"><em>FilterByLogValue v1</em></a>:</p>
<p><tt class="docutils literal"><span class="pre">FilterByLogValue(InputWorkspace=&quot;ws&quot;,&nbsp;OutputWorkspace=&quot;ws&quot;,&nbsp;LogName=&quot;veto_pulse_time&quot;,&nbsp;PulseFilter=&quot;1&quot;)</span></tt></p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id6">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - Load SNS/ISIS event Nexus file:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Load SNS HYS event dataset</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadEventNexus</span><span class="p">(</span><span class="s">&#39;HYS_11092_event.nxs&#39;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The number of histograms (spectra) is: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">())</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The number of histograms (spectra) is: 20480
</pre></div>
</div>
<p><strong>Example - Load event nexus file with time filtering:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Load SNS CNCS event dataset between 10 and 20 minutes</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadEventNexus</span><span class="p">(</span><span class="s">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">,</span> <span class="n">FilterByTimeStart</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">FilterByTimeStop</span><span class="o">=</span><span class="mi">1200</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The number of events: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">())</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The number of events: 112266
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/DataHandling.html">DataHandling</a> | <a class="reference external" href="categories/Nexus.html">Nexus</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Mantid.<br/>
    </p>
  </div>
</footer>
  </body>
</html>