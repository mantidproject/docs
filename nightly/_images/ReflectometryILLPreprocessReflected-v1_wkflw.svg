<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.47.2 (20210527.1257)
 -->
<!-- Title: ReflectometryILLPreprocess Pages: 1 -->
<svg width="480pt" height="979pt"
 viewBox="0.00 0.00 480.29 979.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 975)">
<title>ReflectometryILLPreprocess</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-975 476.29,-975 476.29,4 -4,4"/>
<text text-anchor="middle" x="236.15" y="-955.8" font-family="Helvetica" font-size="14.00">Reflected Beam Preprocessing</text>
<!-- run -->
<g id="node1" class="node">
<title>run</title>
<ellipse fill="khaki" stroke="black" cx="27" cy="-857" rx="27" ry="18"/>
<text text-anchor="middle" x="27" y="-853.3" font-family="Helvetica" font-size="14.00">Run</text>
</g>
<!-- load -->
<g id="node10" class="node">
<title>load</title>
<path fill="lightskyblue" stroke="black" d="M233,-802C233,-802 147,-802 147,-802 141,-802 135,-796 135,-790 135,-790 135,-778 135,-778 135,-772 141,-766 147,-766 147,-766 233,-766 233,-766 239,-766 245,-772 245,-778 245,-778 245,-790 245,-790 245,-796 239,-802 233,-802"/>
<text text-anchor="middle" x="190" y="-780.3" font-family="Helvetica" font-size="14.00">LoadAndMerge</text>
</g>
<!-- run&#45;&gt;load -->
<g id="edge7" class="edge">
<title>run&#45;&gt;load</title>
<path fill="none" stroke="black" d="M48.26,-845.79C53.09,-843.52 58.21,-841.15 63,-839 87.98,-827.8 115.96,-815.84 139.28,-806.03"/>
<polygon fill="black" stroke="black" points="140.77,-809.2 148.64,-802.1 138.07,-802.74 140.77,-809.2"/>
</g>
<!-- output -->
<g id="node2" class="node">
<title>output</title>
<ellipse fill="khaki" stroke="black" cx="291" cy="-18" rx="81.49" ry="18"/>
<text text-anchor="middle" x="291" y="-14.3" font-family="Helvetica" font-size="14.00">OutputWorkspace</text>
</g>
<!-- waterReference -->
<g id="node3" class="node">
<title>waterReference</title>
<ellipse fill="khaki" stroke="black" cx="341" cy="-711" rx="77.99" ry="18"/>
<text text-anchor="middle" x="341" y="-707.3" font-family="Helvetica" font-size="14.00">WaterWorkspace</text>
</g>
<!-- waterNorm -->
<g id="node11" class="node">
<title>waterNorm</title>
<path fill="lightskyblue" stroke="black" d="M308,-642C308,-642 222,-642 222,-642 216,-642 210,-636 210,-630 210,-630 210,-616 210,-616 210,-610 216,-604 222,-604 222,-604 308,-604 308,-604 314,-604 320,-610 320,-616 320,-616 320,-630 320,-630 320,-636 314,-642 308,-642"/>
<text text-anchor="middle" x="265" y="-626.8" font-family="Helvetica" font-size="14.00">Divide by</text>
<text text-anchor="middle" x="265" y="-611.8" font-family="Helvetica" font-size="14.00">water reference</text>
</g>
<!-- waterReference&#45;&gt;waterNorm -->
<g id="edge10" class="edge">
<title>waterReference&#45;&gt;waterNorm</title>
<path fill="none" stroke="black" d="M325.98,-693.01C315.14,-680.73 300.28,-663.93 287.95,-649.97"/>
<polygon fill="black" stroke="black" points="290.28,-647.32 281.03,-642.14 285.03,-651.95 290.28,-647.32"/>
<text text-anchor="middle" x="327" y="-663.8" font-family="Helvetica" font-size="14.00">Rebin</text>
</g>
<!-- uan -->
<g id="node4" class="node">
<title>uan</title>
<ellipse fill="khaki" stroke="black" cx="124" cy="-857" rx="51.99" ry="18"/>
<text text-anchor="middle" x="124" y="-853.3" font-family="Helvetica" font-size="14.00">UserAngle</text>
</g>
<!-- uan&#45;&gt;load -->
<g id="edge4" class="edge">
<title>uan&#45;&gt;load</title>
<path fill="none" stroke="black" d="M139.31,-839.53C147.48,-830.74 157.71,-819.74 166.83,-809.92"/>
<polygon fill="black" stroke="black" points="169.61,-812.08 173.85,-802.37 164.48,-807.31 169.61,-812.08"/>
</g>
<!-- san -->
<g id="node5" class="node">
<title>san</title>
<ellipse fill="khaki" stroke="black" cx="258" cy="-857" rx="63.89" ry="18"/>
<text text-anchor="middle" x="258" y="-853.3" font-family="Helvetica" font-size="14.00">SampleAngle</text>
</g>
<!-- san&#45;&gt;load -->
<g id="edge5" class="edge">
<title>san&#45;&gt;load</title>
<path fill="none" stroke="black" d="M242.23,-839.53C233.72,-830.65 223.06,-819.52 213.59,-809.63"/>
<polygon fill="black" stroke="black" points="216.08,-807.17 206.63,-802.37 211.02,-812.01 216.08,-807.17"/>
</g>
<!-- dan -->
<g id="node6" class="node">
<title>dan</title>
<ellipse fill="khaki" stroke="black" cx="406" cy="-857" rx="66.09" ry="18"/>
<text text-anchor="middle" x="406" y="-853.3" font-family="Helvetica" font-size="14.00">DetectorAngle</text>
</g>
<!-- dan&#45;&gt;load -->
<g id="edge6" class="edge">
<title>dan&#45;&gt;load</title>
<path fill="none" stroke="black" d="M365.37,-842.65C333.29,-832.1 288,-817.21 251.48,-805.21"/>
<polygon fill="black" stroke="black" points="252.51,-801.86 241.91,-802.06 250.32,-808.51 252.51,-801.86"/>
</g>
<!-- toWavelength -->
<g id="node7" class="node">
<title>toWavelength</title>
<path fill="lightskyblue" stroke="black" d="M342.5,-257C342.5,-257 239.5,-257 239.5,-257 233.5,-257 227.5,-251 227.5,-245 227.5,-245 227.5,-231 227.5,-231 227.5,-225 233.5,-219 239.5,-219 239.5,-219 342.5,-219 342.5,-219 348.5,-219 354.5,-225 354.5,-231 354.5,-231 354.5,-245 354.5,-245 354.5,-251 348.5,-257 342.5,-257"/>
<text text-anchor="middle" x="291" y="-241.8" font-family="Helvetica" font-size="14.00">Convert from TOF</text>
<text text-anchor="middle" x="291" y="-226.8" font-family="Helvetica" font-size="14.00"> to wavelength</text>
</g>
<!-- correctGravity -->
<g id="node17" class="node">
<title>correctGravity</title>
<polygon fill="limegreen" stroke="black" points="291,-182 170.68,-164 291,-146 411.32,-164 291,-182"/>
<text text-anchor="middle" x="291" y="-160.3" font-family="Helvetica" font-size="14.00">Correct for gravity?</text>
</g>
<!-- toWavelength&#45;&gt;correctGravity -->
<g id="edge17" class="edge">
<title>toWavelength&#45;&gt;correctGravity</title>
<path fill="none" stroke="black" d="M291,-218.83C291,-210.89 291,-201.41 291,-192.63"/>
<polygon fill="black" stroke="black" points="294.5,-192.42 291,-182.42 287.5,-192.42 294.5,-192.42"/>
</g>
<!-- extractMonitors -->
<g id="node8" class="node">
<title>extractMonitors</title>
<path fill="lightskyblue" stroke="black" d="M233.5,-729C233.5,-729 146.5,-729 146.5,-729 140.5,-729 134.5,-723 134.5,-717 134.5,-717 134.5,-705 134.5,-705 134.5,-699 140.5,-693 146.5,-693 146.5,-693 233.5,-693 233.5,-693 239.5,-693 245.5,-699 245.5,-705 245.5,-705 245.5,-717 245.5,-717 245.5,-723 239.5,-729 233.5,-729"/>
<text text-anchor="middle" x="190" y="-707.3" font-family="Helvetica" font-size="14.00">ExtractMonitors</text>
</g>
<!-- extractMonitors&#45;&gt;waterNorm -->
<g id="edge9" class="edge">
<title>extractMonitors&#45;&gt;waterNorm</title>
<path fill="none" stroke="black" d="M205.18,-692.6C215.84,-680.37 230.29,-663.8 242.31,-650.01"/>
<polygon fill="black" stroke="black" points="245.13,-652.11 249.07,-642.27 239.86,-647.5 245.13,-652.11"/>
</g>
<!-- fluxNorm -->
<g id="node9" class="node">
<title>fluxNorm</title>
<path fill="lightskyblue" stroke="black" d="M343,-405C343,-405 239,-405 239,-405 233,-405 227,-399 227,-393 227,-393 227,-379 227,-379 227,-373 233,-367 239,-367 239,-367 343,-367 343,-367 349,-367 355,-373 355,-379 355,-379 355,-393 355,-393 355,-399 349,-405 343,-405"/>
<text text-anchor="middle" x="291" y="-389.8" font-family="Helvetica" font-size="14.00">Divide by duration/</text>
<text text-anchor="middle" x="291" y="-374.8" font-family="Helvetica" font-size="14.00">monitor counts</text>
</g>
<!-- subtractBkg -->
<g id="node13" class="node">
<title>subtractBkg</title>
<path fill="lightskyblue" stroke="black" d="M349.5,-330C349.5,-330 232.5,-330 232.5,-330 226.5,-330 220.5,-324 220.5,-318 220.5,-318 220.5,-306 220.5,-306 220.5,-300 226.5,-294 232.5,-294 232.5,-294 349.5,-294 349.5,-294 355.5,-294 361.5,-300 361.5,-306 361.5,-306 361.5,-318 361.5,-318 361.5,-324 355.5,-330 349.5,-330"/>
<text text-anchor="middle" x="291" y="-308.3" font-family="Helvetica" font-size="14.00">Subtract background</text>
</g>
<!-- fluxNorm&#45;&gt;subtractBkg -->
<g id="edge15" class="edge">
<title>fluxNorm&#45;&gt;subtractBkg</title>
<path fill="none" stroke="black" d="M291,-366.83C291,-358.89 291,-349.41 291,-340.63"/>
<polygon fill="black" stroke="black" points="294.5,-340.42 291,-330.42 287.5,-340.42 294.5,-340.42"/>
</g>
<!-- load&#45;&gt;extractMonitors -->
<g id="edge8" class="edge">
<title>load&#45;&gt;extractMonitors</title>
<path fill="none" stroke="black" d="M190,-765.81C190,-757.79 190,-748.05 190,-739.07"/>
<polygon fill="black" stroke="black" points="193.5,-739.03 190,-729.03 186.5,-739.03 193.5,-739.03"/>
</g>
<!-- isSlitNorm -->
<g id="node15" class="node">
<title>isSlitNorm</title>
<polygon fill="limegreen" stroke="black" points="265,-567 149.37,-549 265,-531 380.63,-549 265,-567"/>
<text text-anchor="middle" x="265" y="-545.3" font-family="Helvetica" font-size="14.00">SlitNormalisation?</text>
</g>
<!-- waterNorm&#45;&gt;isSlitNorm -->
<g id="edge11" class="edge">
<title>waterNorm&#45;&gt;isSlitNorm</title>
<path fill="none" stroke="black" d="M265,-603.83C265,-595.89 265,-586.41 265,-577.63"/>
<polygon fill="black" stroke="black" points="268.5,-577.42 265,-567.42 261.5,-577.42 268.5,-577.42"/>
</g>
<!-- slitNorm -->
<g id="node12" class="node">
<title>slitNorm</title>
<path fill="lightskyblue" stroke="black" d="M264,-480C264,-480 172,-480 172,-480 166,-480 160,-474 160,-468 160,-468 160,-454 160,-454 160,-448 166,-442 172,-442 172,-442 264,-442 264,-442 270,-442 276,-448 276,-454 276,-454 276,-468 276,-468 276,-474 270,-480 264,-480"/>
<text text-anchor="middle" x="218" y="-464.8" font-family="Helvetica" font-size="14.00">Divide by</text>
<text text-anchor="middle" x="218" y="-449.8" font-family="Helvetica" font-size="14.00">slit opening area</text>
</g>
<!-- slitNorm&#45;&gt;fluxNorm -->
<g id="edge14" class="edge">
<title>slitNorm&#45;&gt;fluxNorm</title>
<path fill="none" stroke="black" d="M236.04,-441.96C244.99,-433.01 255.95,-422.05 265.72,-412.28"/>
<polygon fill="black" stroke="black" points="268.31,-414.64 272.91,-405.09 263.36,-409.69 268.31,-414.64"/>
</g>
<!-- subtractBkg&#45;&gt;toWavelength -->
<g id="edge16" class="edge">
<title>subtractBkg&#45;&gt;toWavelength</title>
<path fill="none" stroke="black" d="M291,-293.94C291,-285.99 291,-276.31 291,-267.31"/>
<polygon fill="black" stroke="black" points="294.5,-267.2 291,-257.2 287.5,-267.2 294.5,-267.2"/>
</g>
<!-- gravityCorrection -->
<g id="node14" class="node">
<title>gravityCorrection</title>
<path fill="lightskyblue" stroke="black" d="M459,-109C459,-109 319,-109 319,-109 313,-109 307,-103 307,-97 307,-97 307,-85 307,-85 307,-79 313,-73 319,-73 319,-73 459,-73 459,-73 465,-73 471,-79 471,-85 471,-85 471,-97 471,-97 471,-103 465,-109 459,-109"/>
<text text-anchor="middle" x="389" y="-87.3" font-family="Helvetica" font-size="14.00">Gravity correction step 1</text>
</g>
<!-- gravityCorrection&#45;&gt;output -->
<g id="edge20" class="edge">
<title>gravityCorrection&#45;&gt;output</title>
<path fill="none" stroke="black" d="M365.28,-72.81C352.24,-63.36 335.9,-51.53 321.88,-41.37"/>
<polygon fill="black" stroke="black" points="323.65,-38.33 313.49,-35.3 319.54,-44 323.65,-38.33"/>
</g>
<!-- isSlitNorm&#45;&gt;fluxNorm -->
<g id="edge13" class="edge">
<title>isSlitNorm&#45;&gt;fluxNorm</title>
<path fill="none" stroke="black" d="M298.08,-536.05C308.22,-530.65 318.22,-523.14 324,-513 341.82,-481.71 324.71,-440.6 309.22,-413.99"/>
<polygon fill="black" stroke="black" points="312.07,-411.94 303.87,-405.22 306.09,-415.58 312.07,-411.94"/>
<text text-anchor="middle" x="400" y="-457.3" font-family="Helvetica" font-size="14.00">Slit Normalisation OFF</text>
</g>
<!-- isSlitNorm&#45;&gt;slitNorm -->
<g id="edge12" class="edge">
<title>isSlitNorm&#45;&gt;slitNorm</title>
<path fill="none" stroke="black" d="M224.08,-537.33C211.97,-532.06 200.08,-524.31 193,-513 188.29,-505.47 189.99,-496.92 194.17,-489.01"/>
<polygon fill="black" stroke="black" points="197.23,-490.72 199.74,-480.43 191.36,-486.91 197.23,-490.72"/>
<text text-anchor="middle" x="258.5" y="-501.8" font-family="Helvetica" font-size="14.00">Slit Normalisation ON</text>
</g>
<!-- angleOption -->
<g id="node16" class="node">
<title>angleOption</title>
<polygon fill="limegreen" stroke="black" points="258,-948 173.38,-930 258,-912 342.62,-930 258,-948"/>
<text text-anchor="middle" x="258" y="-926.3" font-family="Helvetica" font-size="14.00">AngleOption</text>
</g>
<!-- angleOption&#45;&gt;uan -->
<g id="edge1" class="edge">
<title>angleOption&#45;&gt;uan</title>
<path fill="none" stroke="black" d="M234.96,-916.79C214.49,-905.94 184.2,-889.9 160.43,-877.3"/>
<polygon fill="black" stroke="black" points="161.83,-874.08 151.36,-872.49 158.55,-880.27 161.83,-874.08"/>
</g>
<!-- angleOption&#45;&gt;san -->
<g id="edge2" class="edge">
<title>angleOption&#45;&gt;san</title>
<path fill="none" stroke="black" d="M258,-911.81C258,-903.79 258,-894.05 258,-885.07"/>
<polygon fill="black" stroke="black" points="261.5,-885.03 258,-875.03 254.5,-885.03 261.5,-885.03"/>
</g>
<!-- angleOption&#45;&gt;dan -->
<g id="edge3" class="edge">
<title>angleOption&#45;&gt;dan</title>
<path fill="none" stroke="black" d="M282.77,-917.12C305.37,-906.28 339.18,-890.06 365.67,-877.35"/>
<polygon fill="black" stroke="black" points="367.2,-880.49 374.7,-873.01 364.17,-874.18 367.2,-880.49"/>
</g>
<!-- correctGravity&#45;&gt;output -->
<g id="edge18" class="edge">
<title>correctGravity&#45;&gt;output</title>
<path fill="none" stroke="black" d="M291,-145.92C291,-121.34 291,-75.75 291,-46.43"/>
<polygon fill="black" stroke="black" points="294.5,-46.06 291,-36.06 287.5,-46.06 294.5,-46.06"/>
</g>
<!-- correctGravity&#45;&gt;gravityCorrection -->
<g id="edge19" class="edge">
<title>correctGravity&#45;&gt;gravityCorrection</title>
<path fill="none" stroke="black" d="M310.83,-148.63C324.14,-138.99 341.96,-126.08 357.23,-115.02"/>
<polygon fill="black" stroke="black" points="359.35,-117.8 365.4,-109.1 355.25,-112.13 359.35,-117.8"/>
</g>
</g>
</svg>
