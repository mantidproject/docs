<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Other Mantid Functions and Basic Data Manipulation</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.4.20220909.1939',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="The Basics of Data Reduction" href="basics_of_data_reductions.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Training</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Muon Training</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Other Mantid Functions and Basic Data Manipulation</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="other-mantid-functions-and-basic-data-manipulation">
<span id="other-mantid-functions"></span><h1>Other Mantid Functions and Basic Data Manipulation<a class="headerlink" href="#other-mantid-functions-and-basic-data-manipulation" title="Permalink to this headline">¶</a></h1>
<p id="index-0">This section allows the user to:</p>
<ul class="simple">
<li>Become familiar with the content of Mantid workspaces.</li>
<li>Learn how to read/export data.</li>
<li>Learn how to overlay data/change plot style.</li>
</ul>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#workspaces" id="id10">Workspaces</a><ul>
<li><a class="reference internal" href="#loading-data" id="id11">Loading Data</a></li>
<li><a class="reference internal" href="#workspace-information" id="id12">Workspace Information</a></li>
<li><a class="reference internal" href="#plotting-spectra" id="id13">Plotting spectra</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exporting-data" id="id14">Exporting Data</a></li>
<li><a class="reference internal" href="#overlaying-and-styling-plots" id="id15">Overlaying and Styling Plots</a><ul>
<li><a class="reference internal" href="#plot-styles" id="id16">Plot Styles</a></li>
<li><a class="reference internal" href="#editing-axes" id="id17">Editing Axes</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="workspaces">
<h2><a class="toc-backref" href="#id10">Workspaces</a><a class="headerlink" href="#workspaces" title="Permalink to this headline">¶</a></h2>
<p>Workspaces hold the data in Mantid. They come in several forms, but the most common is
the Matrix Workspace which represents XYE data for one or more spectra. In MantidWorkbench the
data contained in a workspace can viewed as a matrix or a table, and graphed in many ways
including Line graphs, and ‘colourful’ (contour) plots.</p>
<p>Interaction with workspaces is typically through an interface. Matrix Workspaces are
typically created by executing one of Mantid’s ‘Load’ algorithms or are the output of
algorithms which take a Matrix Workspace as input.</p>
<p>In addition to data, workspaces hold a workspace history, which details the algorithms
which have been run on this workspace.</p>
<p>The <cite>Analysis Data Service</cite> (ADS), by default is found on the left-hand side of the main MantidWorkbench window.
When a muon data set is loaded via the GUI, the Matrix Workspaces are created automatically.</p>
<ul class="simple">
<li><strong>NAME12345 MA</strong> which contains all the Muon Analysis data for run <cite>12345</cite> on the <cite>NAME</cite> instrument.
This data is further separated into more sub-workspaces, these are listed below.</li>
<li><strong>NAME12345 Raw Data MA</strong>, holds within it raw positron counts for each individual detector.
To examine the data collected in a single detector, right click on workspace and select Plot Spectrum.
There is one spectrum per detector. In the window that opens up, the number of the spectrum/detector
to plot, or a range of spectra, can be selected.</li>
<li><strong>NAME12345 Groups MA</strong> contains data in raw counts and asymmetry, collated
into the groups specified in the Grouping tab of the interface (see the Grouping section in <a class="reference internal" href="the_tabs_grouping.html#the-tabs-grouping"><span class="std std-ref">The Tabs - Grouping</span></a> for more).
Each workspace’s name contains the name of the group it holds data for.</li>
<li><strong>NAME12345 Pairs MA</strong> these workspaces contain the Pairs (such as ‘long’ which is created by default) specified in the <em>Grouping Options</em> tab of the interface (see the Grouping section in <a class="reference internal" href="the_tabs_grouping.html#the-tabs-grouping"><span class="std std-ref">The Tabs - Grouping</span></a> for more).
Each workspace’s name contains the name of the pair it holds data for.</li>
<li><strong>Fitting Results MA</strong> contains the workspaces produced when data is fitted, the spectra and tables within are named with the convention <cite>NAME12345; Group/Pair Asym; Asymmetry; MA; Fitted; FunctionName</cite>.
In order, the parts of these names correspond to: the data run, the group or pair fitted, the fact the data is asymmetry, that it is from Muon Analysis, that it has been
fitted, and what function(s) were used. Data in Fitting Results MA is split into the following sub-workspaces:</li>
<li><strong>Fitting Results_workspaces MA</strong> contains the spectra of fitted asymmetry data. These workspaces contain three spectra - the original data, the fit, and the difference between the two,
which are assigned spectrum numbers 1, 2, and 3 respectively.</li>
<li><strong>Fitting Results_parameter_tables MA</strong> contains tables of the parameters of the function used for a fit, along with their values and errors for that fit.</li>
</ul>
<p>In general the muon analysis GUI hides workspaces from the user; however, an
understanding of their functionality is sometimes useful to take advantage of some of the
more advanced features of MantidWorkbench. In particular, for those seeking to develop a
specialist analysis method, the GUI can be used for the initial data reduction, while user
coded Python or C++ algorithms act on workspaces to process the final result. This type
of hybrid workflow demonstrates the versatility of the MantidWorkbench interface.</p>
<p>Other types of object, such as Tables, Matrices and Notes, may be created through the
MantidWorkbench interface. As these are not workspaces the Algorithms can’t directly be applied.
However, Tables may be converted to either a Table or Matrix workspace through an
option on the analysis menu for subsequent data processing.</p>
<div class="section" id="loading-data">
<h3><a class="toc-backref" href="#id11">Loading Data</a><a class="headerlink" href="#loading-data" title="Permalink to this headline">¶</a></h3>
<p>Matrix Workspaces are typically created by executing one of Mantid’s ‘Load’ algorithms or are
the output of algorithms which take a Matrix Workspace as input. In addition to data, workspaces
hold a workspace history which lists the algorithms that have been applied to the data.</p>
<p>To load a raw data file <em>without using</em> the Mantid Analysis GUI, and examine its content:</p>
<ol class="arabic simple">
<li>In the ADS, click <cite>Load</cite>&gt;`File`</li>
<li>Load the file <cite>HIFI00062798.nxs</cite> from the Reference Material folder by using the <cite>Browse</cite> button - See Figure 4.</li>
</ol>
<div class="figure align-center" id="id1">
<img alt="../../_images/load_file2.gif" src="../../_images/load_file2.gif" />
<p class="caption"><span class="caption-text">Figure 4: Loading the <cite>HIFI00062798.nxs</cite> data file into Mantid using the <cite>Browse</cite> button instead of the Analysis GUI.</span></p>
</div>
</div>
<div class="section" id="workspace-information">
<h3><a class="toc-backref" href="#id12">Workspace Information</a><a class="headerlink" href="#workspace-information" title="Permalink to this headline">¶</a></h3>
<p>Click on the arrow beside the file name – this allows information about the format of
data file to be viewed. The following should be seen in the Workspace List pane to
the right of the screen.</p>
<p>It can be seen that a workspace called <cite>HIFI00062798</cite> has been created. It</p>
<ul class="simple">
<li>is a 2D array</li>
<li>of data that has been collected from a silver calibration measurement taken in a transverse field of 20G.</li>
<li>It contains 64 spectra (or histograms i.e. one for each HiFi detector)</li>
<li>there are 2048 time channels, or bins, per plot</li>
</ul>
<p>However, the NeXuS format allows a lot more information be stored in a data file than that listed above. As an example
right click on the file name and select <cite>Show Sample Logs</cite>. A list of experiment and
instrument parameters that have been logged during a measurement, from
magnetic fields to sample temperatures, appears.</p>
<p>To interrogate any of these logs double click on the <cite>Name</cite>, try this with <cite>Temp_Cryostat</cite> as shown in figure 5.</p>
<div class="figure align-center" id="id2">
<img alt="../../_images/sample_logs2.gif" src="../../_images/sample_logs2.gif" />
<p class="caption"><span class="caption-text">Figure 5: How to open the Sample Logs from the workspace and inspecting <cite>Temp_Cryostat</cite>.</span></p>
</div>
</div>
<div class="section" id="plotting-spectra">
<h3><a class="toc-backref" href="#id13">Plotting spectra</a><a class="headerlink" href="#plotting-spectra" title="Permalink to this headline">¶</a></h3>
<p>As mentioned, the HIFI00062798.nxs workspace
holds within it raw positron counts / bin for <em>each</em> individual HiFi detector. To examine the
data collected in a single detector, right click on HIFI00062798 and select “Plot&gt;Spectrum…” .</p>
<p>On HiFi, as way of example, there are 64 detectors hence ID numbers: 1-64 (1-32 =
upstream detectors, 33-64 = downstream detectors.</p>
<p>Enter a detector (ID) number of choice and click OK to plot the associated raw data.
This process is illustrated below.</p>
<div class="figure align-center" id="id3">
<img alt="../../_images/plot_spectrum2.gif" src="../../_images/plot_spectrum2.gif" />
<p class="caption"><span class="caption-text">Figure 6: How to plot an individual detector spectrum. This example shows spectrum <cite>10</cite> for the <cite>HIFI00062798</cite> dataset.</span></p>
</div>
<p>For information:</p>
<ul class="simple">
<li>ARGUS has 192 detectors</li>
<li>MuSR and HIFI have 64 detectors</li>
<li>EMu has 96 detectors</li>
</ul>
</div>
</div>
<div class="section" id="exporting-data">
<h2><a class="toc-backref" href="#id14">Exporting Data</a><a class="headerlink" href="#exporting-data" title="Permalink to this headline">¶</a></h2>
<p>To export the data contained within any listed workspace, the Algorithms tab at the
bottom of the workspace list pane can be used.</p>
<div class="figure align-center" id="id4">
<img alt="../../_images/AlgorithmsOptions.PNG" src="../../_images/AlgorithmsOptions.PNG" />
<p class="caption"><span class="caption-text">Figure 7: The Algorithms Options</span></p>
</div>
<p>Follow the instructions below to try this</p>
<ol class="arabic simple">
<li>Load the workspace <cite>HIFI00062798.nxs</cite>, see <a class="reference internal" href="#loading-data">Loading Data</a> for more on how to do this.</li>
<li>Using the drop-down menu next to the <cite>Execute</cite> button, type or select <cite>SaveAscii</cite>, then click <cite>Execute</cite>. This is shown in Figure 8.</li>
</ol>
<div class="figure align-center" id="id5">
<img alt="../../_images/save_ascii2.gif" src="../../_images/save_ascii2.gif" />
<p class="caption"><span class="caption-text">Figure 8: Where to find the <cite>SaveAscii</cite> Algorithm.</span></p>
</div>
<ol class="arabic simple" start="3">
<li>The <cite>SaveAscii</cite> Input Dialog box - shown in Figure 8 should appear. Select a directory (for the written data file) and specify a file name.</li>
<li>Note the workspace to be exported can be selected from the uppermost dropdown list, next to <cite>InputWorkspace</cite>, in this case let us leave it as <cite>HIFI00062798</cite>.</li>
<li>Define which workspace spectra to export using the <cite>WorkspaceIndexMin</cite> and <cite>WorkspaceIndexMax</cite> inputs. Use these to save spectra <cite>10</cite> and <cite>11</cite>.</li>
<li>Choose the type of data separator used in the file (CSV is usually a reliable option), add comments and uncheck the <cite>WriteXError</cite> box.</li>
<li>Export the spectra.</li>
</ol>
</div>
<div class="section" id="overlaying-and-styling-plots">
<h2><a class="toc-backref" href="#id15">Overlaying and Styling Plots</a><a class="headerlink" href="#overlaying-and-styling-plots" title="Permalink to this headline">¶</a></h2>
<p>Overlaying data plots can be useful when trying to compare two different sets of data simultaneously by having them on one individual plot.
Overlaying data can be done by simply clicking and dragging a workspace onto an existing plot, or can be done via the Overlaying Data option
from the workspace pane.</p>
<p>To try this follow these instructions:</p>
<ol class="arabic simple">
<li>Load the <cite>HIFI00062798</cite> workspace and plot spectrum number <cite>10</cite> from the workspace panel, as described in <a class="reference internal" href="#loading-data">Loading Data</a> .</li>
<li>Go to the <cite>Plots</cite> menu by clicking the <cite>Plots</cite> tab (by default) in the bottom left of the window, and ensure that the plot of spectrum <cite>10</cite> is selected in bold.</li>
<li>Return to the ADS and right click on the <cite>HIFI00062798</cite> workspace, as before going to <cite>Plot</cite> but this time selecting <cite>Overplot Spectrum…</cite> instead of <cite>Spectrum…</cite>. Plot spectrum <cite>20</cite>.</li>
<li>Spectrum <cite>20</cite> should now be visible on the spectrum <cite>10</cite> plot along with the original data. This process is shown in Figure 9 below.</li>
</ol>
<div class="figure align-center" id="id6">
<img alt="../../_images/overlay2.gif" src="../../_images/overlay2.gif" />
<p class="caption"><span class="caption-text">Figure 9: How to overlay one plot (detector <cite>20</cite>) onto another (detector <cite>10</cite>).</span></p>
</div>
<div class="section" id="plot-styles">
<h3><a class="toc-backref" href="#id16">Plot Styles</a><a class="headerlink" href="#plot-styles" title="Permalink to this headline">¶</a></h3>
<p>The plot style a data set can be selected
using the gear icon at the top of the plot window, this will open the Figure options menu.</p>
<p>To demonstrate changing a plot’s markers and curve colour follow these instructions:</p>
<ol class="arabic simple">
<li>Spectrum <cite>20</cite> of <cite>HIFI00062798</cite> should already have been plotted, via the ADS. If not, do so now.</li>
<li>Click the settings (gear) icon above the plot, this will bring up a new Figure options window for the data set.</li>
<li>Go to the <cite>Curves</cite> tab and use the <cite>Color</cite> (RGBA) option under <cite>Line</cite> to change the colour from Blue to Red. Click on the coloured square to change it.</li>
<li>Click <cite>Apply</cite> to view the changes and save the selected option.</li>
<li>To change the marker style (by default none are shown) use the <cite>Style</cite> drop-down menu under the <cite>Marker</cite> tab, use this now to change the <cite>Marker Style</cite> to square. Then click <cite>Apply</cite>.</li>
</ol>
<div class="figure align-center" id="id7">
<img alt="../../_images/othermantidfunctionsfig10.gif" src="../../_images/othermantidfunctionsfig10.gif" />
<p class="caption"><span class="caption-text">Figure 10: How to change the line colour and marker style of a plot.</span></p>
</div>
</div>
<div class="section" id="editing-axes">
<h3><a class="toc-backref" href="#id17">Editing Axes</a><a class="headerlink" href="#editing-axes" title="Permalink to this headline">¶</a></h3>
<p>One can also change the axis settings, such as the maximum and minimum values, and plotting against a logarithmic scale.
The axis limits can be changed either through the Figure options menu, or by double clicking on the relevant axis, while other .
See the instructions below for an example on how to change the X-Axis limits and set the Y-Scale to logarithmic.</p>
<ol class="arabic simple">
<li>Load the MUSR00024563 dataset using the muon analysis GUI. How to do this is described in the Home section of <a class="reference internal" href="the_tabs_home.html#the-tabs-home"><span class="std std-ref">The Tabs - Home</span></a>.</li>
<li>Plot the backwards counts from the ADS.</li>
<li>Open the Figure options’ menu, or <strong>or</strong> double click on the X axis to edit the axis.</li>
<li>In the Axes tab of the Figure options, set the value in the box labelled <cite>Upper Limit</cite> to <cite>16</cite> <strong>or</strong> do the same for the box labelled <cite>Max</cite> in the Edit axis dialog.</li>
<li>Press <cite>Apply</cite>, <strong>or</strong> click the <cite>OK</cite> button.</li>
<li>In the <cite>Axis</cite> tab of the figure options, click the <cite>y</cite> button. Then use the <cite>Scale</cite> drop-down menu and change the setting to <cite>log</cite>. <strong>Or</strong> double click on the Y axis of the plot and tick the box labelled ‘Log’.</li>
<li>Click <cite>OK</cite> and observe the changes to the plot, this process is shown for the Figure options and Edit axis in Figures 11 and 12 respectively.</li>
</ol>
<div class="figure align-center" id="id8">
<img alt="../../_images/othermantidfunctionsfig11.gif" src="../../_images/othermantidfunctionsfig11.gif" />
<p class="caption"><span class="caption-text">Figure 11: Changing the X-Axis scale limits and setting the Y-Axis to logarithmic settings using the Figure options menu.</span></p>
</div>
<div class="figure align-center" id="id9">
<img alt="../../_images/othermantidfunctionsfig12.gif" src="../../_images/othermantidfunctionsfig12.gif" />
<p class="caption"><span class="caption-text">Figure 12:  Changing the X-Axis scale limits and setting the Y-Axis to logarithmic using the Edit axis dialog.
Note that if the scale limits include negative values when doing this, Mantid
will automatically use a ‘symmetrical log’ scale, which allows for negative values by having a range around 0 where
the scale is linear not logarithmic.</span></p>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="getting_started.html" title="Previous Chapter: Getting Started"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Getting Started</span>
    </a>
  </li>
  <li>
    <a href="basics_of_data_reductions.html" title="Next Chapter: The Basics of Data Reduction"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">The Basics of... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>