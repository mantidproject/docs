<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Elwin and I(Q, t)</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Indirect Settings" href="Indirect%20Settings.html" />
    <link rel="prev" title="Indirect Diffraction" href="Indirect%20Diffraction.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Interfaces</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Elwin and I(Q, t)</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="elwin-and-i-q-t">
<span id="elwin-iqt-ref"></span><h1>Elwin and I(Q, t)<a class="headerlink" href="#elwin-and-i-q-t" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#elwin" id="id4">Elwin</a></p>
<ul>
<li><p><a class="reference internal" href="#elwin-options" id="id5">Elwin Options</a></p></li>
<li><p><a class="reference internal" href="#elwin-example-workflow" id="id6">Elwin Example Workflow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#i-q-t" id="id7">I(Q, t)</a></p>
<ul>
<li><p><a class="reference internal" href="#i-q-t-options" id="id8">I(Q, t) Options</a></p></li>
<li><p><a class="reference internal" href="#i-q-t-example-workflow" id="id9">I(Q, t) Example Workflow</a></p></li>
<li><p><a class="reference internal" href="#a-note-on-binning" id="id10">A note on Binning</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="elwin">
<h2><a class="toc-backref" href="#id4" role="doc-backlink">Elwin</a><a class="headerlink" href="#elwin" title="Permalink to this heading">¶</a></h2>
<p>Provides an interface for the <a class="reference internal" href="../../algorithms/ElasticWindow-v1.html#algm-elasticwindow"><span class="std std-ref">ElasticWindow</span></a>
algorithm, with the option of selecting the range to integrate over as well as
the background range. An on-screen plot is also provided.</p>
<p>For workspaces that have a sample log, or have a sample log file available in the
Mantid data search paths that contains the sample environment information the
ELF workspace can also be normalised to the lowest temperature run in the range
of input files.</p>
<a class="reference internal image-reference" href="../../_images/Inelastic_Data_Analysis_GUI.png"><img alt="../../_images/Inelastic_Data_Analysis_GUI.png" class="align-center" src="../../_images/Inelastic_Data_Analysis_GUI.png" style="width: 750px;" /></a>
<section id="elwin-options">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Elwin Options</a><a class="headerlink" href="#elwin-options" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>File or Workspace</dt><dd><p>Choose to load data from a file or a workspace by using this dropdown menu. See image below for demonstration of how to load files using either option.</p>
</dd>
</dl>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/ElwinLoad.gif"><img alt="../../_images/ElwinLoad.gif" src="../../_images/ElwinLoad.gif" style="width: 600px;" /></a>
</figure>
<dl class="simple">
<dt>Input File</dt><dd><p>Specify a range of input files that are either reduced (<em>_red.nxs</em>) or
<span class="math notranslate nohighlight">\(S(Q, \omega)\)</span>.</p>
</dd>
<dt>Group Input</dt><dd><p>The <a class="reference internal" href="../../algorithms/ElasticWindowMultiple-v1.html#algm-elasticwindowmultiple"><span class="std std-ref">ElasticWindowMultiple</span></a> algorithm is performed on the input files and returns a group
workspace as the output. This option, if unchecked, will ungroup these output workspaces.</p>
</dd>
<dt>Load History</dt><dd><p>If unchecked the input workspace will be loaded without it’s history.</p>
</dd>
<dt>Integration Range</dt><dd><p>The energy range over which to integrate the values.</p>
</dd>
<dt>Background Subtraction</dt><dd><p>If checked a background will be calculated and subtracted from the raw data.</p>
</dd>
<dt>Background Range</dt><dd><p>The energy range over which a background is calculated which is subtracted from
the raw data.</p>
</dd>
<dt>Normalise to Lowest Temp</dt><dd><p>If checked the raw files will be normalised to the run with the lowest
temperature, to do this there must be a valid sample environment entry in the
sample logs for each of the input files.</p>
</dd>
<dt>SE log name</dt><dd><p>The name of the sample environment log entry in the input files sample logs
(defaults to ‘sample’).</p>
</dd>
<dt>SE log value</dt><dd><p>The value to be taken from the “SE log name” data series (defaults to the
specified value in the instrument parameters file, and in the absence of such
specification, defaults to “last value”)</p>
</dd>
<dt>Preview File</dt><dd><p>The workspace currently active in the preview plot.</p>
</dd>
<dt>Spectrum</dt><dd><p>Changes the spectrum displayed in the preview plot.</p>
</dd>
<dt>Plot Current Preview</dt><dd><p>Plots the currently selected preview plot in a separate external window</p>
</dd>
<dt>Run</dt><dd><p>Runs the processing configured on the current tab.</p>
</dd>
<dt>Plot Spectra</dt><dd><p>If enabled, it will plot the selected workspace indices in the selected output workspace.</p>
</dd>
<dt>Save Result</dt><dd><p>Saves the result in the default save directory.</p>
</dd>
</dl>
</section>
<section id="elwin-example-workflow">
<span id="id1"></span><h3><a class="toc-backref" href="#id6" role="doc-backlink">Elwin Example Workflow</a><a class="headerlink" href="#elwin-example-workflow" title="Permalink to this heading">¶</a></h3>
<p>The Elwin tab operates on <code class="docutils literal notranslate"><span class="pre">_red</span></code> and <code class="docutils literal notranslate"><span class="pre">_sqw</span></code> files. The files used in this workflow can
be produced using the run numbers 104371-104375 on the
<a class="reference internal" href="Indirect%20Data%20Reduction.html"><span class="doc">Indirect Data Reduction</span></a> interface in the ISIS Energy
Transfer tab. The instrument used to produce these files is OSIRIS, the analyser is graphite
and the reflection is 002.</p>
<ol class="arabic simple">
<li><p>Untick the <strong>Load History</strong> checkbox next to the file selector if you want to load your data
without history.</p></li>
<li><p>Click <strong>Browse</strong> and select the files <code class="docutils literal notranslate"><span class="pre">osiris104371_graphite002_red</span></code>,
<code class="docutils literal notranslate"><span class="pre">osiris104372_graphite002_red</span></code>, <code class="docutils literal notranslate"><span class="pre">osiris104373_graphite002_red</span></code>, <code class="docutils literal notranslate"><span class="pre">osiris104374_graphite002_red</span></code>
and <code class="docutils literal notranslate"><span class="pre">osiris104375_graphite002_red</span></code>. Load these files and they will be plotted in the mini-plot
automatically.</p></li>
<li><p>The workspace and spectrum displayed in the mini-plot can be changed using the combobox and
spinbox seen directly above the mini-plot.</p></li>
<li><p>You may opt to change the x range of the mini-plot by changing the <strong>Integration Range</strong>, or
by sliding the blue lines seen on the mini-plot using the cursor. For the purpose of this
demonstration, use the default x range.</p></li>
<li><p>Tick <strong>Normalise to Lowest Temp</strong>. This option will produce an extra workspace with end suffix
_elt. However, for this to work the input workspaces must have a temperature. See the
description above for more information.</p></li>
<li><p>Click <strong>Plot Current Preview</strong> if you want a larger plot of the mini-plot.</p></li>
<li><p>Click <strong>Run</strong> and wait for the interface to finish processing. This should generate four
workspaces ending in _eq, _eq2, _elf and _elt.</p></li>
<li><p>In the <strong>Output</strong> section, select the workspace ending with _eq and then choose some workspace
indices (e.g. 0-2,4). Click <strong>Plot Spectra</strong> to plot the spectrum from the selected workspace.</p></li>
<li><p>Choose a default save directory and then click <strong>Save Result</strong> to save the output workspaces.
The workspace ending in _eq will be used in the <a class="reference internal" href="QENS%20Fitting.html#msdfit-example-workflow"><span class="std std-ref">I(Q, t) Fit</span></a>.</p></li>
</ol>
</section>
</section>
<section id="i-q-t">
<span id="iqt"></span><h2><a class="toc-backref" href="#id7" role="doc-backlink">I(Q, t)</a><a class="headerlink" href="#i-q-t" title="Permalink to this heading">¶</a></h2>
<p>Given sample and resolution inputs, carries out a fit as per the theory detailed
in the <a class="reference internal" href="../../algorithms/TransformToIqt-v1.html#algm-transformtoiqt"><span class="std std-ref">TransformToIqt</span></a> algorithm.</p>
<figure class="align-default" id="id3">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="i-q-t-options">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">I(Q, t) Options</a><a class="headerlink" href="#i-q-t-options" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>Sample</dt><dd><p>Either a reduced file (<em>_red.nxs</em>) or workspace (<em>_red</em>) or an <span class="math notranslate nohighlight">\(S(Q,
\omega)\)</span> file (<em>_sqw.nxs</em>) or workspace (<em>_sqw</em>).</p>
</dd>
<dt>Resolution</dt><dd><p>Either a resolution file (_res.nxs) or workspace (_res) or an <span class="math notranslate nohighlight">\(S(Q,
\omega)\)</span> file (<em>_sqw.nxs</em>) or workspace (<em>_sqw</em>).</p>
</dd>
<dt>ELow, EHigh</dt><dd><p>The rebinning range.</p>
</dd>
<dt>SampleBinning</dt><dd><p>The number of neighbouring bins are summed.</p>
</dd>
<dt>Symmetric Energy Range</dt><dd><p>Untick to allow an asymmetric energy range.</p>
</dd>
<dt>Spectrum</dt><dd><p>Changes the spectrum displayed in the preview plot.</p>
</dd>
<dt>Plot Current Preview</dt><dd><p>Plots the currently selected preview plot in a separate external window</p>
</dd>
<dt>Calculate Errors</dt><dd><p>The calculation of errors using a Monte Carlo implementation can be skipped by unchecking
this option.</p>
</dd>
<dt>Number Of Iterations</dt><dd><p>The number of iterations to perform in the Monte Carlo routine for error calculation
in I(Q,t).</p>
</dd>
<dt>Run</dt><dd><p>Runs the processing configured on the current tab.</p>
</dd>
<dt>Plot Spectra</dt><dd><p>If enabled, it will plot the selected workspace indices in the selected output workspace.</p>
</dd>
<dt>Plot Tiled</dt><dd><p>Generates a tiled plot containing the selected workspace indices. This option is accessed via the down
arrow on the <strong>Plot Spectra</strong> button.</p>
</dd>
<dt>Save Result</dt><dd><p>Saves the result workspace in the default save directory.</p>
</dd>
</dl>
</section>
<section id="i-q-t-example-workflow">
<span id="iqt-example-workflow"></span><h3><a class="toc-backref" href="#id9" role="doc-backlink">I(Q, t) Example Workflow</a><a class="headerlink" href="#i-q-t-example-workflow" title="Permalink to this heading">¶</a></h3>
<p>The I(Q, t) tab allows <code class="docutils literal notranslate"><span class="pre">_red</span></code> and <code class="docutils literal notranslate"><span class="pre">_sqw</span></code> for it’s sample file, and allows <code class="docutils literal notranslate"><span class="pre">_red</span></code>, <code class="docutils literal notranslate"><span class="pre">_sqw</span></code> and
<code class="docutils literal notranslate"><span class="pre">_res</span></code> for the resolution file. The sample file used in this workflow can be produced using the run
number 26176 on the <a class="reference internal" href="Indirect%20Data%20Reduction.html"><span class="doc">Indirect Data Reduction</span></a> interface in the ISIS
Energy Transfer tab. The resolution file is created in the ISIS Calibration tab using the run number
26173. The instrument used to produce these files is IRIS, the analyser is graphite
and the reflection is 002.</p>
<ol class="arabic simple">
<li><p>Click <strong>Browse</strong> for the sample and select the file <code class="docutils literal notranslate"><span class="pre">iris26176_graphite002_red</span></code>. Then click <strong>Browse</strong>
for the resolution and select the file <code class="docutils literal notranslate"><span class="pre">iris26173_graphite002_res</span></code>.</p></li>
<li><p>Change the <strong>SampleBinning</strong> variable to be 5. Changing this will calculate values for the <strong>EWidth</strong>,
<strong>SampleBins</strong> and <strong>ResolutionBins</strong> variables automatically by using the
<a class="reference internal" href="../../algorithms/TransformToIqt-v1.html#algm-transformtoiqt"><span class="std std-ref">TransformToIqt</span></a> algorithm where the <strong>BinReductionFactor</strong> is given by the
<strong>SampleBinning</strong> value. The <strong>SampleBinning</strong> value must be low enough for the <strong>ResolutionBins</strong> to be
at least 5. A description of this option can be found in the <a class="reference internal" href="#a-note-on-binning"><span class="std std-ref">A note on Binning</span></a> section.</p></li>
<li><p>Untick <strong>Calculate Errors</strong> if you do not want to calculate the errors for the output workspace which
ends with the suffix _iqt.</p></li>
<li><p>Click <strong>Run</strong> and wait for the interface to finish processing. This should generate a workspace ending
with a suffix _iqt.</p></li>
<li><p>In the <strong>Output</strong> section, select some workspace indices (e.g.0-2,4,6) for a tiled plot and then click
the down arrow on the <strong>Plot Spectra</strong> button before clicking <strong>Plot Tiled</strong>.</p></li>
<li><p>Choose a default save directory and then click <strong>Save Result</strong> to save the _iqt workspace.
This workspace will be used in the <a class="reference internal" href="QENS%20Fitting.html#iqtfit-example-workflow"><span class="std std-ref">I(Q, t) Fit Example Workflow</span></a>.</p></li>
</ol>
</section>
<section id="a-note-on-binning">
<span id="id2"></span><h3><a class="toc-backref" href="#id10" role="doc-backlink">A note on Binning</a><a class="headerlink" href="#a-note-on-binning" title="Permalink to this heading">¶</a></h3>
<p>The bin width is determined from the energy range and the sample binning factor. The number of bins is automatically
calculated based on the <strong>SampleBinning</strong> specified. The width is determined from the width of the range divided
by the number of bins.</p>
<p>The following binning parameters cannot be modified by the user and are instead automatically calculated through
the <a class="reference internal" href="../../algorithms/TransformToIqt-v1.html#algm-transformtoiqt"><span class="std std-ref">TransformToIqt</span></a> algorithm once a valid resolution file has been loaded. The calculated
binning parameters are displayed alongside the binning options:</p>
<dl class="simple">
<dt>EWidth</dt><dd><p>The calculated bin width.</p>
</dd>
<dt>SampleBins</dt><dd><p>The number of bins in the sample after rebinning.</p>
</dd>
<dt>ResolutionBins</dt><dd><p>The number of bins in the resolution after rebinning. Typically this should be at
least 5 and a warning will be shown if it is less.</p>
</dd>
</dl>
<p><a class="reference internal" href="Inelastic%20Data%20Analysis.html#interface-inelastic-data-analysis"><span class="std std-ref">Inelastic Data Analysis</span></a></p>
<p><strong>Categories</strong>: <a class="reference external" href="../ILL/categories/Interfaces.html">Interfaces</a> | <a class="reference external" href="categories/Indirect.html">Indirect</a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Indirect%20Diffraction.html" title="Previous Chapter: Indirect Diffraction"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Indirect Diffraction</span>
    </a>
  </li>
  <li>
    <a href="Indirect%20Settings.html" title="Next Chapter: Indirect Settings"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Settings &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>