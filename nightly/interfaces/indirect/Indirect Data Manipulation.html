<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Indirect Data Manipulation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/bootstrap-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Indirect Data Reduction" href="Indirect%20Data%20Reduction.html" />
    <link rel="prev" title="Indirect Corrections" href="Indirect%20Corrections.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.5</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U">Interfaces</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Indirect Data Manipulation</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <p><span class="math notranslate nohighlight">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<section id="indirect-data-manipulation">
<span id="interface-inelastic-data-manipulation"></span><h1>Indirect Data Manipulation<a class="headerlink" href="#indirect-data-manipulation" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="table-of-contents">
<p class="topic-title">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id6">Overview</a></p>
<ul>
<li><p><a class="reference internal" href="#action-buttons" id="id7">Action Buttons</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#symmetrise" id="id8">Symmetrise</a></p>
<ul>
<li><p><a class="reference internal" href="#symmetrise-options" id="id9">Symmetrise Options</a></p></li>
<li><p><a class="reference internal" href="#preview" id="id10">Preview</a></p></li>
<li><p><a class="reference internal" href="#symmetrise-example-workflow" id="id11">Symmetrise Example Workflow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#s-q-w" id="id12">S(Q, w)</a></p>
<ul>
<li><p><a class="reference internal" href="#instrument-options" id="id13">Instrument Options</a></p></li>
<li><p><a class="reference internal" href="#s-q-w-options" id="id14">S(Q, w) Options</a></p></li>
<li><p><a class="reference internal" href="#s-q-w-example-workflow" id="id15">S(Q, w) Example Workflow</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#moments" id="id16">Moments</a></p>
<ul>
<li><p><a class="reference internal" href="#moments-options" id="id17">Moments Options</a></p></li>
<li><p><a class="reference internal" href="#moments-example-workflow" id="id18">Moments Example Workflow</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>The Indirect Data Manipulation interface provides Processes for manipulating
reduced data from <a class="reference internal" href="Indirect%20Data%20Reduction.html#interface-indirect-data-reduction"><span class="std std-ref">Indirect Data Reduction</span></a>
and converting reduced instrument data to S(Q, w), or moments for analysis in the
<a class="reference internal" href="Inelastic%20Data%20Analysis.html#interface-inelastic-data-analysis"><span class="std std-ref">Indirect Data Analysis</span></a> and
<a class="reference internal" href="Indirect%20Bayes.html#interface-indirect-bayes"><span class="std std-ref">Indirect Bayes</span></a> interfaces.</p>
<figure class="align-right">
<a class="screenshot reference internal image-reference" href="../../_images/Data_Manipulation_interface.png"><img alt="../../_images/Data_Manipulation_interface.png" class="screenshot" src="../../_images/Data_Manipulation_interface.png" style="width: 350px;" /></a>
</figure>
<section id="action-buttons">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Action Buttons</a><a class="headerlink" href="#action-buttons" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>Settings</dt><dd><p>Opens the <a class="reference internal" href="Indirect%20Settings.html#interface-indirect-settings"><span class="std std-ref">Settings</span></a> GUI which allows you to
customize the settings for the Indirect interfaces.</p>
</dd>
</dl>
<dl class="simple">
<dt>?</dt><dd><p>Opens this help page.</p>
</dd>
<dt>Py</dt><dd><p>Exports a Python script which will replicate the processing done by the current tab.</p>
</dd>
<dt>Manage Directories</dt><dd><p>Opens the Manage Directories dialog allowing you to change your search directories
and default save directory and enable/disable data archive search.</p>
</dd>
</dl>
</section>
</section>
<section id="symmetrise">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Symmetrise</a><a class="headerlink" href="#symmetrise" title="Permalink to this heading">¶</a></h2>
<p>This tab allows you to take an asymmetric reduced file (<em>_red.nxs</em>) and symmetrise it about
the Y axis.</p>
<p>The curve is symmetrised such that the range of positive values between <span class="math notranslate nohighlight">\(EMin\)</span>
and <span class="math notranslate nohighlight">\(EMax\)</span> are reflected about the Y axis and replaces the negative values
in the range <span class="math notranslate nohighlight">\(-EMax\)</span> to <span class="math notranslate nohighlight">\(-EMin\)</span>, the curve between <span class="math notranslate nohighlight">\(-EMin\)</span> and
<span class="math notranslate nohighlight">\(EMin\)</span> is not modified.</p>
<figure class="align-default" id="id3">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="symmetrise-options">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Symmetrise Options</a><a class="headerlink" href="#symmetrise-options" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>Input</dt><dd><p>Allows you to select a reduced NeXus file (<em>_red.nxs</em>) or workspace (<em>_red</em>) as the
input to the algorithm.</p>
</dd>
<dt>EMin &amp; EMax</dt><dd><p>Sets the energy range that is to be reflected about <span class="math notranslate nohighlight">\(y=0\)</span>.</p>
</dd>
<dt>Spectrum No</dt><dd><p>Changes the spectrum shown in the preview plots.</p>
</dd>
<dt>XRange</dt><dd><p>Changes the range of the preview plot, this can be useful for inspecting the
curve before running the algorithm.</p>
</dd>
<dt>Preview</dt><dd><p>This button will update the preview plot and parameters under the Preview
section.</p>
</dd>
<dt>Run</dt><dd><p>Runs the processing configured on the current tab.</p>
</dd>
<dt>Plot Spectra</dt><dd><p>If enabled, it will plot the selected workspace indices in the selected output workspace.</p>
</dd>
<dt>Save Result</dt><dd><p>If enabled the result will be saved as a NeXus file in the default save
directory.</p>
</dd>
</dl>
</section>
<section id="preview">
<span id="preview-properties"></span><h3><a class="toc-backref" href="#id10" role="doc-backlink">Preview</a><a class="headerlink" href="#preview" title="Permalink to this heading">¶</a></h3>
<p>The preview section shows what a given spectra in the input will look like after
it has been symmetrised and gives an idea of how well the value of EMin fits the
curve on both sides of the peak.</p>
<dl class="simple">
<dt>Negative Y</dt><dd><p>The value of <span class="math notranslate nohighlight">\(y\)</span> at <span class="math notranslate nohighlight">\(x=-EMin\)</span>.</p>
</dd>
<dt>Positive Y</dt><dd><p>The value of <span class="math notranslate nohighlight">\(y\)</span> at <span class="math notranslate nohighlight">\(x=EMin\)</span>.</p>
</dd>
<dt>Delta Y</dt><dd><p>The difference between Negative and Positive Y. Typically this should be as
close to zero as possible.</p>
</dd>
</dl>
</section>
<section id="symmetrise-example-workflow">
<span id="id1"></span><h3><a class="toc-backref" href="#id11" role="doc-backlink">Symmetrise Example Workflow</a><a class="headerlink" href="#symmetrise-example-workflow" title="Permalink to this heading">¶</a></h3>
<p>The Symmetrise tab operates on <code class="docutils literal notranslate"><span class="pre">_red</span></code> files. The file used in this workflow can
be produced using the 26176 run number on the ISIS Energy Transfer tab. The instrument used to
produce this file is IRIS, the analyser is graphite and the reflection is 002. See the
<a class="reference internal" href="Indirect%20Data%20Reduction.html#isis-energy-transfer-example-workflow"><span class="std std-ref">ISIS Energy Transfer Example Workflow</span></a>.</p>
<ol class="arabic simple">
<li><p>In the <strong>Input</strong> box, load the file named <code class="docutils literal notranslate"><span class="pre">iris26176_graphite002_red</span></code>. This will
automatically plot the data on the first mini-plot.</p></li>
<li><p>Move the green slider located at x = -0.5 to be at x = -0.4.</p></li>
<li><p>Click <strong>Preview</strong>. This will update the <a class="reference internal" href="#preview-properties"><span class="std std-ref">Preview properties</span></a> and
the neighbouring mini-plot.</p></li>
<li><p>Click <strong>Run</strong> and wait for the interface to finish processing. This will run the
<a class="reference internal" href="../../algorithms/Symmetrise-v1.html#algm-symmetrise"><span class="std std-ref">Symmetrise</span></a> algorithm. The output workspace is called
<code class="docutils literal notranslate"><span class="pre">iris26176_graphite002_sym_red</span></code>.</p></li>
<li><p>Click <strong>Plot Spectra</strong> to produce a spectra plot of the output workspace. Other indices can be
plotted by entering indices in the box next to the <strong>Plot Spectra</strong> button. For example,
entering indices 0-2,4,6-7 will plot the spectra with workspace indices 0, 1, 2, 4, 6 and 7.</p></li>
</ol>
<p>Go to the <a class="reference internal" href="#sqw-example-workflow"><span class="std std-ref">S(Q, w) Example Workflow</span></a>.</p>
</section>
</section>
<section id="s-q-w">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">S(Q, w)</a><a class="headerlink" href="#s-q-w" title="Permalink to this heading">¶</a></h2>
<p>Provides an interface for running the <a class="reference internal" href="../../algorithms/SofQW-v1.html#algm-sofqw"><span class="std std-ref">SofQW</span></a> algorithm.</p>
<figure class="align-default" id="id4">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="instrument-options">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Instrument Options</a><a class="headerlink" href="#instrument-options" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>Instrument</dt><dd><p>Used to select the instrument on which the data being reduced was created on.</p>
</dd>
<dt>Analyser</dt><dd><p>The analyser bank that was active when the experiment was run, or for which
you are interested in seeing the results of.</p>
</dd>
<dt>Reflection</dt><dd><p>The reflection plane of the instrument set up.</p>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you need clarification as to the instrument setup you should use
please speak to the instrument scientist who dealt with your experiment.</p>
</div>
</section>
<section id="s-q-w-options">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">S(Q, w) Options</a><a class="headerlink" href="#s-q-w-options" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>Input</dt><dd><p>Allows you to select a reduced NeXus file (<em>_red.nxs</em>) or workspace (<em>_red</em>) as the
input to the algorithm. An automatic contour plot of <em>_rqw</em> will be plotted in the preview
plot once a file has finished loading.</p>
</dd>
<dt>Q Low, Q Width &amp; Q High</dt><dd><p>Q binning parameters that are passed to the <a class="reference internal" href="../../algorithms/SofQW-v1.html#algm-sofqw"><span class="std std-ref">SofQW</span></a> algorithm. The low and high
values can be determined using the neighbouring contour plot.</p>
</dd>
<dt>Rebin in Energy</dt><dd><p>If enabled the data will first be rebinned in energy before being passed to
the <a class="reference internal" href="../../algorithms/SofQW-v1.html#algm-sofqw"><span class="std std-ref">SofQW</span></a> algorithm.</p>
</dd>
<dt>E Low, E Width &amp; E High</dt><dd><p>The energy rebinning parameters. The low and high values can be determined using the neighbouring contour plot.</p>
</dd>
<dt>Run</dt><dd><p>Runs the processing configured on the current tab.</p>
</dd>
<dt>Plot Spectra</dt><dd><p>If enabled, it will plot the selected workspace indices in the selected output workspace.</p>
</dd>
<dt>Plot Contour</dt><dd><p>If enabled, it will plot the selected output workspace as a contour plot.</p>
</dd>
<dt>Save Result</dt><dd><p>If enabled the result will be saved as a NeXus file in the default save directory.</p>
</dd>
</dl>
</section>
<section id="s-q-w-example-workflow">
<span id="sqw-example-workflow"></span><h3><a class="toc-backref" href="#id15" role="doc-backlink">S(Q, w) Example Workflow</a><a class="headerlink" href="#s-q-w-example-workflow" title="Permalink to this heading">¶</a></h3>
<p>The S(Q, w) tab operates on <code class="docutils literal notranslate"><span class="pre">_red</span></code> files. The file used in this workflow can be produced
using the 26176 run number on the ISIS Energy Transfer tab. The instrument used to
produce this file is IRIS, the analyser is graphite and the reflection is 002. See the
<a class="reference internal" href="Indirect%20Data%20Reduction.html#isis-energy-transfer-example-workflow"><span class="std std-ref">ISIS Energy Transfer Example Workflow</span></a>.</p>
<ol class="arabic simple">
<li><p>In the <strong>Input</strong> box, load the file named <code class="docutils literal notranslate"><span class="pre">iris26176_graphite002_red</span></code>. This will
automatically plot the data as a contour plot within the interface.</p></li>
<li><p>Set the <strong>Q Low</strong>, <strong>Q Width</strong> and <strong>Q High</strong> to be 0.5, 0.05 and 1.8. These values are
read from the contour plot.</p></li>
<li><p>Tick <strong>Rebin in Energy</strong>.</p></li>
<li><p>Set the <strong>E Low</strong>, <strong>E Width</strong> and <strong>E High</strong> to be -0.5, 0.005 and 0.5. Again, these values
should be read from the contour plot.</p></li>
<li><p>Click <strong>Run</strong> and wait for the interface to finish processing. This will perform an energy
rebin before performing the <a class="reference internal" href="../../algorithms/SofQW-v1.html#algm-sofqw"><span class="std std-ref">SofQW</span></a> algorithm. The output workspace ends
with suffix _sqw and is called <code class="docutils literal notranslate"><span class="pre">iris26176_graphite002_sqw</span></code>.</p></li>
<li><p>Enter a list of workspace indices in the output options (e.g. 0-2,4,6-7) and then click
<strong>Plot Spectra</strong> to plot spectra from the output workspace.</p></li>
</ol>
<ol class="arabic simple" start="6">
<li><p>Click the down arrow on the <strong>Plot Spectra</strong> button, and select <strong>Plot Contour</strong>. This will
produce a contour plot of the output workspace.</p></li>
<li><p>Choose a default save directory and then click <strong>Save Result</strong> to save the output workspace.
The _sqw file is used in the <a class="reference internal" href="#moments-example-workflow"><span class="std std-ref">Moments Example Workflow</span></a>.</p></li>
</ol>
</section>
</section>
<section id="moments">
<h2><a class="toc-backref" href="#id16" role="doc-backlink">Moments</a><a class="headerlink" href="#moments" title="Permalink to this heading">¶</a></h2>
<p>This interface uses the <a class="reference internal" href="../../algorithms/SofQWMoments-v1.html#algm-sofqwmoments"><span class="std std-ref">SofQWMoments</span></a> algorithm to
calculate the <span class="math notranslate nohighlight">\(n^{th}\)</span> moment of an <span class="math notranslate nohighlight">\(S(Q, \omega)\)</span> workspace created
by the SofQW tab.</p>
<figure class="align-default" id="id5">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
<figcaption>
<p><span class="caption-text">Enable screenshots using DOCS_SCREENSHOTS in CMake</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="moments-options">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Moments Options</a><a class="headerlink" href="#moments-options" title="Permalink to this heading">¶</a></h3>
<dl class="simple">
<dt>Input</dt><dd><p>Allows you to select an <span class="math notranslate nohighlight">\(S(Q, \omega)\)</span> file (<em>_sqw.nxs</em>) or workspace
(<em>_sqw</em>) as the input to the algorithm.</p>
</dd>
<dt>Scale By</dt><dd><p>Used to set an optional scale factor by which to scale the output of the
algorithm.</p>
</dd>
<dt>EMin &amp; EMax</dt><dd><p>Used to set the energy range of the sample that the algorithm will use for
processing.</p>
</dd>
<dt>Run</dt><dd><p>Runs the processing configured on the current tab.</p>
</dd>
<dt>Plot Spectra</dt><dd><p>If enabled, it will plot the selected workspace indices in the selected output workspace.</p>
</dd>
<dt>Save Result</dt><dd><p>If enabled the result will be saved as a NeXus file in the default save directory.</p>
</dd>
</dl>
</section>
<section id="moments-example-workflow">
<span id="id2"></span><h3><a class="toc-backref" href="#id18" role="doc-backlink">Moments Example Workflow</a><a class="headerlink" href="#moments-example-workflow" title="Permalink to this heading">¶</a></h3>
<p>The Moments tab operates on <code class="docutils literal notranslate"><span class="pre">_sqw</span></code> files. The file used in this workflow is produced during
the <a class="reference internal" href="#sqw-example-workflow"><span class="std std-ref">S(Q, w) Example Workflow</span></a>.</p>
<ol class="arabic simple">
<li><p>In the <strong>Input</strong> box, load the file named <code class="docutils literal notranslate"><span class="pre">irs26176_graphite002_sqw</span></code>. This will
automatically plot the data in the first mini-plot.</p></li>
<li><p>Drag the blue sliders on the mini-plot so they are x=-0.4 and x=0.4.</p></li>
<li><p>Click <strong>Run</strong> and wait for the interface to finish processing. This will run the
<a class="reference internal" href="../../algorithms/SofQWMoments-v1.html#algm-sofqwmoments"><span class="std std-ref">SofQWMoments</span></a> algorithm. The output workspace ends
with suffix _moments and is called <code class="docutils literal notranslate"><span class="pre">iris26176_graphite002_moments</span></code>.</p></li>
</ol>
<p><strong>Categories</strong>: <a class="reference external" href="../ILL/categories/Interfaces.html">Interfaces</a> | <a class="reference external" href="categories/Indirect.html">Indirect</a></p>
</section>
</section>
</section>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Indirect%20Corrections.html" title="Previous Chapter: Indirect Corrections"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Indirect Corrections</span>
    </a>
  </li>
  <li>
    <a href="Indirect%20Data%20Reduction.html" title="Next Chapter: Indirect Data Reduction"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Data... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>