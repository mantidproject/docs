<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ExportExperimentLog v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.20220909.1939',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ExportGeometry v1" href="ExportGeometry-v1.html" />
    <link rel="prev" title="ExponentialMD v1" href="ExponentialMD-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">ExportExperimentLog v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="exportexperimentlog-v1">
<span id="algm-exportexperimentlog"></span><span id="algm-exportexperimentlog-v1"></span><h1>ExportExperimentLog v1<a class="headerlink" href="#exportexperimentlog-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ExportExperimentLog-v1_dlg.png"><img alt="../_images/ExportExperimentLog-v1_dlg.png" class="screenshot" src="../_images/ExportExperimentLog-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>ExportExperimentLog</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a></li>
<li><a class="reference internal" href="#file-mode" id="id6">File Mode</a></li>
<li><a class="reference internal" href="#missing-sample-logs" id="id7">Missing Sample Logs</a></li>
<li><a class="reference internal" href="#sample-log-operation" id="id8">Sample Log Operation</a></li>
<li><a class="reference internal" href="#file-format" id="id9">File format</a></li>
<li><a class="reference internal" href="#time-zone" id="id10">Time Zone</a></li>
<li><a class="reference internal" href="#usage" id="id11">Usage</a></li>
<li><a class="reference internal" href="#source" id="id12">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="ExportSampleLogsToCSVFile-v1.html#algm-exportsamplelogstocsvfile"><span class="std std-ref">ExportSampleLogsToCSVFile</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="2%" />
<col width="13%" />
<col width="6%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Input workspace containing the sample log information.</td>
</tr>
<tr class="row-odd"><td>OutputFilename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Output file of the experiment log. Allowed extensions: [‘.txt, .csv’]</td>
</tr>
<tr class="row-even"><td>FileMode</td>
<td>Input</td>
<td>string</td>
<td>append</td>
<td>Optional to create a new file or append to an existing file. Allowed values: [‘append’, ‘fastappend’, ‘new’]</td>
</tr>
<tr class="row-odd"><td>SampleLogNames</td>
<td>Input</td>
<td>str list</td>
<td>&#160;</td>
<td>Sample log names.</td>
</tr>
<tr class="row-even"><td>SampleLogTitles</td>
<td>Input</td>
<td>str list</td>
<td>&#160;</td>
<td>Log sample titles as file header.</td>
</tr>
<tr class="row-odd"><td>SampleLogOperation</td>
<td>Input</td>
<td>str list</td>
<td>&#160;</td>
<td>Operation on each log, including None (as no operation), min, max, average, sum and “0”.</td>
</tr>
<tr class="row-even"><td>FileFormat</td>
<td>Input</td>
<td>string</td>
<td>tab</td>
<td>Output file format.  ‘tab’ format will insert a tab between 2 adjacent values; ‘comma’ will put a , instead. With this option, the posfix of the output file is .csv automatically.  Allowed values: [‘tab’, ‘comma (csv)’]</td>
</tr>
<tr class="row-odd"><td>OrderByTitle</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Log file will be ordered by the value of this title from low to high.</td>
</tr>
<tr class="row-even"><td>RemoveDuplicateRecord</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Coupled with OrderByTitle, duplicated record will be removed.</td>
</tr>
<tr class="row-odd"><td>OverrideLogValue</td>
<td>Input</td>
<td>str list</td>
<td>&#160;</td>
<td>List of paired strings as log title and value to override values from workspace.</td>
</tr>
<tr class="row-even"><td>TimeZone</td>
<td>Input</td>
<td>string</td>
<td>America/New_York</td>
<td>Allowed values: [‘UTC’, ‘America/New_York’, ‘Asia/Shanghai’, ‘Australia/Sydney’, ‘Europe/London’, ‘GMT+0’, ‘Europe/Paris’, ‘Europe/Copenhagen’]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Algorithm ExportExperimentLog obtains run information, sample
information and sample log information from a MatrixWorkspace and write
them to a csv file.</p>
</div>
<div class="section" id="file-mode">
<h2><a class="toc-backref" href="#id6">File Mode</a><a class="headerlink" href="#file-mode" title="Permalink to this headline">¶</a></h2>
<p>There are 3 modes to write the experiment log file.</p>
<ol class="arabic simple">
<li>“new”: A new file will be created with header line;</li>
</ol>
<ul class="simple">
<li>If a file with same name exists, then this file will be overwritten;</li>
</ul>
<p>2. “appendfast”: A line of experiment log information will be appended
to an existing file;</p>
<ul class="simple">
<li>It is assumed that the log names given are exactly same as those in
the file, as well as their order;</li>
<li>Input property <em>SampleLogTitles</em> will be ignored in this option;</li>
</ul>
<p>3. “append”: A line of experiment log information will be appended to an
existing file;</p>
<ul class="simple">
<li>The algorithm will check whether the specified log file names, titles
and their orders are exactly same as those in the file to append to;</li>
<li>If any difference is deteced, the old file will be renamed in the
same directory. And a new file will be generated.</li>
</ul>
</div>
<div class="section" id="missing-sample-logs">
<h2><a class="toc-backref" href="#id7">Missing Sample Logs</a><a class="headerlink" href="#missing-sample-logs" title="Permalink to this headline">¶</a></h2>
<p>If there is any sample log specified in the properites but does not
exist in the workspace, a zero float value will be put to the experiment
log information line, as the preference of instrument scientist.</p>
</div>
<div class="section" id="sample-log-operation">
<h2><a class="toc-backref" href="#id8">Sample Log Operation</a><a class="headerlink" href="#sample-log-operation" title="Permalink to this headline">¶</a></h2>
<p>If the type of a sample log is TimeSeriesProperty, it must be one of the
following 5 types.</p>
<ul class="simple">
<li>“min”: minimum TimeSeriesProperty’s values;</li>
<li>“max”: maximum TimeSeriesProperty’s values;</li>
<li>“average”: average of TimeSeriesProperty’s values;</li>
<li>“sum”: summation of TimeSeriesProperty’s values;</li>
<li>“0”: first value of TimeSeriesProperty’s value.</li>
</ul>
<p>If the type of a sample log is string and in fact it is a string for
time, then there will an option as</p>
<ul class="simple">
<li>“localtime”: convert the time from UTC (default) to local time</li>
</ul>
<p>Otherwise, there is no operation required. For example, log ‘duration’
or ‘run_number’ does not have any operation on its value. An empty
string will serve for them in property ‘SampleLogOperation’.</p>
</div>
<div class="section" id="file-format">
<h2><a class="toc-backref" href="#id9">File format</a><a class="headerlink" href="#file-format" title="Permalink to this headline">¶</a></h2>
<p>There are two types of output file formats that are supported. They are
csv (comma separated) file and tsv (tab separated) file. The csv file
must have an extension as “.csv”. If a user gives the name of a log
file, which is in csv format, does not have an extension as .csv, the
algorithm will correct it automatically.</p>
</div>
<div class="section" id="time-zone">
<h2><a class="toc-backref" href="#id10">Time Zone</a><a class="headerlink" href="#time-zone" title="Permalink to this headline">¶</a></h2>
<p>The time stamps of sample logs are recorded as UTC time.
Some users wants to see the exported sample log as the neutron facility’s local time.
So the input property ‘TimeZone’ is for this purpose.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id11">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Export several experiment logs to a csv file:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">nxsfilename</span> <span class="o">=</span> <span class="s2">&quot;HYS_11092_event.nxs&quot;</span>
<span class="n">wsname</span> <span class="o">=</span> <span class="s2">&quot;HYS_11092_event&quot;</span>

<span class="n">defaultdir</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;default.savedirectory&quot;</span><span class="p">]</span>
<span class="k">if</span> <span class="n">defaultdir</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
  <span class="n">defaultdir</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s2">&quot;defaultsave.directory&quot;</span><span class="p">]</span>
<span class="n">savefile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">defaultdir</span><span class="p">,</span> <span class="s2">&quot;testlog.txt&quot;</span><span class="p">)</span>

<span class="n">Load</span><span class="p">(</span><span class="n">Filename</span> <span class="o">=</span> <span class="n">nxsfilename</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span> <span class="o">=</span> <span class="n">wsname</span><span class="p">,</span>
    <span class="n">MetaDataOnly</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">LoadLogs</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">ExportExperimentLog</span><span class="p">(</span>
    <span class="n">InputWorkspace</span> <span class="o">=</span> <span class="n">wsname</span><span class="p">,</span>
    <span class="n">OutputFilename</span> <span class="o">=</span> <span class="n">savefile</span><span class="p">,</span>
    <span class="n">FileMode</span> <span class="o">=</span> <span class="s2">&quot;new&quot;</span><span class="p">,</span>
    <span class="n">SampleLogNames</span> <span class="o">=</span> <span class="s2">&quot;run_start, run_title&quot;</span><span class="p">,</span>
    <span class="n">SampleLogTitles</span> <span class="o">=</span> <span class="s2">&quot;AA, BB&quot;</span><span class="p">,</span>
    <span class="n">SampleLogOperation</span> <span class="o">=</span> <span class="s2">&quot;None, None&quot;</span><span class="p">,</span>
    <span class="n">FileFormat</span> <span class="o">=</span> <span class="s2">&quot;tab&quot;</span><span class="p">,</span>
    <span class="n">TimeZone</span> <span class="o">=</span> <span class="s2">&quot;America/New_York&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;File is created =  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">savefile</span><span class="p">)))</span>

<span class="c1"># Get lines of file</span>
<span class="n">sfile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">savefile</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">slines</span> <span class="o">=</span> <span class="n">sfile</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="n">sfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of lines in File = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">slines</span><span class="p">)))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>File is created =  True
Number of lines in File = 2
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Logs.html">DataHandling\Logs</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id12">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/34d8076c38ee24128cff66d5dfa6be380c8f35dc/Framework/PythonInterface/plugins/algorithms/ExportExperimentLog.py">ExportExperimentLog.py</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ExponentialMD-v1.html" title="Previous Chapter: ExponentialMD v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ExponentialMD v1</span>
    </a>
  </li>
  <li>
    <a href="ExportGeometry-v1.html" title="Next Chapter: ExportGeometry v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ExportGeometry v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>