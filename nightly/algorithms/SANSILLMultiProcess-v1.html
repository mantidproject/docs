<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SANSILLMultiProcess v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.20220909.1939',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SANSILLParameterScan v1" href="SANSILLParameterScan-v1.html" />
    <link rel="prev" title="SANSILLIntegration v1" href="SANSILLIntegration-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SANSILLMultiProcess v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="sansillmultiprocess-v1">
<span id="algm-sansillmultiprocess"></span><span id="algm-sansillmultiprocess-v1"></span><h1>SANSILLMultiProcess v1<a class="headerlink" href="#sansillmultiprocess-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/SANSILLMultiProcess-v1_dlg.png"><img alt="../_images/SANSILLMultiProcess-v1_dlg.png" class="screenshot" src="../_images/SANSILLMultiProcess-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>SANSILLMultiProcess</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a></li>
<li><a class="reference internal" href="#output" id="id6">Output</a></li>
<li><a class="reference internal" href="#notes" id="id7">Notes</a></li>
<li><a class="reference internal" href="#workflow" id="id8">Workflow</a></li>
<li><a class="reference internal" href="#source" id="id9">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Performs SANS data reduction of the entire experiment.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="SANSILLReduction-v2.html#algm-sansillreduction"><span class="std std-ref">SANSILLReduction</span></a>, <a class="reference internal" href="SANSILLIntegration-v1.html#algm-sansillintegration"><span class="std std-ref">SANSILLIntegration</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="3%" />
<col width="16%" />
<col width="6%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SampleRunsD1</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Sample run(s) at the distance #1. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>SampleRunsD2</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Sample run(s) at the distance #2. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-even"><td>SampleRunsD3</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Sample run(s) at the distance #3. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>SampleRunsD4</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Sample run(s) at the distance #4. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-even"><td>SampleRunsD5</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Sample run(s) at the distance #5. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>DarkCurrentRuns</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Absorber (Cd/B4C) run(s). Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-even"><td>EmptyBeamRuns</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Empty beam run(s). Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>FluxRuns</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Empty beam run(s) for flux calculation only; if left blank the flux will be calculated from EmptyBeamRuns. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-even"><td>EmptyContainerRuns</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Empty container run(s). Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>SampleTrRunsW1</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Sample transmission run(s) at the wavelength #1. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-even"><td>SampleTrRunsW2</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Sample transmission run(s) at the wavelength #2. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>TrDarkCurrentRuns</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Absorber (Cd/B4C) run(s) for transmission calculation. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-even"><td>ContainerTrRuns</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Container transmission run(s). Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>TrEmptyBeamRuns</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Empty beam run(s) for transmission calculation. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-even"><td>SensitivityMap</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>File or workspace containing the map of the relative detector efficiencies.</td>
</tr>
<tr class="row-odd"><td>DefaultMask</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>File or workspace containing the default mask (detector edges and dead pixels/tubes) to be applied to all the detector configurations.</td>
</tr>
<tr class="row-even"><td>BeamStopMasks</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>File(s) or workspace(s) containing the detector mask per distance configuration (typically beam stop).</td>
</tr>
<tr class="row-odd"><td>FlatFields</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>File(s) or workspaces containing the reduced water data (in 2D) for absolute normalisation.</td>
</tr>
<tr class="row-even"><td>Solvents</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>File(s) or workspace(s) containing the reduced solvent/buffer data (in 2D) for solvent subtraction.</td>
</tr>
<tr class="row-odd"><td>TransmissionThetaDependent</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Whether or not to apply the transmission correction in 2theta-dependent way.</td>
</tr>
<tr class="row-even"><td>NormaliseBy</td>
<td>Input</td>
<td>string</td>
<td>Monitor</td>
<td>Allowed values: [‘None’, ‘Time’, ‘Monitor’]</td>
</tr>
<tr class="row-odd"><td>TrBeamRadius</td>
<td>Input</td>
<td>dbl list</td>
<td>0.1</td>
<td>Beam radius [m] used for transmission and flux calculations.</td>
</tr>
<tr class="row-even"><td>BeamRadius</td>
<td>Input</td>
<td>dbl list</td>
<td>0.25</td>
<td>Beam radius [m] used for beam center search.</td>
</tr>
<tr class="row-odd"><td>SampleThickness</td>
<td>Input</td>
<td>dbl list</td>
<td>0.1</td>
<td>Sample thickness [cm] used in final normalisation.</td>
</tr>
<tr class="row-even"><td>SampleThicknessFrom</td>
<td>Input</td>
<td>string</td>
<td>User</td>
<td>Define where to read the sample thicknesses from. Allowed values: [‘User’, ‘Nexus’]</td>
</tr>
<tr class="row-odd"><td>SampleNames</td>
<td>Input</td>
<td>str list</td>
<td>&#160;</td>
<td>Sample names to put in the axis of the output workspaces.</td>
</tr>
<tr class="row-even"><td>SampleNamesFrom</td>
<td>Input</td>
<td>string</td>
<td>RunNumber</td>
<td>Define where to read the sample names from. Allowed values: [‘User’, ‘Nexus’, ‘RunNumber’]</td>
</tr>
<tr class="row-odd"><td>WaterCrossSection</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Provide the water cross-section; used only if the absolute scale is done by dividing to water.</td>
</tr>
<tr class="row-even"><td>ProduceSensitivity</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether or not to produce a sensitivity map; should be used for water reduction only.</td>
</tr>
<tr class="row-odd"><td>SensitivityWithOffsets</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether the sensitivity data has been measured with different horizontal offsets (D22 only).</td>
</tr>
<tr class="row-even"><td>DistancesAtWavelength2</td>
<td>Input</td>
<td>long list</td>
<td>&#160;</td>
<td>Defines which distance indices (starting from 0) match to the 2nd wavelength</td>
</tr>
<tr class="row-odd"><td>OutputBinning</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Output binning for each distance( : separated list of binning params).</td>
</tr>
<tr class="row-even"><td>OutputType</td>
<td>Input</td>
<td>string</td>
<td>I(Q)</td>
<td>Final integration type; at the moment only I(Q) is supported. Allowed values: [‘I(Q)’]</td>
</tr>
<tr class="row-odd"><td>CalculateResolution</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>Choose to calculate the Q resolution. Allowed values: [‘MildnerCarpenter’, ‘DirectBeam’, ‘None’]</td>
</tr>
<tr class="row-even"><td>DefaultQBinning</td>
<td>Input</td>
<td>string</td>
<td>PixelSizeBased</td>
<td>Choose how to calculate the default Q binning. Allowed values: [‘PixelSizeBased’, ‘ResolutionBased’]</td>
</tr>
<tr class="row-odd"><td>BinningFactor</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Specify a multiplicative factor for default Q binning (pixel or resolution based).</td>
</tr>
<tr class="row-even"><td>NumberOfWedges</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Number of wedges to integrate separately.</td>
</tr>
<tr class="row-odd"><td>WedgeAngle</td>
<td>Input</td>
<td>number</td>
<td>30</td>
<td>Wedge opening angle [degrees].</td>
</tr>
<tr class="row-even"><td>WedgeOffset</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Wedge offset angle from x+ axis.</td>
</tr>
<tr class="row-odd"><td>AsymmetricWedges</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether to have asymmetric wedges.</td>
</tr>
<tr class="row-even"><td>WavelengthRange</td>
<td>Input</td>
<td>dbl list</td>
<td>1,10</td>
<td>Wavelength range [Angstrom] to be used in integration (TOF only).</td>
</tr>
<tr class="row-odd"><td>ShapeTable</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></td>
<td>&#160;</td>
<td>The name of the table workspace containing drawn shapes on which to integrate. If provided, NumberOfWedges, WedgeOffset and WedgeAngle arguments are ignored.</td>
</tr>
<tr class="row-even"><td>OutputPanels</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Output I(Q) per detector bank.</td>
</tr>
<tr class="row-odd"><td>PerformStitching</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Wheter or not to perform stitching.</td>
</tr>
<tr class="row-even"><td>ManualScaleFactors</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Manually specified scale factors, must follow the same order of the workspaces in the list.</td>
</tr>
<tr class="row-odd"><td>TieScaleFactors</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether or not to calculate a single scale factor per workspace for all the spectra.</td>
</tr>
<tr class="row-even"><td>ScaleFactorCalculation</td>
<td>Input</td>
<td>string</td>
<td>MedianOfRatios</td>
<td>Allowed values: [‘MedianOfRatios’, ‘Manual’]</td>
</tr>
<tr class="row-odd"><td>StitchReferenceIndex</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The index of the reference workspace during stitching, by default the middle distance will be chosen as reference if there are 3.</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td>WorkspaceGroup</td>
<td><em>Mandatory</em></td>
<td>The output workspace group containing the reduced data.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithms performs complete treatment of SANS data recorded with the ILL instruments.
This high level algorithm steers the reduction for <strong>multiple</strong> samples measured with one or more detector distances in the most optimal way.
The sample measurements will be corrected for all the instrumental effects and converted to Q-space, producing by default the azimuthal average curve <span class="math">\(I(Q)\)</span>.
Optionally, it can also perform anisotropic integration with azimuthal wedges or hand-drawn sectors in the instrument viewer.
If requested, it can also produce separate <span class="math">\(I(Q)\)</span> curves per detector panel.
Note, that panels and azimuthal wedges cannot be requested simultaneously.
The algorithm supports monochromatic (standard, kinetic, and event) as well as TOF modes (linear or variable binning, D33 only).
Makes use of <a class="reference internal" href="SANSILLReduction-v2.html#algm-sansillreduction-v2"><span class="std std-ref">SANSILLReduction</span></a> and <a class="reference internal" href="SANSILLIntegration-v1.html#algm-sansillintegration"><span class="std std-ref">SANSILLIntegration</span></a> and the algorithm suite used therein.</p>
</div>
<div class="section" id="output">
<h2><a class="toc-backref" href="#id6">Output</a><a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>The algorithm will generate a workspace group with the name as provided in the mandatory parameter <strong>OutputWorkspace</strong>.
The group will contain many workspaces as follows:</p>
<ul class="simple">
<li>The corrected real-space workspaces (2D), one per detector distance</li>
<li>The integrated I(Q) workspace, one per detector distance</li>
<li>Optionally, the I(Q) workspaces per azimuthal sector or per detector panel, if requested</li>
<li>The stitched I(Q) workspace (also for wedges, if requested)</li>
<li>The calculated scale factors for stitching</li>
<li>The transmission workspaces, one per wavelength</li>
</ul>
</div>
<div class="section" id="notes">
<h2><a class="toc-backref" href="#id7">Notes</a><a class="headerlink" href="#notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The algorithm will cache the reduced calibration measurements (empty beams, dark currents, empty containers, etc.) in the ADS. This is to ensure that subsequent runs with the same calibrants run faster. However, if a critical parameter is changed, such as the normalisation option, those workspaces must be manually cleared before processing again.</li>
<li>The sample runs for different distances must be filled in order; that is, if there is only one distance is present, they must be filled in D1, if only 2, then D1 and D2, and so on.</li>
<li>The transmission runs for different wavelengths must be filled in order; that is, if there is only one wavelength, they must be filled in W1, if 2, then W1 and W2.</li>
<li>See the section in <a class="reference internal" href="SANSILLReduction-v2.html#algm-sansillreduction-v2"><span class="std std-ref">SANSILLReduction</span></a> regarding the blank samples and transmission replicae.</li>
</ul>
</div>
<div class="section" id="workflow">
<h2><a class="toc-backref" href="#id8">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<p>Below is the high level flowchart of the algorithm. It calculates transmissions (up to 2 wavelengths), then proceeds to the reduction of sample runs (up to 5 distances).
At each distance, it will load all the samples, concatenate them and then pass through the reduction steps up to azimuthal averaging.
Finally, the I(Q) curves obtained per distance, will be stitched.</p>
<img alt="../_images/ILLSANS-multiprocess_wkflw.svg" src="../_images/ILLSANS-multiprocess_wkflw.svg" /><p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/ILL/SANS.html">ILL\SANS</a> | <a class="reference external" href="categories/ILL/Auto.html">ILL\Auto</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id9">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/34d8076c38ee24128cff66d5dfa6be380c8f35dc/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/SANSILLMultiProcess.py">SANSILLMultiProcess.py</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SANSILLIntegration-v1.html" title="Previous Chapter: SANSILLIntegration v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SANSILLIntegration v1</span>
    </a>
  </li>
  <li>
    <a href="SANSILLParameterScan-v1.html" title="Next Chapter: SANSILLParameterScan v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SANSILLParame... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>