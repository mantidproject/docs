<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SimulatedDensityOfStates v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.20220909.1939',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="SingleCrystalDiffuseReduction v1" href="SingleCrystalDiffuseReduction-v1.html" />
    <link rel="prev" title="Description" href="SimulateResolutionConvolvedModel-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">SimulatedDensityOfStates v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="simulateddensityofstates-v1">
<span id="algm-simulateddensityofstates"></span><span id="algm-simulateddensityofstates-v1"></span><h1>SimulatedDensityOfStates v1<a class="headerlink" href="#simulateddensityofstates-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/SimulatedDensityOfStates-v1_dlg.png"><img alt="../_images/SimulatedDensityOfStates-v1_dlg.png" class="screenshot" src="../_images/SimulatedDensityOfStates-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>SimulatedDensityOfStates</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a></li>
<li><a class="reference internal" href="#workflow" id="id5">Workflow</a></li>
<li><a class="reference internal" href="#usage" id="id6">Usage</a></li>
<li><a class="reference internal" href="#source" id="id7">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculates phonon densities of states, Raman and IR spectrum.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="3%" />
<col width="13%" />
<col width="5%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>CASTEPFile</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Filename of the CASTEP file. Allowed values: [‘castep’]</td>
</tr>
<tr class="row-odd"><td>PHONONFile</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Filename of the PHONON file. Allowed values: [‘phonon’]</td>
</tr>
<tr class="row-even"><td>ForceConstantsFile</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Allowed extensions: [‘.castep_bin’, ‘.json’, ‘.yaml’]</td>
</tr>
<tr class="row-odd"><td>ForceConstantsSampling</td>
<td>Input</td>
<td>number</td>
<td>20</td>
<td>Real-space cutoff in Angstrom for Brillouin zone sampling.</td>
</tr>
<tr class="row-even"><td>Function</td>
<td>Input</td>
<td>string</td>
<td>Gaussian</td>
<td>Type of function to fit to peaks. Allowed values: [‘Gaussian’, ‘Lorentzian’]</td>
</tr>
<tr class="row-odd"><td>PeakWidth</td>
<td>Input</td>
<td>string</td>
<td>10.0</td>
<td>Set Gaussian/Lorentzian FWHM for broadening. Default is 10</td>
</tr>
<tr class="row-even"><td>SpectrumType</td>
<td>Input</td>
<td>string</td>
<td>DOS</td>
<td>Type of intensities to extract and model (fundamentals-only) from .phonon. Allowed values: [‘IonTable’, ‘DOS’, ‘IR_Active’, ‘Raman_Active’, ‘BondTable’]</td>
</tr>
<tr class="row-odd"><td>CalculateIonIndices</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Calculates the individual index of all Ions in the simulated data.</td>
</tr>
<tr class="row-even"><td>StickHeight</td>
<td>Input</td>
<td>number</td>
<td>0.01</td>
<td>Intensity of peaks in stick diagram.</td>
</tr>
<tr class="row-odd"><td>Scale</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Scale the intesity by the given factor. Default is no scaling.</td>
</tr>
<tr class="row-even"><td>BinWidth</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Set histogram resolution for binning (eV or cm**-1). Default is 1</td>
</tr>
<tr class="row-odd"><td>Temperature</td>
<td>Input</td>
<td>number</td>
<td>300</td>
<td>Temperature to use (in raman spectrum modelling). Default is 300</td>
</tr>
<tr class="row-even"><td>ZeroThreshold</td>
<td>Input</td>
<td>number</td>
<td>3</td>
<td>Ignore frequencies below the this threshold. Default is 3.0</td>
</tr>
<tr class="row-odd"><td>Ions</td>
<td>Input</td>
<td>str list</td>
<td>&#160;</td>
<td>List of Ions to use to calculate partial density of states.If left blank, total density of states will be calculated</td>
</tr>
<tr class="row-even"><td>SumContributions</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Sum the partial density of states into a single workspace.</td>
</tr>
<tr class="row-odd"><td>ScaleByCrossSection</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>Sum the partial density of states by the scattering cross section. Allowed values: [‘None’, ‘Total’, ‘Incoherent’, ‘Coherent’]</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Name to give the output workspace.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Calculates phonon densities of states, Raman and IR spectrum from the
output of CASTEP code obtained in the form of <em>.phonon</em> and <em>.castep</em> files.</p>
<p>The PeakWidth property may be passed a function containing the variable “energy”
(e.g. <em>0.1*energy</em>) to set the FWHM of the peak as a function of the energy
(centre point of the peak). This can be useful for comparison with experimental
data by allowing the peak width to change according to the resolution of the
instrument.</p>
<p>If the IonTable spectrum type is used then the output workspace will be
a table workspace containing each ion that is present in a <em>.phonon</em> file.</p>
<p>If the BondTable spectrum type is used then the output workspace will be
a table workspace containing details of the bonds defined in the <em>.castep</em>
file.</p>
</div>
<div class="section" id="workflow">
<h2><a class="toc-backref" href="#id5">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/SimulatedDensityOfStates-v1_wkflw.svg" src="../_images/SimulatedDensityOfStates-v1_wkflw.svg" /></div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id6">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In Mantid this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - loading data from phonon &amp; castep files:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Loading the same data from a castep and phonon file</span>
<span class="n">phonon_ws</span> <span class="o">=</span> <span class="n">SimulatedDensityOfStates</span><span class="p">(</span><span class="n">PHONONFile</span><span class="o">=</span><span class="s1">&#39;squaricn.phonon&#39;</span><span class="p">)</span>
<span class="n">castep_ws</span> <span class="o">=</span> <span class="n">SimulatedDensityOfStates</span><span class="p">(</span><span class="n">CASTEPFile</span><span class="o">=</span><span class="s1">&#39;squaricn.castep&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">CompareWorkspaces</span><span class="p">(</span><span class="n">phonon_ws</span><span class="p">,</span> <span class="n">castep_ws</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p><strong>Example - loading partial contributions of ions:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">squaricn</span> <span class="o">=</span> <span class="n">SimulatedDensityOfStates</span><span class="p">(</span><span class="n">PHONONFile</span><span class="o">=</span><span class="s1">&#39;squaricn.phonon&#39;</span><span class="p">,</span>
                                    <span class="n">Ions</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">])</span>

<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">squaricn</span><span class="o">.</span><span class="n">getNames</span><span class="p">():</span>
  <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>squaricn_H
squaricn_C
squaricn_O
</pre></div>
</div>
<p><strong>Example - loading summed partial contributions of ions:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sum_ws</span> <span class="o">=</span> <span class="n">SimulatedDensityOfStates</span><span class="p">(</span><span class="n">PHONONFile</span><span class="o">=</span><span class="s1">&#39;squaricn.phonon&#39;</span><span class="p">,</span>
                                  <span class="n">Ions</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">],</span>
                                  <span class="n">SumContributions</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">total_ws</span> <span class="o">=</span> <span class="n">SimulatedDensityOfStates</span><span class="p">(</span><span class="n">PHONONFile</span><span class="o">=</span><span class="s1">&#39;squaricn.phonon&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">CompareWorkspaces</span><span class="p">(</span><span class="n">total_ws</span><span class="p">,</span> <span class="n">sum_ws</span><span class="p">,</span> <span class="n">Tolerance</span><span class="o">=</span><span class="mf">1e-12</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>True
</pre></div>
</div>
<p><strong>Example - Getting the list of ions in a phonon file:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ion_ws</span> <span class="o">=</span> <span class="n">SimulatedDensityOfStates</span><span class="p">(</span><span class="n">PHONONFile</span><span class="o">=</span><span class="s1">&#39;squaricn.phonon&#39;</span><span class="p">,</span>
                                  <span class="n">SpectrumType</span><span class="o">=</span><span class="s1">&#39;IonTable&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ion_ws</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;Species&#39;</span><span class="p">)))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>H, H, H, H, C, C, C, C, C, C, C, C, O, O, O, O, O, O, O, O
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Simulation.html">Simulation</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id7">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/34d8076c38ee24128cff66d5dfa6be380c8f35dc/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/SimulatedDensityOfStates.py">SimulatedDensityOfStates.py</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SimulateResolutionConvolvedModel-v1.html" title="Previous Chapter: Description"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Description</span>
    </a>
  </li>
  <li>
    <a href="SingleCrystalDiffuseReduction-v1.html" title="Next Chapter: SingleCrystalDiffuseReduction v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SingleCrystal... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>