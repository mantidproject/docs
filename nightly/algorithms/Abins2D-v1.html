<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Abins2D v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.20220909.1939',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AbsorptionCorrection v1" href="AbsorptionCorrection-v1.html" />
    <link rel="prev" title="Abins v1" href="Abins-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Abins2D v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="abins2d-v1">
<span id="algm-abins2d"></span><span id="algm-abins2d-v1"></span><h1>Abins2D v1<a class="headerlink" href="#abins2d-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id3">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/Abins2D-v1_dlg.png"><img alt="../_images/Abins2D-v1_dlg.png" class="screenshot" src="../_images/Abins2D-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>Abins2D</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#credits" id="id4">Credits</a></li>
<li><a class="reference internal" href="#summary" id="id5">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id6">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id7">Properties</a></li>
<li><a class="reference internal" href="#description" id="id8">Description</a></li>
<li><a class="reference internal" href="#usage" id="id9">Usage</a></li>
<li><a class="reference internal" href="#source" id="id10">Source</a></li>
<li><a class="reference internal" href="#references" id="id11">References</a></li>
</ul>
</div>
<div class="section" id="credits">
<h2><a class="toc-backref" href="#id4">Credits</a><a class="headerlink" href="#credits" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Author:</dt>
<dd>Adam Jackson</dd>
</dl>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id5">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculates inelastic neutron scattering over 2D (q,ω) space.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id6">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="Abins-v1.html#algm-abins"><span class="std std-ref">Abins</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id7">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="2%" />
<col width="7%" />
<col width="3%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VibrationalOrPhononFile</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>File with the data from a vibrational or phonon calculation. Allowed values: [‘phonon’, ‘out’, ‘outmol’, ‘log’, ‘xml’, ‘yaml’, ‘castep_bin’, ‘hdf5’]</td>
</tr>
<tr class="row-odd"><td>AbInitioProgram</td>
<td>Input</td>
<td>string</td>
<td>CASTEP</td>
<td>An ab initio program which was used for vibrational or phonon calculation. Allowed values: [‘CASTEP’, ‘CRYSTAL’, ‘DMOL3’, ‘FORCECONSTANTS’, ‘GAUSSIAN’, ‘VASP’]</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Name to give the output workspace.</td>
</tr>
<tr class="row-odd"><td>TemperatureInKelvin</td>
<td>Input</td>
<td>number</td>
<td>10</td>
<td>Temperature in K for which dynamical structure factor S should be calculated.</td>
</tr>
<tr class="row-even"><td>Atoms</td>
<td>Input</td>
<td>str list</td>
<td>&#160;</td>
<td>List of atoms to use to calculate partial S.If left blank, workspaces with S for all types of atoms will be calculated. Element symbols will be interpreted as a sum of all atoms of that element in the cell. ‘atomN’ or ‘atom_N’ (where N is a positive integer) will be interpreted as individual atoms, indexing from 1 following the order of the input data.</td>
</tr>
<tr class="row-odd"><td>SumContributions</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Sum the partial dynamical structure factors into a single workspace.</td>
</tr>
<tr class="row-even"><td>SaveAscii</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Write workspaces to .ascii files after computing them.</td>
</tr>
<tr class="row-odd"><td>ScaleByCrossSection</td>
<td>Input</td>
<td>string</td>
<td>Incoherent</td>
<td>Scale the partial dynamical structure factors by the scattering cross section. Allowed values: [‘Total’, ‘Incoherent’, ‘Coherent’]</td>
</tr>
<tr class="row-even"><td>QuantumOrderEventsNumber</td>
<td>Input</td>
<td>string</td>
<td>1</td>
<td>Number of quantum order effects included in the calculation (1 -&gt; FUNDAMENTALS, 2-&gt; first overtone + FUNDAMENTALS + 2nd order combinations. Allowed values: [‘1’, ‘2’]</td>
</tr>
<tr class="row-odd"><td>Autoconvolution</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Estimate higher quantum orders by convolution with fundamental spectrum.</td>
</tr>
<tr class="row-even"><td>EnergyUnits</td>
<td>Input</td>
<td>string</td>
<td>cm-1</td>
<td>Energy units for output workspace and experimental file. Allowed values: [‘cm-1’, ‘meV’]</td>
</tr>
<tr class="row-odd"><td>Instrument</td>
<td>Input</td>
<td>string</td>
<td>Ideal2D</td>
<td>Name of an instrument for which analysis should be performed. Allowed values: [‘Ideal2D’, ‘PANTHER’, ‘MAPS’, ‘MARI’, ‘MERLIN’]</td>
</tr>
<tr class="row-even"><td>Chopper</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Chopper package. Allowed values: [‘’, ‘A’, ‘G’, ‘R’, ‘S’]</td>
</tr>
<tr class="row-odd"><td>IncidentEnergy</td>
<td>Input</td>
<td>string</td>
<td>4100</td>
<td>Incident energy in EnergyUnits</td>
</tr>
<tr class="row-even"><td>ChopperFrequency</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Chopper frequency in Hz</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id8">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Abins2D is a plugin for Mantid which allows scientists to generate theoretical inelastic neutron scattering spectra (INS) in 2-D <span class="math">\((|\mathbf{q}|,\omega)\)</span> space, accounting for the limitations of real-world measurements.</p>
<p>The intensity is calculated in the “almost-isotropic” incoherent powder-averaging approximation, as used in the 1-D <a class="reference internal" href="Abins-v1.html#algm-abins"><span class="std std-ref">Abins</span></a> algorithm.
Different 2-D INS instruments may be selected, along with instrument parameters (incident energy, chopper settings) that determine the accessible <span class="math">\((|\mathbf{q}|,\omega)\)</span> region and energy resolution.
More information about the implemented working equations can be found <a class="reference internal" href="../concepts/DynamicalStructureFactorFromAbInitio.html#dynamicalstructurefactorfromabinitio"><span class="std std-ref">here</span></a>.</p>
<p>Abins requires data from existing lattice dynamics calculations to determine the phonon mode frequencies and displacements. These are used to compute INS intensities; higher-order phonons may be approximated as combinations of fundamental modes.
Several file formats are supported for frequency and displacement data at given <span class="math">\(\mathbf{q}\)</span>-points: CASTEP (.phonon), CRYSTAL (.out), GAUSSIAN (.log), DMOL3 (.outmol) or VASP (.xml).
For VASP XML inputs, it is also permitted to use a “selective dynamics” in which some atoms are frozen.
In this case, data is only available for the moving atoms and contributions from the other atoms are omitted from the calculated spectrum.
This may be a suitable model for systems where the frozen atoms form a rigid substrate (e.g. a noble metal surface) for an adsorbed molecule of lightweight atoms.
It is not recommended where there is significant vibrational coupling between frozen and moving atoms, or where substrate modes would occupy a similar frequency range to the adsorbate.</p>
<p>Alternatively, force-constants data can be provided and a fine <span class="math">\(\mathbf{q}\)</span>-point mesh will be sampled automatically.
In this case the supported formats are CASTEP (.castep_bin generated with <code class="docutils literal"><span class="pre">phonon_write_force_constants</span> <span class="pre">=</span> <span class="pre">True</span></code>)
and Phonopy (<em>phonopy.yaml</em> file generated with <code class="docutils literal"><span class="pre">INCLUDE_ALL</span> <span class="pre">=</span> <span class="pre">.TRUE.</span></code>)</p>
<p>After a successful run, results are written to a Mantid Workspace Group; by default this is divided by element and quantum order.
The user can also request contributions from individual atoms (e.g. ‘atom_1’, the first atom listed in the input
data) or types of atom (for example for benzene two element symbols: C, H).</p>
<p>Abins2D is under active development; please direct feature requests and bug reports to Dr. Sanghamitra Mukhopadhyay and Dr. Adam Jackson.
If you are developing or modifying Abins(2D), see the <a class="reference internal" href="../concepts/AbinsImplementation.html#abinsimplementation"><span class="std std-ref">Abins: Implementation details</span></a> notes which outline some of the key conventions, practices and pitfalls.</p>
<p>If Abins is used as part of your data analysis routines, please cite the relevant reference <a class="footnote-reference" href="#id2" id="id1">[1]</a>.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id9">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In Mantid this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - loading CASTEP phonon data:</strong></p>
<p>A minimal example, relying heavily on default parameters:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">benzene_wrk</span> <span class="o">=</span> <span class="n">Abins2D</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CASTEP&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;benzene.phonon&quot;</span><span class="p">)</span>


<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">benzene_wrk</span><span class="o">.</span><span class="n">getNames</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Output: (note that only the fundamental excitations are included)</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>benzene_wrk_C_total
benzene_wrk_C
benzene_wrk_H_total
benzene_wrk_H
</pre></div>
</div>
<p><strong>Example - using more arguments:</strong></p>
<p>In practice we would usually select an instrument, incident energy,
and enable all available quantum orders (2 + autoconvolution). Setting
“Total” cross-section applies the “incoherent approximation”; although
Abins only (so far) calculates the incoherent contribution, coherent
weights can be added for a slight improvement to the predicted
spectrum.  (If the spectrum is dominated by coherent scattering, this
approximation may not be the appropriate tool.)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">wrk_verbose</span><span class="o">=</span><span class="n">Abins2D</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CASTEP&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;benzene.phonon&quot;</span><span class="p">,</span>
                    <span class="n">TemperatureInKelvin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">Instrument</span><span class="o">=</span><span class="s2">&quot;MAPS&quot;</span><span class="p">,</span>
                    <span class="n">Atoms</span><span class="o">=</span><span class="s2">&quot;H, atom1, atom2&quot;</span><span class="p">,</span> <span class="n">SumContributions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">QuantumOrderEventsNumber</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">Autoconvolution</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">ScaleByCrossSection</span><span class="o">=</span><span class="s2">&quot;Total&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;Created {wrk_verbose.size()} workspaces&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;including {wrk_verbose[12].name()}&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Created 34 workspaces
including wrk_verbose_atom_1_total
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Simulation.html">Simulation</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id10">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/34d8076c38ee24128cff66d5dfa6be380c8f35dc/Framework/PythonInterface/plugins/algorithms/Abins2D.py">Abins2D.py</a></p>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#id11">References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><ol class="first last upperalpha simple" start="11">
<li>Dymkowski, S. F. Parker, F. Fernandez-Alonso and S. Mukhopadhyay,  “AbINS: The modern software for INS interpretation” , Physica B, doi:10.1016/j.physb.2018.02.034 (2018).</li>
</ol>
</td></tr>
</tbody>
</table>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Abins-v1.html" title="Previous Chapter: Abins v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Abins v1</span>
    </a>
  </li>
  <li>
    <a href="AbsorptionCorrection-v1.html" title="Next Chapter: AbsorptionCorrection v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">AbsorptionCor... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>