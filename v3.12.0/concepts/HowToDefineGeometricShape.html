<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>How To Define Geometric Shape</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.12.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="up" title="Concepts" href="index.html" />
    <link rel="next" title="How to reset detectors calibration" href="Howtoresetdetectorscalibration.html" />
    <link rel="prev" title="Transition to the HistogramData module" href="HistogramData.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.12</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="how-to-define-geometric-shape">
<span id="howtodefinegeometricshape"></span><h1>How To Define Geometric Shape<a class="headerlink" href="#how-to-define-geometric-shape" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<div class="section" id="primitive-shapes">
<h3>Primitive Shapes<a class="headerlink" href="#primitive-shapes" title="Permalink to this headline">¶</a></h3>
<p>There is direct support for defining any of the following geometric
shapes to add <a class="reference internal" href="InstrumentDefinitionFile.html#instrumentdefinitionfile"><em>Instrument Definition File</em></a>.</p>
<ul class="simple">
<li><a class="reference internal" href="#sphere">Sphere</a></li>
<li><a class="reference internal" href="#cylinder">Cylinder (finite height)</a></li>
<li><a class="reference internal" href="#hollow-cylinder">Hollow Cylinder (finite height)</a></li>
<li><a class="reference internal" href="#infinite-cylinder">Infinite Cylinder</a></li>
<li><a class="reference internal" href="#slice-of-cylinder-ring">Slice of Cylinder Ring</a></li>
<li><a class="reference internal" href="#cone">Cone</a></li>
<li><a class="reference internal" href="#infinite-cone">Infinite Cone</a></li>
<li><a class="reference internal" href="#infinite-plane">Infinite Plane</a></li>
<li><a class="reference internal" href="#cuboid">Cuboid</a></li>
<li><a class="reference internal" href="#hexahedron">Hexahedron</a></li>
<li><a class="reference internal" href="#tapered-guide">Tapered Guide</a></li>
</ul>
</div>
<div class="section" id="combining-primitive-shapes">
<h3>Combining Primitive shapes<a class="headerlink" href="#combining-primitive-shapes" title="Permalink to this headline">¶</a></h3>
<p>In addition to the shapes listed above, other shapes may be defined by
combining already defined shapes into new ones. This is done using an
algebra that follows the following notation:</p>
<table border="1" class="docutils">
<colgroup>
<col width="4%" />
<col width="58%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator</th>
<th class="head">Description</th>
<th class="head">Example</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>:</td>
<td>Union (i.e two or more things making up one shape). See e.g. also <a class="reference external" href="http://en.wikipedia.org/wiki/Union_(set_theory)">1</a></td>
<td>a body = legs : torso : arms : head</td>
</tr>
<tr class="row-odd"><td>&#8221; &#8220;</td>
<td>&#8220;space&#8221; shared between shapes, i,e. intersection (the common region of shapes). See e.g. also <a class="reference external" href="http://en.wikipedia.org/wiki/Intersection_(set_theory)">2</a></td>
<td>&#8220;small-circle = big-circle small-circle&#8221; (where the small circle placed within the big-circle)</td>
</tr>
<tr class="row-even"><td>#</td>
<td>Complement</td>
<td># sphere = shape defined by all points outside sphere</td>
</tr>
<tr class="row-odd"><td>( )</td>
<td>Brackets are used to emphasise which shapes an operation should be applied to.</td>
<td>box1 (# box2) is the intersection between box1 and the shape defined by all points not inside box2</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="axes-and-units-of-measure">
<h3>Axes and units of measure<a class="headerlink" href="#axes-and-units-of-measure" title="Permalink to this headline">¶</a></h3>
<p>All objects are defined with respect to cartesian axes (x,y,z), and the
<a class="reference external" href="IDF#Using_.3Cdefaults.3E">default</a> unit of all supplied values are
metres(m). Objects may be defined so that the origin (0,0,0) is at the
centre, so that when rotations are applied they do not also apply an
unexpected translation.</p>
<p>Within instrument definitions we support the concept of defining a
rotation by specifying what point the object is
<a class="reference external" href="InstrumentDefinitionFile#Using_.3Cfacing.3E">facing</a>. To apply that
correctly the side of the object we consider to be the front is the xy
plane. Hence, when planning to use
<a class="reference external" href="InstrumentDefinitionFile#Using_.3Cfacing.3E">facing</a> the shape
should be defined such that the positive y-axis is considered to be up,
the x-axis the width, and the z-axis the depth of the shape.</p>
</div>
</div>
<div class="section" id="to-be-aware-of">
<h2>To be aware of<a class="headerlink" href="#to-be-aware-of" title="Permalink to this headline">¶</a></h2>
<p>When defining a shape you have complete freedom to define it with
respect to whatever coordinate system you like. However, we have a least
the following recommendation</p>
<ul class="simple">
<li>The origin of coordinate system of a shape is used for calculating
the L2 distances. Therefore, at least for any TOF instruments where
you care about L2 distances, the origin should be chosen to be at the
position on your detector shape that is best used for calculation the
L2 distance</li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="defining-a-sphere">
<h3>Defining a sphere<a class="headerlink" href="#defining-a-sphere" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;sphere</span> <span class="na">id=</span><span class="s">&quot;some-sphere&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;centre</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span>  <span class="na">y=</span><span class="s">&quot;0.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;radius</span> <span class="na">val=</span><span class="s">&quot;0.5&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/sphere&gt;</span>

<span class="nt">&lt;algebra</span> <span class="na">val=</span><span class="s">&quot;some-sphere&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>Any shape must be given an ID name. Here the sphere has been given the
name &#8220;some-sphere&#8221;. The purpose of the ID name is to use it in the
description, here this is done with the line . The description is
optional. If it is left out the algebraic intersection is taken between
any shapes defined.</p>
</div>
<div class="section" id="defining-a-ball-with-a-hole-through-it-along-the-x-axis">
<h3>Defining a ball with a hole through it along the x-axis<a class="headerlink" href="#defining-a-ball-with-a-hole-through-it-along-the-x-axis" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;cylinder</span> <span class="na">id=</span><span class="s">&quot;stick&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;centre-of-bottom-base</span> <span class="na">x=</span><span class="s">&quot;-0.5&quot;</span> <span class="na">y=</span><span class="s">&quot;0.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;axis</span> <span class="na">x=</span><span class="s">&quot;1.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;radius</span> <span class="na">val=</span><span class="s">&quot;0.05&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;height</span> <span class="na">val=</span><span class="s">&quot;1.0&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/cylinder&gt;</span>

<span class="nt">&lt;sphere</span> <span class="na">id=</span><span class="s">&quot;some-sphere&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;centre</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span>  <span class="na">y=</span><span class="s">&quot;0.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;radius</span> <span class="na">val=</span><span class="s">&quot;0.5&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/sphere&gt;</span>

<span class="nt">&lt;algebra</span> <span class="na">val=</span><span class="s">&quot;some-sphere (# stick)&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>This algebra string reads as follows: take the <em>intersection</em> between a
sphere and the shape defined by all points <em>not</em> inside a cylinder of
length 1.0 along the x-axis. Note the brackets around # stick in the
algebraic string are optional, but here included to emphasis that the
&#8220;space&#8221; between the &#8220;some-sphere&#8221; and &#8220;(# stick)&#8221; is the intersection
operator.</p>
</div>
</div>
<div class="section" id="notation-used-to-defined-any-of-the-predefined-geometric-shapes">
<h2>Notation used to defined any of the predefined geometric shapes<a class="headerlink" href="#notation-used-to-defined-any-of-the-predefined-geometric-shapes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="sphere">
<h3>Sphere<a class="headerlink" href="#sphere" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;sphere</span> <span class="na">id=</span><span class="s">&quot;A&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;centre</span> <span class="na">x=</span><span class="s">&quot;4.1&quot;</span>  <span class="na">y=</span><span class="s">&quot;2.1&quot;</span> <span class="na">z=</span><span class="s">&quot;8.1&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;radius</span> <span class="na">val=</span><span class="s">&quot;3.2&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/sphere&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="cylinder">
<h3>Cylinder<a class="headerlink" href="#cylinder" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;cylinder</span> <span class="na">id=</span><span class="s">&quot;A&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;centre-of-bottom-base</span> <span class="na">r=</span><span class="s">&quot;0.0&quot;</span> <span class="na">t=</span><span class="s">&quot;0.0&quot;</span> <span class="na">p=</span><span class="s">&quot;0.0&quot;</span> <span class="nt">/&gt;</span>  <span class="c">&lt;!-- here position specified using spherical coordinates --&gt;</span>
  <span class="nt">&lt;axis</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.2&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;radius</span> <span class="na">val=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;height</span> <span class="na">val=</span><span class="s">&quot;10.2&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/cylinder&gt;</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="XMLcylinderDescription.png‎" src="../_images/XMLcylinderDescription.png" />
<p class="caption">Schematic of a cylinder</p>
</div>
</div>
<div class="section" id="hollow-cylinder">
<h3>Hollow Cylinder<a class="headerlink" href="#hollow-cylinder" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;hollow-cylinder</span> <span class="na">id=</span><span class="s">&quot;A&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;centre-of-bottom-base</span> <span class="na">r=</span><span class="s">&quot;0.0&quot;</span> <span class="na">t=</span><span class="s">&quot;0.0&quot;</span> <span class="na">p=</span><span class="s">&quot;0.0&quot;</span> <span class="nt">/&gt;</span>  <span class="c">&lt;!-- here position specified using spherical coordinates --&gt;</span>
  <span class="nt">&lt;axis</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;1.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;inner-radius</span> <span class="na">val=</span><span class="s">&quot;0.007&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;outer-radius</span> <span class="na">val=</span><span class="s">&quot;0.01&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;height</span> <span class="na">val=</span><span class="s">&quot;0.05&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/hollow-cylinder&gt;</span>
</pre></div>
</div>
<div class="figure align-center">
<img alt="XMLHollowCylinderDescription.png" src="../_images/XMLHollowCylinderDescription.png" />
<p class="caption">Schematic of a hollow cylinder</p>
</div>
</div>
<div class="section" id="infinite-cylinder">
<h3>Infinite Cylinder<a class="headerlink" href="#infinite-cylinder" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;infinite-cylinder</span> <span class="na">id=</span><span class="s">&quot;A&quot;</span> <span class="nt">&gt;</span>
  <span class="nt">&lt;centre</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.2&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;axis</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.2&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;radius</span> <span class="na">val=</span><span class="s">&quot;1&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/infinite-cylinder&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="slice-of-cylinder-ring">
<h3>Slice of Cylinder Ring<a class="headerlink" href="#slice-of-cylinder-ring" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;slice-of-cylinder-ring</span> <span class="na">id=</span><span class="s">&quot;A&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;inner-radius</span> <span class="na">val=</span><span class="s">&quot;0.0596&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;outer-radius</span> <span class="na">val=</span><span class="s">&quot;0.0646&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;depth</span> <span class="na">val=</span><span class="s">&quot;0.01&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;arc</span> <span class="na">val=</span><span class="s">&quot;45.0&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/slice-of-cylinder-ring&gt;</span>
</pre></div>
</div>
<p>This XML element defines a slice of a cylinder ring. Most importantly
the part of this shape facing the sample is flat and looks like this:</p>
<div class="figure">
<img alt="XMLsliceCylinderRingDescription.png" src="../_images/XMLsliceCylinderRingDescription.png" />
<p class="caption">XMLsliceCylinderRingDescription.png</p>
</div>
</div>
<div class="section" id="cone">
<h3>Cone<a class="headerlink" href="#cone" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;cone</span> <span class="na">id=</span><span class="s">&quot;A&quot;</span> <span class="nt">&gt;</span>
  <span class="nt">&lt;tip-point</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.2&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;axis</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.2&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;angle</span> <span class="na">val=</span><span class="s">&quot;30.1&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;height</span> <span class="na">val=</span><span class="s">&quot;10.2&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/cone&gt;</span>
</pre></div>
</div>
<div class="figure">
<img alt="XMLconeDescription.png" src="../_images/XMLconeDescription.png" />
<p class="caption">XMLconeDescription.png</p>
</div>
</div>
<div class="section" id="infinite-cone">
<h3>Infinite Cone<a class="headerlink" href="#infinite-cone" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;infinite-cone</span> <span class="na">id=</span><span class="s">&quot;A&quot;</span> <span class="nt">&gt;</span>
  <span class="nt">&lt;tip-point</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.2&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;axis</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.2&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;angle</span> <span class="na">val=</span><span class="s">&quot;30.1&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;/infinite-cone&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="infinite-plane">
<h3>Infinite Plane<a class="headerlink" href="#infinite-plane" title="Permalink to this headline">¶</a></h3>
<p>Is the 3D shape of all points on the plane and all points on one side of
the infinite plane, the side which point away from the infinite plane in
the direction of the normal vector.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;infinite-plane</span> <span class="na">id=</span><span class="s">&quot;A&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;point-in-plane</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.2&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;normal-to-plane</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.2&quot;</span> <span class="na">z=</span><span class="s">&quot;0&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/infinite-plane&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="cuboid">
<h3>Cuboid<a class="headerlink" href="#cuboid" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;cuboid</span> <span class="na">id=</span><span class="s">&quot;shape&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;left-front-bottom-point</span> <span class="na">x=</span><span class="s">&quot;0.0025&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.1&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-front-top-point</span>  <span class="na">x=</span><span class="s">&quot;0.0025&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.1&quot;</span> <span class="na">z=</span><span class="s">&quot;0.02&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-back-bottom-point</span>  <span class="na">x=</span><span class="s">&quot;-0.0025&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.1&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-front-bottom-point</span>  <span class="na">x=</span><span class="s">&quot;0.0025&quot;</span> <span class="na">y=</span><span class="s">&quot;0.1&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;/cuboid&gt;</span>
<span class="nt">&lt;algebra</span> <span class="na">val=</span><span class="s">&quot;shape&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>This particular example describes a cuboid with the origin at the centre
of the front face, which is here facing the negative z-axis and has the
dimensions 0.005mm x 0.2mm (in the xy-plane), and the depth of this
cuboid is 0.02mm.</p>
<div class="figure">
<img alt="XMLcuboidDescription.png" src="../_images/XMLcuboidDescription.png" />
<p class="caption">XMLcuboidDescription.png</p>
</div>
<p>Another example of a cuboid is</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;cuboid</span> <span class="na">id=</span><span class="s">&quot;shape&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;left-front-bottom-point</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.1&quot;</span> <span class="na">z=</span><span class="s">&quot;-0.01&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-front-top-point</span>  <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.1&quot;</span> <span class="na">z=</span><span class="s">&quot;-0.01&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-back-bottom-point</span>  <span class="na">x=</span><span class="s">&quot;0.001&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.1&quot;</span> <span class="na">z=</span><span class="s">&quot;-0.01&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-front-bottom-point</span>  <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.1&quot;</span> <span class="na">z=</span><span class="s">&quot;0.01&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;/cuboid&gt;</span>
<span class="nt">&lt;algebra</span> <span class="na">val=</span><span class="s">&quot;shape&quot;</span> <span class="nt">/&gt;</span>
</pre></div>
</div>
<p>which describes a cuboid with a front y-z plane (looking down the
x-axis). The origin is assumed to be the centre of this front surface,
which has dimensions 200mm along y and 20mm along z. The depth of this
cuboid is taken to be 1mm (along x).</p>
</div>
<div class="section" id="hexahedron">
<h3>Hexahedron<a class="headerlink" href="#hexahedron" title="Permalink to this headline">¶</a></h3>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;hexahedron</span> <span class="na">id=</span><span class="s">&quot;Bertie&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;left-back-bottom-point</span>  <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-front-bottom-point</span> <span class="na">x=</span><span class="s">&quot;1.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-front-bottom-point</span> <span class="na">x=</span><span class="s">&quot;1.0&quot;</span> <span class="na">y=</span><span class="s">&quot;1.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-back-bottom-point</span>  <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;1.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-back-top-point</span>  <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.0&quot;</span> <span class="na">z=</span><span class="s">&quot;2.0&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-front-top-point</span>  <span class="na">x=</span><span class="s">&quot;0.5&quot;</span> <span class="na">y=</span><span class="s">&quot;0.0&quot;</span> <span class="na">z=</span><span class="s">&quot;2.0&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-front-top-point</span>  <span class="na">x=</span><span class="s">&quot;0.5&quot;</span> <span class="na">y=</span><span class="s">&quot;0.5&quot;</span> <span class="na">z=</span><span class="s">&quot;2.0&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-back-top-point</span>  <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.5&quot;</span> <span class="na">z=</span><span class="s">&quot;2.0&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;/hexahedron&gt;</span>
</pre></div>
</div>
<div class="figure">
<img alt="XMLhexahedronDescription.png" src="../_images/XMLhexahedronDescription.png" />
<p class="caption">XMLhexahedronDescription.png</p>
</div>
</div>
<div class="section" id="tapered-guide">
<h3>Tapered Guide<a class="headerlink" href="#tapered-guide" title="Permalink to this headline">¶</a></h3>
<p>Available from version 3.0 onwards.</p>
<p>A tapered guide is a special case of hexahedron; a &#8220;start&#8221; rectangular
aperture which in a continued fashion changes into an &#8220;end&#8221; rectangular
aperture.</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;tapered-guide</span> <span class="na">id=</span><span class="s">&quot;A Guide&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;aperture-start</span> <span class="na">height=</span><span class="s">&quot;2.0&quot;</span> <span class="na">width=</span><span class="s">&quot;2.0&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;length</span> <span class="na">val=</span><span class="s">&quot;3.0&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;aperture-end</span> <span class="na">height=</span><span class="s">&quot;4.0&quot;</span> <span class="na">width=</span><span class="s">&quot;4.0&quot;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;centre</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;5.0&quot;</span> <span class="na">z=</span><span class="s">&quot;10.0&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- Optional.  Defaults to (0, 0 ,0) --&gt;</span>
    <span class="nt">&lt;axis</span> <span class="na">x=</span><span class="s">&quot;0.5&quot;</span> <span class="na">y=</span><span class="s">&quot;1.0&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0&quot;</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- Optional.  Defaults to (0, 0 ,1) --&gt;</span>
<span class="nt">&lt;/tapered-guide&gt;</span>
</pre></div>
</div>
<p>The centre value denotes the centre of the start aperture. The specified
axis runs from the start aperture to the end aperture. &#8220;Height&#8221; is along
the y-axis and &#8220;width&#8221; runs along the x-axis, before the application of
the &#8220;axis&#8221; rotation.</p>
</div>
</div>
<div class="section" id="bounding-box">
<span id="id1"></span><h2>Bounding-Box<a class="headerlink" href="#bounding-box" title="Permalink to this headline">¶</a></h2>
<p>When a geometric shape is rendered in the MantidPlot instrument viewer, Mantid
will attempt to automatically construct an axis-aligned bounding box for every
geometric shape that does not have one yet. Well-defined bounding boxes are
required by many features of Mantid, from correctly rendering the instrument
to performing calculations in various algorithms.</p>
<p>The automatically calculated bounding boxes can generally be relied upon and
are usually ideal. However, if the automatic calculation fails to produce a
reasonable bounding box, or if performance becomes an issue with particularly
complex shapes, you have the option of adding a manually pre-calculated
bounding box.</p>
<p>A typical symptom of the automatic calculation creating an incorrect bounding
box is your instrument appearing very small when viewed (forcing you to zoom
in for a long time to see it). In such cases, the axis visualizations also
tend to not display properly.</p>
<p>A custom bounding-box can be added to shapes using the following notation:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;hexahedron</span> <span class="na">id=</span><span class="s">&quot;shape&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;left-front-bottom-point</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.037&quot;</span> <span class="na">z=</span><span class="s">&quot;-0.0031&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-front-bottom-point</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.037&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0031&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-front-top-point</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.037&quot;</span> <span class="na">z=</span><span class="s">&quot;-0.0104&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-front-top-point</span> <span class="na">x=</span><span class="s">&quot;0.0&quot;</span> <span class="na">y=</span><span class="s">&quot;0.037&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0104&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-back-bottom-point</span> <span class="na">x=</span><span class="s">&quot;0.005&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.037&quot;</span> <span class="na">z=</span><span class="s">&quot;-0.0031&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-back-bottom-point</span> <span class="na">x=</span><span class="s">&quot;0.005&quot;</span> <span class="na">y=</span><span class="s">&quot;-0.037&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0031&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;left-back-top-point</span> <span class="na">x=</span><span class="s">&quot;0.005&quot;</span> <span class="na">y=</span><span class="s">&quot;0.037&quot;</span> <span class="na">z=</span><span class="s">&quot;-0.0104&quot;</span>  <span class="nt">/&gt;</span>
  <span class="nt">&lt;right-back-top-point</span> <span class="na">x=</span><span class="s">&quot;0.005&quot;</span> <span class="na">y=</span><span class="s">&quot;0.037&quot;</span> <span class="na">z=</span><span class="s">&quot;0.0104&quot;</span>  <span class="nt">/&gt;</span>
<span class="nt">&lt;/hexahedron&gt;</span>
<span class="nt">&lt;algebra</span> <span class="na">val=</span><span class="s">&quot;shape&quot;</span> <span class="nt">/&gt;</span>

<span class="nt">&lt;bounding-box&gt;</span>
  <span class="nt">&lt;x-min</span> <span class="na">val=</span><span class="s">&quot;0.0&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;x-max</span> <span class="na">val=</span><span class="s">&quot;0.005&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;y-min</span> <span class="na">val=</span><span class="s">&quot;-0.037&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;y-max</span> <span class="na">val=</span><span class="s">&quot;0.037&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;z-min</span> <span class="na">val=</span><span class="s">&quot;-0.0104&quot;</span><span class="nt">/&gt;</span>
  <span class="nt">&lt;z-max</span> <span class="na">val=</span><span class="s">&quot;0.0104&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/bounding-box&gt;</span>
</pre></div>
</div>
<p>Note for the best effect this bounding box should be enclosing the shape
as tight as possible.</p>
<p><strong>Category</strong>: <a class="reference external" href="../api/python/mantid/api/categories/Concepts.html">Concepts</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="HistogramData.html" title="Previous Chapter: Transition to the HistogramData module"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Transition to th...</span>
    </a>
  </li>
  <li>
    <a href="Howtoresetdetectorscalibration.html" title="Next Chapter: How to reset detectors calibration"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">How to reset det... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2018-03-19.<br/>
    </p>
  </div>
</footer>
  </body>
</html>