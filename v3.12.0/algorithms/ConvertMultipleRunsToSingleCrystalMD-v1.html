<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ConvertMultipleRunsToSingleCrystalMD v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.12.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="ConvertSnsRoiFileToMask v1" href="ConvertSnsRoiFileToMask-v1.html" />
    <link rel="prev" title="ConvertMDHistoToMatrixWorkspace v1" href="ConvertMDHistoToMatrixWorkspace-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.12</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="convertmultiplerunstosinglecrystalmd-v1">
<span id="algm-convertmultiplerunstosinglecrystalmd"></span><span id="algm-convertmultiplerunstosinglecrystalmd-v1"></span><h1>ConvertMultipleRunsToSingleCrystalMD v1<a class="headerlink" href="#convertmultiplerunstosinglecrystalmd-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/ConvertMultipleRunsToSingleCrystalMD-v1_dlg.png"><img alt="../_images/ConvertMultipleRunsToSingleCrystalMD-v1_dlg.png" class="screenshot" src="../_images/ConvertMultipleRunsToSingleCrystalMD-v1_dlg.png" style="width: 224px;" /></a>
<p class="caption"><strong>ConvertMultipleRunsToSingleCrystalMD</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#masking" id="id4">Masking</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#related-algorithms" id="id6">Related Algorithms</a></li>
<li><a class="reference internal" href="#source" id="id7">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Convert multiple runs to one Single Crystal MDEventWorkspace</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="2%" />
<col width="7%" />
<col width="7%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>list of str lists</td>
<td><em>Mandatory</em></td>
<td>Files to combine in reduction. Allowed extensions: [&#8216;_event.nxs&#8217;, &#8216;.nxs.h5&#8217;, &#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>FilterByTofMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Optional: To exclude events that do not fall within a range of times-of-flight. This is the minimum accepted value in microseconds. Keep blank to load all events.</td>
</tr>
<tr class="row-even"><td>FilterByTofMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Optional: To exclude events that do not fall within a range of times-of-flight. This is the maximum accepted value in microseconds. Keep blank to load all events.</td>
</tr>
<tr class="row-odd"><td>FilterByTimeStop</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Optional: To only include events before the provided stop time, in seconds (relative to the start of the run).</td>
</tr>
<tr class="row-even"><td>UBMatrix</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Path to an ISAW-style UB matrix text file. See <a class="reference internal" href="LoadIsawUB-v1.html#algm-loadisawub"><em>LoadIsawUB</em></a>. Allowed extensions: [&#8216;.mat&#8217;, &#8216;.ub&#8217;, &#8216;.txt&#8217;]</td>
</tr>
<tr class="row-odd"><td>SetGoniometer</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Set which Goniometer to use. See <a class="reference internal" href="SetGoniometer-v1.html#algm-setgoniometer"><em>SetGoniometer</em></a></td>
</tr>
<tr class="row-even"><td>Goniometers</td>
<td>Input</td>
<td>string</td>
<td>None, Specify Individually</td>
<td>Set the axes and motor names according to goniometers that we define in the code (Universal defined for SNS). Allowed values: [&#8216;None, Specify Individually&#8217;, &#8216;Universal&#8217;]</td>
</tr>
<tr class="row-odd"><td>Axis0</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Axis0: name, x,y,z, 1/-1 (1 for ccw, -1 for cw rotation). A number of degrees can be used instead of name. Leave blank for no axis</td>
</tr>
<tr class="row-even"><td>Axis1</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Axis1: name, x,y,z, 1/-1 (1 for ccw, -1 for cw rotation). A number of degrees can be used instead of name. Leave blank for no axis</td>
</tr>
<tr class="row-odd"><td>Axis2</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Axis2: name, x,y,z, 1/-1 (1 for ccw, -1 for cw rotation). A number of degrees can be used instead of name. Leave blank for no axis</td>
</tr>
<tr class="row-even"><td>LoadInstrument</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Load a different instrument IDF onto the data from a file. See <a class="reference internal" href="LoadInstrument-v1.html#algm-loadinstrument"><em>LoadInstrument</em></a>. Allowed extensions: [&#8216;.xml&#8217;]</td>
</tr>
<tr class="row-odd"><td>DetCal</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Load an ISAW DetCal calibration onto the data from a file. See <a class="reference internal" href="LoadIsawDetCal-v1.html#algm-loadisawdetcal"><em>LoadIsawDetCal</em></a>. Allowed extensions: [&#8216;.detcal&#8217;]</td>
</tr>
<tr class="row-even"><td>MaskFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Masking file for masking. Supported file format is XML and ISIS ASCII. See <a class="reference internal" href="LoadMask-v1.html#algm-loadmask"><em>LoadMask</em></a>. Allowed extensions: [&#8216;.xml&#8217;, &#8216;.msk&#8217;]</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output Workspace</td>
</tr>
<tr class="row-even"><td>Uproj</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Defines the first projection vector of the target Q coordinate system in <strong>Q3D</strong> mode - Default (1,0,0)</td>
</tr>
<tr class="row-odd"><td>Vproj</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Defines the second projection vector of the target Q coordinate system in <strong>Q3D</strong> mode - Default (0,1,0).</td>
</tr>
<tr class="row-even"><td>Wproj</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Defines the third projection vector of the target Q coordinate system in <strong>Q3D</strong> mode. - Default (0,0,1)</td>
</tr>
<tr class="row-odd"><td>MinValues</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>It has to be N comma separated values, where N is the number of dimensions of the target workspace. Values smaller then specified here will not be added to workspace.  Number N is defined by properties 4,6 and 7 and described on <em>MD Transformation factory</em> page. See also <a class="reference internal" href="ConvertToMDMinMaxLocal-v1.html#algm-converttomdminmaxlocal"><em>ConvertToMDMinMaxLocal v1</em></a></td>
</tr>
<tr class="row-even"><td>MaxValues</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>A list of the same size and the same units as MinValues list. Values higher or equal to the specified by this list will be ignored</td>
</tr>
<tr class="row-odd"><td>SplitInto</td>
<td>Input</td>
<td>int list</td>
<td>5</td>
<td>A comma separated list of into how many sub-grid elements each dimension should split; or just one to split into the same number for all dimensions. Default 5.</td>
</tr>
<tr class="row-even"><td>SplitThreshold</td>
<td>Input</td>
<td>number</td>
<td>1000</td>
<td>How many events in a box before it should be split. Default 1000.</td>
</tr>
<tr class="row-odd"><td>MaxRecursionDepth</td>
<td>Input</td>
<td>number</td>
<td>20</td>
<td>How many levels of box splitting recursion are allowed. The smallest box will have each side length <img class="math" src="../_images/math/06a14defbd5d0fe6b910e9966e754c4b75f25bee.png" alt="l = (extents) / (SplitInto^{MaxRecursionDepth})." style="vertical-align: -5px"/> Default 20.</td>
</tr>
<tr class="row-even"><td>OverwriteExisting</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>By default  (&#8220;1&#8221;), existing Output Workspace will be replaced. Select false (&#8220;0&#8221;) if you want to add new events to the workspace, which already exist.  Choosing &#8220;0&#8221; can be very inefficient for file-based workspaces</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This workflow algorithm loads, converts to MDWorkspace and combines a
series of runs. The resulting workspace is a <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><em>MDWorkspace</em></a> containing a volume of scattering events. If a
<a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a> is provided then the MD workspace will be
in HKL otherwise it will be in Q_sample.</p>
<p>This is <strong>not</strong> a correctly normalized workspace, for that look at
<a class="reference internal" href="SingleCrystalDiffuseReduction-v1.html#algm-singlecrystaldiffusereduction"><em>SingleCrystalDiffuseReduction</em></a>. The output workspace can be
used with <a class="reference internal" href="FindPeaksMD-v1.html#algm-findpeaksmd"><em>FindPeaksMD</em></a> and from that
determine the <a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a>.</p>
<p>The input filename follows the syntax from
<a class="reference internal" href="../api/python/mantid/api/MultipleFileProperty.html#mantid.api.MultipleFileProperty" title="mantid.api.MultipleFileProperty"><tt class="xref py py-obj docutils literal"><span class="pre">MultipleFileProperty</span></tt></a></p>
<p>You should refer to <a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><em>ConvertToMD</em></a> for all its
options. If MinValues and MaxValues are not provided then limits will
be calculated with <a class="reference internal" href="ConvertToMDMinMaxGlobal-v1.html#algm-converttomdminmaxglobal"><em>ConvertToMDMinMaxGlobal</em></a></p>
<p>The resulting workspaces can be saved and loaded with <a class="reference internal" href="SaveMD-v2.html#algm-savemd"><em>SaveMD</em></a> and <a class="reference internal" href="LoadMD-v1.html#algm-loadmd"><em>LoadMD</em></a> respectively.</p>
<div class="section" id="masking">
<h3><a class="toc-backref" href="#id4">Masking</a><a class="headerlink" href="#masking" title="Permalink to this headline">¶</a></h3>
<p>The workspace will be masked by the provided masking file. A masking
file can be created my masking a data file then saving it using
<a class="reference internal" href="SaveMask-v1.html#algm-savemask"><em>SaveMask</em></a>.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Single file Q-sample</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ConvertMultipleRunsToSingleCrystalMD</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860&#39;</span><span class="p">,</span>
                                     <span class="n">MinValues</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span>
                                     <span class="n">MaxValues</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span>
                                     <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                                     <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                     <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;huber,0,1,0,1&quot;</span><span class="p">)</span>
<span class="n">ws</span><span class="o">=</span><span class="n">mtd</span><span class="p">[</span><span class="s">&#39;output&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;The workspace is in {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getSpecialCoordinateSystem</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;There are {} experiment runs in the workspace&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumExperimentInfo</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Number of Events = {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;There are {} dimensions with names: {} {} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The workspace is in QSample
There are 1 experiment runs in the workspace
Number of Events = 100210
There are 3 dimensions with names: Q_sample_x Q_sample_y Q_sample_z
</pre></div>
</div>
<p><strong>Multiple files Q-sample</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ConvertMultipleRunsToSingleCrystalMD</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                                     <span class="n">FilterByTofMin</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                                     <span class="n">FilterByTofMax</span><span class="o">=</span><span class="mi">16666</span><span class="p">,</span>
                                     <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                                     <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                     <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">)</span>
<span class="n">ws</span><span class="o">=</span><span class="n">mtd</span><span class="p">[</span><span class="s">&#39;output&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;The workspace is in {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getSpecialCoordinateSystem</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;There are {} experiment runs in the workspace&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumExperimentInfo</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Number of Events = {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;There are {} dimensions with names: {} {} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The workspace is in QSample
There are 4 experiment runs in the workspace
Number of Events = 47223197
There are 3 dimensions with names: Q_sample_x Q_sample_y Q_sample_z
</pre></div>
</div>
<p><strong>Single file HKL</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create a ISAW UB file for the test</span>
<span class="kn">import</span> <span class="nn">mantid</span>
<span class="n">UBfilename</span><span class="o">=</span><span class="n">mantid</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">getString</span><span class="p">(</span><span class="s">&quot;defaultsave.directory&quot;</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;ConvertMultipleRunsToSingleCrystalMDTest.mat&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">UBfilename</span><span class="p">,</span><span class="s">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;0.0  0.5  0.0  </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;0.0  0.0  0.25  </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;0.2  0.0  0.0  </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;2.0  4.0  5.0  90  90  90  40  </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;0.0  0.0  0.0   0   0   0   0  </span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;</span><span class="se">\n\n</span><span class="s">some text about IPNS convention&quot;</span><span class="p">)</span>

<span class="n">ConvertMultipleRunsToSingleCrystalMD</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860&#39;</span><span class="p">,</span>
                                     <span class="n">MinValues</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span>
                                     <span class="n">MaxValues</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span>
                                     <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                                     <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                     <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;huber,0,1,0,1&quot;</span><span class="p">,</span>
                                     <span class="n">UBMatrix</span><span class="o">=</span><span class="n">UBfilename</span><span class="p">)</span>
<span class="n">ws</span><span class="o">=</span><span class="n">mtd</span><span class="p">[</span><span class="s">&#39;output&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;The workspace is in {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getSpecialCoordinateSystem</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;There are {} experiment runs in the workspace&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumExperimentInfo</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Number of Events = {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;There are {} dimensions with names: {} {} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The workspace is in HKL
There are 1 experiment runs in the workspace
Number of Events = 112266
There are 3 dimensions with names: [H,0,0] [0,K,0] [0,0,L]
</pre></div>
</div>
<p><strong>Multiple files HKL</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ConvertMultipleRunsToSingleCrystalMD</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CORELLI_29782:29817:10&#39;</span><span class="p">,</span>
                                     <span class="n">FilterByTofMin</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
                                     <span class="n">FilterByTofMax</span><span class="o">=</span><span class="mi">16666</span><span class="p">,</span>
                                     <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;output&#39;</span><span class="p">,</span>
                                     <span class="n">SetGoniometer</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                     <span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;BL9:Mot:Sample:Axis1,0,1,0,1&quot;</span><span class="p">,</span>
                                     <span class="n">UBMatrix</span><span class="o">=</span><span class="s">&quot;/SNS/CORELLI/IPTS-15526/shared/benzil_Hexagonal.mat&quot;</span><span class="p">)</span>
<span class="n">ws</span><span class="o">=</span><span class="n">mtd</span><span class="p">[</span><span class="s">&#39;output&#39;</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;The workspace is in {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getSpecialCoordinateSystem</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;There are {} experiment runs in the workspace&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumExperimentInfo</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Number of Events = {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;There are {} dimensions with names: {} {} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The workspace is in HKL
There are 4 experiment runs in the workspace
Number of Events = 47223200
There are 3 dimensions with names: [H,0,0] [0,K,0] [0,0,L]
</pre></div>
</div>
</div>
<div class="section" id="related-algorithms">
<h2><a class="toc-backref" href="#id6">Related Algorithms</a><a class="headerlink" href="#related-algorithms" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><em>ConvertToMD</em></a> is used to Convert to MD</p>
<p><a class="reference internal" href="SingleCrystalDiffuseReduction-v1.html#algm-singlecrystaldiffusereduction"><em>SingleCrystalDiffuseReduction</em></a> does the correct normalisation for multiple runs</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/MDAlgorithms/Creation.html">MDAlgorithms\Creation</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id7">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/e07b2bf50bc7eaeb32967b712b3665c1ffc8a2c4/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/ConvertMultipleRunsToSingleCrystalMD.py">ConvertMultipleRunsToSingleCrystalMD.py</a> <em>(last modified: 2017-08-25)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ConvertMDHistoToMatrixWorkspace-v1.html" title="Previous Chapter: ConvertMDHistoToMatrixWorkspace v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ConvertMDHistoTo...</span>
    </a>
  </li>
  <li>
    <a href="ConvertSnsRoiFileToMask-v1.html" title="Next Chapter: ConvertSnsRoiFileToMask v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ConvertSnsRoiFil... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2018-03-19.<br/>
    </p>
  </div>
</footer>
  </body>
</html>