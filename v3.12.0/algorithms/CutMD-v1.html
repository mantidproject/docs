<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CutMD v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.12.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="CylinderAbsorption v1" href="CylinderAbsorption-v1.html" />
    <link rel="prev" title="CuboidGaugeVolumeAbsorption v1" href="CuboidGaugeVolumeAbsorption-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.12</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="cutmd-v1">
<span id="algm-cutmd"></span><span id="algm-cutmd-v1"></span><h1>CutMD v1<a class="headerlink" href="#cutmd-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/CutMD-v1_dlg.png"><img alt="../_images/CutMD-v1_dlg.png" class="screenshot" src="../_images/CutMD-v1_dlg.png" style="width: 229px;" /></a>
<p class="caption"><strong>CutMD</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a><ul>
<li><a class="reference internal" href="#mdeventworkspaces" id="id5">MDEventWorkspaces</a></li>
<li><a class="reference internal" href="#mdhistoworkspaces" id="id6">MDHistoWorkspaces</a></li>
<li><a class="reference internal" href="#projection-binning" id="id7">Projection Binning</a></li>
<li><a class="reference internal" href="#creating-projections" id="id8">Creating Projections</a></li>
<li><a class="reference internal" href="#workflow" id="id9">Workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1" id="id10">Usage</a></li>
<li><a class="reference internal" href="#source" id="id11">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Slices multidimensional workspaces using input projection information and binning limits.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="2%" />
<col width="11%" />
<col width="3%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td>IMDWorkspace</td>
<td><em>Mandatory</em></td>
<td>MDWorkspace to slice</td>
</tr>
<tr class="row-odd"><td>Projection</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Projection</td>
</tr>
<tr class="row-even"><td>P1Bin</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Projection 1 binning.</td>
</tr>
<tr class="row-odd"><td>P2Bin</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Projection 2 binning.</td>
</tr>
<tr class="row-even"><td>P3Bin</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Projection 3 binning.</td>
</tr>
<tr class="row-odd"><td>P4Bin</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Projection 4 binning.</td>
</tr>
<tr class="row-even"><td>P5Bin</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Projection 5 binning.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td>IMDWorkspace</td>
<td><em>Mandatory</em></td>
<td>Output cut workspace</td>
</tr>
<tr class="row-even"><td>NoPix</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If False creates a full MDEventWorkspaces as output. True to create an MDHistoWorkspace as output. This is DND only in Horace terminology.</td>
</tr>
<tr class="row-odd"><td>MaxRecursionDepth</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Sets the maximum recursion depth to use. Can be used to constrain the workspaces internal structure</td>
</tr>
<tr class="row-even"><td>InterpretQDimensionUnits</td>
<td>Input</td>
<td>string</td>
<td>Auto</td>
<td>How will the Q units of the input workspace be interpreted? This property will disappear in future versions of Mantid Auto : Figure it out based on the label units RLU : Force them to be rlu Q in A^-1 : Force them to be inverse angstroms. Allowed values: [&#8216;Auto&#8217;, &#8216;RLU&#8217;, &#8216;Q in A^-1&#8217;]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm performs slicing of multiDimensional data according to a chosen
projection, limits and binning steps.</p>
<p>The synax is similar to that used by <a class="reference external" href="http://horace.isis.rl.ac.uk/Manipulating_and_extracting_data_from_SQW_files_and_objects#cut_sqw">Horace</a>.</p>
<p>Unlike most Mantid algorithms, CutMD can accept a list of workspaces as the
input workspace, given as the name of a workspace in the analysis data service
or the path to a workspace, or simply a workspace object in python. These will
all then be processed sequentially with the same options. The only requirement
is that the same number of output workspaces are also given so that CutMD knows
what to call each output workspace created.</p>
<div class="section" id="mdeventworkspaces">
<h3><a class="toc-backref" href="#id5">MDEventWorkspaces</a><a class="headerlink" href="#mdeventworkspaces" title="Permalink to this headline">¶</a></h3>
<p>For input of type <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><em>MDEventWorkspace</em></a> the algorithm uses <a class="reference internal" href="BinMD-v1.html#algm-binmd"><em>BinMD v1</em></a> or
<a class="reference internal" href="SliceMD-v1.html#algm-slicemd"><em>SliceMD v1</em></a> to achieve the binning of the data. The choice of child
algorithm used for slicing in this case is controlled by the NoPix option.</p>
</div>
<div class="section" id="mdhistoworkspaces">
<h3><a class="toc-backref" href="#id6">MDHistoWorkspaces</a><a class="headerlink" href="#mdhistoworkspaces" title="Permalink to this headline">¶</a></h3>
<p>If the input is an <a class="reference internal" href="../concepts/MDHistoWorkspace.html#mdhistoworkspace"><em>MDHistoWorkspace</em></a> <a class="reference internal" href="BinMD-v1.html#algm-binmd"><em>BinMD v1</em></a> and <a class="reference internal" href="SliceMD-v1.html#algm-slicemd"><em>SliceMD v1</em></a> are not made available as they needto get hold of the original MDEvents associated with an <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><em>MDEventWorkspace</em></a> in order to perform the rebinning. As this information is missing from the MDHistoWorkspace images, those operations are forbidden. Instead, a limited subset of the operations are allowed, and are performed via <a class="reference internal" href="IntegrateMDHistoWorkspace-v1.html#algm-integratemdhistoworkspace"><em>IntegrateMDHistoWorkspace v1</em></a>. In this case, the Projection and NoPix properties are ignored. See <a class="reference internal" href="IntegrateMDHistoWorkspace-v1.html#algm-integratemdhistoworkspace"><em>IntegrateMDHistoWorkspace v1</em></a> for how the binning parameters are used.</p>
</div>
<div class="section" id="projection-binning">
<h3><a class="toc-backref" href="#id7">Projection Binning</a><a class="headerlink" href="#projection-binning" title="Permalink to this headline">¶</a></h3>
<p>The &#8216;PnBin&#8217; property, where n is between 1 and 5, is used to specify the binning for the nth dimension of the output workspace.
The dimension will be truncated to have extents &#8216;minimum&#8217; and &#8216;maximum&#8217;, with &#8216;stepsize&#8217; specifying the size of the bins inbetween.
&#8216;(maximum - minimum)/stepsize&#8217; is rounded down to produce an integer number, greater than or equal to 1, of equally-sized bins between &#8216;minimum&#8217; and &#8216;maximum&#8217;.</p>
<p>Note that if the output workspace is an MDEventWorkspace (NoPix=False), these properties define the top-level box structure of the workspace.
If the MaxRecursionDepth property is set to higher than its default of 1 then if many events fall within a single box it may be split further,
see the documentation for <a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><em>MDEventWorkspace</em></a>.</p>
<p>The PnBin parameters must match one of these three formats:</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Format</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>[minimum, stepsize, maximum]</td>
<td>The dimension in the output workspace will extend
from &#8216;minimum&#8217; to &#8216;maximum&#8217; with bins of width
&#8216;stepsize&#8217;.</td>
</tr>
<tr class="row-odd"><td>[minimum, maximum]</td>
<td>A single bin will be created between &#8216;minimum&#8217; and
&#8216;maximum&#8217;.</td>
</tr>
<tr class="row-even"><td>[stepsize]</td>
<td>The &#8216;minimum&#8217; and &#8216;maximum&#8217; are set to the dimension
limits; the workspace is not cut in this dimension.</td>
</tr>
</tbody>
</table>
<p>For ease of use, when using the python interface only, the &#8216;PBins&#8217; keyword can be used in place of separate PnBins properties.
PBins accepts a tuple, or list, of PnBins parameters. The position in the list determines the dimension it corresponds to. See the <a class="reference internal" href="#usage">Usage</a> examples below.</p>
</div>
<div class="section" id="creating-projections">
<h3><a class="toc-backref" href="#id8">Creating Projections</a><a class="headerlink" href="#creating-projections" title="Permalink to this headline">¶</a></h3>
<p>Projections are used by CutMD to transform the multidimensional data prior to
cutting it. Projections are provided to CutMD in the form of a <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a>.
The format of these workspaces is as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="11%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Column</th>
<th class="head">Type</th>
<th class="head">Purpose</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>name</td>
<td>string</td>
<td>Specifies the dimension the row controls. Can be &#8216;u&#8217;,
&#8216;v&#8217;, or &#8216;w&#8217;.</td>
</tr>
<tr class="row-odd"><td>value</td>
<td>V3D</td>
<td>A 3 dimensional vector specifying the axis for the
dimension. Example: [1,-1,0]</td>
</tr>
<tr class="row-even"><td>offset</td>
<td>double</td>
<td>The offset value to use for this dimension.</td>
</tr>
<tr class="row-odd"><td>type</td>
<td>string</td>
<td>The type/unit of this dimension. &#8216;r&#8217; is RLU, &#8216;a&#8217; is
inverse angstroms.</td>
</tr>
</tbody>
</table>
<p>A projection table should have three rows: one for u, one for v, and one for w.</p>
<p>There is a helper class called Projection that can be used to construct these
projection tables for you automatically. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mantid.api</span> <span class="kn">import</span> <span class="n">Projection</span>
<span class="c"># Create an identity projection</span>
<span class="n">proj_id</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>

<span class="c"># Automatically infer third dimension as being orthogonal to the first two</span>
<span class="n">proj_rot</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>

<span class="c"># Set other properties</span>
<span class="n">proj_prop</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">()</span>
<span class="n">proj_prop</span><span class="o">.</span><span class="n">setOffset</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span> <span class="c"># Set u offset to 100</span>
<span class="n">proj_prop</span><span class="o">.</span><span class="n">setOffset</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mf">5.0</span><span class="p">)</span> <span class="c"># Set v offset to -5</span>
<span class="n">proj_prop</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span> <span class="c"># Set v type to be RLU</span>
<span class="n">proj_prop</span><span class="o">.</span><span class="n">setType</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">)</span> <span class="c"># Set w type to be inverse angstroms</span>

<span class="c">#Create table workspaces from these projections</span>
<span class="n">ws_id</span> <span class="o">=</span> <span class="n">proj_id</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">()</span> <span class="c"># Named ws_id</span>
<span class="n">proj_rot</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">(</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&quot;ws_rot&quot;</span><span class="p">)</span> <span class="c"># Name ws_rot</span>
</pre></div>
</div>
<p>When calling createWorkspace inside of algorithms like CutMD, the
OutputWorkspace name must be provided, or createWorkspace will not know what to
call the created workspace:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#Good:</span>
<span class="n">CutMD</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">Projection</span><span class="o">=</span><span class="n">proj</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">(</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;proj_ws&#39;</span><span class="p">),</span> <span class="o">...</span><span class="p">)</span>

<span class="c">#Bad:</span>
<span class="n">CutMD</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">Projection</span><span class="o">=</span><span class="n">proj</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">(),</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="workflow">
<h3><a class="toc-backref" href="#id9">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/CutMD-v1_wkflw.png" src="../_images/CutMD-v1_wkflw.png" />
</div>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#id10"><span class="target" id="usage">Usage</span></a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Contrived example using projections:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mantid.api</span> <span class="kn">import</span> <span class="n">Projection</span>

<span class="n">to_cut</span> <span class="o">=</span> <span class="n">CreateMDWorkspace</span><span class="p">(</span><span class="n">Dimensions</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Extents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">Names</span><span class="o">=</span><span class="s">&quot;H,K,L,E&quot;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s">&quot;U,U,U,V&quot;</span><span class="p">)</span>
<span class="c"># Add two fake peaks so that we can see the effect of the basis transformation</span>

<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;to_cut&#39;</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="p">[</span><span class="mi">10000</span><span class="p">,</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>

<span class="n">FakeMDEventData</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;to_cut&#39;</span><span class="p">,</span> <span class="n">PeakParams</span><span class="o">=</span><span class="p">[</span><span class="mi">10000</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">])</span>

<span class="n">SetUB</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">to_cut</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">SetSpecialCoordinates</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">to_cut</span><span class="p">,</span> <span class="n">SpecialCoordinates</span><span class="o">=</span><span class="s">&#39;HKL&#39;</span><span class="p">)</span>

<span class="c">#Since we only specify u and v, w is automatically calculated to be the cross product of u and v</span>
<span class="n">projection</span> <span class="o">=</span> <span class="n">Projection</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">proj_ws</span> <span class="o">=</span> <span class="n">projection</span><span class="o">.</span><span class="n">createWorkspace</span><span class="p">()</span>

<span class="c"># Apply the cut (PBins property sets the P1Bin, P2Bin, etc. properties for you)</span>
<span class="n">out_md</span> <span class="o">=</span> <span class="n">CutMD</span><span class="p">(</span><span class="n">to_cut</span><span class="p">,</span> <span class="n">Projection</span><span class="o">=</span><span class="n">proj_ws</span><span class="p">,</span> <span class="n">PBins</span><span class="o">=</span><span class="p">([</span><span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">]),</span> <span class="n">NoPix</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c">#Another way we can call CutMD:</span>
<span class="c">#[out1, out2, out3] = CutMD([to_cut, &quot;some_other_file.nxs&quot;, &quot;some_workspace_name&quot;], ...)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&#39;number of dimensions {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_md</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;number of dimensions not integrated {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">out_md</span><span class="o">.</span><span class="n">getNonIntegratedDimensions</span><span class="p">())))</span>
<span class="n">dim_dE</span> <span class="o">=</span> <span class="n">out_md</span><span class="o">.</span><span class="n">getDimension</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;min dE {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dim_dE</span><span class="o">.</span><span class="n">getMaximum</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;max dE {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dim_dE</span><span class="o">.</span><span class="n">getMinimum</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>number of dimensions 4
number of dimensions not integrated 3
min dE 5.0
max dE -5.0
</pre></div>
</div>
<p><strong>Example - CutMD on MDHistoWorkspace:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">signal</span>  <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>
<span class="n">error</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span><span class="p">;</span>
<span class="c"># Create Histo workspace</span>
<span class="n">histo_ws</span><span class="o">=</span><span class="n">CreateMDHistoWorkspace</span><span class="p">(</span><span class="n">Dimensionality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">Extents</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span><span class="n">SignalInput</span><span class="o">=</span><span class="n">signal</span> <span class="p">,</span><span class="n">ErrorInput</span><span class="o">=</span><span class="n">error</span><span class="p">,</span> <span class="n">NumberOfBins</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span> <span class="n">Names</span><span class="o">=</span><span class="s">&#39;X,Y&#39;</span><span class="p">,</span> <span class="n">Units</span><span class="o">=</span><span class="s">&#39;Q,Q&#39;</span><span class="p">)</span>

<span class="c"># Cut the MDHistoWorkspace to give a single bin containing half the data</span>
<span class="n">cut</span><span class="o">=</span> <span class="n">CutMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">histo_ws</span><span class="p">,</span> <span class="n">PBins</span><span class="o">=</span><span class="p">[[</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">]])</span>

<span class="k">print</span><span class="p">(</span><span class="s">&#39;Total signal in input = {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">signal</span><span class="p">)))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Half the volume should give half the signal = {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cut</span><span class="o">.</span><span class="n">getSignalArray</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Total signal in input = 100.0
Half the volume should give half the signal = 50.0
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/MDAlgorithms/Slicing.html">MDAlgorithms\Slicing</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id11">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/e07b2bf50bc7eaeb32967b712b3665c1ffc8a2c4/Framework/MDAlgorithms/src/CutMD.cpp">CutMD.cpp</a> <em>(last modified: 2017-03-22)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/e07b2bf50bc7eaeb32967b712b3665c1ffc8a2c4/Framework/MDAlgorithms/inc/MantidMDAlgorithms/CutMD.h">CutMD.h</a> <em>(last modified: 2016-06-14)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CuboidGaugeVolumeAbsorption-v1.html" title="Previous Chapter: CuboidGaugeVolumeAbsorption v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CuboidGaugeVolum...</span>
    </a>
  </li>
  <li>
    <a href="CylinderAbsorption-v1.html" title="Next Chapter: CylinderAbsorption v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CylinderAbsorpti... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2018-03-19.<br/>
    </p>
  </div>
</footer>
  </body>
</html>