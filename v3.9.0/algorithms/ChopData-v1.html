<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ChopData v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="CleanFileCache v1" href="CleanFileCache-v1.html" />
    <link rel="prev" title="CheckWorkspacesMatch v1" href="CheckWorkspacesMatch-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="chopdata-v1">
<span id="algm-chopdata"></span><span id="algm-chopdata-v1"></span><h1>ChopData v1<a class="headerlink" href="#chopdata-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/ChopData-v1_dlg.png"><img alt="../_images/ChopData-v1_dlg.png" class="screenshot" src="../_images/ChopData-v1_dlg.png" style="width: 266px;" /></a>
<p class="caption"><strong>ChopData</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#identifying-extended-frames" id="id4">Identifying Extended Frames</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Splits an input workspace into a grouped workspace, where each spectra if &#8216;chopped&#8217; at a certain point (given in &#8216;Step&#8217; input value) and the X values adjusted to give all the workspace in the group the same binning.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="5%" />
<col width="31%" />
<col width="9%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Name of the input workspace to be split.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td>WorkspaceGroup</td>
<td><em>Mandatory</em></td>
<td>Name for the WorkspaceGroup that will be created.</td>
</tr>
<tr class="row-even"><td>Step</td>
<td>Input</td>
<td>number</td>
<td>20000</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>NChops</td>
<td>Input</td>
<td>number</td>
<td>5</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>IntegrationRangeLower</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>IntegrationRangeUpper</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>MonitorWorkspaceIndex</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm will chop the input workspace into equally sized
workspaces, and adjust the X-values given so that they all begin from
the same point. This is useful if your raw files contain multiple
frames.</p>
<div class="section" id="identifying-extended-frames">
<h3><a class="toc-backref" href="#id4">Identifying Extended Frames</a><a class="headerlink" href="#identifying-extended-frames" title="Permalink to this headline">¶</a></h3>
<div class="figure">
<img alt="Figure 1: Example Monitor Spectrum with Extended Frames" src="../_images/ChopDataIntegrationExplanation.png" />
<p class="caption">Figure 1: Example Monitor Spectrum with Extended Frames</p>
</div>
<p>If the parameters <em>IntegrationRangeLower</em>, <em>IntegrationRangeUpper</em> and
<em>MonitorWorkspaceIndex</em> are provided to the algorithm, then it will
attempt to identify where in the workspace the frames have been
extended.</p>
<p>For example: looking at Figure 1 which shows an input workspace covering
100000 microseconds, we can see that the first frame covers forty
thousand, and the other three cover twenty thousand each.</p>
<p>In order for Mantid to determine this programatically, it integrates
over a range (defined by IntegrationRangeLower and
IntegrationRangeUpper) for each &#8220;chop&#8221; of the data. If the relative
values for this integration fall within certain bounds, then the chop is
deemed to be a continuation of the previous one rather than a separate
frame. If this happens, then they will be placed in the same workspace
within the result group.</p>
<p>The algorithm will only look at the workspace given in
<em>MonitorWorkspaceIndex</em> property to determine this. Though it is
expected and recommended that you use a monitor spectrum for this
purpose, it is not enforced so you may use a regular detector if you
have cause to do so.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Roughly Chop Workspace</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Creates a dummy ws with a single spectrum with 100 bins.  There is exactly 1 count in every bin.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s">&quot;Histogram&quot;</span><span class="p">,</span> <span class="s">&quot;Flat background&quot;</span><span class="p">,</span> <span class="n">NumBanks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">time_diff</span> <span class="o">=</span> <span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">99</span><span class="p">]</span> <span class="o">-</span> <span class="n">ws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>

<span class="c"># Chop the workspace roughly in two.</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">ChopData</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">NChops</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Step</span><span class="o">=</span><span class="n">time_diff</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The time range of the original workspace was </span><span class="si">%i</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">time_diff</span>
<span class="k">print</span> <span class="s">&quot;The number of bins in the orginal workspace was </span><span class="si">%i</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;The number of bins in the 1st chop is </span><span class="si">%i</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;The number of bins in the 2nd chop is </span><span class="si">%i</span><span class="s">.&quot;</span> <span class="o">%</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The time range of the original workspace was 19800.
The number of bins in the orginal workspace was 100.
The number of bins in the 1st chop is 48.
The number of bins in the 2nd chop is 48.
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Transforms/Splitting.html">Transforms\Splitting</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/3343e70222874fbd364099f979bd048987dd346c/Framework/Algorithms/src/ChopData.cpp">ChopData.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/3343e70222874fbd364099f979bd048987dd346c/Framework/Algorithms/inc/MantidAlgorithms/ChopData.h">ChopData.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CheckWorkspacesMatch-v1.html" title="Previous Chapter: CheckWorkspacesMatch v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; CheckWorkspacesM...</span>
    </a>
  </li>
  <li>
    <a href="CleanFileCache-v1.html" title="Next Chapter: CleanFileCache v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">CleanFileCache v... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>