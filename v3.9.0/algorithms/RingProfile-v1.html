<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>RingProfile v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="RotateInstrumentComponent v1" href="RotateInstrumentComponent-v1.html" />
    <link rel="prev" title="RetrieveRunInfo v1" href="RetrieveRunInfo-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="ringprofile-v1">
<span id="algm-ringprofile"></span><span id="algm-ringprofile-v1"></span><h1>RingProfile v1<a class="headerlink" href="#ringprofile-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/RingProfile-v1_dlg.png"><img alt="../_images/RingProfile-v1_dlg.png" class="screenshot" src="../_images/RingProfile-v1_dlg.png" style="width: 256px;" /></a>
<p class="caption"><strong>RingProfile</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculates the sum of the counts against a circular ring.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="4%" />
<col width="23%" />
<col width="8%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An input workspace.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An output workspace.</td>
</tr>
<tr class="row-even"><td>Centre</td>
<td>Input</td>
<td>dbl list</td>
<td>0,0,0</td>
<td>Coordinate of the centre of the ring</td>
</tr>
<tr class="row-odd"><td>MinRadius</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Radius of the inner ring(m)</td>
</tr>
<tr class="row-even"><td>MaxRadius</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Radius of the outer ring(m)</td>
</tr>
<tr class="row-odd"><td>NumBins</td>
<td>Input</td>
<td>number</td>
<td>100</td>
<td>Number of slice bins for the output</td>
</tr>
<tr class="row-even"><td>StartAngle</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>The angle to start from.</td>
</tr>
<tr class="row-odd"><td>Sense</td>
<td>Input</td>
<td>string</td>
<td>Anti-ClockWise</td>
<td>The direction of the integration around the ring. Allowed values: [&#8216;ClockWise&#8217;, &#8216;Anti-ClockWise&#8217;]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>RingProfile sums the counts against a ring.</p>
<p>Below, there is an example of the execution of the RingProfile to a
<a class="reference internal" href="../concepts/Workspace2D.html#workspace2d"><em>Workspace2D</em></a> where the position of the pixels are not
associated to detector positions, but it is derived from the
<a class="reference external" href="Interacting_with_Matrix_Workspaces#Axes">Axes</a>.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/ExecuteRingProfile.png"><img alt="../_images/ExecuteRingProfile.png" src="../_images/ExecuteRingProfile.png" style="width: 800px;" /></a>
</div>
<p>The image below shows a visual interpretation for the inputs of the
algorithm</p>
<div class="figure align-center">
<img alt="../_images/RingProfileInputsView.png" src="../_images/RingProfileInputsView.png" />
</div>
<p>The algorithm goes through each pixel and find its distance from the
center. If it relies inside the defined ring, it checks the angle
between the pixel position and the center and uses this information to
define the bin where to put the count for that pixel.</p>
<p>The RingProfile is also defined for Workspace2D which has the positions
based on the detectors, as you can see in the picture below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/RingProfileInstrument.png"><img alt="../_images/RingProfileInstrument.png" src="../_images/RingProfileInstrument.png" style="width: 800px;" /></a>
</div>
<p>In this case, the inputs of the algorithm is like the image below</p>
<div class="figure align-center">
<img alt="../_images/Ringprofileinstrument1.png" src="../_images/Ringprofileinstrument1.png" />
</div>
<p>The algorithm does to each spectrum, get the associated detector from
which it get the positions. From the positions it work out if it belongs
or not to the ring and in which bin it must be placed. It finally
accumulate all the spectrum values inside the target bin.</p>
<p>It is possible to setup the <em>StartAngle</em> from where to starting the Ring
as well as the Sense, if in clockwise direction or anti-clockwise
direction. But, the resulting workspace will always place the bins in a
relative angle position from the start. Which means that for
anti-clockwise sense, the real 3D angle is:</p>
<p>RealAngle = StartAngle + Angle</p>
<p>While for clockwise sense, the real 3D angle is:</p>
<p>RealAngle = StartAngle - Angle</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - A complete Circle - no inner radius</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s">&quot;Histogram&quot;</span><span class="p">,</span><span class="s">&quot;Multiple Peaks&quot;</span><span class="p">)</span>
<span class="n">wsOut</span> <span class="o">=</span> <span class="n">RingProfile</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">Centre</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span><span class="n">MaxRadius</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="k">print</span> <span class="p">(</span><span class="s">&quot;The RingProfile has been calculated with </span><span class="si">%i</span><span class="s"> bins&quot;</span> <span class="o">%</span> <span class="n">wsOut</span><span class="o">.</span><span class="n">blocksize</span><span class="p">())</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The RingProfile has been calculated with 100 bins
</pre></div>
</div>
<p><strong>Example - A ring</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s">&quot;Histogram&quot;</span><span class="p">,</span><span class="s">&quot;Multiple Peaks&quot;</span><span class="p">)</span>
<span class="n">wsOut</span> <span class="o">=</span> <span class="n">RingProfile</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">Centre</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">10</span><span class="p">],</span><span class="n">MinRadius</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">MaxRadius</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">NumBins</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>

<span class="k">print</span> <span class="p">(</span><span class="s">&quot;The RingProfile has been calculated with </span><span class="si">%i</span><span class="s"> bins&quot;</span> <span class="o">%</span> <span class="n">wsOut</span><span class="o">.</span><span class="n">blocksize</span><span class="p">())</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The RingProfile has been calculated with 200 bins
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Transforms/Grouping.html">Transforms\Grouping</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/3343e70222874fbd364099f979bd048987dd346c/Framework/Algorithms/src/RingProfile.cpp">RingProfile.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/3343e70222874fbd364099f979bd048987dd346c/Framework/Algorithms/inc/MantidAlgorithms/RingProfile.h">RingProfile.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="RetrieveRunInfo-v1.html" title="Previous Chapter: RetrieveRunInfo v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; RetrieveRunInfo ...</span>
    </a>
  </li>
  <li>
    <a href="RotateInstrumentComponent-v1.html" title="Next Chapter: RotateInstrumentComponent v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">RotateInstrument... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>