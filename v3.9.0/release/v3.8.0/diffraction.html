<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Diffraction Changes</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.9.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../../index.html" />
    <link rel="up" title="Mantid 3.8.0 Release Notes" href="index.html" />
    <link rel="next" title="Muon Analysis" href="muon.html" />
    <link rel="prev" title="SANS Changes" href="sans.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="diffraction-changes">
<h1>Diffraction Changes<a class="headerlink" href="#diffraction-changes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#crystal-improvements" id="id2">Crystal Improvements</a></li>
<li><a class="reference internal" href="#single-crystal-diffraction" id="id3">Single Crystal Diffraction</a></li>
<li><a class="reference internal" href="#engineering-diffraction" id="id4">Engineering Diffraction</a></li>
<li><a class="reference internal" href="#powder-diffraction" id="id5">Powder Diffraction</a></li>
<li><a class="reference internal" href="#imaging" id="id6">Imaging</a><ul>
<li><a class="reference internal" href="#tomographic-reconstruction-graphical-user-interface" id="id7">Tomographic reconstruction graphical user interface</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="crystal-improvements">
<h2><a class="toc-backref" href="#id2">Crystal Improvements</a><a class="headerlink" href="#crystal-improvements" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="single-crystal-diffraction">
<h2><a class="toc-backref" href="#id3">Single Crystal Diffraction</a><a class="headerlink" href="#single-crystal-diffraction" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>HFIR HB3A&#8217;s data reduction interface application (MantidPlot/Interfaces/Diffraction/HFIR 4Circle Reduction)
has been expanded and improved from previous release. It provides an integrated user-friendly interface for
instrument scientists and users to access data, calculate and refine UB matrix, merge multiple data sets
for slice-view and peak integration.</li>
<li><a class="reference internal" href="../../algorithms/IntegratePeaksMDHKL-v1.html#algm-integratepeaksmdhkl"><em>IntegratePeaksMDHKL</em></a> has been added to integrate data in HKL space.  The
main usage will be to normalize the data using
<a class="reference internal" href="../../algorithms/MDNormSCD-v1.html#algm-mdnormscd"><em>MDNormSCD</em></a> and then integrate the resulting MDHistoWorkspace,
but it also integrates MDHistoWorkspaces and MDEventWorkspaces without normalizing.
The MD data must be in units of HKL.  A 3D box is created for each peak and the background
and peak data are separated.  The intensity and sigma of the intensity is found from the grid inside the peak and
the background is subtracted.  The boxes are created and integrated in parallel and less memory is required than
binning all HKL space at once. The figure shows the grid points within an HKL box that are in one peak from Si data.</li>
</ul>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/peak3d1.png"><img alt="../../_images/peak3d1.png" src="../../_images/peak3d1.png" style="width: 487px;" /></a>
</div>
<ul class="simple">
<li>Some improvements were done for creating peaks from python. <a class="reference internal" href="../../algorithms/CreatePeaksWorkspace-v1.html#algm-createpeaksworkspace"><em>CreatePeaksWorkspace</em></a>
copies the goniometer from the input MatrixWorkspace to PeaksWorkspace. createPeak for PeaksWorkspace copies goniometer
from PeaksWorkspace to peak. setGoniometer for a peak can be done from python and setQLabFrame and setQSampleFrame work
correctly now with one argument.</li>
<li><a class="reference internal" href="../../algorithms/SCDCalibratePanels-v1.html#algm-scdcalibratepanels"><em>SCDCalibratePanels</em></a> has been rewritten to calibrate the position and rotations of
each panel independently in parallel.  There are options to calibrate the panel size and the L1 for all the panels.
Only the U of the UB matrix is refined.  There is a script, scripts/SCD_Reduction/SCDCalibratePanelsResults.py, that takes the output of
this algorithm and plots the theoretical vs calculated position of each peak for each panel.  The RMSD in mm is
calculated and printed in a log file and on the plots.</li>
<li>Given a PeaksWorkspace or MatrixWorkspace with an instrument,
<a class="reference internal" href="../../algorithms/SetDetScale-v1.html#algm-setdetscale"><em>SetDetScale</em></a>
will set or change the detector bank scales that are used in SaveHKL and AnvredCorrection.  The input format is the same as
used in anvred3.py, so DetScaleList input can be pasted from the definition of detScale there.  The default values can be
set in the instrument parameter file. Default values are in the parameter file for the TOPAZ instrument.</li>
<li><a class="reference internal" href="../../algorithms/SaveLauenorm-v1.html#algm-savelauenorm"><em>SaveLauenorm</em></a>
was modified to have an option to use the detector bank scales from the instrument parameters. The values can be
set to have defaults in the instrument parameter file or by
<a class="reference internal" href="../../algorithms/SetDetScale-v1.html#algm-setdetscale"><em>SetDetScale</em></a>.</li>
</ul>
</div>
<div class="section" id="engineering-diffraction">
<h2><a class="toc-backref" href="#id4">Engineering Diffraction</a><a class="headerlink" href="#engineering-diffraction" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>EnggFocus: bins are now masked at the beginning of the workflow
(when using the option MaskBinsXMins)</li>
<li><a class="reference internal" href="../../algorithms/SaveDiffFittingAscii-v1.html#algm-savedifffittingascii"><em>SaveDiffFittingAscii</em></a> an algorithm which saves a TableWorkspace containing
diffraction fitting results as an ASCII file</li>
<li>New <em>Fit All</em> button on the Fitting Tab will enable user to
batch-process all the runs and banks when a range of run number
is given. During the Fit process,
<a class="reference internal" href="../../algorithms/SaveDiffFittingAscii-v1.html#algm-savedifffittingascii"><em>SaveDiffFittingAscii</em></a> algorithm
will be utilised to save <em>engggui_fitting_fitpeaks_param</em>
TableWorkspace as a <cite>csv</cite> file.</li>
<li>New <em>Load</em> button on the Fitting Tab, will enable user to load the
focused file to the canvas, so that the user can select the peaks
manually beforehand</li>
<li>New tool-tip <em>How to use</em> quickly tells users how to use the peak
picker tool by simply hovering their cursor over it.</li>
</ul>
</div>
<div class="section" id="powder-diffraction">
<h2><a class="toc-backref" href="#id5">Powder Diffraction</a><a class="headerlink" href="#powder-diffraction" title="Permalink to this headline">¶</a></h2>
<ul>
<li><p class="first"><a class="reference internal" href="../../algorithms/SNSPowderReduction-v1.html#algm-snspowderreduction"><em>SNSPowderReduction</em></a> has changed
parameters. <tt class="docutils literal"><span class="pre">Instrument</span></tt>, <tt class="docutils literal"><span class="pre">RunNumber</span></tt>, and <tt class="docutils literal"><span class="pre">Extension</span></tt> have
been replaced with a single <tt class="docutils literal"><span class="pre">Filename</span></tt> parameter. This has been
paired with changes to the Powder Diffraction interface as
well. There were also a variety of bugfixes related to the output
workspaces. While it did not affect the saved data files, the output
workspaces were not always correctly normalized or in the requested
units. There is also an additional <tt class="docutils literal"><span class="pre">GroupingFile</span></tt> parameter which
allows overriding the grouping that is specified in the
<tt class="docutils literal"><span class="pre">CalibrationFile</span></tt>. The documentation for this algorithm has been
greatly expanded as well.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/PDFFourierTransform-v1.html#algm-pdffouriertransform"><em>PDFFourierTransform</em></a> has been modified to
look at the signal as well when looking at the <tt class="docutils literal"><span class="pre">Q</span></tt>-range to use
for the transform.</p>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="../../api/python/techniques/CryPowderDiffractionISIS-v1.html#cry-powder-diffraction-ref"><em>Crystallography Powder Diffraction Script</em></a>: S-Empty option has been enabled for</dt>
<dd><p class="first last">the Crystallography Powder Diffraction Script. In order to use the
S-Empty option, simply provide the S-Empty run number within the
<tt class="docutils literal"><span class="pre">.pref</span></tt> file.</p>
</dd>
</dl>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/CorelliCrossCorrelate-v1.html#algm-corellicrosscorrelate"><em>CorelliCrossCorrelate</em></a>: The
weights applied to events have changed by a factor of the duty cycle
(<img class="math" src="../../_images/math/c70253e7e15466fb65278b6bd469544c0fbb5083.png" alt="c\approx0.498" style="vertical-align: -1px"/>) as requested by the instrument scientists.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../api/python/techniques/PearlPowderDiffractionISIS-v1.html#pearl-powder-diffraction-ref"><em>Pearl Powder Diffraction Script</em></a>: A workflow diagram for
<tt class="docutils literal"><span class="pre">pearl_run_focus</span></tt> function has been created.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/CalibrateRectangularDetectors-v1.html#algm-calibraterectangulardetectors"><em>CalibrateRectangularDetectors</em></a> has been modified to output
<tt class="docutils literal"><span class="pre">.h5</span></tt> formated calibration files as well as the other versions it
already supported.</p>
</li>
<li><p class="first">New algorithm <a class="reference internal" href="../../algorithms/PDCalibration-v1.html#algm-pdcalibration"><em>PDCalibration</em></a> for
pixel-by-pixel calibration in time-of-flight space.</p>
</li>
</ul>
</div>
<div class="section" id="imaging">
<h2><a class="toc-backref" href="#id6">Imaging</a><a class="headerlink" href="#imaging" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>An updated version of the IMAT instrument definition now includes
prototype diffraction detector banks.</li>
</ul>
<div class="section" id="tomographic-reconstruction-graphical-user-interface">
<h3><a class="toc-backref" href="#id7">Tomographic reconstruction graphical user interface</a><a class="headerlink" href="#tomographic-reconstruction-graphical-user-interface" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed the submission of custom commands.</li>
</ul>
<p>Full list of <a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.8%22+is%3Amerged+label%3A%22Component%3A+Diffraction%22">diffraction</a>
and
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.8%22+is%3Amerged+label%3A%22Component%3A+Imaging%22">imaging</a> changes on GitHub.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="sans.html" title="Previous Chapter: SANS Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SANS Changes</span>
    </a>
  </li>
  <li>
    <a href="muon.html" title="Next Chapter: Muon Analysis"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Muon Analysis &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>