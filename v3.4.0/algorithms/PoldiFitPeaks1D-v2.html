<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PoldiFitPeaks1D v2</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="PoldiFitPeaks2D v1" href="PoldiFitPeaks2D-v1.html" />
    <link rel="prev" title="PoldiFitPeaks1D v1" href="PoldiFitPeaks1D-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="poldifitpeaks1d-v2">
<span id="algm-poldifitpeaks1d"></span><span id="algm-poldifitpeaks1d-v2"></span><h1>PoldiFitPeaks1D v2<a class="headerlink" href="#poldifitpeaks1d-v2" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/PoldiFitPeaks1D-v2_dlg.png"><img alt="../_images/PoldiFitPeaks1D-v2_dlg.png" class="screenshot" src="../_images/PoldiFitPeaks1D-v2_dlg.png" style="width: 322px;" /></a>
<p class="caption"><strong>PoldiFitPeaks1D</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>PoldiPeakFit1D fits peak profiles to POLDI auto-correlation data.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="4%" />
<col width="24%" />
<col width="7%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace2D.html#workspace2d"><em>Workspace2D</em></a></td>
<td><em>Mandatory</em></td>
<td>An input workspace containing a POLDI auto-correlation spectrum.</td>
</tr>
<tr class="row-odd"><td>FwhmMultiples</td>
<td>Input</td>
<td>number</td>
<td>2</td>
<td>Each peak will be fitted using x times FWHM data in each direction.</td>
</tr>
<tr class="row-even"><td>AllowedOverlap</td>
<td>Input</td>
<td>number</td>
<td>0.25</td>
<td>If a fraction larger than this value overlaps with the next range, the ranges are merged.</td>
</tr>
<tr class="row-odd"><td>PeakFunction</td>
<td>Input</td>
<td>string</td>
<td>Gaussian</td>
<td>Peak function that will be fitted to all peaks.</td>
</tr>
<tr class="row-even"><td>PoldiPeakTable</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>A table workspace containing POLDI peak data.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Output workspace with refined peak data.</td>
</tr>
<tr class="row-even"><td>FitPlotsWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td>FitPlots</td>
<td>Plots of all peak fits.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Version two of PoldiFitPeaks1D was introduced to solve problems with overlapping peaks. Instead of refining individual peaks, the algorithm defines a range of x-values around each peak. In a second step the algorithm checks whether neighboring ranges are overlapping and merges them if that&#8217;s the case. The amount of overlap that should be tolerated by the algorithm can be changed through the parameter <cite>AllowedOverlap</cite>, where 0 means that ranges that overlap in any way should be merged, while with 1, they are not merged at all. Merged ranges then contain more than one peak, which are refined together. This way, reasonable results can also be obtained for overlapping peaks.</p>
<p>Another thing that&#8217;s different from version 1 of the algorithm is the background description. When peaks overlap, the description with a quadratic function is not particularly suitable. Instead, Chebyshev-polynomes of degrees 0, 1 and 2 are fitted and the best solution (with respect to quality of the fit) is selected automatically.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p>The following usage example loads an example correlation spectrum that was calculated for a sample containing two compounds with very similar lattice parameters.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Load correlation spectrum</span>
<span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;poldi_2_phases_theoretical_reference.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;correlation_spectrum&#39;</span><span class="p">)</span>

<span class="c"># Perform peak search</span>
<span class="n">PoldiPeakSearch</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;correlation_spectrum&#39;</span><span class="p">,</span> <span class="n">MinimumPeakSeparation</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">MaximumPeakNumber</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">MinimumPeakHeight</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">)</span>

<span class="c"># Fit peaks with proper overlap handling</span>
<span class="n">PoldiFitPeaks1D</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;correlation_spectrum&#39;</span><span class="p">,</span> <span class="n">FwhmMultiples</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">AllowedOverlap</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">PoldiPeakTable</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Variation of the <cite>AllowedOverlap</cite>-parameter influences the quality of the fit at some point if it&#8217;s too close to 1. Setting it to 1 makes the algorithm&#8217;s behavior similar to that of version 1.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Load correlation spectrum</span>
<span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;poldi_2_phases_theoretical_reference.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;correlation_spectrum&#39;</span><span class="p">)</span>

<span class="c"># Perform peak search</span>
<span class="n">PoldiPeakSearch</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;correlation_spectrum&#39;</span><span class="p">,</span> <span class="n">MinimumPeakSeparation</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">MaximumPeakNumber</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">MinimumPeakHeight</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">)</span>

<span class="c"># Too large allowed overlap, fits will have bad quality.</span>
<span class="n">PoldiFitPeaks1D</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;correlation_spectrum&#39;</span><span class="p">,</span> <span class="n">FwhmMultiples</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">AllowedOverlap</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">PoldiPeakTable</span><span class="o">=</span><span class="s">&#39;peaks&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/SINQ.html">SINQ</a> | <a class="reference external" href="categories/Poldi.html">Poldi</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Mantid.<br/>
    </p>
  </div>
</footer>
  </body>
</html>