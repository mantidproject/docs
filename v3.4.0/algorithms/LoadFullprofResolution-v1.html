<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LoadFullprofResolution v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="LoadGSASInstrumentFile v1" href="LoadGSASInstrumentFile-v1.html" />
    <link rel="prev" title="LoadFullprofFile v1" href="LoadFullprofFile-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="loadfullprofresolution-v1">
<span id="algm-loadfullprofresolution"></span><span id="algm-loadfullprofresolution-v1"></span><h1>LoadFullprofResolution v1<a class="headerlink" href="#loadfullprofresolution-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/LoadFullprofResolution-v1_dlg.png"><img alt="../_images/LoadFullprofResolution-v1_dlg.png" class="screenshot" src="../_images/LoadFullprofResolution-v1_dlg.png" style="width: 321px;" /></a>
<p class="caption"><strong>LoadFullprofResolution</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Load Fullprof&#8217;s resolution (.irf) file to one or multiple TableWorkspace(s) and/or where this is supported. See description section, translate fullprof resolution fitting parameter into Mantid equivalent fitting parameters.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="2%" />
<col width="10%" />
<col width="3%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Path to an Fullprof .irf file to load.</td>
</tr>
<tr class="row-odd"><td>OutputTableWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Name of the output TableWorkspace containing profile parameters or bank information.</td>
</tr>
<tr class="row-even"><td>UseBankIDsInFile</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Use bank IDs as given in file rather than ordinal number of bank.If the bank IDs in the file are not unique, it is advised to set this to false.</td>
</tr>
<tr class="row-odd"><td>Banks</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>ID(s) of specified bank(s) to load, The IDs are as specified by UseBankIDsInFile.Default is all banks contained in input .irf file.</td>
</tr>
<tr class="row-even"><td>Workspace</td>
<td>InOut</td>
<td>WorkspaceGroup</td>
<td>&nbsp;</td>
<td>A workspace group with the instrument to which we add the parameters from the Fullprof .irf file with one workspace for each bank of the .irf file</td>
</tr>
<tr class="row-odd"><td>WorkspacesForBanks</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>For each Fullprof bank, the ID of the corresponding workspace in same order as the Fullprof banks are specified. ID=1 refers to the first workspace in the workspace group, ID=2 refers to the second workspace and so on. Default is all workspaces in numerical order.If default banks are specified, they too are taken to be in numerical order</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Load Fullprof resolution (.irf) file to TableWorkspace(s) and optionally
into the instruments of matrix workspaces with one workspace per bank of
the .irf file. Either or both of the Tableworkspace(s) and matrix
workspace must be set.</p>
<p>Where a Workspace is specified the support for translating Fullprof
resolution parameters into the workspace for subsequent fitting is
limitted to Fullprof:</p>
<ul class="simple">
<li>NPROF=13, Ikeda-Carpender pseudo-Voigt translated into
<a class="reference internal" href="../fitfunctions/IkedaCarpenterPV.html#func-ikedacarpenterpv"><em>IkedaCarpenterPV</em></a> according to
<a class="reference external" href="http://www.mantidproject.org/CreateIkedaCarpenterParameters">CreateIkedaCarpenterParameters</a></li>
<li>NPROF=9, back-to-back-exponential pseudo-Voigt translated into
<a class="reference internal" href="../fitfunctions/BackToBackExponential.html#func-backtobackexponential"><em>BackToBackExponential</em></a> according to
<a class="reference external" href="http://www.mantidproject.org/CreateBackToBackParameters">CreateBackToBackParameters</a></li>
</ul>
<p>Note for NPROF=9 the translation is currently ignoring the Lorentzian
part of the pseudo-Voigt.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Run LoadprofResolution for both TableWorkspace and workspace with MUSR Instrument</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&quot;MUSR00015189&quot;</span><span class="p">)</span>

<span class="c"># Run algorithm. MUSR_01.irf has NPROF=13 in 2nd line, so IkedaCarpenterPV will be used.</span>
<span class="n">tws</span> <span class="o">=</span> <span class="n">LoadFullprofResolution</span><span class="p">(</span><span class="s">&quot;MUSR_01.irf&quot;</span><span class="p">,</span><span class="n">Banks</span><span class="o">=</span><span class="s">&quot;3,5&quot;</span><span class="p">,</span> <span class="n">Workspace</span><span class="o">=</span><span class="s">&quot;ws&quot;</span><span class="p">)</span>

<span class="c">#Print first four rows of output table workspace</span>
<span class="k">print</span> <span class="s">&quot;First 4 rows of OutputTableWorkspace&quot;</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]:</span>
   <span class="n">row</span> <span class="o">=</span> <span class="n">tws</span><span class="o">.</span><span class="n">row</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
   <span class="k">print</span> <span class="s">&quot;{&#39;Name&#39;: &#39;</span><span class="si">%s</span><span class="s">&#39;, &#39;Value_3&#39;: </span><span class="si">%.2f</span><span class="s">, &#39;Value_5&#39;: </span><span class="si">%.2f</span><span class="s">}&quot;</span> <span class="o">%</span> <span class="p">(</span>  <span class="n">row</span><span class="p">[</span><span class="s">&quot;Name&quot;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s">&quot;Value_3&quot;</span><span class="p">],</span> <span class="n">row</span><span class="p">[</span><span class="s">&quot;Value_5&quot;</span><span class="p">]</span> <span class="p">)</span>

<span class="c"># Get the instrument with the parameters</span>
<span class="n">inst</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getInstrument</span><span class="p">()</span>

<span class="c"># demonstrate that the type of parameters saved are fitting parameters</span>
<span class="k">print</span> <span class="s">&quot;Type of 3 parameters got from instrument in workspace&quot;</span>
<span class="k">print</span> <span class="s">&quot;Alpha0 type =&quot;</span><span class="p">,</span> <span class="n">inst</span><span class="o">.</span><span class="n">getParameterType</span><span class="p">(</span><span class="s">&#39;Alpha0&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;Beta0 type =&quot;</span><span class="p">,</span> <span class="n">inst</span><span class="o">.</span><span class="n">getParameterType</span><span class="p">(</span><span class="s">&#39;Beta0&#39;</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;SigmaSquared type =&quot;</span><span class="p">,</span> <span class="n">inst</span><span class="o">.</span><span class="n">getParameterType</span><span class="p">(</span><span class="s">&#39;SigmaSquared&#39;</span><span class="p">)</span>

<span class="c"># As of the time of writing,</span>
<span class="c"># fitting instrument parameters cannot be</span>
<span class="c"># accessed through the python API.</span>
<span class="c"># They can be accessed via the file in the lext line, if uncommented:</span>
<span class="c">#SaveParameterFile(ws[0][0], &quot;instParam.xml&quot;)</span>

<span class="c">#This file should contain the lines shown next and similar for other parameters:</span>
<span class="c">#            &lt;parameter name=&quot;Alpha0&quot;&gt;</span>
<span class="c">#                    &lt;value val=&quot;0 , IkedaCarpenterPV , Alpha0 ,  ,  ,  , Alpha0= , 1.5971070000000001 ,  , TOF , linear ; TOF ; TOF&quot;/&gt;</span>
<span class="c">#            &lt;/parameter&gt;</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>First 4 rows of OutputTableWorkspace
{&#39;Name&#39;: &#39;BANK&#39;, &#39;Value_3&#39;: 3.00, &#39;Value_5&#39;: 5.00}
{&#39;Name&#39;: &#39;Alph0&#39;, &#39;Value_3&#39;: 1.60, &#39;Value_5&#39;: 1.61}
{&#39;Name&#39;: &#39;Alph1&#39;, &#39;Value_3&#39;: 1.50, &#39;Value_5&#39;: 1.30}
{&#39;Name&#39;: &#39;Beta0&#39;, &#39;Value_3&#39;: 33.57, &#39;Value_5&#39;: 37.57}
Type of 3 parameters got from instrument in workspace
Alpha0 type = fitting
Beta0 type = fitting
SigmaSquared type = fitting
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Diffraction.html">Diffraction</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2015, Mantid.<br/>
    </p>
  </div>
</footer>
  </body>
</html>