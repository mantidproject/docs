<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LoadDNSLegacy v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.9.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="LoadDaveGrp v1" href="LoadDaveGrp-v1.html" />
    <link rel="prev" title="LoadCanSAS1D v2" href="LoadCanSAS1D-v2.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="loaddnslegacy-v1">
<span id="algm-loaddnslegacy"></span><span id="algm-loaddnslegacy-v1"></span><h1>LoadDNSLegacy v1<a class="headerlink" href="#loaddnslegacy-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/LoadDNSLegacy-v1_dlg.png"><img alt="../_images/LoadDNSLegacy-v1_dlg.png" class="screenshot" src="../_images/LoadDNSLegacy-v1_dlg.png" style="width: 417px;" /></a>
<p class="caption"><strong>LoadDNSLegacy</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Load the DNS Legacy data file to the mantid workspace.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="4%" />
<col width="18%" />
<col width="7%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Name of DNS experimental data file. Allowed extensions: [&#8216;.d_dat&#8217;]</td>
</tr>
<tr class="row-odd"><td>CoilCurrentsTable</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Name of file containing table of coil currents and polarisations. Allowed extensions: [&#8216;.txt&#8217;]</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Name of the workspace to store the experimental data.</td>
</tr>
<tr class="row-odd"><td>Normalization</td>
<td>Input</td>
<td>string</td>
<td>duration</td>
<td>Kind of data normalization. Allowed values: [&#8216;duration&#8217;, &#8216;monitor&#8217;, &#8216;no&#8217;]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This algorithm is being developed for a specific instrument. It might get changed or even
removed without a notification, should instrument scientists decide to do so.</p>
</div>
<p>This algorithm loads a DNS legacy data file into a <a class="reference internal" href="../concepts/Workspace2D.html#workspace2d"><em>Workspace2D</em></a>. The loader rotates the detector bank in the position given in the data file.</p>
<p><strong>Normalization</strong></p>
<p>The <strong>Normalization</strong> option offers the following choices:</p>
<ul class="simple">
<li><strong>duration</strong>: data in the output workspace will be divided by experiment duration. The <em>normalized</em> sample log will be set to <em>duration</em>.</li>
<li><strong>monitor</strong>: data in the output workspace will be divided by monitor counts. The <em>normalized</em> sample log will be set to <em>monitor</em>.</li>
<li><strong>no</strong>: no normalization will be performed, data will be loaded as is. The <em>normalized</em> sample log will be set to <em>no</em>.</li>
</ul>
<p><strong>Polarisation</strong></p>
<p>Since polarisation is not specified in the DNS legacy files, coil currents table is required to lookup for the polarisation and set the <em>polarisation</em> sample log. The coil currents table is a text file containing the following table.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="19%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">polarisation</th>
<th class="head">comment</th>
<th class="head">C_a</th>
<th class="head">C_b</th>
<th class="head">C_c</th>
<th class="head">C_z</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>x</td>
<td>7</td>
<td>0</td>
<td>-2</td>
<td>-0.77</td>
<td>2.21</td>
</tr>
<tr class="row-odd"><td>y</td>
<td>7</td>
<td>0</td>
<td>1.6</td>
<td>-2.77</td>
<td>2.21</td>
</tr>
<tr class="row-even"><td>z</td>
<td>7</td>
<td>0</td>
<td>0.11</td>
<td>-0.50</td>
<td>0</td>
</tr>
<tr class="row-odd"><td>x</td>
<td>7</td>
<td>0</td>
<td>-2.1</td>
<td>-0.97</td>
<td>2.21</td>
</tr>
</tbody>
</table>
<p>First row must contain the listed column headers, other rows contain coil currents for each polarisation. Rows with different currents for one polarisation are alowed. Columns are separated by tab symbols. This table must be provided to the user by instrument scientist.</p>
<p>This algorithm only supports DNS instrument in its configuration before major upgrade.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Load a DNS legacy .d_dat file:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># data file.</span>
<span class="n">datafile</span> <span class="o">=</span> <span class="s">&#39;dn134011vana.d_dat&#39;</span>
<span class="n">coilcurrents</span> <span class="o">=</span> <span class="s">&#39;currents.txt&#39;</span>

<span class="c"># Load dataset</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadDNSLegacy</span><span class="p">(</span><span class="n">datafile</span><span class="p">,</span> <span class="n">Normalization</span><span class="o">=</span><span class="s">&#39;monitor&#39;</span><span class="p">,</span> <span class="n">CoilCurrentsTable</span><span class="o">=</span><span class="n">coilcurrents</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;This workspace has&quot;</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumDims</span><span class="p">(),</span> <span class="s">&quot;dimensions and has&quot;</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">(),</span> <span class="s">&quot;histograms.&quot;</span>
</pre></div>
</div>
<p>Output:</p>
<blockquote>
<div>This workspace has 2 dimensions and has 24 histograms.</div></blockquote>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Workflow/MLZ/DNS.html">Workflow\MLZ\DNS</a> | <a class="reference external" href="categories/DataHandling/Text.html">DataHandling\Text</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a948b43f4e569c67c5896a3135c635a82d326bdb/Framework/PythonInterface/plugins/algorithms/LoadDNSLegacy.py">LoadDNSLegacy.py</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadCanSAS1D-v2.html" title="Previous Chapter: LoadCanSAS1D v2"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadCanSAS1D v2</span>
    </a>
  </li>
  <li>
    <a href="LoadDaveGrp-v1.html" title="Next Chapter: LoadDaveGrp v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadDaveGrp v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>