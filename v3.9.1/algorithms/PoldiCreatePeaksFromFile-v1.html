<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>PoldiCreatePeaksFromFile v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.9.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="PoldiDataAnalysis v1" href="PoldiDataAnalysis-v1.html" />
    <link rel="prev" title="PoldiCreatePeaksFromCell v1" href="PoldiCreatePeaksFromCell-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="poldicreatepeaksfromfile-v1">
<span id="algm-poldicreatepeaksfromfile"></span><span id="algm-poldicreatepeaksfromfile-v1"></span><h1>PoldiCreatePeaksFromFile v1<a class="headerlink" href="#poldicreatepeaksfromfile-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/PoldiCreatePeaksFromFile-v1_dlg.png"><img alt="../_images/PoldiCreatePeaksFromFile-v1_dlg.png" class="screenshot" src="../_images/PoldiCreatePeaksFromFile-v1_dlg.png" style="width: 388px;" /></a>
<p class="caption"><strong>PoldiCreatePeaksFromFile</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#required" id="id4">Required</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>The algorithm reads a POLDI crystal structure file and creates a WorkspaceGroup that contains tableswith the expected reflections.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="6%" />
<col width="24%" />
<col width="10%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputFile</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>A file with POLDI crystal data. Allowed values: [&#8216;dat&#8217;]</td>
</tr>
<tr class="row-odd"><td>LatticeSpacingMin</td>
<td>Input</td>
<td>number</td>
<td>0.5</td>
<td>Lowest allowed lattice spacing.</td>
</tr>
<tr class="row-even"><td>LatticeSpacingMax</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Largest allowed lattice spacing.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>WorkspaceGroup with reflection tables.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Some steps in the analysis of POLDI data require that detected peaks are indexed. This can be done by using
<a class="reference internal" href="PoldiIndexKnownCompounds-v1.html#algm-poldiindexknowncompounds"><em>PoldiIndexKnownCompounds v1</em></a>, which accepts a table with unindexed peaks and one or more workspaces with
calculated peaks corresponding to the crystal structures that are expected in the sample. These can be calculated
using the algorithm <a class="reference internal" href="PoldiCreatePeaksFromCell-v1.html#algm-poldicreatepeaksfromcell"><em>PoldiCreatePeaksFromCell v1</em></a>. Calling this algorithm over and over with the same
parameters is not practical, but storing the tables is not practical either, since lattice parameters may change
slightly from sample to sample.</p>
<p>PoldiCreatePeaksFromFile reads a text file which contains one or more crystal structure definitions. Since the
analysis requires information mainly about the lattice and the symmetry, the format is very simple. The following
block shows how such a file would look when there are two compounds:</p>
<div class="highlight-none"><div class="highlight"><pre># The name may contain letters, numbers and _
Iron_FCC {
    # Up to 6 values in the order a, b, c, alpha, beta, gamma.
    # Lattice parameters are given in Angstrom.
    Lattice: 3.65
    Spacegroup: F m -3 m
    Atoms: {
        # Element x y z are mandatory. Optional occupancy and isotropic ADP (in Angstrom^2)
        Fe 0.0 0.0 0.0
    }
}

Iron_BCC {
    Lattice: 2.88
    Spacegroup: F m -3 m
    Atoms: {
        Fe 0.0 0.0 0.0
    }
}
</pre></div>
</div>
<p>Note that only the atoms in the asymmetric unit need to be specified, the space group is used to generate all
equivalent atoms. This information is used to determine systematic absences, while the space group is also used by
some POLDI algorithms to obtain the point group to get reflection multiplicities and more. Anything that follows the
<tt class="docutils literal"><span class="pre">#</span></tt>-character is considered a comment and is ignored by the parser to allow documentation of the crystal structures
if necessary.</p>
<p>The algorithm will always produce a WorkspaceGroup which contains as many peak tables as compounds specified in the
file.</p>
</div>
<div class="section" id="required">
<h2><a class="toc-backref" href="#id4">Required</a><a class="headerlink" href="#required" title="Permalink to this headline">¶</a></h2>
<p>This algorithm requires python package <tt class="docutils literal"><span class="pre">pyparsing</span></tt>, available at the <a class="reference external" href="https://pypi.python.org/pypi/pyparsing">python package index</a>
or through the operating system&#8217;s package manager. If the package is not present, this algorithm will not be available.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p>The following usage example takes up the file showed above and passes it to the algorithm.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create two tables with expected peaks directly from a file</span>
<span class="n">compounds</span> <span class="o">=</span> <span class="n">PoldiCreatePeaksFromFile</span><span class="p">(</span><span class="s">&#39;PoldiCrystalFileExample.dat&#39;</span><span class="p">,</span> <span class="n">LatticeSpacingMin</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="n">compound_count</span> <span class="o">=</span> <span class="n">compounds</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&#39;Number of loaded compounds:&#39;</span><span class="p">,</span> <span class="n">compound_count</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">compound_count</span><span class="p">):</span>
    <span class="n">ws</span> <span class="o">=</span> <span class="n">compounds</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&#39;Compound &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span><span class="s">&#39;:&#39;</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">getName</span><span class="p">(),</span> <span class="s">&#39;has&#39;</span><span class="p">,</span> <span class="n">ws</span><span class="o">.</span><span class="n">rowCount</span><span class="p">(),</span> <span class="s">&#39;reflections in the resolution range.&#39;</span>
</pre></div>
</div>
<p>The script produces a WorkspaceGroup which contains a table with reflections for each compound in the file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Number</span> <span class="n">of</span> <span class="n">loaded</span> <span class="n">compounds</span><span class="p">:</span> <span class="mi">2</span>
<span class="n">Compound</span> <span class="mi">1</span><span class="p">:</span> <span class="n">Iron_FCC</span> <span class="n">has</span> <span class="mi">11</span> <span class="n">reflections</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">resolution</span> <span class="nb">range</span><span class="o">.</span>
<span class="n">Compound</span> <span class="mi">2</span><span class="p">:</span> <span class="n">Iron_BCC</span> <span class="n">has</span> <span class="mi">8</span> <span class="n">reflections</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">resolution</span> <span class="nb">range</span><span class="o">.</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/SINQ/Poldi.html">SINQ\Poldi</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a948b43f4e569c67c5896a3135c635a82d326bdb/Framework/PythonInterface/plugins/algorithms/PoldiCreatePeaksFromFile.py">PoldiCreatePeaksFromFile.py</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PoldiCreatePeaksFromCell-v1.html" title="Previous Chapter: PoldiCreatePeaksFromCell v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; PoldiCreatePeaks...</span>
    </a>
  </li>
  <li>
    <a href="PoldiDataAnalysis-v1.html" title="Next Chapter: PoldiDataAnalysis v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">PoldiDataAnalysi... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>