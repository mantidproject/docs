<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Rebin2D v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="RebinByPulseTimes v1" href="RebinByPulseTimes-v1.html" />
    <link rel="prev" title="Rebin v1" href="Rebin-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.2</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="rebin2d-v1">
<span id="algm-rebin2d"></span><span id="algm-rebin2d-v1"></span><h1>Rebin2D v1<a class="headerlink" href="#rebin2d-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/Rebin2D-v1_dlg.png"><img alt="../_images/Rebin2D-v1_dlg.png" class="screenshot" src="../_images/Rebin2D-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>Rebin2D</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a></li>
<li><a class="reference internal" href="#requirements" id="id6">Requirements</a></li>
<li><a class="reference internal" href="#usage" id="id7">Usage</a></li>
<li><a class="reference internal" href="#source" id="id8">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Rebins both axes of a 2D workspace using the given parameters</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin</span></a>, <a class="reference internal" href="SofQW-v1.html#algm-sofqw"><span class="std std-ref">SofQW</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="2%" />
<col width="14%" />
<col width="4%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>An input workspace.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>An output workspace.</td>
</tr>
<tr class="row-even"><td>Axis1Binning</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>A comma separated list of first bin boundary, width, last bin boundary. Optionally this can be followed by a comma and more widths and last boundary pairs. Negative width values indicate logarithmic binning.</td>
</tr>
<tr class="row-odd"><td>Axis2Binning</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>A comma separated list of first bin boundary, width, last bin boundary. Optionally this can be followed by a comma and more widths and last boundary pairs. Negative width values indicate logarithmic binning.</td>
</tr>
<tr class="row-even"><td>UseFractionalArea</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Flag to turn on the using the fractional area tracking RebinnedOutput workspace .Default is false.</td>
</tr>
<tr class="row-odd"><td>Transpose</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Run the Transpose algorithm on the resulting matrix.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The bin parameters are used to form an output grid. A positive
<span class="math">\(\Delta x_i\,\)</span> makes constant width bins, whilst negative ones
create logarithmic binning using the formula
<span class="math">\(x(j+1)=x(j)(1+|\Delta x_i|)\,\)</span>. The overlap of the polygons
formed from the old and new grids is tested to compute the required
signal weight for the each of the new bins on the workspace, like in
<a class="reference internal" href="Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin v1</span></a>, and the errors are summed in quadrature, as:</p>
<div class="math">
\[Y^{\mathrm{new}} = \sum_i Y^{\mathrm{old}}_i F_i\]</div>
<div class="math">
\[E^{\mathrm{new}} = \sqrt{\sum_i (E^{\mathrm{old}}_i)^2 F_i}\]</div>
<p>where <span class="math">\(F_i = A^{\mathrm{overlap}}_i / A^{\mathrm{old}}_i\)</span> is the
ratio of the overlap area of the new and old bin over the area of the
old bin.</p>
<p>If the input workspace is not of type: <strong>RebinnedOutput</strong>, and the
<cite>UseFractionalArea</cite> option is set to <cite>True</cite>, the algorithm
will assume that the input fraction is unity. This is correct if this
workspace has not been previously rebinned, but will give incorrect
error (standard deviation) estimates if it has been rebinned.</p>
</div>
<div class="section" id="requirements">
<h2><a class="toc-backref" href="#id6">Requirements</a><a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>The algorithms currently requires the second axis on the workspace to be
a numerical axis so <a class="reference internal" href="ConvertSpectrumAxis-v2.html#algm-convertspectrumaxis"><span class="std std-ref">ConvertSpectrumAxis v2</span></a> may
need to run first.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id7">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - A simple example using the fractional area</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1">#Convert the Spectrum Axis to theta</span>
<span class="n">wsc</span> <span class="o">=</span> <span class="n">ConvertSpectrumAxis</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="s2">&quot;theta&quot;</span><span class="p">)</span>

<span class="n">rb</span> <span class="o">=</span> <span class="n">Rebin2D</span><span class="p">(</span><span class="n">wsc</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">20000</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],</span><span class="n">UseFractionalArea</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bins in the X axis: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rb</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bins in the Y axis: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rb</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Bins in the X axis: 200
Bins in the Y axis: 120
</pre></div>
</div>
<p><strong>Example - Transposing the Result</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="c1">#Convert the Spectrum Axis to theta</span>
<span class="n">wsc</span> <span class="o">=</span> <span class="n">ConvertSpectrumAxis</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="s2">&quot;theta&quot;</span><span class="p">)</span>

<span class="n">rb</span> <span class="o">=</span> <span class="n">Rebin2D</span><span class="p">(</span><span class="n">wsc</span><span class="p">,[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">20000</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.01</span><span class="p">,</span><span class="mf">1.2</span><span class="p">],</span><span class="n">Transpose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bins in the X axis: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rb</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bins in the Y axis: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rb</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Bins in the X axis: 120
Bins in the Y axis: 200
</pre></div>
</div>
<p><strong>Example - Rebinning twice preserves signal/errors</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># prepare an input workspace</span>
<span class="n">theta_tof</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">theta_tof</span> <span class="o">=</span> <span class="n">ConvertSpectrumAxis</span><span class="p">(</span><span class="n">theta_tof</span><span class="p">,</span> <span class="s2">&quot;theta&quot;</span><span class="p">)</span>

<span class="n">theta_tof_rb1</span> <span class="o">=</span> <span class="n">Rebin2D</span><span class="p">(</span><span class="n">theta_tof</span><span class="p">,</span> <span class="s1">&#39;100,400,20000&#39;</span><span class="p">,</span> <span class="s1">&#39;0, 0.001,1&#39;</span><span class="p">,</span> <span class="n">UseFractionalArea</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">theta_tof_rb2</span> <span class="o">=</span> <span class="n">Rebin2D</span><span class="p">(</span><span class="n">theta_tof_rb1</span><span class="p">,</span> <span class="s1">&#39;100,400,20000&#39;</span><span class="p">,</span> <span class="s1">&#39;0, 0.004,1&#39;</span><span class="p">,</span> <span class="n">UseFractionalArea</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">theta_tof_rb_final</span> <span class="o">=</span> <span class="n">Rebin2D</span><span class="p">(</span><span class="n">theta_tof</span><span class="p">,</span>  <span class="s1">&#39;100,400,20000&#39;</span><span class="p">,</span> <span class="s1">&#39;0, 0.004, 1&#39;</span><span class="p">,</span> <span class="n">UseFractionalArea</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Signal difference = {np.median(np.abs(theta_tof_rb_final.readY(0) - theta_tof_rb2.readY(0))):.3f}&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Errors difference = {np.median(np.abs(theta_tof_rb_final.readE(0) - theta_tof_rb2.readE(0))):.3f}&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>Signal difference = 0.000
Errors difference = 0.000
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Transforms/Rebin.html">Transforms\Rebin</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id8">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/bf806d7983f959aff3ce91819ad740a97f95ef50/Framework/Algorithms/inc/MantidAlgorithms/Rebin2D.h">Rebin2D.h</a> <em>(last modified: 2021-03-31)</em></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/bf806d7983f959aff3ce91819ad740a97f95ef50/Framework/Algorithms/src/Rebin2D.cpp">Rebin2D.cpp</a> <em>(last modified: 2021-05-24)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="Rebin-v1.html" title="Previous Chapter: Rebin v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Rebin v1</span>
    </a>
  </li>
  <li>
    <a href="RebinByPulseTimes-v1.html" title="Next Chapter: RebinByPulseTimes v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">RebinByPulseTimes v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2021-09-29.<br/>
    </p>
  </div>
</footer>
  </body>
</html>