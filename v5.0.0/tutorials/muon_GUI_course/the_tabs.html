<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>The Tabs</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Other Mantid Functions and Basic Data Manipulation" href="other_mantid_functions.html" />
    <link rel="prev" title="Getting Started" href="getting_started.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>5.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="the-tabs">
<span id="id1"></span><h1>The Tabs<a class="headerlink" href="#the-tabs" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<span id="index-0"></span><p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#home" id="id22">Home</a><ul>
<li><a class="reference internal" href="#loading-a-workspace" id="id23">Loading a Workspace</a></li>
<li><a class="reference internal" href="#data-grouping" id="id24">Data Grouping</a></li>
<li><a class="reference internal" href="#plot-type" id="id25">Plot Type</a></li>
<li><a class="reference internal" href="#data-binning" id="id26">Data Binning</a></li>
</ul>
</li>
<li><a class="reference internal" href="#grouping" id="id27">Grouping</a><ul>
<li><a class="reference internal" href="#adding-detector-groups-and-pairs" id="id28">Adding Detector Groups and Pairs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fitting" id="id29">Fitting</a><ul>
<li><a class="reference internal" href="#using-fit-functions" id="id30">Using Fit Functions</a></li>
<li><a class="reference internal" href="#function-parameters" id="id31">Function Parameters</a></li>
<li><a class="reference internal" href="#composite-functions" id="id32">Composite Functions</a></li>
<li><a class="reference internal" href="#sequentially-fitting-multiple-datasets" id="id33">Sequentially Fitting Multiple Datasets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#results" id="id34">Results</a><ul>
<li><a class="reference internal" href="#plotting-from-a-results-table" id="id35">Plotting from a Results Table</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="home">
<h2><a class="toc-backref" href="#id22">Home</a><a class="headerlink" href="#home" title="Permalink to this headline">¶</a></h2>
<p>When launched, the Muon Analysis GUI defaults to the Home tab. This tab allows:</p>
<ul class="simple">
<li>data files to be loaded</li>
<li>run information to be viewed</li>
<li>detector groupings to be selected</li>
<li>type of plot to be selected</li>
</ul>
<div class="section" id="loading-a-workspace">
<h3><a class="toc-backref" href="#id23">Loading a Workspace</a><a class="headerlink" href="#loading-a-workspace" title="Permalink to this headline">¶</a></h3>
<p>To load a file either: <strong>Browse</strong> or <strong>Load Current Run</strong> or simply type a run number (assuming you have defined the directory(ies) in which your files are stored)
When typing a run number, or using the Load Current Run option, first select the desired instrument from the dropdown list.</p>
<blockquote>
<div><p>To demonstrate:</p>
<ol class="arabic simple">
<li>Select MUSR in the instrument drop-down menu</li>
<li>Type run number 24563 in the Loading section and press enter, note this can only be done if the correct reference material folder was selected in <a class="reference internal" href="getting_started.html#getting-started"><span class="std std-ref">Getting Started</span></a>.</li>
<li>This process shown in Figure 2(a), a plot of the data should appear similar to the one in Figure 2(d).</li>
</ol>
<p><em>NB the plot’s appearance will vary based on the Time axis and Rebin data values as described later in this section and</em> <a class="reference internal" href="other_mantid_functions.html#other-mantid-functions"><span class="std std-ref">Other Mantid Functions and Basic Data Manipulation</span></a></p>
</div></blockquote>
<div class="figure align-center" id="id2">
<img alt="../../_images/load_gui2.gif" src="../../_images/load_gui2.gif" />
<p class="caption"><span class="caption-text">Figure 2(a): How to load a workspace in the Muon Analysis GUI.</span></p>
</div>
<p>Regardless of the data input method used, the Time Zero (<img class="math" src="../../_images/math/a7f6d5cb0f999b03e6cb53ca63877f56b38e7a85.png" alt="{\mu s}" style="vertical-align: -4px"/>) and First Good Data (<img class="math" src="../../_images/math/a7f6d5cb0f999b03e6cb53ca63877f56b38e7a85.png" alt="{\mu s}" style="vertical-align: -4px"/>)
values are automatically updated. These values will have been determined by the instrument scientist during instrument calibration periods, and are stored in the header
block of the raw .nxs data files, which are saved once a measurement is finished. Once a data file has been successfully read, a new plot window like the one shown in Fig. 2(b) will appear.</p>
<p><em>NB: when browsing for files multiple files such as “15190,15193”  or a string like “15190-3” can be selected (the latter would load runs from 15190 to 15193).
The selected files will each be loaded into a different workspace.</em></p>
</div>
<div class="section" id="data-grouping">
<h3><a class="toc-backref" href="#id24">Data Grouping</a><a class="headerlink" href="#data-grouping" title="Permalink to this headline">¶</a></h3>
<p>When a workspace is opened using the Muon Analysis GUI, a plot of the data automatically opens with it. For measurements not taken in transverse fields, this
plot is set to show the asymmetry by default, which is the normalised ratio of the Forward (F) and Backward (B) detector banks’ positron counts; as given by the equation:</p>
<div class="math" id="equation-equation-1">
<p><span class="eqno">(1)</span><img src="../../_images/math/e9e8a46e18b342bd212b6725ef5de09619dc3ab1.png" alt="P_z(t) = A_0G_z(t) = \frac{F(t) - \alpha B(t)}{F(t) + \alpha B(t)}"/></p>
</div><div class="figure align-center" id="id3">
<img alt="../../_images/PlotWindow2.PNG" src="../../_images/PlotWindow2.PNG" />
<p class="caption"><span class="caption-text">Figure 2(b): The default plot window for MUSR00024563 showing raw (unbinned) data for the long pair asymmetry.</span></p>
</div>
<p>However, data collected only in the Forward, or Backward, detector banks can be viewed
alone by adjusting the Group/Group Pair option.</p>
<blockquote>
<div><p>To try this, follow the instructions below:</p>
<ol class="arabic simple">
<li>The MUSR00024563 file should already be loaded, if not do so now as described above</li>
<li>Go to the drop-down menu in the Groups and Pairs section of the home tab and change its setting from the default (long)
to just the backward (bwd) or forward (fwd) detector arrays</li>
<li>Observe and consider the difference in the plot. This is shown in Figure 2(c).</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="id4">
<img alt="../../_images/change_group2.gif" src="../../_images/change_group2.gif" />
<p class="caption"><span class="caption-text">Figure 2(c): How to change the detector grouping using the Muon Analysis GUI.</span></p>
</div>
</div>
<div class="section" id="plot-type">
<h3><a class="toc-backref" href="#id25">Plot Type</a><a class="headerlink" href="#plot-type" title="Permalink to this headline">¶</a></h3>
<p>Though the plot type shows asymmetry by default it can be changed to show positron counts against time using the Plot Type drop-down menu, which can be found in the Plotting section of the Home tab.
To demonstrate this, follow the example below.</p>
<blockquote>
<div><ol class="arabic simple">
<li>MUSR00024563.nxs should still be loaded from the previous task; if not, re-load the file.</li>
<li>Ensure that the Group / Pair drop-down menu is set to either ‘bwd’ or ‘fwd’, as the plot type will not change if this is set to ‘long’.</li>
<li>Underneath the Plot Data section, in the Plot Type box change the type from ‘Asymmetry’ to ‘Counts’.
There should be a change in the data plot. See Figure 2(d) for the process.</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="id5">
<img alt="../../_images/plot_type2.gif" src="../../_images/plot_type2.gif" />
<p class="caption"><span class="caption-text">Figure 2(d): How to change the plot type using the Muon Analysis GUI.</span></p>
</div>
<p>Plot options (such as symbol type, lines etc.) are described in Overlaying and Styling Plots section of <a class="reference internal" href="other_mantid_functions.html#other-mantid-functions"><span class="std std-ref">Other Mantid Functions and Basic Data Manipulation</span></a>.</p>
<p>In addition, should data have been
collected using differed timing periods (as one would during an RF experiment, for example),
the data collected during each separate time period can also be viewed separately (again for
either the Forward and Backward detector arrays) by adjusting the period number.</p>
<p>When plotting data according to (1) the default alpha value is 1. An accurate alpha value
can be determined using the <strong>Guess Alpha</strong> option found in the <a class="reference internal" href="#grouping">Grouping</a> tab.</p>
</div>
<div class="section" id="data-binning">
<h3><a class="toc-backref" href="#id26">Data Binning</a><a class="headerlink" href="#data-binning" title="Permalink to this headline">¶</a></h3>
<p>Data can be re-binned via the home tab by using the Rebin section. The options are None for no binning, Fixed to use a
given value (entered in the Steps box to the right) or Variable, for binning
with various steps. When entering values in the Steps box, do so as for parameters in the
<a class="reference internal" href="../../algorithms/Rebin-v1.html#algm-rebin"><span class="std std-ref">Rebin</span></a> algorithm.</p>
<blockquote>
<div><p>For example, to set the plot to a fixed bin-width of choice, follow the instructions below</p>
<ol class="arabic simple">
<li>Load HIFI run number 00062798 (as described above).</li>
<li>In the rebin section of the Home tab, use the drop-down menu and change its value from None to Fixed.</li>
<li>In the box adjacent to it, input a suitable value - 10 is suggested - and press enter. This will cause a new workspace, HIFI62798; Pair Asym; long; Rebin; #1, to appear in HIFI62798 Pairs.</li>
<li>The effect of rebinning is best viewed on only a certain portion of the data, use the Figure options as described in the Overlaying and Styling Plots section of <a class="reference internal" href="other_mantid_functions.html#other-mantid-functions"><span class="std std-ref">Other Mantid Functions and Basic Data Manipulation</span></a></li>
<li>Navigate to, HIFI62798; Pair Asym; long; Rebin; #1, then right click it and select Plot &gt; Overplot spectrum with errors,
the rebinned data should appear in orange over the unbinned dataset. If this does not happen, check the Loading Data section of <a class="reference internal" href="other_mantid_functions.html#other-mantid-functions"><span class="std std-ref">Other Mantid Functions and Basic Data Manipulation</span></a>
and ensure the plotting has been carried out correctly.
An example of this process is shown in Figure 5(c) below.</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="id6">
<img alt="../../_images/rebin2.gif" src="../../_images/rebin2.gif" />
<p class="caption"><span class="caption-text">Figure 5(c): How to re-bin data, in this example from a width of 10 to 20 on the HIFI00062798
dataset.</span></p>
</div>
<p>A summary of each input field in the Home tab, and a description of its function(s) can be found in <a class="reference internal" href="../../interfaces/Muon Analysis.html#muon-analysis-ref"><span class="std std-ref">Muon Analysis (old)</span></a> under Home.</p>
</div>
</div>
<div class="section" id="grouping">
<h2><a class="toc-backref" href="#id27">Grouping</a><a class="headerlink" href="#grouping" title="Permalink to this headline">¶</a></h2>
<p>The <strong>Grouping</strong> tab allows:</p>
<ul class="simple">
<li>grouping files to be loaded, saved, modified or cleared</li>
<li>regrouped data to be plotted</li>
<li>alpha values to be determined from T20 measurements</li>
<li>raw data plotting options to be selected</li>
</ul>
<p>The <strong>Grouping</strong> options are shown below</p>
<div class="figure align-center" id="id7">
<img alt="../../_images/MA_Grouping_Tab.png" src="../../_images/MA_Grouping_Tab.png" />
<p class="caption"><span class="caption-text">Figure 4(a): The Grouping Options tab of the Muon Analysis Interface.</span></p>
</div>
<p>Standard detector groupings are usually loaded when a data file is opened, which each incorporate one
half of the total detectors of the equipment being used. For example, for the EMu spectrometer detectors 1 – 48
and 49 - 96 are automatically assigned to the forward and backward detector arrays.</p>
<div class="section" id="adding-detector-groups-and-pairs">
<h3><a class="toc-backref" href="#id28">Adding Detector Groups and Pairs</a><a class="headerlink" href="#adding-detector-groups-and-pairs" title="Permalink to this headline">¶</a></h3>
<p>Different detector grouping configurations can be entered manually, as can Group Pairs.
A Group Pair is a combination of two different detector groups. For example, the default detector groups fwd
and bwd are in a pair called ‘long’. This combines the detectors from both groups in order to be able to view them together, for example
for the MuSR equipment this default case means viewing all 64 detectors. A detector group pair can include any two groups found in the group table.</p>
<blockquote>
<div><p>To try assigning new detector groups and pairs with the MUSR00024563 file (see <a class="reference internal" href="#home">Home</a> for how to load files),
follow the instructions below. For assistance, see figures 4(b) and 4(c).</p>
<ol class="arabic simple">
<li>First, go to the Grouping tab in the mantid muon GUI.</li>
<li>Under the box labelled ‘Description:’, there is a table of the existing groups, with ‘Group Name’, ‘Detector IDs’ and ‘N Detectors’ as columns.
‘bwd’ and ‘fwd’ should already be saved as groups.</li>
<li>In the blank space under the existing group names, right click and enter the name ‘sample_fwd’. This will be one of our new groups.</li>
<li>Assign this new group Detector IDs of 1-2, in the blank space in the same row. Ndet will then fill automatically.</li>
<li>Repeat this process to also add a group called ‘sample_bwd’ with Detector IDs of 10-11.</li>
</ol>
<div class="figure align-center" id="id8">
<img alt="../../_images/adding_groups2.gif" src="../../_images/adding_groups2.gif" />
<p class="caption"><span class="caption-text">Figure 4(b): How to add a new detector group using the Muon analysis GUI.</span></p>
<div class="legend">
<blockquote>
<div><em>NB any string of numbers can be defined as Detector IDs, so long as they are within the number of detectors on the equipment
used. E.g. ‘1,3-5,15,17-18’ would be valid.</em></div></blockquote>
</div>
</div>
<ol class="arabic simple" start="6">
<li>At the bottom of the tab there should be a table containing the default ‘long’ pair details. The columns in this table read ‘Pair Name’, ‘Group 1’, ‘Group 2’, ‘Alpha’, and ‘Guess Alpha’.</li>
<li>In the blank space under ‘long’ in the Name column, right click and enter a name for the new pair, such as ‘sample_long’.</li>
<li>In the same row as the new pair, in the Forward drop down list select ‘sample_fwd’ and the Backward list select ‘sample_bwd’. To update the Alpha value, click Guess Alpha. This process is
shown in figure 4(c) below.</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="id9">
<img alt="../../_images/group_pair2.gif" src="../../_images/group_pair2.gif" />
<p class="caption"><span class="caption-text">Figure 4(c): Adding a new group pair in the Muon Analysis GUI.</span></p>
</div>
<p>Once defined, these new user grouping options propagate through the Muon Analysis tabs.
For example, in the <a class="reference internal" href="#home">Home</a> tab, the options under Group/Group Pair are automatically
updated to include user defined detector configurations. From there, the new groups can be plotted
as they would be for the default long, bwd and fwd groups.</p>
<p>Finally, alpha can be determined for any given detector pairing (via the analysis of
transverse field data) by clicking on Guess Alpha. Click on a specific Group Pair name to
select it. The alpha value column is automatically updated. The value in the column is
applied to all subsequent data reduction when asymmetry plots are desired. The detector calibration
factor, <img class="math" src="../../_images/math/4a7f693287e33307d1cdb8d6210a9ab799f8db86.png" alt="{\alpha}" style="vertical-align: 0px"/> is described in more detail in <a class="reference internal" href="basics_of_data_reductions.html#basics-of-data-reductions"><span class="std std-ref">The Basics of Data Reduction</span></a>.</p>
<p>For a summary of the controls and tables in the Grouping  tab, see the Grouping Options section in <a class="reference internal" href="../../interfaces/Muon Analysis.html#muon-analysis-ref"><span class="std std-ref">Muon Analysis (old)</span></a>.</p>
</div>
</div>
<div class="section" id="fitting">
<h2><a class="toc-backref" href="#id29">Fitting</a><a class="headerlink" href="#fitting" title="Permalink to this headline">¶</a></h2>
<p>The Fitting tab allows the user to:</p>
<ul class="simple">
<li>Select functions to fit to the data</li>
<li>Change fit ranges and parameters</li>
<li>Fit data</li>
</ul>
<div class="figure">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
</div>
<div class="figure align-center" id="id10">
<img alt="../../_images/WhitePixel.png" src="../../_images/WhitePixel.png" />
<p class="caption"><span class="caption-text">Figure 7(a): The Fitting tab options.</span></p>
</div>
<p>MantidPlot comes with a number of pre-compiled fitting functions. Further functions may
be compiled and installed or, alternatively, user specific functions can be defined within the
fitter. A number of fit functions have been programmed which are specific to the analysis of
muon spectra.</p>
<p>Some of the muon specific functions in MantidPlot include:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="../../fitting/fitfunctions/ExpDecayOsc.html#func-expdecayosc"><span class="std std-ref">ExpDecayOsc</span></a></td>
<td><img class="math" src="../../_images/math/a668273ca921535a9c6269dde67dc3d2e05f110c.png" alt="{f(t)=A\exp(-\lambda t)\cos(\omega t + \phi)}" style="vertical-align: -4px"/></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../../fitting/fitfunctions/GausOsc.html#func-gausosc"><span class="std std-ref">GausOsc</span></a></td>
<td><img class="math" src="../../_images/math/468b97ee78f40bf80783b5e86dfcac967011953b.png" alt="{f(t)=A\exp(-\frac{(\sigma t)^2}{2})\cos(\omega t + \phi)}" style="vertical-align: -6px"/></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../../fitting/fitfunctions/Abragam.html#func-abragam"><span class="std std-ref">Abragam</span></a></td>
<td><img class="math" src="../../_images/math/5322e2291c50235782d65e209e7abc89922f087d.png" alt="{f(t)=A\exp(-(\sigma t)^2 \times (\exp(-\frac{t}{\tau_c})-1+\frac{t}{\tau_c}))\cos(\omega t + \phi)}" style="vertical-align: -8px"/></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../../fitting/fitfunctions/StaticKuboToyabe.html#func-statickubotoyabe"><span class="std std-ref">StaticKuboToyabe</span></a></td>
<td><img class="math" src="../../_images/math/86ca80312a36b94496effa1dae874600b6ef3039.png" alt="{f(t)=A(\frac{1}{3}+\frac{2}{3}\exp(-\frac{(\sigma t)^2}{2})(1-(\sigma t)^2))}" style="vertical-align: -6px"/></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../../fitting/fitfunctions/StretchExpMuon.html#func-stretchexpmuon"><span class="std std-ref">StretchExpMuon</span></a></td>
<td><img class="math" src="../../_images/math/96e7134bddac1af3fb0977102ea832c0a1187c65.png" alt="{f(t)=A\exp(-(\lambda t)^\beta)}" style="vertical-align: -4px"/></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../../fitting/fitfunctions/GausDecay.html#func-gausdecay"><span class="std std-ref">GausDecay</span></a></td>
<td><img class="math" src="../../_images/math/9d83842babea7481093d40c3ea596b51b4972527.png" alt="{f(t)=A\exp(-(\sigma t)^2)}" style="vertical-align: -4px"/></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../../fitting/fitfunctions/ExpDecayMuon.html#func-expdecaymuon"><span class="std std-ref">ExpDecayMuon</span></a></td>
<td><img class="math" src="../../_images/math/2c3a1c836d0c9e3821acfc556d256fe507c49b08.png" alt="{f(t)=A\exp(-\lambda t)}" style="vertical-align: -4px"/></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../../fitting/fitfunctions/MuonFInteraction.html#func-muonfinteraction"><span class="std std-ref">MuonFInteraction</span></a></td>
<td>Implements equation number (3) from Brewer et al, Physical Review B 33(11) 7813-7816, to model the muon response under the formation of the F <img class="math" src="../../_images/math/341a0a1ebab8a4f1b300adf12fd13c0f8ecb96e2.png" alt="{\mu}" style="vertical-align: -4px"/> F species.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../../fitting/fitfunctions/DynamicKuboToyabe.html#func-dynamickubotoyabe"><span class="std std-ref">DynamicKuboToyabe</span></a></td>
<td>Fitting for the parameters <img class="math" src="../../_images/math/565d5265a5771ce110bca359c85a858ec1d8e7e2.png" alt="A" style="vertical-align: 0px"/>, <img class="math" src="../../_images/math/c08360befc3a20495fe763ea0c11ae70cb4a5f49.png" alt="{\sigma}" style="vertical-align: 0px"/> and <img class="math" src="../../_images/math/e4803440d85dba8495314d42affb4251e5735571.png" alt="{\nu}" style="vertical-align: 0px"/> (the initial asymmetry, relaxation rate and hop rate, respectively) using numerical integration techniques.</td>
</tr>
</tbody>
</table>
<p>Where:</p>
<ul class="simple">
<li><img class="math" src="../../_images/math/956ff6e2daae3fad86a0bfb8c26ce4b62ef605d9.png" alt="{\lambda}" style="vertical-align: 0px"/> and <img class="math" src="../../_images/math/c08360befc3a20495fe763ea0c11ae70cb4a5f49.png" alt="{\sigma}" style="vertical-align: 0px"/> are in <img class="math" src="../../_images/math/9507b0b1e3d38f9045866838b4c009c3b2d23557.png" alt="{\mu s^{-1}}" style="vertical-align: -4px"/></li>
<li><img class="math" src="../../_images/math/c59a7c6c871640243fdd24cb1db6ef89249b9f91.png" alt="{\phi}" style="vertical-align: -4px"/> is in radians</li>
<li><img class="math" src="../../_images/math/4a9b011ed8be39283a55ab29b400cb01df6fb46e.png" alt="{\omega}" style="vertical-align: 0px"/> is in <img class="math" src="../../_images/math/7272c00bec70e5bae989135cbbb5fc2a20c408f2.png" alt="{MHz}" style="vertical-align: 0px"/></li>
<li><img class="math" src="../../_images/math/ea36a55d7e4dea3dd6999bf087d50aac434bc02d.png" alt="{\tau}" style="vertical-align: 0px"/> is in <img class="math" src="../../_images/math/a7f6d5cb0f999b03e6cb53ca63877f56b38e7a85.png" alt="{\mu s}" style="vertical-align: -4px"/></li>
<li><img class="math" src="../../_images/math/e0d144e7af2dba91c4c6139f7d292af5f08eacea.png" alt="{\Delta}" style="vertical-align: 0px"/> is in <img class="math" src="../../_images/math/7272c00bec70e5bae989135cbbb5fc2a20c408f2.png" alt="{MHz}" style="vertical-align: 0px"/></li>
</ul>
<p>The compilation of custom functions is possible using C++ or Python, however this is beyond the scope of this tutorial. Detailed instructions for completing this for a 64-bit Windows
platform can be found at <a class="reference external" href="http://www.mantidproject.org/Writing_a_Fit_Function">http://www.mantidproject.org/Writing_a_Fit_Function</a> and <a class="reference external" href="https://www.mantidproject.org/Introduction_to_Python_Fit_Functions">https://www.mantidproject.org/Introduction_to_Python_Fit_Functions</a>, for fit functions in C++ and Python respectively.</p>
<div class="section" id="using-fit-functions">
<h3><a class="toc-backref" href="#id30">Using Fit Functions</a><a class="headerlink" href="#using-fit-functions" title="Permalink to this headline">¶</a></h3>
<p>To select a function right click in the white box beneath where ‘Fit Status’ is written and select Add Function.</p>
<p>A new window will appear with several drop-down titles; ‘Background’, ‘Calibrate’ etc.; this is the MantidPlot-Fit dialog box,
from which one can select a function to use.</p>
<blockquote>
<div><p>Follow the following instructions for an example of fitting:</p>
<ol class="arabic simple">
<li>Load the HIFI00062798 file from the reference material folder in the <a class="reference internal" href="#home">Home</a> tab.</li>
<li>Open the Fitting tab and right click in the functions box and select Add Function.</li>
<li>Right click and go to the Muon drop-down title in the MantidPlot-Fit dialogue box.</li>
<li>Select ExpDecayOsc and press the fit button. This process is shown in figure 7(a), and the resulting plot should resemble Figure 7(b).</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="id11">
<img alt="../../_images/fit_function2.gif" src="../../_images/fit_function2.gif" />
<p class="caption"><span class="caption-text">Figure 7(b): How to add a function to a data set.</span></p>
</div>
<p><em>NB: To remove the function, right click on the function name and select Remove.</em></p>
</div>
<div class="section" id="function-parameters">
<h3><a class="toc-backref" href="#id31">Function Parameters</a><a class="headerlink" href="#function-parameters" title="Permalink to this headline">¶</a></h3>
<p>Once a function has been selected its name will appear in the Property column. To
examine a function’s fit parameters, click on the small arrow beside the function name to
expand the entry. Generic properties for performing the fit itself - such as start and end times,
what minimizer to use etc. are located in the table below the functions table.</p>
<p>The parameters of a function can be adjusted in order to give the user maximum control over the fitting result of the data.
These parameters can be adjusted before or after fitting initially, however it will require re-fitting for the changes to apply.
Factors such as the time range fitted and fixing constraint boundaries can be adjusted.</p>
<p>Once the user is happy with the initial fit parameters, clicking Fit will fit the chosen function
to the data. The fit parameters will then be updated.</p>
<blockquote>
<div><p>To illustrate this:</p>
<ol class="arabic simple">
<li>If not already done, load the HIFI00062798 file and add ExpDecayOsc function (see above for instructions).</li>
<li>Adjust the fit limits in the lower table, for instance set start and end times of 0.2 and 12 <img class="math" src="../../_images/math/a7f6d5cb0f999b03e6cb53ca63877f56b38e7a85.png" alt="{\mu s}" style="vertical-align: -4px"/> respectively.</li>
<li>Click on the large Fit button top of the tab. This process is shown in Figure 7(c). Note that a better fit can be achieved if Alpha is guessed via the <a class="reference internal" href="#grouping">Grouping</a> tab.</li>
<li>The resulting plot should look like Figure 7(d).</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="id12">
<img alt="../../_images/fit_scale2.gif" src="../../_images/fit_scale2.gif" />
<p class="caption"><span class="caption-text">Figure 7(c): How to change the fitting scale of a function.</span></p>
</div>
<div class="figure align-center" id="id13">
<img alt="../../_images/PlotFitted.PNG" src="../../_images/PlotFitted.PNG" />
<p class="caption"><span class="caption-text">Figure 7(d): The result of fitting function ‘ExpDecayOsc’ to HIFI00062798. The fit is shown in orange, while the green line indicates the difference between it and the data.</span></p>
</div>
<p>Each fit parameter can also be bound by certain fit limits (+/- 10% of its starting value, +/- 50% or
a custom value), fixed at a specific user determined value, or tied together using some functional form.</p>
<blockquote>
<div><p>To demonstrate setting bound limits:</p>
<p>1. Go to the function name and ensure the top down arrow is clicked so all fit parameters are
visible.
2. Right click the parameter ‘A’ and select Constraints &gt; 50%. The parameter, ‘A’, now has both of its’ upper and lower bounds fixed at 50%.</p>
</div></blockquote>
</div>
<div class="section" id="composite-functions">
<h3><a class="toc-backref" href="#id32">Composite Functions</a><a class="headerlink" href="#composite-functions" title="Permalink to this headline">¶</a></h3>
<p>Data will sometimes require a function which is made up of multiple other functions, these combinations can be through addition or multiplication.
To create a fit function involving adding and multiplying functions, follow the examples below.</p>
<blockquote>
<div><ol class="arabic simple">
<li>Load the EMU00019631.nxs file</li>
<li>Add the function StaticKuboToyabe to the data, using the method from <a class="reference internal" href="#using-fit-functions">Using Fit Functions</a>.</li>
<li>Repeat the same method to add a second function, ExpDecayMuon, to the same data set. Simply adding a function creates a composite where all functions are summed. See Figure 7(e) for the process.</li>
</ol>
<div class="figure align-center" id="id14">
<img alt="../../_images/add_functions2.gif" src="../../_images/add_functions2.gif" />
<p class="caption"><span class="caption-text">Figure 7(e): How to add two functions together.</span></p>
</div>
<ol class="arabic simple" start="4">
<li>At this point, it is possible to fit the composite function to the data. Do so now, and consider the quality of the fit between from X=0 and X=12
(see Overlaying and Styling Plots in <a class="reference internal" href="other_mantid_functions.html#other-mantid-functions"><span class="std std-ref">Other Mantid Functions and Basic Data Manipulation</span></a> for changing plot limits).</li>
</ol>
<div class="figure align-center" id="id15">
<img alt="../../_images/add_functions_plot.PNG" src="../../_images/add_functions_plot.PNG" />
<p class="caption"><span class="caption-text">Figure 7(f): A plot of the ExpDecayMuon and StaticKuboToyabe functions added together and fitted to EMU19631.</span></p>
</div>
<ol class="arabic simple" start="5">
<li>It should be clear that the sum of these functions does not properly model the oscillations in the data set, to rectify this a product function can be used.</li>
<li>Add the ProductFunction function (from the General function type), and remove ExpDecayMuon by right clicking on it and selecting remove function.</li>
<li>Right click on the newly added ProductFunction and add two functions to it - ExpDecayMuon and GausOsc.</li>
<li>The total function now consists of <img class="math" src="../../_images/math/6d8218ec3ba61aa5e21cc149ba2824d1aeb03fb0.png" alt="StaticKuboToyabe + (ExpDecayMuon * GausOsc)" style="vertical-align: -4px"/>.
(The perceptive reader may have noticed that the same effect can be achieved by adding StaticKuboToyabe and GausOsc, this is true, however it would not demonstrate the use of the ProductFunction)</li>
<li>Fit the new function to the data, note that Chi squared has decreased from 6.844 to 1.02 - the new fit function is a much better fit to the data. (Note: for a view of the plot with only this fit,
plot the workspace ‘EMU19631; Pair Asym; long; MA; Fitted; StaticKuboToyabe, Productfunction’)</li>
</ol>
<div class="figure align-center" id="id16">
<img alt="../../_images/multiply_functions2.gif" src="../../_images/multiply_functions2.gif" />
<p class="caption"><span class="caption-text">Figure 7(g): How to add a function which is a product of two other functions to a third.</span></p>
</div>
</div></blockquote>
</div>
<div class="section" id="sequentially-fitting-multiple-datasets">
<h3><a class="toc-backref" href="#id33">Sequentially Fitting Multiple Datasets</a><a class="headerlink" href="#sequentially-fitting-multiple-datasets" title="Permalink to this headline">¶</a></h3>
<p>If several data sets have been loaded, the
user can choose which one to fit by using the arrows or drop-down menu next to ‘Select Workspace’ located above ‘Fit Status’.</p>
<p><em>NB: when scrolling through a list of data sets to fit, select the entry with same name as that
shown at the top of the data plot window. For example, to fit the data shown above one
would select ‘EMU19631; Pair; long; Asym; #1’.</em></p>
<p>Multiple workspaces can be selected in different combinations using the ‘Select data to fit’ menu. This is located to the right of the Single, Sequential and Simultaneous Fit options.
Selecting many workspaces is useful for when using the sequential option, which allows Mantid to fit one function with a consistent set of parameters to a range of data sets.</p>
<blockquote>
<div><p>Follow the instructions below in order to sequentially fit a function to a range of data.</p>
<ol class="arabic simple">
<li>Load the data sets from EMU00019631-EMU00019634.</li>
<li>Set up a function where StaticKuboToyabe and ExpDecayMuon are added together.</li>
<li>Under the ‘Fit’ button, check the circle labelled Sequential Fit.</li>
<li>To make a custom selection of data to fit, click the Select data to fit button; the check boxes in the menu which opens allows data to be selected.
For this example, select the four ‘Pair Asym; long’ data sets loaded in step 1.</li>
<li>To confirm the choice of data and leave the menu, click ‘Select’ at the bottom left of the window, the data can then be fitted by pressing the Fit button as before.
Note that the GUI currently plots all data to a single window, which may not be ideal for sequential fits, see Loading Data in <a class="reference internal" href="basics_of_data_reductions.html#basics-of-data-reductions"><span class="std std-ref">The Basics of Data Reduction</span></a> to
find out how to instead plot data directly from the workspace.</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="id17">
<img alt="../../_images/sequential_fit2.gif" src="../../_images/sequential_fit2.gif" />
<p class="caption"><span class="caption-text">Figure 7(e): How to use sequential fit on multiple data sets.</span></p>
</div>
<p>For more specifics on each option in the Fitting tab, see the Fitting section of <a class="reference internal" href="../../interfaces/Muon Analysis.html#muon-analysis-ref"><span class="std std-ref">Muon Analysis (old)</span></a></p>
</div>
</div>
<div class="section" id="results">
<h2><a class="toc-backref" href="#id34">Results</a><a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h2>
<p>The Results tab allows the user to:</p>
<ul class="simple">
<li>create a result(s) table</li>
<li>select which instrument log values (temp, field etc) to write out alongside the fit parameters</li>
<li>choose to write out fit information from one or several data files</li>
</ul>
<div class="figure">
<a class="screenshot reference internal image-reference" href="../../_images/ImageNotFound.png"><img alt="../../_images/ImageNotFound.png" class="screenshot" src="../../_images/ImageNotFound.png" style="width: 200px;" /></a>
</div>
<div class="figure align-center" id="id18">
<img alt="../../_images/WhitePixel.png" src="../../_images/WhitePixel.png" />
<p class="caption"><span class="caption-text">Figure 8(a): The Results tab options.</span></p>
</div>
<p>In the example above, the user has chosen to create a results table called “ResultsTable”. When the Output Results button is clicked, the resulting table will appear in the
“Workspaces” section of the main Mantid window. From here the data can be <a class="reference internal" href="../mantid_basic_course/loading_and_displaying_data/02_the_matrix_workspace.html#the-matrix-workspace"><span class="std std-ref">explored</span></a> and <a class="reference internal" href="../mantid_basic_course/loading_and_displaying_data/03_displaying_1D_data.html#displaying-1d-data"><span class="std std-ref">plotted</span></a> as one would
with any data in a Mantid workspace.
The data contained in a results table is determined by the contents of the Values and Fitting Results sections (in the example above these are empty; no data has been fitted,
so there are no workspaces available for the Fitting Results section).</p>
<p>In the Values sections, the user can choose which Log Values to include in the results table, these values are data from the instrument such as run number, sample temperature etc.
which are taken from the workspaces in the Fitting Results section.</p>
<p><em>NB even if a workspace from the Fit Result table has not been selected (via the checkbox), the types of Log Value it contains will still be present in the Values table.
This does not mean they will be included in a produced results table.</em></p>
<p>The Fit Results section allows the user to choose which workspaces to use Log Values from - these can be either individual fits, or a sequential/simultaneous fits.
The first option in this section is the Function Name drop-down menu, selecting a certain function in this menu will show all the workspaces which have had this function fitted
to them in the table below. By default, checking the box next to a workspace in this table means its Log Values will be present in the results table. This can be changed with the Include/Exclude option
(if Exclude is selected from the drop-down menu, checked workspaces will be the only ones <em>not</em> included in the table). The view can also be customised to only show selected workspaces.</p>
<blockquote>
<div><p>As an exercise, follow the instructions below in order to produce a results table for a single individual or sequential fit.</p>
<ol class="arabic simple">
<li>Load the HIFI00062798 file from the reference folder, guess alpha as described in <a class="reference internal" href="#grouping">Grouping</a> then fit the ExpDecayOsc function to it.
To instead demonstrate a sequential fit table, load the EMU00019631-4 files, don’t guess alpha, and then perform a sequential fit of ExpDecayOsc on those files.
(See <a class="reference internal" href="#using-fit-functions">Using Fit Functions</a> for instructions on single and sequential fits.)</li>
<li>In the Results tab, the default individual fit table should already be set up. Check that the Function Name and workspace(s) selected in the lower part of the tab show the
fit function and data used so far, respectively.</li>
<li>Use the table in the ‘Log Values’ section to select parameters to include in the results table. This is done by checking the box next to them - try this now for
run number and Temp_Sample.</li>
<li>Pick a name for the table, then click Output Results. See figure 8(b) for the process for an individual fit, and 8(c) for sequential.</li>
<li>To view a table, right click it in the workspaces pane and Show Data.</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="id19">
<img alt="../../_images/individual_results_table2.gif" src="../../_images/individual_results_table2.gif" />
<p class="caption"><span class="caption-text">Figure 8(b): How to create a results table from a single individual fit.</span></p>
</div>
<div class="figure align-center" id="id20">
<img alt="../../_images/sequential_results_table2.gif" src="../../_images/sequential_results_table2.gif" />
<p class="caption"><span class="caption-text">Figure 8(c): How to create a results table from a sequential fit.</span></p>
</div>
<div class="section" id="plotting-from-a-results-table">
<h3><a class="toc-backref" href="#id35">Plotting from a Results Table</a><a class="headerlink" href="#plotting-from-a-results-table" title="Permalink to this headline">¶</a></h3>
<p>Once a results table has been created, there are now different sets of parameters available for individual analysis. In Mantid, it is possible to plot different parameters
against each other, to see the relationship between the two.</p>
<blockquote>
<div><p>Follow the instructions below in order to plot a graph from parameters in a Results Table.</p>
<ol class="arabic simple">
<li>Files EMU00019631.nxs to EMU00019634.nxs should already have been loaded, sequentially fitted and a Results Table produced from them during the last section.
If not then load the files, fit and produce a table.</li>
<li>This example plots Temp_Sample against Lambda, which should automatically be assigned to the X and Y axes by Mantid (labelled X1 and Y1 respectively) click on Temp_Sample to select it.</li>
</ol>
<p><em>NB If data is not automatically assigned to the desired axes this can be changed manually. As an example, if in step 2. Temp_Sample was not already assigned to X,
it could be right clicked after selection and then ‘Set as X’. This process is shown in 8(d). There are also other options such as to assign data to the Y axis, or Y error.</em></p>
<ol class="arabic simple" start="3">
<li>Next, hold down the ‘Ctrl’ key and click on the Lambda column to select this column as well as Temp_Sample.</li>
<li>Right click one of the columns and follow Plot &gt; Line and Symbol. This will bring up a plot of Temp_Sample on the X axis and Lambda on the Y axis. See Figure 8(d) for the process.</li>
<li>The axis titles may not be entirely correct, so it may be best to change them. To do this, just double click the title and re-write it.</li>
</ol>
</div></blockquote>
<div class="figure align-center" id="id21">
<img alt="../../_images/plot_results_table2.gif" src="../../_images/plot_results_table2.gif" />
<p class="caption"><span class="caption-text">Figure 8(d): How to plot a graph from two parameters of a results table.</span></p>
</div>
<p>For more details on the Results Table tab, see the corresponding section of <a class="reference internal" href="../../interfaces/Muon Analysis.html#muon-analysis-ref"><span class="std std-ref">Muon Analysis (old)</span></a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="getting_started.html" title="Previous Chapter: Getting Started"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Getting Started</span>
    </a>
  </li>
  <li>
    <a href="other_mantid_functions.html" title="Next Chapter: Other Mantid Functions and Basic Data Manipulation"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Other Mantid ... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2020-03-14.<br/>
    </p>
  </div>
</footer>
  </body>
</html>