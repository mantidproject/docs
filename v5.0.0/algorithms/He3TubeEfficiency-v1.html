<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>He3TubeEfficiency v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="HyspecScharpfCorrection v1" href="HyspecScharpfCorrection-v1.html" />
    <link rel="prev" title="HasUB v1" href="HasUB-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>5.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="he3tubeefficiency-v1">
<span id="algm-he3tubeefficiency"></span><span id="algm-he3tubeefficiency-v1"></span><h1>He3TubeEfficiency v1<a class="headerlink" href="#he3tubeefficiency-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/He3TubeEfficiency-v1_dlg.png"><img alt="../_images/He3TubeEfficiency-v1_dlg.png" class="screenshot" src="../_images/He3TubeEfficiency-v1_dlg.png" style="width: 312px;" /></a>
<p class="caption"><span class="caption-text"><strong>He3TubeEfficiency</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a><ul>
<li><a class="reference internal" href="#restrictions-on-input-workspace" id="id6">Restrictions on Input Workspace</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id7">Usage</a></li>
<li><a class="reference internal" href="#source" id="id8">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>He3 tube efficiency correction.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="DetectorEfficiencyCor-v1.html#algm-detectorefficiencycor"><span class="std std-ref">DetectorEfficiencyCor</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="4%" />
<col width="22%" />
<col width="6%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Name of the input workspace</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Name of the output workspace, can be the same as the input</td>
</tr>
<tr class="row-even"><td>ScaleFactor</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Constant factor with which to scale the calculateddetector efficiency. Same factor applies to all efficiencies.</td>
</tr>
<tr class="row-odd"><td>TubePressure</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Provide overriding the default tube pressure. The pressure must be specified in atm.</td>
</tr>
<tr class="row-even"><td>TubeThickness</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Provide overriding the default tube thickness. The thickness must be specified in metres.</td>
</tr>
<tr class="row-odd"><td>TubeTemperature</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Provide overriding the default tube temperature. The temperature must be specified in Kelvin.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm corrects the detection efficiency of He3 tubes using an
exponential function and certain detector properties. The correction
scheme is given by the following:</p>
<p><img class="math" src="../_images/math/5a078039b6b3ec83aa35fd2bea2c3d2896c534d0.png" alt="\epsilon = \frac{A}{1-e^{\frac{-\alpha P (L - 2W) \lambda}{T sin(\theta)}}}" style="vertical-align: -18px"/></p>
<p>where <em>A</em> is a dimensionless scaling factor, <img class="math" src="../_images/math/23bf3bdd8ce99fdb75f17e8b49934c62e9cf0841.png" alt="\alpha" style="vertical-align: 0px"/> is a
constant with units <img class="math" src="../_images/math/fe1966f68fb9bf94df38713930cb04d7be9518b4.png" alt="(Kelvin / (metres\: \AA\: atm))" style="vertical-align: -5px"/>, <em>P</em> is
pressure in units of <em>atm</em>, <em>L</em> is the tube diameter in units of
<em>metres</em>, <em>W</em> is the tube thickness in units of <em>metres</em>, <em>T</em> is the
temperature in units of <em>Kelvin</em>, <img class="math" src="../_images/math/0f4e950e2e4aaea03911502b1392d714a93bc25a.png" alt="sin(\theta)" style="vertical-align: -4px"/> is the angle
of the neutron trajectory with respect to the long axis of the He3 tube
and <img class="math" src="../_images/math/412c0294db757d8807fe8fc2975ab586bb9042d8.png" alt="\lambda" style="vertical-align: 0px"/> is in units of <img class="math" src="../_images/math/bf8cf685e595fbdbe1f136abfcbac026bcc7b1f2.png" alt="\AA" style="vertical-align: 0px"/>.</p>
<p>The Optional properties that are of num list type can be used in the
following manner. If no input value is given, the detector parameter is
pulled from the detector itself. If a single value is used as input,
that value is applied to all detectors. If an array of values is used,
that array <em>must</em> be the same size as the number of spectra in the
workspace. If it is not, the spectra indices that do not have values
will be zeroed in the output workspace.</p>
<div class="section" id="restrictions-on-input-workspace">
<h3><a class="toc-backref" href="#id6">Restrictions on Input Workspace</a><a class="headerlink" href="#restrictions-on-input-workspace" title="Permalink to this headline">¶</a></h3>
<p>The input workspace must be in units of wavelength.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id7">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>The correction applies equally well to histogram and event workspaces. An example
for a histogram workspace will be given.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># create workspace with correct units</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="s1">&#39;Flat background&#39;</span><span class="p">,</span><span class="n">NumBanks</span><span class="o">=</span><span class="s1">&#39;1&#39;</span><span class="p">,</span><span class="n">BankPixelWidth</span><span class="o">=</span><span class="s1">&#39;2&#39;</span><span class="p">,</span>
                           <span class="n">XUnit</span><span class="o">=</span><span class="s1">&#39;Wavelength&#39;</span><span class="p">,</span><span class="n">XMax</span><span class="o">=</span><span class="s1">&#39;10&#39;</span><span class="p">,</span><span class="n">BinWidth</span><span class="o">=</span><span class="s1">&#39;0.01&#39;</span><span class="p">)</span>

<span class="c1"># workspace does not have correct tube parameters, so we need to provide some</span>
<span class="c1"># parameters taken from the ARCS instrument at the SNS</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">He3TubeEfficiency</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">TubePressure</span><span class="o">=</span><span class="s1">&#39;10&#39;</span><span class="p">,</span><span class="n">TubeThickness</span><span class="o">=</span><span class="s1">&#39;0.0008&#39;</span><span class="p">,</span><span class="n">TubeTemperature</span><span class="o">=</span><span class="s1">&#39;290&#39;</span><span class="p">)</span>

<span class="c1"># show the before and after for the first detector for the first 5 bins</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Original counts: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Corrected counts: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws1</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Original counts: [ 1.  1.  1.  1.  1.]
Corrected counts: [ 417.07353051  139.35837696   83.81566631   60.01187609   46.787726  ]
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/CorrectionFunctions/EfficiencyCorrections.html">CorrectionFunctions\EfficiencyCorrections</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id8">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a412251b161c30a0be7a42eaf858d03199961661/Framework/Algorithms/inc/MantidAlgorithms/He3TubeEfficiency.h">He3TubeEfficiency.h</a> <em>(last modified: 2018-12-12)</em></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a412251b161c30a0be7a42eaf858d03199961661/Framework/Algorithms/src/He3TubeEfficiency.cpp">He3TubeEfficiency.cpp</a> <em>(last modified: 2019-11-08)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="HasUB-v1.html" title="Previous Chapter: HasUB v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; HasUB v1</span>
    </a>
  </li>
  <li>
    <a href="HyspecScharpfCorrection-v1.html" title="Next Chapter: HyspecScharpfCorrection v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">HyspecScharpf... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2020-03-14.<br/>
    </p>
  </div>
</footer>
  </body>
</html>