<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>AccumulateMD v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AddLogDerivative v1" href="AddLogDerivative-v1.html" />
    <link rel="prev" title="AbsorptionCorrection v1" href="AbsorptionCorrection-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>5.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="accumulatemd-v1">
<span id="algm-accumulatemd"></span><span id="algm-accumulatemd-v1"></span><h1>AccumulateMD v1<a class="headerlink" href="#accumulatemd-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/AccumulateMD-v1_dlg.png"><img alt="../_images/AccumulateMD-v1_dlg.png" class="screenshot" src="../_images/AccumulateMD-v1_dlg.png" style="width: 321px;" /></a>
<p class="caption"><span class="caption-text"><strong>AccumulateMD</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a><ul>
<li><a class="reference internal" href="#inputworkspace" id="id6">InputWorkspace</a></li>
<li><a class="reference internal" href="#datasources" id="id7">DataSources</a></li>
<li><a class="reference internal" href="#clean" id="id8">Clean</a></li>
<li><a class="reference internal" href="#workflow" id="id9">Workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id10">Usage</a></li>
<li><a class="reference internal" href="#source" id="id11">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Add new data to an existing MDHistoWorkspace</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="MergeMD-v1.html#algm-mergemd"><span class="std std-ref">MergeMD</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="3%" />
<col width="14%" />
<col width="4%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>An input MDEventWorkspace to append data to.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>MDEventWorkspace with new data appended.</td>
</tr>
<tr class="row-even"><td>DataSources</td>
<td>Input</td>
<td>str list</td>
<td><em>Mandatory</em></td>
<td>Input workspaces to process, or filenames to load and process</td>
</tr>
<tr class="row-odd"><td>EFix</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>datasource energy values in meV</td>
</tr>
<tr class="row-even"><td>Emode</td>
<td>Input</td>
<td>string</td>
<td>Direct</td>
<td>Analysis mode [‘Elastic’, ‘Direct’, ‘Indirect’]. Allowed values: [‘Elastic’, ‘Direct’, ‘Indirect’]</td>
</tr>
<tr class="row-odd"><td>Alatt</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>Lattice parameters</td>
</tr>
<tr class="row-even"><td>Angdeg</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>Lattice angles</td>
</tr>
<tr class="row-odd"><td>u</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>Lattice vector parallel to neutron beam</td>
</tr>
<tr class="row-even"><td>v</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>Lattice vector perpendicular to neutron beam in the horizontal plane</td>
</tr>
<tr class="row-odd"><td>Psi</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Psi rotation in degrees. Optional or one entry per run.</td>
</tr>
<tr class="row-even"><td>Gl</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>gl rotation in degrees. Optional or one entry per run.</td>
</tr>
<tr class="row-odd"><td>Gs</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>gs rotation in degrees. Optional or one entry per run.</td>
</tr>
<tr class="row-even"><td>InPlace</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Execute conversions to MD and Merge in one-step. Less memory overhead.</td>
</tr>
<tr class="row-odd"><td>Clean</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Create workspace from fresh rather than appending to existing workspace data.</td>
</tr>
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>The name of the Nexus file to write, as a full or relative path. Only used if FileBackEnd is true. Allowed extensions: [‘.nxs’]</td>
</tr>
<tr class="row-odd"><td>FileBackEnd</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, Filename must also be specified. The algorithm will create the specified file in addition to an output workspace. The workspace will load data from the file on demand in order to reduce memory use.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This workflow algorithm appends new data to an existing multidimensional workspace. It allows the accumulation of data in a single MDWorkspace as you go, e.g. during an experiment.</p>
<p>Using the FileBackEnd and Filename properties the algorithm can produce a file-backed workspace.
Note that this will significantly increase the execution time of the algorithm.</p>
<p>Input properties which are not described here are identical to those in the <a class="reference internal" href="CreateMD-v1.html#algm-createmd"><span class="std std-ref">CreateMD v1</span></a> algorithm.</p>
<div class="section" id="inputworkspace">
<h3><a class="toc-backref" href="#id6">InputWorkspace</a><a class="headerlink" href="#inputworkspace" title="Permalink to this headline">¶</a></h3>
<p>The MDEventWorkspace to append data to.</p>
</div>
<div class="section" id="datasources">
<h3><a class="toc-backref" href="#id7">DataSources</a><a class="headerlink" href="#datasources" title="Permalink to this headline">¶</a></h3>
<p>These can be workspace names, file names or full file paths. Not all of the data need to exist when the algorithm is called. If data are named which have previously been appended to the workspace they will not be appended again. Note that data are known by name, it is therefore possible to append the same data again if the data source is renamed.</p>
</div>
<div class="section" id="clean">
<h3><a class="toc-backref" href="#id8">Clean</a><a class="headerlink" href="#clean" title="Permalink to this headline">¶</a></h3>
<p>It is possible to get confused about what data has been included in an MDWorkspace if it is built up slowly over an experiment. Use this option to start afresh; it creates a new workspace using all of the data in DataSources which are available, rather then appending to the existing workspace.</p>
</div>
<div class="section" id="workflow">
<h3><a class="toc-backref" href="#id9">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/AccumulateMD-v1_wkflw.png" src="../_images/AccumulateMD-v1_wkflw.png" />
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id10">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Simple Example</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># Create some sample data</span>
<span class="n">sample_data_1</span> <span class="o">=</span> <span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="n">Instrument</span><span class="o">=</span><span class="s1">&#39;MAR&#39;</span><span class="p">,</span> <span class="n">BinParams</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">)</span>
<span class="n">AddSampleLog</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">sample_data_1</span><span class="p">,</span><span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;Ei&#39;</span><span class="p">,</span><span class="n">LogText</span><span class="o">=</span><span class="s1">&#39;3.0&#39;</span><span class="p">,</span><span class="n">LogType</span><span class="o">=</span><span class="s1">&#39;Number&#39;</span><span class="p">)</span>
<span class="n">sample_data_2</span> <span class="o">=</span> <span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="n">Instrument</span><span class="o">=</span><span class="s1">&#39;MAR&#39;</span><span class="p">,</span> <span class="n">BinParams</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="n">UnitX</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">)</span>
<span class="n">AddSampleLog</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">sample_data_2</span><span class="p">,</span><span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;Ei&#39;</span><span class="p">,</span><span class="n">LogText</span><span class="o">=</span><span class="s1">&#39;3.0&#39;</span><span class="p">,</span><span class="n">LogType</span><span class="o">=</span><span class="s1">&#39;Number&#39;</span><span class="p">)</span>

<span class="c1"># Create an MDWorkspace withdata from sample_data_1</span>
<span class="n">md_ws</span> <span class="o">=</span> <span class="n">CreateMD</span><span class="p">(</span><span class="n">sample_data_1</span><span class="p">,</span> <span class="n">Emode</span><span class="o">=</span><span class="s1">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">1.4165</span><span class="p">,</span> <span class="mf">1.4165</span><span class="p">,</span><span class="mf">1.4165</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># Append data from sample_data_2 to the existing workspace</span>
<span class="c1"># Note: sample_data_1 will not be appended as it is already in the workspace</span>
<span class="c1">#       sample_data_3 will not be appended as it does not exist</span>
<span class="n">acc_ws</span> <span class="o">=</span> <span class="n">AccumulateMD</span><span class="p">(</span><span class="n">md_ws</span><span class="p">,</span> <span class="s1">&#39;sample_data_1,sample_data_2,sample_data_3&#39;</span><span class="p">,</span> <span class="n">Alatt</span><span class="o">=</span><span class="p">[</span><span class="mf">1.4165</span><span class="p">,</span> <span class="mf">1.4165</span><span class="p">,</span> <span class="mf">1.4165</span><span class="p">],</span> <span class="n">Angdeg</span><span class="o">=</span><span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">u</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,],</span> <span class="n">v</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># acc_ws should have double the number of events that md_ws has</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;There are </span><span class="si">{}</span><span class="s2"> events in each of the two data workspaces.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">md_ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The accumulated data workspace contains </span><span class="si">{}</span><span class="s2"> events.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">acc_ws</span><span class="o">.</span><span class="n">getNEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>There are 5508 events in each of the two data workspaces.
The accumulated data workspace contains 11016 events.
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/MDAlgorithms.html">MDAlgorithms</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id11">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a412251b161c30a0be7a42eaf858d03199961661/Framework/MDAlgorithms/inc/MantidMDAlgorithms/AccumulateMD.h">AccumulateMD.h</a> <em>(last modified: 2018-10-05)</em></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/a412251b161c30a0be7a42eaf858d03199961661/Framework/MDAlgorithms/src/AccumulateMD.cpp">AccumulateMD.cpp</a> <em>(last modified: 2020-01-09)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="AbsorptionCorrection-v1.html" title="Previous Chapter: AbsorptionCorrection v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; AbsorptionCor...</span>
    </a>
  </li>
  <li>
    <a href="AddLogDerivative-v1.html" title="Next Chapter: AddLogDerivative v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">AddLogDerivative v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2020-03-14.<br/>
    </p>
  </div>
</footer>
  </body>
</html>