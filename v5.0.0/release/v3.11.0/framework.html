<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Framework Changes</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Direct Inelastic Changes" href="direct_inelastic.html" />
    <link rel="prev" title="UI &amp; Usability Changes" href="ui.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>5.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="framework-changes">
<h1>Framework Changes<a class="headerlink" href="#framework-changes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#instrument-definitinons" id="id3">Instrument Definitinons</a></li>
<li><a class="reference internal" href="#algorithms" id="id4">Algorithms</a><ul>
<li><a class="reference internal" href="#new" id="id5">New</a></li>
<li><a class="reference internal" href="#improved" id="id6">Improved</a></li>
</ul>
</li>
<li><a class="reference internal" href="#performance" id="id7">Performance</a></li>
<li><a class="reference internal" href="#core-functionality" id="id8">Core functionality</a></li>
<li><a class="reference internal" href="#curvefitting" id="id9">CurveFitting</a><ul>
<li><a class="reference internal" href="#id1" id="id10">New</a></li>
<li><a class="reference internal" href="#id2" id="id11">Improved</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python" id="id12">Python</a><ul>
<li><a class="reference internal" href="#python-algorithms" id="id13">Python Algorithms</a></li>
<li><a class="reference internal" href="#bugfixes" id="id14">Bugfixes</a></li>
<li><a class="reference internal" href="#python-fit-functions" id="id15">Python Fit Functions</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="instrument-definitinons">
<h2><a class="toc-backref" href="#id3">Instrument Definitinons</a><a class="headerlink" href="#instrument-definitinons" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The reference frame in <a class="reference internal" href="../../concepts/InstrumentDefinitionFile.html#instrumentdefinitionfile"><span class="std std-ref">IDF</span></a> can now be customized in terms of setting the axis defining the 2theta sign.</li>
<li>The detector efficiency correction formulas for ILL’s IN4, IN5 and IN6 spectrometers have been revised. IN4 has now separate formulas for the low and large angle detectors while the previously incorrect IN5 and IN6 formulas were fixed.</li>
</ul>
</div>
<div class="section" id="algorithms">
<h2><a class="toc-backref" href="#id4">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new">
<h3><a class="toc-backref" href="#id5">New</a><a class="headerlink" href="#new" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/CalculatePolynomialBackground-v1.html#algm-calculatepolynomialbackground"><span class="std std-ref">CalculatePolynomialBackground v1</span></a> fits a polynomial background to a workspace.</li>
<li><a class="reference internal" href="../../algorithms/ConjoinXRuns-v1.html#algm-conjoinxruns"><span class="std std-ref">ConjoinXRuns</span></a> performs concatenation of the workspaces into a single one by handling the sample logs merging as in <a class="reference internal" href="../../algorithms/MergeRuns-v1.html#algm-mergeruns"><span class="std std-ref">MergeRuns</span></a>.</li>
<li><a class="reference internal" href="../../algorithms/LoadSESANS-v1.html#algm-loadsesans"><span class="std std-ref">LoadSESANS</span></a> Loading SESANS data to a MatrixWorkspace is now supported.</li>
<li><a class="reference internal" href="../../algorithms/SaveSESANS-v1.html#algm-savesesans"><span class="std std-ref">SaveSESANS</span></a> Saving a workspace using the SESANS format is now supported.</li>
<li><a class="reference internal" href="../../algorithms/PaddingAndApodization-v1.html#algm-paddingandapodization-v1"><span class="std std-ref">PaddingAndApodization</span></a> a new algorithm for padding data and adding an apodization function.</li>
<li><a class="reference internal" href="../../algorithms/IntegrateEPP-v1.html#algm-integrateepp"><span class="std std-ref">IntegrateEPP v1</span></a> integrates a workspace around the elastic peak positions given in an EPP table.</li>
</ul>
</div>
<div class="section" id="improved">
<h3><a class="toc-backref" href="#id6">Improved</a><a class="headerlink" href="#improved" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/ConvertSpectrumAxis-v2.html#algm-convertspectrumaxis-v2"><span class="std std-ref">ConvertSpectrumAxis</span></a> is extended to support conversion to elastic d-spacing.</li>
<li><a class="reference internal" href="../../algorithms/SumSpectra-v1.html#algm-sumspectra-v1"><span class="std std-ref">SumSpectra</span></a>: Fixed a bug where a wrong fallback value would be used in case of invalid values being set for min/max worspace index, and improved input validation for those properties.</li>
<li><a class="reference internal" href="../../algorithms/SetUncertainties-v1.html#algm-setuncertainties-v1"><span class="std std-ref">SetUncertainties</span></a> now provides a “custom” mode, which lets the user specify both an arbitrary error value whose occurrences are to be replaced in the input workspace, as well as the value to replace it with.</li>
<li><a class="reference internal" href="../../algorithms/LoadBBY-v1.html#algm-loadbby-v1"><span class="std std-ref">LoadBBY</span></a> is now better at handling sample information.</li>
<li><a class="reference internal" href="../../algorithms/ConjoinWorkspaces-v1.html#algm-conjoinworkspaces-v1"><span class="std std-ref">ConjoinWorkspaces</span></a> provides option to change Y axis unit and label.</li>
<li><a class="reference internal" href="../../algorithms/FilterEvents-v1.html#algm-filterevents-v1"><span class="std std-ref">FilterEvents</span></a> has refactored on splitting sample logs.</li>
<li><a class="reference internal" href="../../algorithms/FilterEvents-v1.html#algm-filterevents-v1"><span class="std std-ref">FilterEvents</span></a> now copies units for the logs in the filtered workspaces</li>
<li><a class="reference internal" href="../../algorithms/GroupDetectors-v2.html#algm-groupdetectors-v2"><span class="std std-ref">GroupDetectors</span></a> now supports workspaces with detector scans.</li>
<li><a class="reference internal" href="../../algorithms/FindPeaksMD-v1.html#algm-findpeaksmd-v1"><span class="std std-ref">FindPeaksMD</span></a> now allows users to normalize by the number of events. This can improve results for data that was originally based on histogram data which has been converted to event-mode.</li>
<li><a class="reference internal" href="../../algorithms/FindSXPeaks-v1.html#algm-findsxpeaks-v1"><span class="std std-ref">FindSXPeaks</span></a> now finds all peaks in each spectrum. It also allows for setting more fine-grained resolutions and takes into account any goniometer set on the workspace.</li>
<li><a class="reference internal" href="../../algorithms/SimpleShapeMonteCarloAbsorption-v1.html#algm-simpleshapemontecarloabsorption"><span class="std std-ref">SimpleShapeMonteCarloAbsorption</span></a> has been added to simplify sample environment inputs for MonteCarloAbsorption</li>
<li><a class="reference internal" href="../../algorithms/IntegratePeaksMD-v2.html#algm-integratepeaksmd-v2"><span class="std std-ref">IntegreatePeaksMD</span></a> makes the culling of the top one percent of the background events optional.</li>
<li><a class="reference internal" href="../../algorithms/IntegrateEllipsoids-v1.html#algm-integrateellipsoids-v1"><span class="std std-ref">IntegrateEllipsoids</span></a> has the culling of the top one percent of the background events now as an optional input.</li>
<li><a class="reference internal" href="../../algorithms/IntegrateEllipsoidsTwoStep-v1.html#algm-integrateellipsoidstwostep-v1"><span class="std std-ref">IntegrateEllipsoidsTwoStep</span></a> has the culling of the top one percent of the background events now as an optional input.</li>
<li><a class="reference internal" href="../../algorithms/IntegratePeaksMD-v2.html#algm-integratepeaksmd-v2"><span class="std std-ref">IntegreatePeaksMD</span></a> makes the culling of the top one percent of the background events optional.</li>
<li><a class="reference internal" href="../../algorithms/Load-v1.html#algm-load-v1"><span class="std std-ref">Load</span></a> now supports use of tilde in file paths in Python, for example Load(Filename=”~/data/test.nxs”, …)</li>
<li><a class="reference internal" href="../../algorithms/LoadBBY-v1.html#algm-loadbby-v1"><span class="std std-ref">LoadBBY</span></a> is now better at handling sample information.</li>
<li><a class="reference internal" href="../../algorithms/MonteCarloAbsorption-v1.html#algm-montecarloabsorption-v1"><span class="std std-ref">MonteCarloAbsorption</span></a> has had several improvements:<ul>
<li>It now supports approximating the input instrument with a sparse grid of detectors enabling quick simulation of huge pixel arrays.</li>
<li>The NumberOfWavelengthPoints input property is now validated more rigorously.</li>
<li>A new MaxScatterPtAttempts input has been added to control how many tries are made to generate a random point in the object. Useful for cases such as thin annuli that require a higher number of tries. The previous version was hard coded internally.</li>
</ul>
</li>
<li><a class="reference internal" href="../../algorithms/SaveGSS-v1.html#algm-savegss-v1"><span class="std std-ref">SaveGSS</span></a> now supports saving in the legacy GSAS ALT format. This is useful for older tools however the default format FXYE should be used whenever possible.</li>
<li><a class="reference internal" href="../../algorithms/SaveMDWorkspaceToVTK-v1.html#algm-savemdworkspacetovtk-v1"><span class="std std-ref">SaveMDWorkspaceToVTK</span></a> and <a class="reference internal" href="../../algorithms/LoadVTK-v1.html#algm-loadvtk-v1"><span class="std std-ref">LoadVTK</span></a> algorithms are now accessible from python.</li>
<li><a class="reference internal" href="../../algorithms/MergeRuns-v1.html#algm-mergeruns-v1"><span class="std std-ref">MergeRuns</span></a> will now merge workspaces with detector scans.</li>
<li><a class="reference internal" href="../../algorithms/SetUncertainties-v1.html#algm-setuncertainties-v1"><span class="std std-ref">SetUncertainties</span></a> now provides a “custom” mode, which lets the user specify both an arbitrary error value whose occurrences are to be replaced in the input workspace, as well as the value to replace it with.</li>
<li><a class="reference internal" href="../../algorithms/SimpleShapeMonteCarloAbsorption-v1.html#algm-simpleshapemontecarloabsorption"><span class="std std-ref">SimpleShapeMonteCarloAbsorption</span></a> has been added to simplify sample environment inputs for MonteCarloAbsorption</li>
<li><a class="reference internal" href="../../algorithms/SumSpectra-v1.html#algm-sumspectra-v1"><span class="std std-ref">SumSpectra</span></a>: Fixed a bug where a wrong fallback value would be used in case of invalid values being set for min/max worspace index, and improved input validation for those properties.</li>
<li><a class="reference internal" href="../../algorithms/LoadBBY-v1.html#algm-loadbby-v1"><span class="std std-ref">LoadBBY</span></a>: Fixed bug where the logManager did not work with sample_name, sample_aperture and source_aperture. Also added more information regarding the sample and the selected choppers.</li>
<li><a class="reference internal" href="../../algorithms/ConvertSpectrumAxis-v2.html#algm-convertspectrumaxis-v2"><span class="std std-ref">ConvertSpectrumAxis</span></a>: Added an option to disable the sorting of the resulting axis making it useful especially for scanning workspaces. Also reduced the complexity of the operation for the default (ordered axis) case from <em>Nˆ2</em> to <em>N</em>.</li>
<li><a class="reference internal" href="../../algorithms/MSDFit-v1.html#algm-msdfit"><span class="std std-ref">MSDFit</span></a> now supports model selection. Currently has the option of 3 models: MsdGauss, MsdPeters and MsdYi.</li>
<li><a class="reference internal" href="../../algorithms/LineProfile-v1.html#algm-lineprofile"><span class="std std-ref">LineProfile v1</span></a>: Fixed a bug which could cause crashes when the line extended over the right or bottom edge of a workspace.</li>
<li><a class="reference internal" href="../../algorithms/Mean-v1.html#algm-mean"><span class="std std-ref">Mean v1</span></a>: Added error messages if the data is not appropriate.</li>
<li><a class="reference internal" href="../../algorithms/LoadLiveData-v1.html#algm-loadlivedata"><span class="std std-ref">LoadLiveData v1</span></a>: Fixed a bug affecting Live Data Processing in “Replace” mode. The bug meant that changes to Instrument position/rotation were overwritten by defaults on every load. Now fixed so that Instrument state is persistent across loads.</li>
<li><a class="reference internal" href="../../algorithms/CalMuonDetectorPhases-v1.html#algm-calmuondetectorphases-v1"><span class="std std-ref">CalMuonDetectorPhasees</span></a> now fits a cos instead of a sin function.</li>
</ul>
</div>
</div>
<div class="section" id="performance">
<h2><a class="toc-backref" href="#id7">Performance</a><a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Performance of UB indexing routines addressed. <a class="reference internal" href="../../algorithms/FindUBUsingLatticeParameters-v1.html#algm-findubusinglatticeparameters-v1"><span class="std std-ref">FindUBUsingLatticeParameters</span></a> running 2x faster than before.</li>
<li>Several changes to the core of how instrument geometry is stored and accessed. These changes have resulted in a few noteworthy performance improvements.<ul>
<li>Partial loading of event nexus files has improved by 22%.</li>
<li>The LoadNexusMonitors algorithm has improved by 30%.</li>
<li>The ConvertSpectrumAxis algorithm has improved by 8%.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="core-functionality">
<h2><a class="toc-backref" href="#id8">Core functionality</a><a class="headerlink" href="#core-functionality" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">IndexProperty</span></code> has been added to the list of property types.</li>
<li>The <code class="docutils literal"><span class="pre">blocksize()</span></code> of a workspace now throws an exception if the number of bins is not constant. <code class="docutils literal"><span class="pre">size()</span></code> has been modified to the sum of the number of bins in each <code class="docutils literal"><span class="pre">Histogram</span></code>.</li>
</ul>
</div>
<div class="section" id="curvefitting">
<h2><a class="toc-backref" href="#id9">CurveFitting</a><a class="headerlink" href="#curvefitting" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id10">New</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../fitting/fitfunctions/PrimStretchedExpFT.html#func-primstretchedexpft"><span class="std std-ref">PrimStretchedExpFT</span></a> Provides the Fourier Transform of the Symmetrized Stretched Exponential Function integrated over each energy bin. Use in place of <a class="reference internal" href="../../fitting/fitfunctions/StretchedExpFT.html#func-stretchedexpft"><span class="std std-ref">StretchedExpFT</span></a> for fitting sample data featuring relaxation times longer than the resolution of the instrument.</li>
<li><a class="reference internal" href="../../fitting/fitfunctions/GramCharlier.html#func-gramcharlier"><span class="std std-ref">GramCharlier</span></a> is a new fit function primarily for use in neutron compton scattering.</li>
<li><a class="reference internal" href="../../algorithms/SplineInterpolation-v1.html#algm-splineinterpolation"><span class="std std-ref">SplineInterpolation</span></a> is extended to support also linear interpolation, if only 2 points are given.</li>
</ul>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id11">Improved</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><span class="std std-ref">Fit</span></a> outputs a function object containing the optimized parameter values. See the usage examples for more detail.</li>
<li><a class="reference internal" href="../../fitting/fitfunctions/CubicSpline.html#func-cubicspline"><span class="std std-ref">CubicSpline</span></a> is fixed to sort the y-values and x-values correctly.</li>
<li>Fix displayed type name for optional boolean properties.</li>
<li>Fix parameters that are tied to functions can now be untied correctly.</li>
<li>Table workspaces do not have the values changed by viewing them (no rounding).</li>
</ul>
</div>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="#id12">Python</a><a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../api/python/mantid/kernel/MaterialBuilder.html#mantid.kernel.MaterialBuilder" title="mantid.kernel.MaterialBuilder"><code class="xref py py-obj docutils literal"><span class="pre">mantid.kernel.MaterialBuilder</span></code></a> had an issue when setting the mass density with more than one atom in the chemical formula. This is now fixed, so the number density is correctly set in <a class="reference internal" href="../../api/python/mantid/kernel/Material.html#mantid.kernel.Material" title="mantid.kernel.Material"><code class="xref py py-obj docutils literal"><span class="pre">mantid.kernel.Material</span></code></a> and the cross sections correctly calculated.</li>
</ul>
<div class="section" id="python-algorithms">
<h3><a class="toc-backref" href="#id13">Python Algorithms</a><a class="headerlink" href="#python-algorithms" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Exposed <cite>StringContainsValidator</cite> to python to enable python algorithms to place requirement on input string to contain certain substrings.</li>
</ul>
</div>
<div class="section" id="bugfixes">
<h3><a class="toc-backref" href="#id14">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/MatchPeaks-v1.html#algm-matchpeaks-v1"><span class="std std-ref">MatchPeaks</span></a> is fixed to not to leave temporary hidden workspaces behind.</li>
<li>Fix a bug where Mantid could crash when trying to update live data if the network connection is lost.</li>
</ul>
</div>
<div class="section" id="python-fit-functions">
<h3><a class="toc-backref" href="#id15">Python Fit Functions</a><a class="headerlink" href="#python-fit-functions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A bug that makes it difficult to define and use attributes in python fit functions has been fixed.</li>
<li>The usability of the fit functions has been improved, enabling users to construct and modify the functions as objects rather than strings
as described <a class="reference internal" href="../../concepts/FitFunctionsInPython.html#fitfunctionsinpython"><span class="std std-ref">here</span></a>.</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Full list of
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.11%22+is%3Amerged+label%3A%22Component%3A+Framework%22">Framework</a>
and
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.11%22+is%3Amerged+label%3A%22Component%3A+Python%22">Python</a>
changes on GitHub</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ui.html" title="Previous Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; UI & Usabilit...</span>
    </a>
  </li>
  <li>
    <a href="direct_inelastic.html" title="Next Chapter: Direct Inelastic Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Direct Inelas... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2020-03-14.<br/>
    </p>
  </div>
</footer>
  </body>
</html>