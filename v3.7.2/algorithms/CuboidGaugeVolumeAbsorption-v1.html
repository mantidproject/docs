<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CuboidGaugeVolumeAbsorption v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.7.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="CutMD v1" href="CutMD-v1.html" />
    <link rel="prev" title="CrystalFieldEnergies v1" href="CrystalFieldEnergies-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="cuboidgaugevolumeabsorption-v1">
<span id="algm-cuboidgaugevolumeabsorption"></span><span id="algm-cuboidgaugevolumeabsorption-v1"></span><h1>CuboidGaugeVolumeAbsorption v1<a class="headerlink" href="#cuboidgaugevolumeabsorption-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/CuboidGaugeVolumeAbsorption-v1_dlg.png"><img alt="../_images/CuboidGaugeVolumeAbsorption-v1_dlg.png" class="screenshot" src="../_images/CuboidGaugeVolumeAbsorption-v1_dlg.png" style="width: 218px;" /></a>
<p class="caption"><strong>CuboidGaugeVolumeAbsorption</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#restrictions-on-the-input-workspace" id="id4">Restrictions on the input workspace</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculates bin-by-bin correction factors for attenuation due to absorption and (single) scattering within a cuboid shaped &#8216;gauge volume&#8217; of a generic sample. The sample shape can be defined by, e.g., the CreateSampleShape algorithm.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="3%" />
<col width="16%" />
<col width="5%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The X values for the input workspace must be in units of wavelength</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output workspace name</td>
</tr>
<tr class="row-even"><td>AttenuationXSection</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The ABSORPTION cross-section, at 1.8 Angstroms, for the sample material in barns. Column 8 of a table generated from <a class="reference external" href="http://www.ncnr.nist.gov/resources/n-lengths/">http://www.ncnr.nist.gov/resources/n-lengths/</a>.</td>
</tr>
<tr class="row-odd"><td>ScatteringXSection</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The (coherent + incoherent) scattering cross-section for the sample material in barns. Column 7 of a table generated from <a class="reference external" href="http://www.ncnr.nist.gov/resources/n-lengths/">http://www.ncnr.nist.gov/resources/n-lengths/</a>.</td>
</tr>
<tr class="row-even"><td>SampleNumberDensity</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The number density of the sample in number of atoms per cubic angstrom if not set with SetSampleMaterial</td>
</tr>
<tr class="row-odd"><td>NumberOfWavelengthPoints</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The number of wavelength points for which the numerical integral is calculated (default: all points)</td>
</tr>
<tr class="row-even"><td>ExpMethod</td>
<td>Input</td>
<td>string</td>
<td>Normal</td>
<td>Select the method to use to calculate exponentials, normal or a fast approximation (default: Normal). Allowed values: [&#8216;Normal&#8217;, &#8216;FastApprox&#8217;]</td>
</tr>
<tr class="row-odd"><td>EMode</td>
<td>Input</td>
<td>string</td>
<td>Elastic</td>
<td>The energy mode (default: elastic). Allowed values: [&#8216;Elastic&#8217;, &#8216;Direct&#8217;, &#8216;Indirect&#8217;]</td>
</tr>
<tr class="row-even"><td>EFixed</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>The value of the initial or final energy, as appropriate, in meV. Will be taken from the instrument definition file, if available.</td>
</tr>
<tr class="row-odd"><td>SampleHeight</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>The height of the plate in cm</td>
</tr>
<tr class="row-even"><td>SampleWidth</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>The width of the plate in cm</td>
</tr>
<tr class="row-odd"><td>SampleThickness</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>The thickness of the plate in cm</td>
</tr>
<tr class="row-even"><td>ElementSize</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The size of one side of an integration element cube in mm</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm uses a numerical integration method to calculate
attenuation factors resulting from absorption and single scattering
within a cuboid region of a sample with the dimensions and material
properties given.</p>
<p>The gauge volume generated will be an axis-aligned
cuboid centred on the sample (centre) position. The sample must fully
enclose this cuboid. If this does not meet your needs you can instead
use the general <a class="reference internal" href="AbsorptionCorrection-v1.html#algm-absorptioncorrection"><em>AbsorptionCorrection v1</em></a>
algorithm in conjunction with
<a class="reference internal" href="DefineGaugeVolume-v1.html#algm-definegaugevolume"><em>DefineGaugeVolume v1</em></a>.</p>
<p>Factors are calculated for each spectrum (i.e. detector position) and
wavelength point, as defined by the input workspace. The sample is
divided up into cuboids having sides of as close to the size given in
the ElementSize property as the sample dimensions will allow. Thus the
calculation speed depends linearly on the total number of bins in the
workspace and goes as <img class="math" src="../_images/math/e2210396c101b3ee36a34b8686ae2939b12f279d.png" alt="\rm{ElementSize}^{-3}" style="vertical-align: -1px"/>.</p>
<p>Path lengths through the sample are then calculated for the centre-point
of each element and a numerical integration is carried out using these
path lengths over the volume elements.</p>
<div class="section" id="restrictions-on-the-input-workspace">
<h3><a class="toc-backref" href="#id4">Restrictions on the input workspace</a><a class="headerlink" href="#restrictions-on-the-input-workspace" title="Permalink to this headline">¶</a></h3>
<p>The input workspace must have units of wavelength. The
<a class="reference internal" href="../concepts/Instrument.html#instrument"><em>instrument</em></a> associated with the workspace must be fully
defined because detector, source &amp; sample position are needed. A sample
shape must have been defined using, e.g.,
<a class="reference internal" href="CreateSampleShape-v1.html#algm-createsampleshape"><em>CreateSampleShape v1</em></a> and the gauge volume must be
fully within the sample.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example: A simple spherical sample with a cuboid guage volume</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#setup the sample shape</span>
<span class="n">sphere</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;&lt;sphere id=&quot;sample-sphere&quot;&gt;</span>
<span class="s">      &lt;centre x=&quot;0&quot; y=&quot;0&quot; z=&quot;0&quot;/&gt;</span>
<span class="s">      &lt;radius val=&quot;.2&quot; /&gt;</span>
<span class="s">  &lt;/sphere&gt;&#39;&#39;&#39;</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s">&quot;Histogram&quot;</span><span class="p">,</span><span class="n">NumBanks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">ConvertUnits</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="s">&quot;Wavelength&quot;</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Rebin</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">Params</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">CreateSampleShape</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">sphere</span><span class="p">)</span>
<span class="n">SetSampleMaterial</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">ChemicalFormula</span><span class="o">=</span><span class="s">&quot;V&quot;</span><span class="p">)</span>

<span class="c">#restrict the number of wavelength points to speed up the example</span>
<span class="n">wsOut</span> <span class="o">=</span> <span class="n">CuboidGaugeVolumeAbsorption</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">NumberOfWavelengthPoints</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">ElementSize</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">SampleHeight</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">SampleWidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">SampleThickness</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The created workspace has one entry for each spectra: </span><span class="si">%i</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">wsOut</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The created workspace has one entry for each spectra: 1
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/CorrectionFunctions/AbsorptionCorrections.html">CorrectionFunctions\AbsorptionCorrections</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/fa5a1131e7c741eb04be0c8ff63502e3217916cb/Framework/Algorithms/src/CuboidGaugeVolumeAbsorption.cpp">CuboidGaugeVolumeAbsorption.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/fa5a1131e7c741eb04be0c8ff63502e3217916cb/Framework/Algorithms/inc/MantidAlgorithms/CuboidGaugeVolumeAbsorption.h">CuboidGaugeVolumeAbsorption.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CrystalFieldEnergies-v1.html" title="Previous Chapter: CrystalFieldEnergies v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; CrystalFieldEner...</span>
    </a>
  </li>
  <li>
    <a href="CutMD-v1.html" title="Next Chapter: CutMD v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">CutMD v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>