<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CompareWorkspaces v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.7.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="CompressEvents v1" href="CompressEvents-v1.html" />
    <link rel="prev" title="CompareSampleLogs v1" href="CompareSampleLogs-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.7</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="compareworkspaces-v1">
<span id="algm-compareworkspaces"></span><span id="algm-compareworkspaces-v1"></span><h1>CompareWorkspaces v1<a class="headerlink" href="#compareworkspaces-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/CompareWorkspaces-v1_dlg.png"><img alt="../_images/CompareWorkspaces-v1_dlg.png" class="screenshot" src="../_images/CompareWorkspaces-v1_dlg.png" style="width: 241px;" /></a>
<p class="caption"><strong>CompareWorkspaces</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Compares two workspaces for equality. This algorithm is mainly intended for use by the Mantid development team as part of the testing process.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="2%" />
<col width="14%" />
<col width="4%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Workspace1</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The name of the first input workspace.</td>
</tr>
<tr class="row-odd"><td>Workspace2</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The name of the second input workspace.</td>
</tr>
<tr class="row-even"><td>Tolerance</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>The maximum amount by which values may differ between the workspaces.</td>
</tr>
<tr class="row-odd"><td>CheckType</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Whether to check that the data types (Workspace2D vs EventWorkspace) match.</td>
</tr>
<tr class="row-even"><td>CheckAxes</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Whether to check that the axes match.</td>
</tr>
<tr class="row-odd"><td>CheckSpectraMap</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Whether to check that the spectra-detector maps match.</td>
</tr>
<tr class="row-even"><td>CheckInstrument</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Whether to check that the instruments match.</td>
</tr>
<tr class="row-odd"><td>CheckMasking</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Whether to check that the bin masking matches.</td>
</tr>
<tr class="row-even"><td>CheckSample</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether to check that the sample (e.g. logs).</td>
</tr>
<tr class="row-odd"><td>ToleranceRelErr</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Treat tolerance as relative error rather then the absolute error. This is only applicable to Matrix workspaces.</td>
</tr>
<tr class="row-even"><td>CheckAllData</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Usually checking data ends when first mismatch occurs. This forces algorithm to check all data and print mismatch to the debug log. Very often such logs are huge so making it true should be the last option.</td>
</tr>
<tr class="row-odd"><td>NumberMismatchedSpectraToPrint</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Number of mismatched spectra from lowest to be listed.</td>
</tr>
<tr class="row-even"><td>DetailedPrintIndex</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mismatched spectra that will be printed out in details.</td>
</tr>
<tr class="row-odd"><td>Result</td>
<td>Output</td>
<td>boolean</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Messages</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>compare_msgs</td>
<td>TableWorkspace containing messages about any mismatches detected</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Compares two workspaces for equality. This algorithm is mainly intended
for use by Mantid developers as part of the testing process.</p>
<p>The data values (X,Y and error) are always checked. The algorithm can
also optionally check the axes (this includes the units), the
spectra-detector map, the instrument (the name and parameter map) and
any bin masking.</p>
<p>In the case of <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>EventWorkspaces</em></a>, they are checked to
hold identical event lists. Comparisons between an EventList and a
Workspace2D always fail.</p>
<p>This algorithm has two outputs: A boolean &#8220;Result&#8221; that indicates whether
the workspaces matched (true) or not (false), and a TableWorkspace property
named &#8220;Messages&#8221; (workspace name defaults to &#8220;compare_msgs&#8221;) with three
columns. The first column contains messages about any mismatches that were
detected. The second and third columns are the names of the workspaces that
were being compared when the mismatch message was issues. If all the input
workspaces matched, the message workspace will be empty.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Check that two workspaces are equal to one another:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">dataX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">dataY</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">dataX</span><span class="p">,</span> <span class="n">dataY</span><span class="p">)</span>

<span class="c">#create a copy of the workspace</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">CloneWorkspace</span><span class="p">(</span><span class="n">ws1</span><span class="p">)</span>

<span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">messages</span><span class="p">)</span> <span class="o">=</span> <span class="n">CompareWorkspaces</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span> <span class="n">ws2</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;Result:&quot;</span><span class="p">,</span> <span class="n">result</span>
<span class="k">print</span> <span class="n">messages</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Result: True
0
</pre></div>
</div>
<p><strong>Example - Check that two workspaces match within a certain tolerance:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c"># Create a workspace with some simple data</span>
<span class="n">dataX</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>
<span class="n">dataY1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dataX</span><span class="p">)</span>
<span class="n">ws1</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">dataX</span><span class="p">,</span> <span class="n">dataY1</span><span class="p">)</span>

<span class="c"># Create a similar workspace, but with added noise</span>
<span class="n">dataY2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">dataX</span><span class="p">)</span> <span class="o">+</span> <span class="mf">0.1</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random_sample</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dataX</span><span class="p">))</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">dataX</span><span class="p">,</span> <span class="n">dataY2</span><span class="p">)</span>

<span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">messages</span><span class="p">)</span> <span class="o">=</span> <span class="n">CompareWorkspaces</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span> <span class="n">ws2</span><span class="p">)</span> <span class="c"># Fails, they&#39;re not the same</span>
<span class="k">print</span> <span class="s">&quot;Result:&quot;</span><span class="p">,</span> <span class="n">result</span>
<span class="k">print</span> <span class="s">&quot;Displaying&quot;</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">rowCount</span><span class="p">(),</span> <span class="s">&quot;messages:&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span> <span class="k">print</span> <span class="n">row</span>

<span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">messages</span><span class="p">)</span> <span class="o">=</span> <span class="n">CompareWorkspaces</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span> <span class="n">ws2</span><span class="p">,</span> <span class="n">Tolerance</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span> <span class="c"># Passes, they&#39;re close enough</span>
<span class="k">print</span> <span class="s">&quot;Result:&quot;</span><span class="p">,</span> <span class="n">result</span>
<span class="k">print</span> <span class="s">&quot;Displaying&quot;</span><span class="p">,</span> <span class="n">messages</span><span class="o">.</span><span class="n">rowCount</span><span class="p">(),</span> <span class="s">&quot;messages:&quot;</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">:</span> <span class="k">print</span> <span class="n">row</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Result: False
Displaying 1 messages:
{&#39;Message&#39;: &#39;Data mismatch&#39;, &#39;Workspace 1&#39;: &#39;ws1&#39;, &#39;Workspace 2&#39;: &#39;ws2&#39;}
Result: True
Displaying 0 messages:
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Utility/Workspaces.html">Utility\Workspaces</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/fa5a1131e7c741eb04be0c8ff63502e3217916cb/Framework/Algorithms/src/CompareWorkspaces.cpp">CompareWorkspaces.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/fa5a1131e7c741eb04be0c8ff63502e3217916cb/Framework/Algorithms/inc/MantidAlgorithms/CompareWorkspaces.h">CompareWorkspaces.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CompareSampleLogs-v1.html" title="Previous Chapter: CompareSampleLogs v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; CompareSampleLog...</span>
    </a>
  </li>
  <li>
    <a href="CompressEvents-v1.html" title="Next Chapter: CompressEvents v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">CompressEvents v... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>