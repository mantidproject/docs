<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Direct Inelastic Changes</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '4.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../../index.html" />
    <link rel="up" title="Mantid 3.12.0 Release Notes" href="index.html" />
    <link rel="next" title="Indirect Inelastic Changes" href="indirect_inelastic.html" />
    <link rel="prev" title="SANS Changes" href="sans.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="direct-inelastic-changes">
<h1>Direct Inelastic Changes<a class="headerlink" href="#direct-inelastic-changes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#interfaces" id="id5">Interfaces</a><ul>
<li><a class="reference internal" href="#new-features" id="id6">New features</a></li>
<li><a class="reference internal" href="#improvements" id="id7">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#crystal-field" id="id8">Crystal Field</a><ul>
<li><a class="reference internal" href="#id1" id="id9">New features</a></li>
<li><a class="reference internal" href="#bug-fixes" id="id10">Bug fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#algorithms" id="id11">Algorithms</a><ul>
<li><a class="reference internal" href="#id3" id="id12">New features</a></li>
<li><a class="reference internal" href="#id4" id="id13">Bug fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#instrument-definitions" id="id14">Instrument definitions</a></li>
<li><a class="reference internal" href="#features-removed" id="id15">Features Removed</a></li>
</ul>
</div>
<div class="section" id="interfaces">
<h2><a class="toc-backref" href="#id5">Interfaces</a><a class="headerlink" href="#interfaces" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-features">
<h3><a class="toc-backref" href="#id6">New features</a><a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <a class="reference external" href="https://github.com/mantidproject/mslice">MSlice</a> user interface can now be launched from the MantidPlot Interfaces menu.</li>
</ul>
<div class="figure align-center">
<a class="screenshot reference internal image-reference" href="../../_images/mslice_interface.png"><img alt="../../_images/mslice_interface.png" class="screenshot" src="../../_images/mslice_interface.png" style="width: 500px;" /></a>
</div>
<div class="figure align-center">
<a class="screenshot reference internal image-reference" href="../../_images/mslice_slice.png"><img alt="../../_images/mslice_slice.png" class="screenshot" src="../../_images/mslice_slice.png" style="width: 500px;" /></a>
</div>
<div class="figure align-center">
<a class="screenshot reference internal image-reference" href="../../_images/mslice_acut.png"><img alt="../../_images/mslice_acut.png" class="screenshot" src="../../_images/mslice_acut.png" style="width: 500px;" /></a>
</div>
<p>Similar to the slice viewer, MSlice plots slices and cuts from workspaces. It creates customisable publication quality figures. Cuts can be created interactively by dragging a rectangle across a slice, and information such as recoil lines and bragg peaks can be overplotted.</p>
<ul class="simple">
<li>The algorithms <a class="reference internal" href="../../algorithms/SofQWCentre-v1.html#algm-sofqwcentre"><em>SofQWCentre v1</em></a>, <a class="reference internal" href="../../algorithms/SofQWPolygon-v1.html#algm-sofqwpolygon"><em>SofQWPolygon v1</em></a> and <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><em>SofQWNormalisedPolygon v1</em></a>, which rebin an inelastic workspace (has a <cite>DeltaE</cite> axis) from spectrum numbers (angle) to <cite>MomentumTransfer</cite> may now rebin the energy (<cite>DeltaE</cite>) axis as well as the <img class="math" src="../../_images/math/f37952523e95841ce81d125203d04becdc541e95.png" alt="|Q|" style="vertical-align: -5px"/> (<cite>MomentumTransfer</cite>) axes.</li>
<li><a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><em>SofQWNormalisedPolygon v1</em></a> now has uses a faster method for calculating the polygon intersections.</li>
<li>The crystal field computation and fitting engine is now feature complete. It can now handle multi-site computation and simultaneous fitting of inelastic spectra and physical properties dataset. See the <a class="reference internal" href="../../interfaces/Crystal Field Python Interface.html#crystal-field-python-interface"><em>Crystal Field Python Interface</em></a> help page for details, and <a class="reference external" href="http://www.mantidproject.org/Crystal_Field_Examples">http://www.mantidproject.org/Crystal_Field_Examples</a> for examples of use.</li>
<li>A new Python module <a class="reference internal" href="../../techniques/DirecttoolsPythonModule.html#directtools-python-module"><em>directtools</em></a> includes utilities for plotting <img class="math" src="../../_images/math/901c1fcaa469d8ce65414dc5005ab35ed18f6602.png" alt="S(Q,W)" style="vertical-align: -4px"/> workspaces and cuts (line profiles) in constant <img class="math" src="../../_images/math/f59dd7fde255c3f2d4d4d2f0631914aa7604d031.png" alt="Q" style="vertical-align: -4px"/> and <img class="math" src="../../_images/math/a9c4c0ee488c07deaee7584752e35cd1aac1b253.png" alt="E" style="vertical-align: 0px"/>.</li>
</ul>
</div>
<div class="section" id="improvements">
<h3><a class="toc-backref" href="#id7">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>PyChop has been updated with new look-up tables for the upgraded MAPS (with guide). Some minor bugs in PyChop have been fixed.</li>
<li>TOFTOF data reduction GUI has been improved. In the new version it has options to delete intermediate workspaces, to replace NaNs in S(Q,W), to create diffractograms and to save the reduced data in NXSPE and NeXus format.</li>
<li><a class="reference internal" href="../../algorithms/MonitorEfficiencyCorUser-v1.html#algm-monitorefficiencycoruser"><em>MonitorEfficiencyCorUser v1</em></a> is not anymore restricted to TOFTOF instrument.</li>
</ul>
</div>
</div>
<div class="section" id="crystal-field">
<h2><a class="toc-backref" href="#id8">Crystal Field</a><a class="headerlink" href="#crystal-field" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id9">New features</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The crystal field computation and fitting engine is now feature complete. It can now handle multi-site computation and simultaneous fitting of inelastic spectra and physical properties dataset. See the <a class="reference internal" href="../../interfaces/Crystal Field Python Interface.html#crystal-field-python-interface"><em>Crystal Field Python Interface</em></a> help page for details, and <a class="reference external" href="http://www.mantidproject.org/Crystal_Field_Examples">http://www.mantidproject.org/Crystal_Field_Examples</a> for examples of use.</li>
<li>Multi-site calculations and fitting are now supported by the crystal field (Python commandline) interface.</li>
<li>Calculation of dipole transition matrix elements has been added, together with the addition of a <img class="math" src="../../_images/math/8282a7340ac76882b5648d481eba73d497f7e397.png" alt="\chi_0" style="vertical-align: -4px"/> term in the <a class="reference internal" href="../../fitting/fitfunctions/CrystalFieldSusceptibility.html#func-crystalfieldsusceptibility"><em>CrystalFieldSusceptibility</em></a> function.</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h3><a class="toc-backref" href="#id10">Bug fixes</a><a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<p>Several bugs in the Python and C++ code has been fixed - see the <a class="reference external" href="https://github.com/mantidproject/mantid/pull/21604">github page</a> for details.</p>
</div>
</div>
<div class="section" id="algorithms">
<h2><a class="toc-backref" href="#id11">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id12">New features</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New algorithm <a class="reference internal" href="../../algorithms/HyspecScharpfCorrection-v1.html#algm-hyspecscharpfcorrection-v1"><em>HyspecScharpfCorrection</em></a> that can be used to calculate spin incoherent scattering from polarized neutron data</li>
<li>The algorithms <a class="reference internal" href="../../algorithms/SofQWCentre-v1.html#algm-sofqwcentre"><em>SofQWCentre v1</em></a>, <a class="reference internal" href="../../algorithms/SofQWPolygon-v1.html#algm-sofqwpolygon"><em>SofQWPolygon v1</em></a> and <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><em>SofQWNormalisedPolygon v1</em></a>, which rebin an inelastic workspace (has a <cite>DeltaE</cite> axis) from spectrum numbers (angle) to <cite>MomentumTransfer</cite> may now rebin the energy (<cite>DeltaE</cite>) axis as well as the <img class="math" src="../../_images/math/f37952523e95841ce81d125203d04becdc541e95.png" alt="|Q|" style="vertical-align: -5px"/> (<cite>MomentumTransfer</cite>) axes.</li>
<li><a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><em>SofQWNormalisedPolygon v1</em></a> now has uses a faster method for calculating the polygon intersections.</li>
</ul>
</div>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id13">Bug fixes</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed a bug in <a class="reference internal" href="../../algorithms/DirectILLApplySelfShielding-v1.html#algm-directillapplyselfshielding"><em>DirectILLApplySelfShielding v1</em></a> which could cause confusion among workspaces when the algorithm was run without both self shielding correction and empty container workspaces.</li>
<li>A <a class="reference external" href="https://github.com/mantidproject/mantid/pull/20953">bug</a> in the handling of workspaces with fractional bin weights (generated by <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><em>SofQWNormalisedPolygon v1</em></a>) has been fixed.</li>
</ul>
</div>
</div>
<div class="section" id="instrument-definitions">
<h2><a class="toc-backref" href="#id14">Instrument definitions</a><a class="headerlink" href="#instrument-definitions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The MAPS instrument definition file dating back to 2017-06-03 was changed.</li>
</ul>
</div>
<div class="section" id="features-removed">
<h2><a class="toc-backref" href="#id15">Features Removed</a><a class="headerlink" href="#features-removed" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The Direct Convert To Energy graphical interface has been removed, it had not been used for several years, and was a source of bugs as well as using testing effort that is better directed elsewhere.</li>
</ul>
<p><a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.12%22+is%3Amerged+label%3A%22Component%3A+Direct+Inelastic%22">Full list of changes on GitHub</a></p>
<p><a class="reference internal" href="index.html#v3-12-0"><em>Release 3.12.0</em></a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="sans.html" title="Previous Chapter: SANS Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SANS Changes</span>
    </a>
  </li>
  <li>
    <a href="indirect_inelastic.html" title="Next Chapter: Indirect Inelastic Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Inelast... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-03-25.<br/>
    </p>
  </div>
</footer>
  </body>
</html>