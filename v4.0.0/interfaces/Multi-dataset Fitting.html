<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Multi-dataset Fitting Interface</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="up" title="Interfaces" href="index.html" />
    <link rel="next" title="Muon ALC" href="Muon ALC.html" />
    <link rel="prev" title="&lt;no title&gt;" href="ManageUserDirectories.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="multi-dataset-fitting-interface">
<span id="id1"></span><h1>Multi-dataset Fitting Interface<a class="headerlink" href="#multi-dataset-fitting-interface" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#interface-overview" id="id2">Interface Overview</a></li>
<li><a class="reference internal" href="#list-of-spectra" id="id3">List of Spectra</a></li>
<li><a class="reference internal" href="#fit-property-browser" id="id4">Fit Property Browser</a><ul>
<li><a class="reference internal" href="#global-parameters-ties" id="id5">Global Parameters &amp; Ties</a></li>
<li><a class="reference internal" href="#local-parameters" id="id6">Local Parameters</a></li>
</ul>
</li>
<li><a class="reference internal" href="#spectrum-viewer" id="id7">Spectrum Viewer</a></li>
</ul>
</div>
<div class="section" id="interface-overview">
<h2><a class="toc-backref" href="#id2">Interface Overview</a><a class="headerlink" href="#interface-overview" title="Permalink to this headline">¶</a></h2>
<p>The Multi-dataset fitting interface can be used to fit multiple spectra using
the same model and starting parameters for each spectrum. This interface can be
accessed from the main menu of MantidPlot, in <em>Interfaces → General →
Multi-dataset Fitting</em>. The interface consists of three major parts: The fit
property window, the spectrum &amp; fit viewer, and the list of spectra to operate
on.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-fitting-labelled.png"><img alt="../_images/multidataset-fitting-labelled.png" src="../_images/multidataset-fitting-labelled.png" style="width: 1000px;" /></a>
<p class="caption">A high level overview of the various sections of the multidataset fitting
interface.</p>
</div>
</div>
<div class="section" id="list-of-spectra">
<h2><a class="toc-backref" href="#id3">List of Spectra</a><a class="headerlink" href="#list-of-spectra" title="Permalink to this headline">¶</a></h2>
<p>To start fitting data with this interface some data of interest first needs to
be loaded into the view. Using the &#8220;Add workspace&#8221; button you can choose a
workspace to add spectra from. This will let you choose from a list of loaded
workspaces and optionally select which workspace indices to include for
fitting. Spectra can be removed by highlighting a corresponding row (or rows)
and clicking &#8220;Remove&#8221;. To remove all spectra click the &#8220;workspace&#8221; column name
and then click the &#8220;Remove&#8221; button.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-add-workspace.png"><img alt="../_images/multidataset-add-workspace.png" src="../_images/multidataset-add-workspace.png" style="width: 800px;" /></a>
<p class="caption">The dialog box shown after clicking &#8220;Add workspace&#8221;.</p>
</div>
<p>After a list of spectra have been imported from a workspace the table of
spectra will be populated with one entry for each spectrum. Here you can see
which workspace the spectrum came from, what the workspace index was, and what
the start and end <cite>x</cite> values are for this particular spectrum for each fit. The
start and end values are editable and can be changed by the user by double
clicking on an entry.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-spectra.png"><img alt="../_images/multidataset-spectra.png" src="../_images/multidataset-spectra.png" style="width: 800px;" /></a>
<p class="caption">The list of spectra after loading a workspace.</p>
</div>
</div>
<div class="section" id="fit-property-browser">
<h2><a class="toc-backref" href="#id4">Fit Property Browser</a><a class="headerlink" href="#fit-property-browser" title="Permalink to this headline">¶</a></h2>
<p>The fit property browser is located on the left of the interface. The operation
of the fit property browser is very similar to the <a class="reference external" href="https://www.mantidproject.org/MBC_Setup_And_Execute_First_Fit">general fitting view</a> available in
Mantid but with slightly reduced functionality. The fit property browser is
split into two major parts. The top panel allows the user to define the
specifics of the model they wish to fit to the dataset. The bottom panel
contains the parameters for the minimizer and general parameters not associated
with the model (e.g. the number of iterations). The bottom panel also allows
the user to choose between simultaneous and sequential fitting mode:</p>
<ul class="simple">
<li><strong>Simultaneous Fitting</strong>: Fit all spectra at the same time as a multi-domain
function.</li>
<li><strong>Sequential Fitting</strong>: Has two different modes of operation specified by the
&#8220;Fit Type&#8221; property:<ul>
<li><em>Sequential</em>: in which the fitted parameters of the previous spectrum are
used as the starting values for the next one.</li>
<li><em>Individual</em>: when all spectra have the same starting values.</li>
</ul>
</li>
</ul>
<p>Another import general option in the bottom panel is the <em>CreateOutput</em> option
(available in sequential mode). With this checked, as well as the output
parameters, the fit will also output a workspace with the normalised covariance
matrices and workspace with parameters for each spectrum. It will also output
one workspace for each spectrum containing the data, fitted model, and
difference between model and data.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-fit-prop.png"><img alt="../_images/multidataset-fit-prop.png" src="../_images/multidataset-fit-prop.png" style="width: 300px;" /></a>
<p class="caption">The fit property browser. The top panel contains the specifics of the model
to fit. The bottom panel contains general parameters not associated with
the model.</p>
</div>
<p>A model can be created by right clicking and choosing &#8220;Add function&#8221; in the top
panel of the fit property window. This will produce a dialog box containing a
large number of different fit functions which can be added to the model.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-fit-prop-dialog.png"><img alt="../_images/multidataset-fit-prop-dialog.png" src="../_images/multidataset-fit-prop-dialog.png" style="width: 400px;" /></a>
<p class="caption">The dialog containing the list of fit functions that can be added to the
model.</p>
</div>
<p>After adding a function a new entry will appear in the top left panel with the
name of the fit function and a list of fitting parameters. The user can enter
appropriate guesses at starting values for the model parameters. Once a model
has been created the &#8220;Plot Guess&#8221; checkbox can be used to show a plot of the
model in the spectrum viewer using the starting parameter. To fit the model
click the &#8220;Fit&#8221; button.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-fit-prop-with-model.png"><img alt="../_images/multidataset-fit-prop-with-model.png" src="../_images/multidataset-fit-prop-with-model.png" style="width: 300px;" /></a>
<p class="caption">The fit property browser with a model added. The browser shows the current
starting values for each of the parameters of the model.</p>
</div>
<div class="section" id="global-parameters-ties">
<h3><a class="toc-backref" href="#id5">Global Parameters &amp; Ties</a><a class="headerlink" href="#global-parameters-ties" title="Permalink to this headline">¶</a></h3>
<p>In the simultaneous fitting model parameters can be set as global. This means
the same parameter will be shared across all spectra. To set a parameter as
global click the checkbox in the &#8220;Global&#8221; column of the fit property browser
next to the name and value of the model parameter.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-global-param.png"><img alt="../_images/multidataset-global-param.png" src="../_images/multidataset-global-param.png" style="width: 300px;" /></a>
<p class="caption">Setting a model parameter to be global.</p>
</div>
<p>Model parameters can also be tied together or fixed to a given value. This can
be done by right clicking on the parameter and choosing either &#8220;Tie&#8221; or &#8220;Fix&#8221;.
A fixed parameter&#8217;s value will not change during a fit. A tied parameter can be
used to either bound a parameter to a range or to tie the values of two
parameters together.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-fit-prop-right-click.png"><img alt="../_images/multidataset-fit-prop-right-click.png" src="../_images/multidataset-fit-prop-right-click.png" style="width: 300px;" /></a>
<p class="caption">Right clicking on a parameter shows the context menu with the fix, tie, and
constraint options</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-set-tie.png"><img alt="../_images/multidataset-set-tie.png" src="../_images/multidataset-set-tie.png" style="width: 300px;" /></a>
<p class="caption">Tieing the height parameter to the sigma parameter. More complex expressions
are allowed. See the documentation in the <a class="reference internal" href="../algorithms/Fit-v1.html#algm-fit-v1"><em>Fit</em></a>
algorithm.</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-tie-added.png"><img alt="../_images/multidataset-tie-added.png" src="../_images/multidataset-tie-added.png" style="width: 300px;" /></a>
<p class="caption">The fit property browser after the tie has been added to the parameter.</p>
</div>
</div>
<div class="section" id="local-parameters">
<h3><a class="toc-backref" href="#id6">Local Parameters</a><a class="headerlink" href="#local-parameters" title="Permalink to this headline">¶</a></h3>
<p>As well as setting the starting values for global parameters, the local
parameter values of the model used for each spectrum can be set individually.
The local parameter values can be edited by clicking on the value you wish to
modify, then clicking on the &#8221;...&#8221; button next to the value. This will open a
dialog of values for every spectrum. Here individual values can be set, fixed,
and tied as with the global parameters.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-edit-local-params.png"><img alt="../_images/multidataset-edit-local-params.png" src="../_images/multidataset-edit-local-params.png" style="width: 400px;" /></a>
<p class="caption">Button to open the window to edit local parameter values.</p>
</div>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-local-params.png"><img alt="../_images/multidataset-local-params.png" src="../_images/multidataset-local-params.png" style="width: 800px;" /></a>
<p class="caption">Editing local parameter values for each spectrum.</p>
</div>
</div>
</div>
<div class="section" id="spectrum-viewer">
<h2><a class="toc-backref" href="#id7">Spectrum Viewer</a><a class="headerlink" href="#spectrum-viewer" title="Permalink to this headline">¶</a></h2>
<p>The spectrum viewer is shown in the bottom panel of the interface. This shows a
plot of a single spectrum from the loaded list. It also shows a plot of the
model with the current parameters overlaid on the spectrum. Using the buttons
shown in the screenshot below the user can select which spectrum they wish to
view. The plot is interactive and can be panned and zoomed.</p>
<p>The user can also interactively select <cite>x</cite> bounds either for a single spectrum
or for all spectra by selecting the &#8220;Apply to all spectra option. To select
<cite>x</cite> bounds click and drag the blue dashed vertical lines to move define the
fitting window.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/multidataset-spectrum-view.png"><img alt="../_images/multidataset-spectrum-view.png" src="../_images/multidataset-spectrum-view.png" style="width: 800px;" /></a>
<p class="caption">The spectrum view in the multidataset fitting interface.</p>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Interfaces.html">Interfaces</a> | <a class="reference external" href="categories/Fitting.html">Fitting</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ManageUserDirectories.html" title="Previous Chapter: <no title>"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; <no title></span>
    </a>
  </li>
  <li>
    <a href="Muon ALC.html" title="Next Chapter: Muon ALC"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Muon ALC &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-03-25.<br/>
    </p>
  </div>
</footer>
  </body>
</html>