<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>IndexPeaks v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="IndexSXPeaks v1" href="IndexSXPeaks-v1.html" />
    <link rel="prev" title="ImportMDHistoWorkspace v1" href="ImportMDHistoWorkspace-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="indexpeaks-v1">
<span id="algm-indexpeaks"></span><span id="algm-indexpeaks-v1"></span><h1>IndexPeaks v1<a class="headerlink" href="#indexpeaks-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/IndexPeaks-v1_dlg.png"><img alt="../_images/IndexPeaks-v1_dlg.png" class="screenshot" src="../_images/IndexPeaks-v1_dlg.png" style="width: 342px;" /></a>
<p class="caption"><strong>IndexPeaks</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id2">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#related-algorithms" id="id6">Related Algorithms</a></li>
<li><a class="reference internal" href="#source" id="id7">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Index the peaks using the UB from the sample.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="IndexSXPeaks-v1.html#algm-indexsxpeaks"><em>IndexSXPeaks</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="7%" />
<col width="16%" />
<col width="13%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PeaksWorkspace</td>
<td>InOut</td>
<td>PeaksWorkspace</td>
<td><em>Mandatory</em></td>
<td>Input Peaks Workspace</td>
</tr>
<tr class="row-odd"><td>Tolerance</td>
<td>Input</td>
<td>number</td>
<td>0.15</td>
<td>Indexing Tolerance (0.15)</td>
</tr>
<tr class="row-even"><td>NumIndexed</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Gets set with the number of indexed peaks.</td>
</tr>
<tr class="row-odd"><td>AverageError</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Gets set with the average HKL indexing error.</td>
</tr>
<tr class="row-even"><td>RoundHKLs</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Round H, K and L values to integers</td>
</tr>
<tr class="row-odd"><td>CommonUBForAll</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Index all orientations with a common UB</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Given a PeaksWorkspace with a <a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a> stored with
the sample, this algorithm will use UB inverse to index the peaks. If
there are peaks from multiple runs in the workspace, the stored
<a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a> will be used to get an initial indexing for
the peaks from each individual run. Subsequently, a temporary
<a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a> will be optimzed for the peaks from each
individual run, and used to index the peaks from that run. In this way,
a consistent indexing of the peaks from multiple runs will be obtained,
which indexes the largest number of peaks, although one
<a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a> may not produce exactly that indexing for all
peaks, within the specified tolerance.</p>
<p>To not optimize the UB for each run, use the option, CommonUBForAll.  In
this case, the same UB stored in the workspace will be used to index
all the peaks with no optimization.</p>
<p>Any peak with any Miller index more than the specified tolerance away
from an integer will have its (h,k,l) set to (0,0,0). The calculated
Miller indices can either be rounded to the nearest integer value, or
can be left as decimal fractions.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - a simple example of IndexPeaks</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Load Peaks found in SXD23767.raw</span>
<span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;SXD23767.peaks&#39;</span><span class="p">,</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;peaks_qLab&#39;</span><span class="p">)</span>

<span class="c">#Set orientated lattice</span>
<span class="n">ubMatrix</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.06452276</span><span class="p">,</span>  <span class="mf">0.2478114</span><span class="p">,</span>  <span class="o">-</span><span class="mf">0.23742194</span><span class="p">,</span> <span class="mf">0.29161678</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00914316</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.12523779</span><span class="p">,</span> <span class="mf">0.06958942</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1802702</span><span class="p">,</span>  <span class="o">-</span><span class="mf">0.14649001</span><span class="p">]</span>
<span class="n">SetUB</span><span class="p">(</span><span class="s">&#39;peaks_qLab&#39;</span><span class="p">,</span><span class="n">UB</span><span class="o">=</span><span class="n">ubMatrix</span><span class="p">)</span>

<span class="c"># Run Algorithm</span>
<span class="n">indexed</span> <span class="o">=</span><span class="n">IndexPeaks</span><span class="p">(</span><span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s">&#39;peaks_qLab&#39;</span><span class="p">,</span><span class="n">Tolerance</span><span class="o">=</span><span class="mf">0.12</span><span class="p">,</span><span class="n">RoundHKLs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;Number of Indexed Peaks: {:d}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">indexed</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Number of Indexed Peaks: 147
</pre></div>
</div>
</div>
<div class="section" id="related-algorithms">
<h2><a class="toc-backref" href="#id6">Related Algorithms</a><a class="headerlink" href="#related-algorithms" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="IndexSXPeaks-v1.html#algm-indexsxpeaks"><em>IndexSXPeaks</em></a>
will index peaks given a PeaksWorkspace and lattice parameters</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">Algorithm Index</a> | <a class="reference external" href="categories/Crystal/Peaks.html">Crystal\Peaks</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id7">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/de259314d655b6c31c46dac22c46bbf8fd7d5abd/Framework/Crystal/src/IndexPeaks.cpp">IndexPeaks.cpp</a> <em>(last modified: 2018-10-05)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/de259314d655b6c31c46dac22c46bbf8fd7d5abd/Framework/Crystal/inc/MantidCrystal/IndexPeaks.h">IndexPeaks.h</a> <em>(last modified: 2018-10-05)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ImportMDHistoWorkspace-v1.html" title="Previous Chapter: ImportMDHistoWorkspace v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ImportMDHistoWor...</span>
    </a>
  </li>
  <li>
    <a href="IndexSXPeaks-v1.html" title="Next Chapter: IndexSXPeaks v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">IndexSXPeaks v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-03-25.<br/>
    </p>
  </div>
</footer>
  </body>
</html>