<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Regroup v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="RemoveBackground v1" href="RemoveBackground-v1.html" />
    <link rel="prev" title="ReflectometrySumInQ v1" href="ReflectometrySumInQ-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="regroup-v1">
<span id="algm-regroup"></span><span id="algm-regroup-v1"></span><h1>Regroup v1<a class="headerlink" href="#regroup-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/Regroup-v1_dlg.png"><img alt="../_images/Regroup-v1_dlg.png" class="screenshot" src="../_images/Regroup-v1_dlg.png" style="width: 397px;" /></a>
<p class="caption"><strong>Regroup</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id2">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a><ul>
<li><a class="reference internal" href="#output" id="id6">Output</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source" id="id7">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Regroups data with new bin boundaries.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="Rebin-v1.html#algm-rebin"><em>Rebin</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="5%" />
<col width="28%" />
<col width="8%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The input workspace.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The result of regrouping.</td>
</tr>
<tr class="row-even"><td>Params</td>
<td>Input</td>
<td>dbl list</td>
<td><em>Mandatory</em></td>
<td>The new approximate bin boundaries in the form: x1,dx1,x2,dx2,...,xn</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Regroups data with new bin boundaries to ensure that bins have minimum
width determined by the parameter <img class="math" src="../_images/math/0ba3e394d4604fe452c4a4f0b15ec02a198d13bb.png" alt="\Delta x_i\," style="vertical-align: -3px"/>, but ensuring the
bin boundaries are always coincident with original bin boundaries. The
&#8216;params&#8217; property defines new boundaries in intervals
<img class="math" src="../_images/math/a8c9774b258c6b8cd9c9e2aabb63d8c3c13199c2.png" alt="x_i-x_{i+1}\," style="vertical-align: -5px"/>. Positive <img class="math" src="../_images/math/0ba3e394d4604fe452c4a4f0b15ec02a198d13bb.png" alt="\Delta x_i\," style="vertical-align: -3px"/> define constant
minimum bin width, whilst negative ones create logarithmic binning
<img class="math" src="../_images/math/d103b4ccd2f5e4dfc8334694d87e31cdb12b2eb4.png" alt="x(j+1)=x(j)(1+|\Delta x_i|)\," style="vertical-align: -5px"/></p>
<p>The difference between <a class="reference internal" href="Rebin-v1.html#algm-rebin"><em>Rebin v1</em></a> and Regroup is that in the former the data
in the original bins may be divided by the new bin boundaries. In the
latter case, new bins are created only by combining whole bins. This is
true also for the ends of the regrouped array: if the bin boundaries are
990,1010,1030,1050,...,1210, then &#8220;params&#8221; = &#8220;1000,25,1200&#8221; yields a
workspace with bin boundaries 1010,1050,1090,1130,1170.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c"># Create a workspace</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>

<span class="c"># Regroup the bins such that no bin has width smaller than 300</span>
<span class="n">rgws</span> <span class="o">=</span> <span class="n">Regroup</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">300</span><span class="p">,</span><span class="mi">20000</span><span class="p">])</span>

<span class="c"># Check the result</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Bin width in ws   is {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">ws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;Bin width in rgws is {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rgws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">rgws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c"># Using numpy array calculations check that all  bins in the regrouped workspace</span>
<span class="c"># are wider than 300</span>

<span class="c"># Get the x vector of the first spectrum</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">rgws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="c"># Construct an array containing the differences of the consecutive elements in array x</span>
<span class="c"># x[1:] is a slice of x having all elements of x excluding the first one</span>
<span class="c"># x[:-1] is a slice of x having all elements of x excluding the last one</span>
<span class="n">widths</span> <span class="o">=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

<span class="c"># Check that all elements in widths are greater than 300</span>
<span class="k">print</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">all</span><span class="p">(</span><span class="n">widths</span> <span class="o">&gt;=</span> <span class="mi">300</span><span class="p">))</span>
</pre></div>
</div>
<div class="section" id="output">
<h3><a class="toc-backref" href="#id6">Output</a><a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre>Bin width in ws   is 200.0
Bin width in rgws is 400.0
True
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">Algorithm Index</a> | <a class="reference external" href="categories/Transforms/Rebin.html">Transforms\Rebin</a></p>
</div>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id7">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/de259314d655b6c31c46dac22c46bbf8fd7d5abd/Framework/Algorithms/src/Regroup.cpp">Regroup.cpp</a> <em>(last modified: 2018-12-16)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/de259314d655b6c31c46dac22c46bbf8fd7d5abd/Framework/Algorithms/inc/MantidAlgorithms/Regroup.h">Regroup.h</a> <em>(last modified: 2018-10-05)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ReflectometrySumInQ-v1.html" title="Previous Chapter: ReflectometrySumInQ v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ReflectometrySum...</span>
    </a>
  </li>
  <li>
    <a href="RemoveBackground-v1.html" title="Next Chapter: RemoveBackground v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">RemoveBackground... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-03-25.<br/>
    </p>
  </div>
</footer>
  </body>
</html>