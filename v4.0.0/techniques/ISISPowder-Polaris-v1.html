<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ISIS Powder Diffraction Scripts - POLARIS Reference</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="up" title="Techniques" href="index.html" />
    <link rel="next" title="ISIS Powder Diffraction Scripts - SampleDetails Reference" href="ISISPowder-SampleDetails-v1.html" />
    <link rel="prev" title="ISIS Powder Diffraction Scripts - PEARL Reference" href="ISISPowder-Pearl-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="isis-powder-diffraction-scripts-polaris-reference">
<span id="isis-powder-diffraction-polaris-ref"></span><h1>ISIS Powder Diffraction Scripts - POLARIS Reference<a class="headerlink" href="#isis-powder-diffraction-scripts-polaris-reference" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#creating-polaris-object" id="id7">Creating POLARIS Object</a><ul>
<li><a class="reference internal" href="#example" id="id8">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#methods" id="id9">Methods</a><ul>
<li><a class="reference internal" href="#create-vanadium" id="id10">create_vanadium</a><ul>
<li><a class="reference internal" href="#id1" id="id11">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#focus" id="id12">focus</a><ul>
<li><a class="reference internal" href="#id2" id="id13">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#set-sample" id="id14">set_sample</a><ul>
<li><a class="reference internal" href="#id3" id="id15">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#create-total-scattering-pdf" id="id16">create_total_scattering_pdf</a><ul>
<li><a class="reference internal" href="#id4" id="id17">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#calibration-mapping-file" id="id18">Calibration Mapping File</a><ul>
<li><a class="reference internal" href="#id5" id="id19">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameters" id="id20">Parameters</a><ul>
<li><a class="reference internal" href="#calibration-directory" id="id21">calibration_directory</a></li>
<li><a class="reference internal" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref" id="id22">calibration_mapping_file</a></li>
<li><a class="reference internal" href="#mode" id="id23">mode</a></li>
<li><a class="reference internal" href="#config-file" id="id24">config_file</a></li>
<li><a class="reference internal" href="#do-absorb-corrections" id="id25">do_absorb_corrections</a></li>
<li><a class="reference internal" href="#do-van-normalisation" id="id26">do_van_normalisation</a></li>
<li><a class="reference internal" href="#file-ext" id="id27">file_ext</a></li>
<li><a class="reference internal" href="#first-cycle-run-no" id="id28">first_cycle_run_no</a></li>
<li><a class="reference internal" href="#input-mode" id="id29">input_mode</a></li>
<li><a class="reference internal" href="#multiple-scattering" id="id30">multiple_scattering</a></li>
<li><a class="reference internal" href="#output-directory" id="id31">output_directory</a></li>
<li><a class="reference internal" href="#run-number" id="id32">run_number</a></li>
<li><a class="reference internal" href="#sample-empty" id="id33">sample_empty</a></li>
<li><a class="reference internal" href="#suffix" id="id34">suffix</a></li>
<li><a class="reference internal" href="#user-name" id="id35">user_name</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-parameters" id="id36">Advanced Parameters</a><ul>
<li><a class="reference internal" href="#focused-cropping-values" id="id37">focused_cropping_values</a></li>
<li><a class="reference internal" href="#grouping-file-name" id="id38">grouping_file_name</a></li>
<li><a class="reference internal" href="#vanadium-peaks-masking-file" id="id39">vanadium_peaks_masking_file</a></li>
<li><a class="reference internal" href="#sample-empty-scale" id="id40">sample_empty_scale</a></li>
<li><a class="reference internal" href="#raw-data-cropping-values" id="id41">raw_data_cropping_values</a></li>
<li><a class="reference internal" href="#spline-coefficient" id="id42">spline_coefficient</a></li>
<li><a class="reference internal" href="#vanadium-cropping-values" id="id43">vanadium_cropping_values</a></li>
<li><a class="reference internal" href="#vanadium-sample-details" id="id44">Vanadium sample details</a><ul>
<li><a class="reference internal" href="#chemical-formula" id="id45">chemical_formula</a></li>
<li><a class="reference internal" href="#cylinder-sample-height" id="id46">cylinder_sample_height</a></li>
<li><a class="reference internal" href="#cylinder-sample-radius" id="id47">cylinder_sample_radius</a></li>
<li><a class="reference internal" href="#cylinder-position" id="id48">cylinder_position</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="creating-polaris-object">
<span id="creating-polaris-object-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id7">Creating POLARIS Object</a><a class="headerlink" href="#creating-polaris-object" title="Permalink to this headline">¶</a></h2>
<p>This method assumes you are familiar with the concept of objects in Python.
If not more details can be read here: <a class="reference internal" href="ISISPowder-Tutorials.html#intro-to-objects-isis-powder-diffraction-ref"><em>A quick introduction to objects</em></a></p>
<p>To create a POLARIS object the following parameters are required:</p>
<ul class="simple">
<li><a class="reference internal" href="#calibration-directory-polaris-isis-powder-diffraction-ref"><em>calibration_directory</em></a></li>
<li><a class="reference internal" href="#output-directory-polaris-isis-powder-diffraction-ref"><em>output_directory</em></a></li>
<li><a class="reference internal" href="#user-name-polaris-isis-powder-diffraction-ref"><em>user_name</em></a></li>
</ul>
<p>Optionally a configuration file may be specified if one exists
using the following parameter:</p>
<ul class="simple">
<li><a class="reference internal" href="#config-file-polaris-isis-powder-diffraction-ref"><em>config_file</em></a></li>
</ul>
<p>See <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><em>Using configuration files</em></a>
on YAML configuration files for more details</p>
<div class="section" id="example">
<h3><a class="toc-backref" href="#id8">Example</a><a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">isis_powder</span> <span class="kn">import</span> <span class="n">Polaris</span>

<span class="n">calibration_dir</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\calibration_dir&quot;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\output_dir&quot;</span>

<span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="n">calibration_dir</span><span class="p">,</span>
                          <span class="n">output_directory</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
                          <span class="n">user_name</span><span class="o">=</span><span class="s">&quot;Mantid&quot;</span><span class="p">)</span>

<span class="c"># Optionally we could provide a configuration file like so</span>
<span class="c"># Notice how the file name ends with .yaml</span>
<span class="n">config_file_path</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\config_file.yaml</span>
<span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="n">config_file_path</span><span class="p">,</span>
                          <span class="n">user_name</span><span class="o">=</span><span class="s">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="methods">
<h2><a class="toc-backref" href="#id9">Methods</a><a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<p>The following methods can be executed on a POLARIS object:</p>
<ul class="simple">
<li><a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><em>create_vanadium</em></a></li>
<li><a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a></li>
<li><a class="reference internal" href="#set-sample-polaris-isis-powder-diffraction-ref"><em>set_sample</em></a></li>
</ul>
<p>For information on creating a POLARIS object see:
<a class="reference internal" href="#creating-polaris-object-isis-powder-diffraction-ref"><em>Creating POLARIS Object</em></a></p>
<div class="section" id="create-vanadium">
<span id="create-vanadium-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id10">create_vanadium</a><a class="headerlink" href="#create-vanadium" title="Permalink to this headline">¶</a></h3>
<p>The <em>create_vanadium</em> method allows a user to process a vanadium run.
Whilst processing the vanadium run the scripts can apply any corrections
the user enables and will spline the resulting workspace(s) for later focusing.</p>
<p>On POLARIS the following parameters are required when executing <em>create_vanadium</em>:</p>
<ul class="simple">
<li><a class="reference internal" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref"><em>calibration_mapping_file</em></a></li>
<li><a class="reference internal" href="#mode-polaris-isis-powder-diffraction-ref"><em>mode</em></a></li>
<li><a class="reference internal" href="#do-absorb-corrections-polaris-isis-powder-diffraction-ref"><em>do_absorb_corrections</em></a></li>
<li><a class="reference internal" href="#first-cycle-run-no-polaris-isis-powder-diffraction-ref"><em>first_cycle_run_no</em></a></li>
</ul>
<p>If <a class="reference internal" href="#do-absorb-corrections-polaris-isis-powder-diffraction-ref"><em>do_absorb_corrections</em></a> is
set to <strong>True</strong> the following parameter is required in addition to the
above:</p>
<ul class="simple">
<li><a class="reference internal" href="#multiple-scattering-polaris-isis-powder-diffraction-ref"><em>multiple_scattering</em></a></li>
</ul>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id11">Example</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                                <span class="n">mode</span><span class="o">=</span><span class="s">&quot;PDF&quot;</span><span class="p">,</span> <span class="n">do_absorb_corrections</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                <span class="n">first_cycle_run_no</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">multiple_scattering</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="focus">
<span id="focus-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id12">focus</a><a class="headerlink" href="#focus" title="Permalink to this headline">¶</a></h3>
<p>The <em>focus</em> method processes the user specified run(s). It aligns,
focuses and optionally applies corrections if the user has requested them.</p>
<p>On POLARIS the following parameters are required when executing <em>focus</em>:</p>
<ul class="simple">
<li><a class="reference internal" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref"><em>calibration_mapping_file</em></a></li>
<li><a class="reference internal" href="#mode-polaris-isis-powder-diffraction-ref"><em>mode</em></a></li>
<li><a class="reference internal" href="#do-absorb-corrections-polaris-isis-powder-diffraction-ref"><em>do_absorb_corrections</em></a></li>
<li><a class="reference internal" href="#do-van-normalisation-polaris-isis-powder-diffraction-ref"><em>do_van_normalisation</em></a></li>
<li><a class="reference internal" href="#input-mode-polaris-isis-powder-diffraction-ref"><em>input_mode</em></a></li>
<li><a class="reference internal" href="#run-number-polaris-isis-powder-diffraction-ref"><em>run_number</em></a></li>
</ul>
<p>If <a class="reference internal" href="#do-absorb-corrections-polaris-isis-powder-diffraction-ref"><em>do_absorb_corrections</em></a> is
set to <strong>True</strong> the following parameter is required in addition to the
above:</p>
<ul class="simple">
<li><a class="reference internal" href="#multiple-scattering-polaris-isis-powder-diffraction-ref"><em>multiple_scattering</em></a></li>
</ul>
<p>The following parameters may also be optionally set:</p>
<ul class="simple">
<li><a class="reference internal" href="#file-ext-polaris-isis-powder-diffraction-ref"><em>file_ext</em></a></li>
<li><a class="reference internal" href="#sample-empty-polaris-isis-powder-diffraction-ref"><em>sample_empty</em></a></li>
<li><a class="reference internal" href="#suffix-polaris-isis-powder-diffraction-ref"><em>suffix</em></a></li>
</ul>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id13">Example</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                      <span class="n">mode</span><span class="o">=</span><span class="s">&quot;Rietveld&quot;</span><span class="p">,</span> <span class="n">do_absorb_corrections</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                      <span class="n">file_ext</span><span class="o">=</span><span class="s">&quot;.s01&quot;</span><span class="p">,</span> <span class="n">input_mode</span><span class="o">=</span><span class="s">&quot;Individual&quot;</span><span class="p">,</span>
                      <span class="n">run_number</span><span class="o">=</span><span class="s">&quot;100-110&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="set-sample">
<span id="set-sample-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id14">set_sample</a><a class="headerlink" href="#set-sample" title="Permalink to this headline">¶</a></h3>
<p>The <em>set_sample</em> method allows a user to specify a SampleDetails
object which contains the sample properties used when
<a class="reference internal" href="#do-absorb-corrections-polaris-isis-powder-diffraction-ref"><em>do_absorb_corrections</em></a> is <strong>True</strong>
whilst focusing.</p>
<p>For more details on the SampleDetails object and how to set
it see: <a class="reference internal" href="ISISPowder-SampleDetails-v1.html#isis-powder-diffraction-sampledetails-ref"><em>ISIS Powder Diffraction Scripts - SampleDetails Reference</em></a></p>
<p>The following parameter is required when calling <em>set_sample</em></p>
<ul class="simple">
<li><em>sample</em> - This must be a SampleDetails object with the
material set already.</li>
</ul>
<div class="section" id="id3">
<h4><a class="toc-backref" href="#id15">Example</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sample_obj</span> <span class="o">=</span> <span class="n">SampleDetails</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">sample_obj</span><span class="o">.</span><span class="n">set_material</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="n">polaris_example</span><span class="o">.</span><span class="n">set_sample</span><span class="p">(</span><span class="n">sample</span><span class="o">=</span><span class="n">sample_obj</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="create-total-scattering-pdf">
<span id="create-total-scattering-pdf-polaris-isis-powder-ref"></span><h3><a class="toc-backref" href="#id16">create_total_scattering_pdf</a><a class="headerlink" href="#create-total-scattering-pdf" title="Permalink to this headline">¶</a></h3>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Total scattering support is not yet fully implemented.
Any results obtaining from using the below routine in its current
state should not be considered accurate or complete.</p>
</div>
<p>The <em>create_total_scattering_pdf</em> method allows a user to create a Pair Distribution Function (PDF)
from focused POLARIS data, with a view performing further total scattering analysis.</p>
<p>With no merging criteria specified, <em>merge_banks=False</em> a PDF will be generated for each bank within
the focused_workspace.</p>
<p>This function requires the run_number you wish to analyse. The focused file for this run number must
either be loaded in Mantid with the naming format given by the <em>focus</em> method:</p>
<p><em>&lt;run number&gt;-Results-&lt;TOF/D&gt;-Grp</em></p>
<p>for example:</p>
<p>12345-Results-TOF-Grp</p>
<p>Or the focused file must be in the output directory of the POLARIS instrument.</p>
<div class="section" id="id4">
<h4><a class="toc-backref" href="#id17">Example</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span><span class="o">.</span><span class="n">create_total_scattering_pdf</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="s">&#39;12345&#39;</span><span class="p">,</span>
                                            <span class="n">merge_banks</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="calibration-mapping-file">
<span id="calibration-mapping-polaris-isis-powder-ref"></span><h2><a class="toc-backref" href="#id18">Calibration Mapping File</a><a class="headerlink" href="#calibration-mapping-file" title="Permalink to this headline">¶</a></h2>
<p>The calibration mapping file holds the mapping between
run numbers, current label, offset filename and the empty
and vanadium numbers.</p>
<p>For more details on the calibration mapping file see:
<a class="reference internal" href="ISISPowder-Tutorials.html#cycle-mapping-files-isis-powder-diffraction-ref"><em>Cycle mapping files</em></a></p>
<p>The layout on POLARIS should look as follows for each block
substituting the below values for appropriate values:</p>
<div class="highlight-yaml"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span class="l-Scalar-Plain">1-100</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">label</span><span class="p-Indicator">:</span> <span class="s">&quot;1_1&quot;</span>
  <span class="l-Scalar-Plain">offset_file_name</span><span class="p-Indicator">:</span> <span class="s">&quot;offset_file.cal&quot;</span>
  <span class="l-Scalar-Plain">PDF</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">vanadium_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;10&quot;</span>
    <span class="l-Scalar-Plain">empty_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;20&quot;</span>
  <span class="l-Scalar-Plain">Rietveld</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">vanadium_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;30&quot;</span>
    <span class="l-Scalar-Plain">empty_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;40&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Lines 5 and 6 in this example set the vanadium and empty run numbers for
chopper off mode. Lines 8 and 9 set the vanadium and empty for chopper
on mode.</p>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id19">Example</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">1-100</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">label</span><span class="p-Indicator">:</span> <span class="s">&quot;1_1&quot;</span>
  <span class="l-Scalar-Plain">offset_file_name</span><span class="p-Indicator">:</span> <span class="s">&quot;offset_file.cal&quot;</span>
  <span class="l-Scalar-Plain">PDF</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">vanadium_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;10&quot;</span>
    <span class="l-Scalar-Plain">empty_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;20&quot;</span>
  <span class="l-Scalar-Plain">Rietveld</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">vanadium_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;30&quot;</span>
    <span class="l-Scalar-Plain">empty_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;40&quot;</span>

<span class="l-Scalar-Plain">101-</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">label</span><span class="p-Indicator">:</span> <span class="s">&quot;1_2&quot;</span>
  <span class="l-Scalar-Plain">offset_file_name</span><span class="p-Indicator">:</span> <span class="s">&quot;offset_file.cal&quot;</span>
  <span class="l-Scalar-Plain">PDF</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">vanadium_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;110&quot;</span>
    <span class="l-Scalar-Plain">empty_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;120&quot;</span>
  <span class="l-Scalar-Plain">Rietveld</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">vanadium_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;130&quot;</span>
    <span class="l-Scalar-Plain">empty_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;140&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parameters">
<h2><a class="toc-backref" href="#id20">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>The following parameters for POLARIS are intended for regular use
when using the ISIS Powder scripts.</p>
<div class="section" id="calibration-directory">
<span id="calibration-directory-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id21">calibration_directory</a><a class="headerlink" href="#calibration-directory" title="Permalink to this headline">¶</a></h3>
<p>This parameter should be the full path to the calibration folder.
Within the folder the following should be present:</p>
<ul class="simple">
<li>Grouping .cal file (see: <a class="reference internal" href="#grouping-file-name-polaris-isis-powder-diffraction-ref"><em>grouping_file_name</em></a>)</li>
<li>Masking file (see: <a class="reference internal" href="#masking-file-name-polaris-isis-powder-diffraction-ref"><em>vanadium_peaks_masking_file</em></a>)</li>
<li>Folder(s) with the label name specified in mapping file (e.g. &#8220;1_1&#8221;)
- Inside each folder should be the offset file with name specified in mapping file</li>
</ul>
<p>The script will also save out vanadium splines into the relevant
label folder which are subsequently loaded and used within the
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a> method.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="s">r&quot;C:\path\to\calibration_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="calibration-mapping-file-polaris-isis-powder-diffraction-ref">
<span id="id6"></span><h3><a class="toc-backref" href="#id22">calibration_mapping_file</a><a class="headerlink" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref" title="Permalink to this headline">¶</a></h3>
<p>This parameter gives the full path to the YAML file containing the
calibration mapping. For more details on this file see:
<a class="reference internal" href="#calibration-mapping-polaris-isis-powder-ref"><em>Calibration Mapping File</em></a></p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Notice the filename always ends in .yaml</span>
<span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="s">r&quot;C:\path\to\file\calibration_mapping.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="mode">
<span id="mode-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id23">mode</a><a class="headerlink" href="#mode" title="Permalink to this headline">¶</a></h3>
<p>The current chopper mode to use in the
<a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
and <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a> method.
This determines which vanadium and empty run numbers
to use whilst processing.</p>
<p>Accepted values are: <strong>PDF</strong> or <strong>Rietveld</strong></p>
<p><em>Note: This parameter is not case sensitive</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s">&quot;PDF&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c"># Or</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s">&quot;Rietveld&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="config-file">
<span id="config-file-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id24">config_file</a><a class="headerlink" href="#config-file" title="Permalink to this headline">¶</a></h3>
<p>The full path to the YAML configuration file. This file is
described in detail here: <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><em>Using configuration files</em></a>
It is recommended to set this parameter at object creation instead
of on a method as it will warn if any parameters are overridden
in the scripting window.</p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Notice the filename always ends in .yaml</span>
<span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="s">r&quot;C:\path\to\file\configuration.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="do-absorb-corrections">
<span id="do-absorb-corrections-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id25">do_absorb_corrections</a><a class="headerlink" href="#do-absorb-corrections" title="Permalink to this headline">¶</a></h3>
<p>Indicates whether to perform vanadium absorption corrections
in <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><em>create_vanadium</em></a> mode.
In <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a> mode
sample absorption corrections require the sample be
set first with the <a class="reference internal" href="#set-sample-polaris-isis-powder-diffraction-ref"><em>set_sample</em></a>
method.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p><em>Note: If this is set to &#8216;True&#8217;</em>
<a class="reference internal" href="#multiple-scattering-polaris-isis-powder-diffraction-ref"><em>multiple_scattering</em></a>
<em>must be set</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">do_absorb_corrections</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>

<span class="c"># Or (this assumes sample details have already been set)</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">do_absorb_corrections</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="do-van-normalisation">
<span id="do-van-normalisation-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id26">do_van_normalisation</a><a class="headerlink" href="#do-van-normalisation" title="Permalink to this headline">¶</a></h3>
<p>Indicates whether to divide the focused workspace within
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a> mode with a
previously generated vanadium spline.</p>
<p>This requires a vanadium to have been previously created
with the <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
method</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">do_van_normalisation</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="file-ext">
<span id="file-ext-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id27">file_ext</a><a class="headerlink" href="#file-ext" title="Permalink to this headline">¶</a></h3>
<p><em>Optional</em></p>
<p>Specifies a file extension to use when using the
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a> method.</p>
<p>This should be used to process partial runs. When
processing full runs (i.e. completed runs) it should not
be specified as Mantid will automatically determine the
best extension to use.</p>
<p><em>Note: A leading dot (.) is not required but
is preferred for readability</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">file_ext</span><span class="o">=</span><span class="s">&quot;.s01&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="first-cycle-run-no">
<span id="first-cycle-run-no-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id28">first_cycle_run_no</a><a class="headerlink" href="#first-cycle-run-no" title="Permalink to this headline">¶</a></h3>
<p>Indicates a run from the current cycle to use when calling
<a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><em>create_vanadium</em></a>.
This does not have the be the first run of the cycle or
the run number corresponding to the vanadium. However it
must be in the correct cycle according to the
<a class="reference internal" href="#calibration-mapping-polaris-isis-powder-ref"><em>Calibration Mapping File</em></a>.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># In this example assume we mean a cycle with run numbers 100-200</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">first_cycle_run_no</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="input-mode">
<span id="input-mode-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id29">input_mode</a><a class="headerlink" href="#input-mode" title="Permalink to this headline">¶</a></h3>
<p>Indicates how to interpret the parameter
<a class="reference internal" href="#run-number-polaris-isis-powder-diffraction-ref"><em>run_number</em></a> whilst
calling the <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a>
method.
If the input_mode is set to <em>Summed</em> it will process
to sum all runs specified. If set to <em>Individual</em> it
will process all runs individually (i.e. One at a time)</p>
<p>Accepted values are: <strong>Summed</strong> and <strong>Individual</strong></p>
<p><em>Note: This parameter is not case sensitive</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">input_mode</span><span class="o">=</span><span class="s">&quot;Summed&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="multiple-scattering">
<span id="multiple-scattering-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id30">multiple_scattering</a><a class="headerlink" href="#multiple-scattering" title="Permalink to this headline">¶</a></h3>
<p>Indicates whether to account for the effects of multiple scattering
when calculating absorption corrections. If
<a class="reference internal" href="#do-absorb-corrections-polaris-isis-powder-diffraction-ref"><em>do_absorb_corrections</em></a> is
set to <strong>True</strong> this parameter must be set.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p><em>Note: Calculating multiple scattering effects will add around
10-30 minutes to the script runtime depending on the speed of
the computer you are using</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">multiple_scattering</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c"># Or</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">multiple_scattering</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="output-directory">
<span id="output-directory-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id31">output_directory</a><a class="headerlink" href="#output-directory" title="Permalink to this headline">¶</a></h3>
<p>Specifies the path to the output directory to save resulting files
into. The script will automatically create a folder
with the label determined from the
<a class="reference internal" href="#calibration-mapping-file-polaris-isis-powder-diffraction-ref"><em>calibration_mapping_file</em></a>
and within that create another folder for the current
<a class="reference internal" href="#user-name-polaris-isis-powder-diffraction-ref"><em>user_name</em></a>.</p>
<p>Within this folder processed data will be saved out in
several formats.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">output_directory</span><span class="o">=</span><span class="s">r&quot;C:\path\to\output_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="run-number">
<span id="run-number-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id32">run_number</a><a class="headerlink" href="#run-number" title="Permalink to this headline">¶</a></h3>
<p>Specifies the run number(s) to process when calling the
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a> method.</p>
<p>This parameter accepts a single value or a range
of values with the following syntax:</p>
<p><strong>-</strong> : Indicates a range of runs inclusive
(e.g. <em>1-10</em> would process 1, 2, 3....8, 9, 10)</p>
<p><strong>,</strong> : Indicates a gap between runs
(e.g. <em>1, 3, 5, 7</em> would process run numbers 1, 3, 5, 7)</p>
<p>These can be combined like so:
<em>1-3, 5, 8-10</em> would process run numbers 1, 2, 3, 5, 8, 9, 10.</p>
<p>In addition the <a class="reference internal" href="#input-mode-polaris-isis-powder-diffraction-ref"><em>input_mode</em></a>
parameter determines what effect a range of inputs has
on the data to be processed</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Process run number 1, 3, 5, 6, 7</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="s">&quot;1, 3, 5-7&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c"># Or just a single run</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-empty">
<span id="sample-empty-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id33">sample_empty</a><a class="headerlink" href="#sample-empty" title="Permalink to this headline">¶</a></h3>
<p><em>Optional</em></p>
<p>This parameter specifies a/several sample empty run(s)
to subtract from the run in the
<a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a> method.
If multiple runs are specified it will sum these runs
before subtracting the result.</p>
<p>This input uses the same syntax as
<a class="reference internal" href="#run-number-polaris-isis-powder-diffraction-ref"><em>run_number</em></a>.
Please visit the above page for more details.</p>
<p><em>Note: If this parameter is set to</em> <strong>True</strong>
<a class="reference internal" href="#sample-empty-scale-polaris-isis-powder-diffraction-ref"><em>sample_empty_scale</em></a>
<em>must also be set.</em> This is set to 1.0 by default.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Our sample empty is a single number</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">sample_empty</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c"># Or a range of numbers</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">sample_empty</span><span class="o">=</span><span class="s">&quot;100-110&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="suffix">
<span id="suffix-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id34">suffix</a><a class="headerlink" href="#suffix" title="Permalink to this headline">¶</a></h3>
<p><em>Optional</em></p>
<p>This parameter specifies a suffix to append the names of output files
during a focus.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s">&quot;-corr&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="user-name">
<span id="user-name-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id35">user_name</a><a class="headerlink" href="#user-name" title="Permalink to this headline">¶</a></h3>
<p>Specifies the name of the current user when creating a
new POLARIS object. This is only used when saving data to
sort data into respective user folders.
See <a class="reference internal" href="#output-directory-polaris-isis-powder-diffraction-ref"><em>output_directory</em></a>
for more details.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">polaris_example</span> <span class="o">=</span> <span class="n">Polaris</span><span class="p">(</span><span class="n">user_name</span><span class="o">=</span><span class="s">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="advanced-parameters">
<h2><a class="toc-backref" href="#id36">Advanced Parameters</a><a class="headerlink" href="#advanced-parameters" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>These values are not intended to be changed and should
reflect optimal defaults for the instrument. For more
details please read:
<a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><em>Instrument advanced properties</em></a></p>
<p class="last">This section is mainly intended to act as reference of the
current settings distributed with Mantid</p>
</div>
<p>All values changed in the advanced configuration file
requires the user to restart Mantid for the new values to take effect.
Please read <a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><em>Instrument advanced properties</em></a>
before proceeding to change values within the advanced configuration file.</p>
<div class="section" id="focused-cropping-values">
<span id="focused-cropping-values-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id37">focused_cropping_values</a><a class="headerlink" href="#focused-cropping-values" title="Permalink to this headline">¶</a></h3>
<p>Indicates a list of TOF values to crop the focused workspace
which was created by <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a>
on a bank by bank basis.</p>
<p>This parameter is a list of bank cropping values with
one list entry per bank. The values <strong>must</strong> have a smaller
TOF window than the <a class="reference internal" href="#vanadium-cropping-values-polaris-isis-powder-diffraction-ref"><em>vanadium_cropping_values</em></a></p>
<p>On POLARIS this is set to the following TOF windows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">focused_cropping_values</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">(</span><span class="mi">700</span><span class="p">,</span>  <span class="mi">30000</span><span class="p">),</span>  <span class="c"># Bank 1</span>
    <span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">24900</span><span class="p">),</span>  <span class="c"># Bank 2</span>
    <span class="p">(</span><span class="mi">1100</span><span class="p">,</span> <span class="mi">19950</span><span class="p">),</span>  <span class="c"># Bank 3</span>
    <span class="p">(</span><span class="mi">1100</span><span class="p">,</span> <span class="mi">19950</span><span class="p">),</span>  <span class="c"># Bank 4</span>
    <span class="p">(</span><span class="mi">1100</span><span class="p">,</span> <span class="mi">19950</span><span class="p">),</span>  <span class="c"># Bank 5</span>
    <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="grouping-file-name">
<span id="grouping-file-name-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id38">grouping_file_name</a><a class="headerlink" href="#grouping-file-name" title="Permalink to this headline">¶</a></h3>
<p>Determines the name of the grouping cal file which is located
within top level of the <a class="reference internal" href="#calibration-directory-polaris-isis-powder-diffraction-ref"><em>calibration_directory</em></a>.</p>
<p>The grouping file determines the detector ID to bank mapping to use
whilst focusing the spectra into banks.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">grouping_file_name</span><span class="p">:</span> <span class="s">&quot;Master_copy_of_grouping_file_with_essential_masks.cal&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="vanadium-peaks-masking-file">
<span id="masking-file-name-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id39">vanadium_peaks_masking_file</a><a class="headerlink" href="#vanadium-peaks-masking-file" title="Permalink to this headline">¶</a></h3>
<p>Determines the name of the masking file containing the
masks to remove Bragg peaks on Polaris. This file must
be located within the top level of the
<a class="reference internal" href="#calibration-directory-polaris-isis-powder-diffraction-ref"><em>calibration_directory</em></a>.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">vanadium_peaks_masking_file</span><span class="p">:</span> <span class="s">&quot;VanaPeaks.dat&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="sample-empty-scale">
<span id="sample-empty-scale-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id40">sample_empty_scale</a><a class="headerlink" href="#sample-empty-scale" title="Permalink to this headline">¶</a></h3>
<p>Required if <a class="reference internal" href="#sample-empty-polaris-isis-powder-diffraction-ref"><em>sample_empty</em></a>
is set to <strong>True</strong></p>
<p>Sets a factor to scale the sample empty run(s) to before
subtracting. This value is multiplied after summing the
sample empty runs and before subtracting the empty from
the data set. For more details see: <a class="reference internal" href="../algorithms/Scale-v1.html#algm-scale-v1"><em>Scale</em></a>.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Scale sample empty to 90% of original</span>
<span class="n">polaris_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">sample_empty_scale</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="raw-data-cropping-values">
<span id="raw-data-cropping-values-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id41">raw_data_cropping_values</a><a class="headerlink" href="#raw-data-cropping-values" title="Permalink to this headline">¶</a></h3>
<p>Determines the TOF window to crop all spectra down to before any
processing in the <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
and <a class="reference internal" href="#focus-polaris-isis-powder-diffraction-ref"><em>focus</em></a> methods.</p>
<p>This helps remove negative counts where at very low TOF
the empty counts can exceed the captured neutron counts
of the run to process.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">raw_data_cropping_values</span><span class="p">:</span> <span class="p">(</span><span class="mi">750</span><span class="p">,</span> <span class="mi">20000</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="spline-coefficient">
<span id="spline-coefficient-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id42">spline_coefficient</a><a class="headerlink" href="#spline-coefficient" title="Permalink to this headline">¶</a></h3>
<p>Determines the spline coefficient to use after processing
the vanadium in <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
method. For more details see <a class="reference internal" href="../algorithms/SplineBackground-v1.html#algm-splinebackground"><em>SplineBackground</em></a></p>
<p><em>Note that if this value is changed &#8216;create_vanadium&#8217;
will need to be called again.</em></p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">spline_coefficient</span><span class="p">:</span> <span class="mi">100</span>
</pre></div>
</div>
</div>
<div class="section" id="vanadium-cropping-values">
<span id="vanadium-cropping-values-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id43">vanadium_cropping_values</a><a class="headerlink" href="#vanadium-cropping-values" title="Permalink to this headline">¶</a></h3>
<p>Determines the TOF windows to crop to on a bank by bank basis
within the <a class="reference internal" href="#create-vanadium-polaris-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
method. This is applied after focusing and before a spline is taken.</p>
<p>It is used to remove low counts at the start and end of the vanadium run
to produce a spline which better matches the data.</p>
<p>This parameter is a list of bank cropping values with
one list entry per bank. The values <strong>must</strong> have a larger
TOF window than the <a class="reference internal" href="#focused-cropping-values-polaris-isis-powder-diffraction-ref"><em>focused_cropping_values</em></a>
and a smaller window than <a class="reference internal" href="#raw-data-cropping-values-polaris-isis-powder-diffraction-ref"><em>raw_data_cropping_values</em></a>.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">vanadium_cropping_values</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c"># Bank 1</span>
                            <span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c"># Bank 2</span>
                            <span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c"># Bank 3</span>
                            <span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c"># Bank 4</span>
                            <span class="p">(</span><span class="mi">800</span><span class="p">,</span> <span class="mi">19995</span><span class="p">),</span>  <span class="c"># Bank 5</span>
                           <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="vanadium-sample-details">
<span id="vanadium-sample-details-polaris-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id44">Vanadium sample details</a><a class="headerlink" href="#vanadium-sample-details" title="Permalink to this headline">¶</a></h3>
<div class="section" id="chemical-formula">
<h4><a class="toc-backref" href="#id45">chemical_formula</a><a class="headerlink" href="#chemical-formula" title="Permalink to this headline">¶</a></h4>
<p>The chemical formula for the Vanadium rod.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">chemical_formula</span> <span class="o">=</span> <span class="s">&quot;V&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="cylinder-sample-height">
<h4><a class="toc-backref" href="#id46">cylinder_sample_height</a><a class="headerlink" href="#cylinder-sample-height" title="Permalink to this headline">¶</a></h4>
<p>The height of the Vanadium rod.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cylinder_sample_height</span> <span class="o">=</span> <span class="mf">4.0</span>
</pre></div>
</div>
</div>
<div class="section" id="cylinder-sample-radius">
<h4><a class="toc-backref" href="#id47">cylinder_sample_radius</a><a class="headerlink" href="#cylinder-sample-radius" title="Permalink to this headline">¶</a></h4>
<p>The radius of the Vanadium rod.</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cylinder_sample_radius</span> <span class="o">=</span> <span class="mf">0.25</span>
</pre></div>
</div>
</div>
<div class="section" id="cylinder-position">
<h4><a class="toc-backref" href="#id48">cylinder_position</a><a class="headerlink" href="#cylinder-position" title="Permalink to this headline">¶</a></h4>
<p>The position of the Vanadium rod in [x, y, z]</p>
<p>On POLARIS this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">cylinder_position</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span>
</pre></div>
</div>
<p><strong>Category</strong>: <a class="reference external" href="categories/Techniques.html">Techniques</a></p>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ISISPowder-Pearl-v1.html" title="Previous Chapter: ISIS Powder Diffraction Scripts - PEARL Reference"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ISIS Powder Diff...</span>
    </a>
  </li>
  <li>
    <a href="ISISPowder-SampleDetails-v1.html" title="Next Chapter: ISIS Powder Diffraction Scripts - SampleDetails Reference"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ISIS Powder Diff... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-03-25.<br/>
    </p>
  </div>
</footer>
  </body>
</html>