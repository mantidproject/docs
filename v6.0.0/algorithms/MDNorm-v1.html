<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>MDNorm v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="MDNormDirectSC v1" href="MDNormDirectSC-v1.html" />
    <link rel="prev" title="MDHistoToWorkspace2D v1" href="MDHistoToWorkspace2D-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="mdnorm-v1">
<span id="algm-mdnorm"></span><span id="algm-mdnorm-v1"></span><h1>MDNorm v1<a class="headerlink" href="#mdnorm-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/MDNorm-v1_dlg.png"><img alt="../_images/MDNorm-v1_dlg.png" class="screenshot" src="../_images/MDNorm-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>MDNorm</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Bins multidimensional data and calculate the normalization on the same grid</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="CropWorkspaceForMDNorm-v1.html#algm-cropworkspaceformdnorm"><span class="std std-ref">CropWorkspaceForMDNorm</span></a>, <a class="reference internal" href="MDNormSCD-v1.html#algm-mdnormscd"><span class="std std-ref">MDNormSCD</span></a>, <a class="reference internal" href="MDNormDirectSC-v1.html#algm-mdnormdirectsc"><span class="std std-ref">MDNormDirectSC</span></a>, <a class="reference internal" href="RecalculateTrajectoriesExtents-v1.html#algm-recalculatetrajectoriesextents"><span class="std std-ref">RecalculateTrajectoriesExtents</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="2%" />
<col width="14%" />
<col width="4%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><span class="std std-ref">MDEventWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>An input MDEventWorkspace. Must be in Q_sample frame.</td>
</tr>
<tr class="row-odd"><td>RLU</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Use reciprocal lattice units. If false, use Q_sample</td>
</tr>
<tr class="row-even"><td>QDimension0</td>
<td>Input</td>
<td>dbl list</td>
<td>1,0,0</td>
<td>The first Q projection axis - Default is (1,0,0)</td>
</tr>
<tr class="row-odd"><td>QDimension1</td>
<td>Input</td>
<td>dbl list</td>
<td>0,1,0</td>
<td>The second Q projection axis - Default is (0,1,0)</td>
</tr>
<tr class="row-even"><td>QDimension2</td>
<td>Input</td>
<td>dbl list</td>
<td>0,0,1</td>
<td>The thirdtCalculateCover Q projection axis - Default is (0,0,1)</td>
</tr>
<tr class="row-odd"><td>SolidAngleWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td>&#160;</td>
<td>An input workspace containing integrated vanadium (a measure of the solid angle). Mandatory for diffraction, optional for direct geometry inelastic</td>
</tr>
<tr class="row-even"><td>FluxWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td>&#160;</td>
<td>An input workspace containing momentum dependent flux. Mandatory for diffraction. No effect on direct geometry inelastic</td>
</tr>
<tr class="row-odd"><td>Dimension0Name</td>
<td>Input</td>
<td>string</td>
<td>QDimension0</td>
<td>Name for the 0th dimension. Leave blank for NONE.</td>
</tr>
<tr class="row-even"><td>Dimension0Binning</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Binning for the 0th dimension. - Leave blank for complete integration - One value is interpreted as step - Two values are interpreted integration interval - Three values are interpreted as min, step, max</td>
</tr>
<tr class="row-odd"><td>Dimension1Name</td>
<td>Input</td>
<td>string</td>
<td>QDimension1</td>
<td>Name for the 1th dimension. Leave blank for NONE.</td>
</tr>
<tr class="row-even"><td>Dimension1Binning</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Binning for the 1th dimension. - Leave blank for complete integration - One value is interpreted as step - Two values are interpreted integration interval - Three values are interpreted as min, step, max</td>
</tr>
<tr class="row-odd"><td>Dimension2Name</td>
<td>Input</td>
<td>string</td>
<td>QDimension2</td>
<td>Name for the 2th dimension. Leave blank for NONE.</td>
</tr>
<tr class="row-even"><td>Dimension2Binning</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Binning for the 2th dimension. - Leave blank for complete integration - One value is interpreted as step - Two values are interpreted integration interval - Three values are interpreted as min, step, max</td>
</tr>
<tr class="row-odd"><td>Dimension3Name</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Name for the 3th dimension. Leave blank for NONE.</td>
</tr>
<tr class="row-even"><td>Dimension3Binning</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Binning for the 3th dimension. - Leave blank for complete integration - One value is interpreted as step - Two values are interpreted integration interval - Three values are interpreted as min, step, max</td>
</tr>
<tr class="row-odd"><td>Dimension4Name</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Name for the 4th dimension. Leave blank for NONE.</td>
</tr>
<tr class="row-even"><td>Dimension4Binning</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Binning for the 4th dimension. - Leave blank for complete integration - One value is interpreted as step - Two values are interpreted integration interval - Three values are interpreted as min, step, max</td>
</tr>
<tr class="row-odd"><td>Dimension5Name</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Name for the 5th dimension. Leave blank for NONE.</td>
</tr>
<tr class="row-even"><td>Dimension5Binning</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Binning for the 5th dimension. - Leave blank for complete integration - One value is interpreted as step - Two values are interpreted integration interval - Three values are interpreted as min, step, max</td>
</tr>
<tr class="row-odd"><td>SymmetryOperations</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>If specified the symmetry will be applied, can be space group name, point group name, or list individual symmetries.</td>
</tr>
<tr class="row-even"><td>TemporaryDataWorkspace</td>
<td>Input</td>
<td>IMDHistoWorkspace</td>
<td>&#160;</td>
<td>An input MDHistoWorkspace used to accumulate data from multiple MDEventWorkspaces. If unspecified a blank MDHistoWorkspace will be created.</td>
</tr>
<tr class="row-odd"><td>TemporaryNormalizationWorkspace</td>
<td>Input</td>
<td>IMDHistoWorkspace</td>
<td>&#160;</td>
<td>An input MDHistoWorkspace used to accumulate normalization from multiple MDEventWorkspaces. If unspecified a blank MDHistoWorkspace will be created.</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></td>
<td><em>Mandatory</em></td>
<td>A name for the normalized output MDHistoWorkspace.</td>
</tr>
<tr class="row-odd"><td>OutputDataWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></td>
<td><em>Mandatory</em></td>
<td>A name for the output data MDHistoWorkspace.</td>
</tr>
<tr class="row-even"><td>OutputNormalizationWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></td>
<td><em>Mandatory</em></td>
<td>A name for the output normalization MDHistoWorkspace.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Starting from events in the momentum transfer space , this algorithm puts the data on a regular grid
in either reciprocal space of the sample (if <cite>RLU</cite> is selected) or in the goniometer frame,
then it normalizes to get the scattering cross section.
For diffraction data, the output workspace contains the differential cross section <span class="math">\(\frac{d\sigma}{d\Omega}\)</span>, while
for direct geometry inelastic data one obtains the double differential cross section  <span class="math">\(\frac{d^2 \sigma}{dE d\Omega}\)</span>.
One can choose any orientation for the momentum axes (to get the first axis to be <cite>[-H,H,0]</cite>, set <cite>QDimension0</cite> to <cite>-1,1,0</cite>.</p>
<p><strong>Note:</strong> In order to calculate the trajectories, the algorithm relies on finding information about detector
trajectories stored in the workspace. The algorithm <a class="reference internal" href="CropWorkspaceForMDNorm-v1.html#algm-cropworkspaceformdnorm"><span class="std std-ref">CropWorkspaceForMDNorm</span></a> must
be run <em>before</em> converting to multidimensional workspace. Optionally, in aaddition, one can recalculate the extents of the trajectories
using the <a class="reference internal" href="RecalculateTrajectoriesExtents-v1.html#algm-recalculatetrajectoriesextents"><span class="std std-ref">RecalculateTrajectoriesExtents</span></a> algorithm after convering to the
multidimensional workspace.</p>
<p>The solid angle workspace is a <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a> that contains the solid angle/efficiency of the detectors.
One can just integrate a vanadium file between some appropriate limits. For diffraction measurements, the flux workspace
is a mandatory input. It is a <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a>
that contains the indefinite integral of the incident flux. It contains one or more spectra, each of them corresponding to
detectors that have the same energy response. The algorithm <a class="reference internal" href="MDNormSCDPreprocessIncoherent-v1.html#algm-mdnormscdpreprocessincoherent"><span class="std std-ref">MDNormSCDPreprocessIncoherent</span></a> can be used to process Vanadium
data for the Solid Angle and Flux workspaces.</p>
<p>The input workspace is binned using the <a class="reference internal" href="BinMD-v1.html#algm-binmd"><span class="std std-ref">BinMD</span></a> algorithm, to account for the selected momentum
dimensions. For each dimension to be binned, we specify a name (for example <cite>Dimension0Name=’QDimension0’</cite>). For any momentum dimension
the name is one of <cite>QDimension0</cite>, <cite>QDimension1</cite>, or <cite>QDimension2</cite> along the axes specified in the algorithm. All three momentum
dimensions must be present in the parameter list of the algorithm. Any other dimension name, such as <cite>DeltaE</cite>, is optional,
and must be identical to a dimension in the input workspace. If a dimension name is present in the input workspace but not within the
parameters of this algorithm, the corresponding data will be integrated. The semnification of binning parameters is as following:</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Format</th>
<th class="head">&#160;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>minimum, stepsize, maximum</td>
<td>The dimension in the output workspace will extend
from ‘minimum’ to ‘maximum’ with bins of width
‘stepsize’.</td>
</tr>
<tr class="row-odd"><td>minimum, maximum</td>
<td>A single bin will be created between ‘minimum’ and
‘maximum’.</td>
</tr>
<tr class="row-even"><td>stepsize</td>
<td>The ‘minimum’ and ‘maximum’ are set to the dimension
limits; the workspace is not cut in this dimension.</td>
</tr>
</tbody>
</table>
<p>The binned workspace is stored in the <cite>OutputDataWorkspace</cite>.</p>
<p>Trajectories of each detector in reciprocal space are omputed, and the normalization is calculated between intersections with each
MDBox. A brief introduction to the multi-dimensional data normalization can be found <a class="reference internal" href="../concepts/MDNorm.html#mdnorm"><span class="std std-ref">here</span></a>. The
<cite>OutputNormalizationWorkspace</cite> contains the denominator of equations (2) or (3). In the <a class="reference internal" href="../concepts/MDNorm.html#mdnorm"><span class="std std-ref">normalization document</span></a>.</p>
<p>The <cite>OutputWorkspace</cite> contains the ratio of the <cite>OutputDataWorkspace</cite> and <cite>OutputNormalizationWorkspace</cite>.</p>
<p>One can accumulate multiple inputs. The correct way to do it is to add the counts together, add the normalizations
together, then divide. For user convenience, one can provide these accumulation workspaces as <cite>TemporaryDataWorkspace</cite>
and <cite>TemporaryNormalizationWorkspace</cite>.</p>
<p>There are symmetrization options for the data. To achieve this option, one can use the <cite>SymmetryOperations</cite> parameter. It can accept
a space group name, a point group name, or a list of symmetry operations. More information about symmetry operations can be found
<a class="reference internal" href="../concepts/SymmetryGroups.html#symmetry-groups"><span class="std std-ref">here</span></a> and <a class="reference internal" href="../concepts/PointAndSpaceGroups.html#point-and-space-groups"><span class="std std-ref">here</span></a></p>
<p><strong>Example - MDNorm</strong></p>
<p>For diffraction measurements a sample code is found below:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;CORELLI_29782.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;SingleCrystalDiffuseReduction_SA.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;SolidAngle&#39;</span><span class="p">)</span>
<span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;SingleCrystalDiffuseReduction_Flux.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span> <span class="s1">&#39;Flux&#39;</span><span class="p">)</span>
<span class="n">MaskDetectors</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">MaskedWorkspace</span><span class="o">=</span><span class="s1">&#39;SolidAngle&#39;</span><span class="p">)</span>
<span class="n">ConvertUnits</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="n">Target</span><span class="o">=</span><span class="s1">&#39;Momentum&#39;</span><span class="p">)</span>
<span class="n">CropWorkspaceForMDNorm</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>
                       <span class="n">XMin</span><span class="o">=</span><span class="mf">2.5</span><span class="p">,</span>
                       <span class="n">XMax</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                       <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">LoadIsawUB</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;SingleCrystalDiffuseReduction_UB.mat&#39;</span><span class="p">)</span>
<span class="n">SetGoniometer</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span><span class="n">Axis0</span><span class="o">=</span><span class="s1">&#39;BL9:Mot:Sample:Axis1,0,1,0,1&#39;</span><span class="p">)</span>
<span class="n">min_vals</span><span class="p">,</span><span class="n">max_vals</span><span class="o">=</span><span class="n">ConvertToMDMinMaxGlobal</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>
                                          <span class="n">QDimensions</span><span class="o">=</span><span class="s1">&#39;Q3D&#39;</span><span class="p">,</span>
                                          <span class="n">dEAnalysisMode</span><span class="o">=</span><span class="s1">&#39;Elastic&#39;</span><span class="p">,</span>
                                          <span class="n">Q3DFrames</span><span class="o">=</span><span class="s1">&#39;Q&#39;</span><span class="p">)</span>
<span class="n">ConvertToMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>
            <span class="n">QDimensions</span><span class="o">=</span><span class="s1">&#39;Q3D&#39;</span><span class="p">,</span>
            <span class="n">dEAnalysisMode</span><span class="o">=</span><span class="s1">&#39;Elastic&#39;</span><span class="p">,</span>
            <span class="n">Q3DFrames</span><span class="o">=</span><span class="s1">&#39;Q_sample&#39;</span><span class="p">,</span>
            <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;md&#39;</span><span class="p">,</span>
            <span class="n">MinValues</span><span class="o">=</span><span class="n">min_vals</span><span class="p">,</span>
            <span class="n">MaxValues</span><span class="o">=</span><span class="n">max_vals</span><span class="p">)</span>
<span class="n">RecalculateTrajectoriesExtents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span> <span class="s1">&#39;md&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;md&#39;</span><span class="p">)</span>

<span class="n">MDNorm</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;md&#39;</span><span class="p">,</span>
       <span class="n">SolidAngleWorkspace</span><span class="o">=</span><span class="s1">&#39;SolidAngle&#39;</span><span class="p">,</span>
       <span class="n">FluxWorkspace</span><span class="o">=</span><span class="s1">&#39;Flux&#39;</span><span class="p">,</span>
       <span class="n">QDimension0</span><span class="o">=</span><span class="s1">&#39;1,1,0&#39;</span><span class="p">,</span>
       <span class="n">QDimension1</span><span class="o">=</span><span class="s1">&#39;1,-1,0&#39;</span><span class="p">,</span>
       <span class="n">QDimension2</span><span class="o">=</span><span class="s1">&#39;0,0,1&#39;</span><span class="p">,</span>
       <span class="n">Dimension0Name</span><span class="o">=</span><span class="s1">&#39;QDimension0&#39;</span><span class="p">,</span>
       <span class="n">Dimension0Binning</span><span class="o">=</span><span class="s1">&#39;-10.0,0.1,10.0&#39;</span><span class="p">,</span>
       <span class="n">Dimension1Name</span><span class="o">=</span><span class="s1">&#39;QDimension1&#39;</span><span class="p">,</span>
       <span class="n">Dimension1Binning</span><span class="o">=</span><span class="s1">&#39;-10.0,0.1,10.0&#39;</span><span class="p">,</span>
       <span class="n">Dimension2Name</span><span class="o">=</span><span class="s1">&#39;QDimension2&#39;</span><span class="p">,</span>
       <span class="n">Dimension2Binning</span><span class="o">=</span><span class="s1">&#39;-0.1,0.1&#39;</span><span class="p">,</span>
       <span class="n">SymmetryOperations</span><span class="o">=</span><span class="s1">&#39;P 31 2 1&#39;</span><span class="p">,</span>
       <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;result&#39;</span><span class="p">,</span>
       <span class="n">OutputDataWorkspace</span><span class="o">=</span><span class="s1">&#39;dataMD&#39;</span><span class="p">,</span>
       <span class="n">OutputNormalizationWorkspace</span><span class="o">=</span><span class="s1">&#39;normMD&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The output would look like:</p>
<div class="figure">
<img alt="../_images/MDNorm_elastic_sym.png" src="../_images/MDNorm_elastic_sym.png" />
</div>
<p>Here is a sample code for inelastic data:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;HYS_13656-13658&#39;</span><span class="p">,</span><span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">)</span>
<span class="n">SetGoniometer</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="n">Axis0</span><span class="o">=</span><span class="s1">&#39;s1,0,1,0,1&#39;</span><span class="p">)</span>
<span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span>
                     <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;splboth&#39;</span><span class="p">,</span>
                     <span class="n">InformationWorkspace</span><span class="o">=</span><span class="s1">&#39;info&#39;</span><span class="p">,</span>
                     <span class="n">UnitOfTime</span><span class="o">=</span><span class="s1">&#39;Nanoseconds&#39;</span><span class="p">,</span>
                     <span class="n">LogName</span><span class="o">=</span><span class="s1">&#39;s1&#39;</span><span class="p">,</span>
                     <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
                     <span class="n">LogValueInterval</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span>
             <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="s1">&#39;splboth&#39;</span><span class="p">,</span>
             <span class="n">InformationWorkspace</span><span class="o">=</span><span class="s1">&#39;info&#39;</span><span class="p">,</span>
             <span class="n">FilterByPulseTime</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
             <span class="n">GroupWorkspaces</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
             <span class="n">OutputWorkspaceIndexedFrom1</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
             <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s1">&#39;split&#39;</span><span class="p">)</span>
<span class="n">DgsReduction</span><span class="p">(</span><span class="n">SampleInputWorkspace</span><span class="o">=</span><span class="s1">&#39;split&#39;</span><span class="p">,</span>
             <span class="n">SampleInputMonitorWorkspace</span><span class="o">=</span><span class="s1">&#39;split_1&#39;</span><span class="p">,</span>
             <span class="n">IncidentEnergyGuess</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span>
             <span class="n">SofPhiEIsDistribution</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
             <span class="n">TimeIndepBackgroundSub</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
             <span class="n">TibTofRangeStart</span><span class="o">=</span><span class="mi">10400</span><span class="p">,</span>
             <span class="n">TibTofRangeEnd</span><span class="o">=</span><span class="mi">12400</span><span class="p">,</span>
             <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;reduced&#39;</span><span class="p">)</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="s1">&#39;reduced&#39;</span><span class="p">,</span>
      <span class="n">a</span><span class="o">=</span><span class="mf">5.823</span><span class="p">,</span>
      <span class="n">b</span><span class="o">=</span><span class="mf">6.475</span><span class="p">,</span>
      <span class="n">c</span><span class="o">=</span><span class="mf">3.186</span><span class="p">,</span>
      <span class="n">u</span><span class="o">=</span><span class="s1">&#39;0,1,0&#39;</span><span class="p">,</span>
      <span class="n">v</span><span class="o">=</span><span class="s1">&#39;0,0,1&#39;</span><span class="p">)</span>
<span class="n">CropWorkspaceForMDNorm</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;reduced&#39;</span><span class="p">,</span>
                       <span class="n">XMin</span><span class="o">=-</span><span class="mi">25</span><span class="p">,</span>
                       <span class="n">XMax</span><span class="o">=</span><span class="mi">49</span><span class="p">,</span>
                       <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;reduced&#39;</span><span class="p">)</span>
<span class="n">ConvertToMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;reduced&#39;</span><span class="p">,</span>
            <span class="n">QDimensions</span><span class="o">=</span><span class="s1">&#39;Q3D&#39;</span><span class="p">,</span>
            <span class="n">Q3DFrames</span><span class="o">=</span><span class="s1">&#39;Q_sample&#39;</span><span class="p">,</span>
            <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;md&#39;</span><span class="p">,</span>
            <span class="n">MinValues</span><span class="o">=</span><span class="s1">&#39;-11,-11,-11,-25&#39;</span><span class="p">,</span>
            <span class="n">MaxValues</span><span class="o">=</span><span class="s1">&#39;11,11,11,49&#39;</span><span class="p">)</span>
<span class="n">MergeMD</span><span class="p">(</span><span class="n">InputWorkspaces</span><span class="o">=</span><span class="s1">&#39;md&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;merged&#39;</span><span class="p">)</span>
<span class="n">MDNorm</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;merged&#39;</span><span class="p">,</span>
       <span class="n">Dimension0Name</span><span class="o">=</span><span class="s1">&#39;QDimension1&#39;</span><span class="p">,</span>
       <span class="n">Dimension0Binning</span><span class="o">=</span><span class="s1">&#39;-5,0.05,5&#39;</span><span class="p">,</span>
       <span class="n">Dimension1Name</span><span class="o">=</span><span class="s1">&#39;QDimension2&#39;</span><span class="p">,</span>
       <span class="n">Dimension1Binning</span><span class="o">=</span><span class="s1">&#39;-5,0.05,5&#39;</span><span class="p">,</span>
       <span class="n">Dimension2Name</span><span class="o">=</span><span class="s1">&#39;DeltaE&#39;</span><span class="p">,</span>
       <span class="n">Dimension2Binning</span><span class="o">=</span><span class="s1">&#39;-2,2&#39;</span><span class="p">,</span>
       <span class="n">Dimension3Name</span><span class="o">=</span><span class="s1">&#39;QDimension0&#39;</span><span class="p">,</span>
       <span class="n">Dimension3Binning</span><span class="o">=</span><span class="s1">&#39;-0.5,0.5&#39;</span><span class="p">,</span>
       <span class="n">SymmetryOperations</span><span class="o">=</span><span class="s1">&#39;x,y,z;x,-y,z;x,y,-z;x,-y,-z&#39;</span><span class="p">,</span>
       <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;result&#39;</span><span class="p">,</span>
       <span class="n">OutputDataWorkspace</span><span class="o">=</span><span class="s1">&#39;dataMD&#39;</span><span class="p">,</span>
       <span class="n">OutputNormalizationWorkspace</span><span class="o">=</span><span class="s1">&#39;normMD&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>and the corresponding output:</p>
<div class="figure">
<img alt="../_images/MDNorm_inelastic_sym.png" src="../_images/MDNorm_inelastic_sym.png" />
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/MDAlgorithms/Normalisation.html">MDAlgorithms\Normalisation</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/be3e0b0ee38557d9593e311f5a2f06503b508191/Framework/MDAlgorithms/inc/MantidMDAlgorithms/MDNorm.h">MDNorm.h</a> <em>(last modified: 2020-03-25)</em></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/be3e0b0ee38557d9593e311f5a2f06503b508191/Framework/MDAlgorithms/src/MDNorm.cpp">MDNorm.cpp</a> <em>(last modified: 2020-12-21)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="MDHistoToWorkspace2D-v1.html" title="Previous Chapter: MDHistoToWorkspace2D v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; MDHistoToWork...</span>
    </a>
  </li>
  <li>
    <a href="MDNormDirectSC-v1.html" title="Next Chapter: MDNormDirectSC v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MDNormDirectSC v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2021-02-09.<br/>
    </p>
  </div>
</footer>
  </body>
</html>