<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>ReflectometrySliceEventWorkspace v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ReflectometrySumInQ v1" href="ReflectometrySumInQ-v1.html" />
    <link rel="prev" title="ReflectometryReductionOneLiveData v1" href="ReflectometryReductionOneLiveData-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="reflectometrysliceeventworkspace-v1">
<span id="algm-reflectometrysliceeventworkspace"></span><span id="algm-reflectometrysliceeventworkspace-v1"></span><h1>ReflectometrySliceEventWorkspace v1<a class="headerlink" href="#reflectometrysliceeventworkspace-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/ReflectometrySliceEventWorkspace-v1_dlg.png"><img alt="../_images/ReflectometrySliceEventWorkspace-v1_dlg.png" class="screenshot" src="../_images/ReflectometrySliceEventWorkspace-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>ReflectometrySliceEventWorkspace</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#reflectometrysliceeventworkspace" id="id5">ReflectometrySliceEventWorkspace</a></li>
<li><a class="reference internal" href="#usage" id="id6">Usage</a></li>
<li><a class="reference internal" href="#source" id="id7">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Split an input workspace into multiple slices according to time or log values</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter</span></a>, <a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>, <a class="reference internal" href="ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="2%" />
<col width="10%" />
<col width="3%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>An input Matrix workspace.</td>
</tr>
<tr class="row-odd"><td>StartTime</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>The start time, such that all events before this time are filtered out. It could be (1) relative time to run start time in unit as specified property ‘UnitOfTime’ or (2) absolute time. Absolute time takes a string in format as 1990-01-01T00:00:00, while the relative time takes integer or float.</td>
</tr>
<tr class="row-even"><td>StopTime</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>The stop time, such that all events after this time are filtered out. It could be (1) relative time to run start time in unit as specified property ‘UnitOfTime’ or (2) absolute time. Absolute time takes a string in format as 1990-01-01T00:00:00, while the relative time takes integer or float.</td>
</tr>
<tr class="row-odd"><td>TimeInterval</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Array for lengths of time intervals for splitters.  If the array is empty, then there will be one splitter created from StartTime and StopTime. If the array has one value, then all splitters will have same time intervals. If the size of the array is larger than one, then the splitters can have various time interval values.</td>
</tr>
<tr class="row-even"><td>LogName</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Name of the sample log to use to filter. For example, the pulse charge is recorded in ‘ProtonCharge’.</td>
</tr>
<tr class="row-odd"><td>MinimumLogValue</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Minimum log value for which to keep events.</td>
</tr>
<tr class="row-even"><td>MaximumLogValue</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Maximum log value for which to keep events.</td>
</tr>
<tr class="row-odd"><td>LogValueInterval</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Delta of log value to be sliced into from min log value and max log value. If not given, then only value</td>
</tr>
<tr class="row-even"><td>LogBoundary</td>
<td>Input</td>
<td>string</td>
<td>Centre</td>
<td>How to treat log values as being measured in the centre of time. There are three options, ‘Centre’, ‘Left’ and ‘Other’.  Allowed values: [‘Centre’, ‘Left’, ‘Other’]</td>
</tr>
<tr class="row-odd"><td>LogValueTolerance</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Tolerance of the log value to be included in filter.  It is used in the case to filter by multiple values.</td>
</tr>
<tr class="row-even"><td>MonitorWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Input monitor workspace</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td>WorkspaceGroup</td>
<td><em>Mandatory</em></td>
<td>Group name for the output workspace(s).</td>
</tr>
<tr class="row-even"><td>UseNewFilterAlgorithm</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>If true, use the new FilterEvents algorithm instead of FilterByTime.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reflectometrysliceeventworkspace">
<h2><a class="toc-backref" href="#id5">ReflectometrySliceEventWorkspace</a><a class="headerlink" href="#reflectometrysliceeventworkspace" title="Permalink to this headline">¶</a></h2>
<p>This algorithm slices an input workspace into one or more grouped output workspaces based on input filtering properties.</p>
<p>It uses <a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter v1</span></a> to define the way splitting should be done and exposes the relevant input properties for that algorithm. It then performs the filtering using <a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents v1</span></a>.</p>
<p>The sliced workspaces are then rebinned to histogram data and combined with the given monitor workspace, to produce a workspace suitable for input to <a class="reference internal" href="ReflectometryReductionOneAuto-v3.html#algm-reflectometryreductiononeauto"><span class="std std-ref">ReflectometryReductionOneAuto v3</span></a>. The monitors for each slice are scaled according to the percentage of <code class="docutils literal"><span class="pre">proton_charge</span></code> in that slice.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id6">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example: slice by time interval</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>
<span class="n">input_ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s2">&quot;Event&quot;</span><span class="p">,</span><span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">BinWidth</span><span class="o">=</span><span class="mi">20000</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:00:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:10:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:20:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:30:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:40:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="n">AddTimeSeriesLog</span><span class="p">(</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">Name</span><span class="o">=</span><span class="s2">&quot;proton_charge&quot;</span><span class="p">,</span> <span class="n">Time</span><span class="o">=</span><span class="s2">&quot;2010-01-01T00:50:00&quot;</span><span class="p">,</span> <span class="n">Value</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">monitor_ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">NumBanks</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">NumMonitors</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">NumEvents</span><span class="o">=</span><span class="mi">10000</span><span class="p">)</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">ReflectometrySliceEventWorkspace</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">input_ws</span><span class="p">,</span> <span class="n">MonitorWorkspace</span><span class="o">=</span><span class="n">monitor_ws</span><span class="p">,</span>
                                          <span class="n">TimeInterval</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">StartTime</span><span class="o">=</span><span class="s1">&#39;1800&#39;</span><span class="p">,</span> <span class="n">StopTime</span><span class="o">=</span><span class="s1">&#39;3300&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">())</span> <span class="o">+</span> <span class="s1">&#39; slices&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">())</span> <span class="o">+</span> <span class="s1">&#39; spectra&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Y values for first bin:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">output</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Slice &#39;</span>  <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">output</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">dataY</span><span class="p">(</span><span class="n">j</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>3 slices
5 spectra
Y values for first bin:
Slice 0
0.173684210526
0.173684210526
0.173684210526
4.0
4.0
Slice 1
0.0726315789474
0.0726315789474
0.0726315789474
4.0
4.0
Slice 2
0.0631578947368
0.0631578947368
0.0631578947368
1.0
1.0
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Reflectometry.html">Reflectometry</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id7">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/be3e0b0ee38557d9593e311f5a2f06503b508191/Framework/PythonInterface/plugins/algorithms/ReflectometrySliceEventWorkspace.py">ReflectometrySliceEventWorkspace.py</a> <em>(last modified: 2020-03-27)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ReflectometryReductionOneLiveData-v1.html" title="Previous Chapter: ReflectometryReductionOneLiveData v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Reflectometry...</span>
    </a>
  </li>
  <li>
    <a href="ReflectometrySumInQ-v1.html" title="Next Chapter: ReflectometrySumInQ v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Reflectometry... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2021-02-09.<br/>
    </p>
  </div>
</footer>
  </body>
</html>