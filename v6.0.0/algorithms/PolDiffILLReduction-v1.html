<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>PolDiffILLReduction v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PolarizationCorrectionFredrikze v1" href="PolarizationCorrectionFredrikze-v1.html" />
    <link rel="prev" title="PoissonErrors v1" href="PoissonErrors-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.0</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="poldiffillreduction-v1">
<span id="algm-poldiffillreduction"></span><span id="algm-poldiffillreduction-v1"></span><h1>PolDiffILLReduction v1<a class="headerlink" href="#poldiffillreduction-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/PolDiffILLReduction-v1_dlg.png"><img alt="../_images/PolDiffILLReduction-v1_dlg.png" class="screenshot" src="../_images/PolDiffILLReduction-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>PolDiffILLReduction</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a></li>
<li><a class="reference internal" href="#processas" id="id6">ProcessAs</a><ul>
<li><a class="reference internal" href="#sampleandenvironmentproperties" id="id7">SampleAndEnvironmentProperties</a></li>
<li><a class="reference internal" href="#workflows" id="id8">Workflows</a></li>
<li><a class="reference internal" href="#absorber-transmission" id="id9">Absorber transmission</a></li>
<li><a class="reference internal" href="#beam" id="id10">Beam</a></li>
<li><a class="reference internal" href="#transmission" id="id11">Transmission</a></li>
<li><a class="reference internal" href="#container-absorber" id="id12">Container/Absorber</a></li>
<li><a class="reference internal" href="#quartz" id="id13">Quartz</a></li>
<li><a class="reference internal" href="#reference" id="id14">Reference</a></li>
<li><a class="reference internal" href="#sample" id="id15">Sample</a></li>
<li><a class="reference internal" href="#full-treatment" id="id16">Full Treatment</a></li>
</ul>
</li>
<li><a class="reference internal" href="#source" id="id17">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Performs polarized diffraction and spectroscopy data reduction for the D7 instrument at the ILL.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="D7YIGPositionCalibration-v1.html#algm-d7yigpositioncalibration"><span class="std std-ref">D7YIGPositionCalibration</span></a>, <a class="reference internal" href="D7AbsoluteCrossSections-v1.html#algm-d7absolutecrosssections"><span class="std std-ref">D7AbsoluteCrossSections</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="3%" />
<col width="17%" />
<col width="5%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Run</td>
<td>Input</td>
<td>list of str lists</td>
<td><em>Mandatory</em></td>
<td>File path of run(s). Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>ProcessAs</td>
<td>Input</td>
<td>string</td>
<td>Sample</td>
<td>Choose the process type. Allowed values: [‘Absorber’, ‘EmptyBeam’, ‘BeamWithAbsorber’, ‘Transmission’, ‘Container’, ‘Quartz’, ‘Vanadium’, ‘Sample’]</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td>WorkspaceGroup</td>
<td><em>Mandatory</em></td>
<td>The output workspace based on the value of ProcessAs.</td>
</tr>
<tr class="row-odd"><td>AbsorberInputWorkspace</td>
<td>Input</td>
<td>WorkspaceGroup</td>
<td>&#160;</td>
<td>The name of the absorber workspace group.</td>
</tr>
<tr class="row-even"><td>BeamInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td>&#160;</td>
<td>The name of the empty beam input workspace.</td>
</tr>
<tr class="row-odd"><td>AbsorberTransmissionInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td>&#160;</td>
<td>The name of the absorber transmission input workspace.</td>
</tr>
<tr class="row-even"><td>TransmissionInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td>&#160;</td>
<td>The name of the transmission input workspace.</td>
</tr>
<tr class="row-odd"><td>ContainerInputWorkspace</td>
<td>Input</td>
<td>WorkspaceGroup</td>
<td>&#160;</td>
<td>The name of the container workspace.</td>
</tr>
<tr class="row-even"><td>QuartzInputWorkspace</td>
<td>Input</td>
<td>WorkspaceGroup</td>
<td>&#160;</td>
<td>The name of the polarisation efficiency correction workspace.</td>
</tr>
<tr class="row-odd"><td>OutputTreatment</td>
<td>Input</td>
<td>string</td>
<td>Individual</td>
<td>Which treatment of the provided scan should be used to create output. Allowed values: [‘Individual’, ‘Average’, ‘Sum’]</td>
</tr>
<tr class="row-even"><td>ClearCache</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Whether or not to clear the cache of intermediate workspaces.</td>
</tr>
<tr class="row-odd"><td>SelfAttenuationMethod</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>Which approach to calculate (or not) the self-attenuation correction factors to be used. Allowed values: [‘None’, ‘Numerical’, ‘MonteCarlo’, ‘User’]</td>
</tr>
<tr class="row-even"><td>SampleGeometry</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>Sample geometry for self-attenuation correction to be applied. Allowed values: [‘None’, ‘FlatPlate’, ‘Cylinder’, ‘Annulus’, ‘Custom’]</td>
</tr>
<tr class="row-odd"><td>SampleAndEnvironmentProperties</td>
<td>Input</td>
<td>Dictionary</td>
<td>dict()</td>
<td>Dictionary for the information about sample and its environment.</td>
</tr>
<tr class="row-even"><td>SampleSelfAttenuationFactors</td>
<td>Input</td>
<td>WorkspaceGroup</td>
<td>&#160;</td>
<td>The name of the workspace group containing self-attenuation factors of the sample.</td>
</tr>
<tr class="row-odd"><td>ScatteringAngleBinSize</td>
<td>Input</td>
<td>number</td>
<td>0.5</td>
<td>Scattering angle bin size in degrees used for expressing scan data on a single TwoTheta axis.</td>
</tr>
<tr class="row-even"><td>InstrumentCalibration</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>The path to the calibrated Instrument Parameter File. Allowed extensions: [‘.xml’]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm performs polarised diffraction reduction for the D7 instrument at the ILL.
With each call, this algorithm processes one type of data which is a part of the whole experiment.
The logic is resolved by the property <strong>ProcessAs</strong>, which governs the reduction steps based on the requested type.
It can be one of the 8: absorber, empty beam, beam-with-absorber, transmission, container, quartz, vanadium, and sample.
The full data treatment of the complete experiment should be build up as a chain with multiple calls of this algorithm over various types of acquisitions.
The sequence should be logical, typically as enumerated above, since the later processes need the outputs of earlier processes as input.
The common mandatory input is a run file (numor), or a list of them. In case a list is provided, coming for example from a scan over twoTheta angle,
the data is treated individually up to the point of background subtraction, and then can be either left as a list, each detector can averaged over the scan,
or all data from the scan can summed.</p>
<p>Most of the corrections, such as background subtraction or polarisation correction, are optional and their inclusion depends on the provided inputs and set flags.
However, it is mandatory to provide basic information about the vanadium and sample, such as mass, chemical formula, and either density or number density.</p>
<p>The common mandatory output is a workspace, but up to which step it is processed, depends on <strong>ProcessAs</strong>.</p>
</div>
<div class="section" id="processas">
<h2><a class="toc-backref" href="#id6">ProcessAs</a><a class="headerlink" href="#processas" title="Permalink to this headline">¶</a></h2>
<p>Different input properties can be specified depending on the value of <strong>ProcessAs</strong>, as summarized in the table:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="38%" />
<col width="44%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">ProcessAs</th>
<th class="head">Input Workspace Properties</th>
<th class="head">Other Input Properties</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>BeamWithAbsorber</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>EmptyBeam</td>
<td><ul class="first last simple">
<li>AbsorberTransmissionInputWorkspace</li>
</ul>
</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Transmission</td>
<td><ul class="first last simple">
<li>AbsorberTransmissionInputWorkspace</li>
<li><strong>BeamInputWorkspace</strong></li>
</ul>
</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Absorber</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>Container</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>Quartz</td>
<td><ul class="first last simple">
<li>AbsorberInputWorkspace</li>
<li>ContainerInputWorkspace</li>
<li><strong>TransmissionInputWorkspace</strong></li>
</ul>
</td>
<td><ul class="first last simple">
<li>OutputTreatment</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>Vanadium</td>
<td><ul class="first last simple">
<li>AbsorberInputWorkspace</li>
<li>ContainerInputWorkspace</li>
<li>TransmissionInputWorkspace</li>
<li>QuartzInputWorkspace</li>
</ul>
</td>
<td><ul class="first last simple">
<li>SampleGeometry</li>
<li><strong>SampleAndEnvironmentProperties</strong></li>
<li>OutputTreatment</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Sample</td>
<td><ul class="first last simple">
<li>AbsorberInputWorkspace</li>
<li>ContainerInputWorkspace</li>
<li>TransmissionInputWorkspace</li>
<li>QuartzInputWorkspace</li>
</ul>
</td>
<td><ul class="first last simple">
<li>SampleGeometry</li>
<li><strong>SampleAndEnvironmentProperties</strong></li>
<li>OutputTreatment</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>All the input workspace properties above are optional, unless bolded.
For example, if processing as sample, if a container and absorber inputs are specified, subtraction will be performed, if not, the step will be skipped.
The rare exceptions are when processing as transmission, when beam input workspace is mandatory, and to calculate polarising efficiencies,
where input from transmission is indispensable.</p>
<div class="section" id="sampleandenvironmentproperties">
<h3><a class="toc-backref" href="#id7">SampleAndEnvironmentProperties</a><a class="headerlink" href="#sampleandenvironmentproperties" title="Permalink to this headline">¶</a></h3>
<p>This property is a dictionary containing all of the information about the sample and its environment. This information is used in self-attenuation
calculations and in normalisation.</p>
<p>The complete list of keys can is summarised below:</p>
<p>Sample-only keys:</p>
<ul class="simple">
<li><em>SampleMass</em></li>
<li><em>FormulaUnits</em></li>
<li><em>FormulaUnitMass</em></li>
<li><em>SampleChemicalFormula</em></li>
<li><em>SampleDensity</em></li>
<li><em>Height</em></li>
</ul>
<p>Container-only keys:</p>
<ul class="simple">
<li><em>ContainerChemicalFormula</em></li>
<li><em>ContainerDensity</em></li>
</ul>
<p>Beam-only keys:</p>
<ul class="simple">
<li><em>BeamHeight</em></li>
<li><em>BeamWidth</em></li>
</ul>
<p>Then, depending on the chosen sample geometry, additional parameters need to be defined:</p>
<ul class="simple">
<li>For FlatPlate:<ul>
<li><em>SampleThickness</em></li>
<li><em>SampleWidth</em></li>
<li><em>SampleCenter</em></li>
<li><em>SampleAngle</em></li>
<li><em>ContainerFrontThickness</em></li>
<li><em>ContainerBackThickness</em></li>
</ul>
</li>
<li>For Cylinder:<ul>
<li><em>SampleRadius</em></li>
<li><em>ContainerRadius</em></li>
</ul>
</li>
<li>For Annulus:<ul>
<li><em>SampleInnerRadius</em></li>
<li><em>SampleOuterRadius</em></li>
<li><em>ContainerInnerRadius</em></li>
<li><em>ContainerOuterRadius</em></li>
</ul>
</li>
</ul>
<p>Optional keys:</p>
<ul class="simple">
<li><em>InitialEnergy</em> - if not provided, the value will be calculated from the wavelength in the SampleLogs</li>
<li><em>NMoles</em> - if not provided, the value will be calculated based on the <em>SampleMass</em> and <em>FormulaUnitMass</em></li>
</ul>
</div>
<div class="section" id="workflows">
<h3><a class="toc-backref" href="#id8">Workflows</a><a class="headerlink" href="#workflows" title="Permalink to this headline">¶</a></h3>
<p>In the flowcharts below the yellow ovals represent the inputs, the grey parallelograms are the outputs for each process type.</p>
</div>
<div class="section" id="absorber-transmission">
<h3><a class="toc-backref" href="#id9">Absorber transmission</a><a class="headerlink" href="#absorber-transmission" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/PolDiffILLReduction-v1_absorber_wkflw.png" src="../_images/PolDiffILLReduction-v1_absorber_wkflw.png" />
</div>
<div class="section" id="beam">
<h3><a class="toc-backref" href="#id10">Beam</a><a class="headerlink" href="#beam" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/PolDiffILLReduction-v1_beam_wkflw.png" src="../_images/PolDiffILLReduction-v1_beam_wkflw.png" />
</div>
<div class="section" id="transmission">
<h3><a class="toc-backref" href="#id11">Transmission</a><a class="headerlink" href="#transmission" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/PolDiffILLReduction-v1_transmission_wkflw.png" src="../_images/PolDiffILLReduction-v1_transmission_wkflw.png" />
</div>
<div class="section" id="container-absorber">
<h3><a class="toc-backref" href="#id12">Container/Absorber</a><a class="headerlink" href="#container-absorber" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/PolDiffILLReduction-v1_container_wkflw.png" src="../_images/PolDiffILLReduction-v1_container_wkflw.png" />
</div>
<div class="section" id="quartz">
<h3><a class="toc-backref" href="#id13">Quartz</a><a class="headerlink" href="#quartz" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/PolDiffILLReduction-v1_quartz_wkflw.png" src="../_images/PolDiffILLReduction-v1_quartz_wkflw.png" />
</div>
<div class="section" id="reference">
<h3><a class="toc-backref" href="#id14">Reference</a><a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/PolDiffILLReduction-v1_vanadium_wkflw.png" src="../_images/PolDiffILLReduction-v1_vanadium_wkflw.png" />
</div>
<div class="section" id="sample">
<h3><a class="toc-backref" href="#id15">Sample</a><a class="headerlink" href="#sample" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/PolDiffILLReduction-v1_sample_wkflw.png" src="../_images/PolDiffILLReduction-v1_sample_wkflw.png" />
</div>
<div class="section" id="full-treatment">
<h3><a class="toc-backref" href="#id16">Full Treatment</a><a class="headerlink" href="#full-treatment" title="Permalink to this headline">¶</a></h3>
<p>Full treatment is built by stacking up unary reductions with corresponding <strong>ProcessAs</strong>. The diagram below illustrates the flow of processing.
Letters denote beam with absorber (AT), beam (B), transmission (T), absorber (A), container (C), quartz (Q), vanadium (V), sample (S).
AT is processed first, and passed to all the other processes.
B takes only AT as optional input, and the output of B is needed by all transmisison calculations.
T takes AT and B as inputs, and the calculated transmission is used by Q, V, and S respectively.
C and A are supplied to Q, V, and S respectively.
Q takes A, C, its T, and the output is provided to V and S.
V takes A, C, its T, and Q as inputs and the output can used to normalise S
S takes A, C, its T, as well as Q as inputs.
The output of S is reduced sample in desired units.</p>
<img alt="../_images/PolDiffILLReduction-v1_all_wkflw.png" src="../_images/PolDiffILLReduction-v1_all_wkflw.png" />
<p>This example below performs a complete reduction for D7 data.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For transmission calculation, the beam run and the transmission run have to be recorded at the same instrument configuration.
For container subtraction, the container and the sample run have to be recorded at the same configuration.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In Mantid this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - full treatment of a sample</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">vanadium_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SampleMass&#39;</span><span class="p">:</span><span class="mf">8.54</span><span class="p">,</span><span class="s1">&#39;SampleDensity&#39;</span><span class="p">:</span><span class="mf">6.0</span><span class="p">,</span><span class="s1">&#39;FormulaUnits&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;FormulaUnitMass&#39;</span><span class="p">:</span><span class="mf">50.94</span><span class="p">}</span>

<span class="n">sample_dictionary</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;SampleMass&#39;</span><span class="p">:</span><span class="mf">2.932</span><span class="p">,</span><span class="s1">&#39;SampleDensity&#39;</span><span class="p">:</span><span class="mf">2.0</span><span class="p">,</span><span class="s1">&#39;FormulaUnits&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;FormulaUnitMass&#39;</span><span class="p">:</span><span class="mf">182.56</span><span class="p">}</span>

<span class="c1"># Beam with cadmium absorber, used for transmission</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
    <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;396991&#39;</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;cadmium_ws&#39;</span><span class="p">,</span>
    <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;BeamWithAbsorber&#39;</span>
<span class="p">)</span>
<span class="c1"># Beam measurement for transmisison</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
    <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;396983&#39;</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;beam_ws&#39;</span><span class="p">,</span>
    <span class="n">AbsorberTransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;cadmium_ws_1&#39;</span><span class="p">,</span>
    <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;EmptyBeam&#39;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cadmium absorber transmission is </span><span class="si">{0:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;cadmium_ws_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;beam_ws_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Quartz transmission</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
    <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;396985&#39;</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;quartz_transmission&#39;</span><span class="p">,</span>
    <span class="n">AbsorberTransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;cadmium_ws_1&#39;</span><span class="p">,</span>
    <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;beam_ws_1&#39;</span><span class="p">,</span>
   <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Transmission&#39;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Quartz transmission is </span><span class="si">{0:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;quartz_transmission_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Empty container</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
    <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;396917&#39;</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;container_ws&#39;</span><span class="p">,</span>
    <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Container&#39;</span>
<span class="p">)</span>

<span class="c1"># Absorber</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
    <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;396928&#39;</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;absorber_ws&#39;</span><span class="p">,</span>
    <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Absorber&#39;</span>
<span class="p">)</span>

<span class="c1"># Polarisation correction</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
    <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;396939&#39;</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;pol_corrections&#39;</span><span class="p">,</span>
    <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;absorber_ws&#39;</span><span class="p">,</span>
    <span class="n">ContainerInputWorkspace</span><span class="o">=</span><span class="s1">&#39;container_ws&#39;</span><span class="p">,</span>
    <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;quartz_transmission_1&#39;</span><span class="p">,</span>
    <span class="n">OutputTreatment</span><span class="o">=</span><span class="s1">&#39;Average&#39;</span><span class="p">,</span>
    <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Quartz&#39;</span>
<span class="p">)</span>

<span class="c1"># Vanadium transmission</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
    <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;396990&#39;</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;vanadium_transmission&#39;</span><span class="p">,</span>
    <span class="n">AbsorberTransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;cadmium_ws_1&#39;</span><span class="p">,</span>
    <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;beam_ws_1&#39;</span><span class="p">,</span>
    <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Transmission&#39;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Vanadium transmission is </span><span class="si">{0:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;vanadium_transmission_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Vanadium reduction</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
    <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;396993&#39;</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;vanadium_ws&#39;</span><span class="p">,</span>
    <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;absorber_ws&#39;</span><span class="p">,</span>
    <span class="n">ContainerInputWorkspace</span><span class="o">=</span><span class="s1">&#39;container_ws&#39;</span><span class="p">,</span>
    <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;vanadium_transmission_1&#39;</span><span class="p">,</span>
    <span class="n">QuartzInputWorkspace</span><span class="o">=</span><span class="s1">&#39;pol_corrections&#39;</span><span class="p">,</span>
    <span class="n">OutputTreatment</span><span class="o">=</span><span class="s1">&#39;Sum&#39;</span><span class="p">,</span>
    <span class="n">SampleGeometry</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span>
    <span class="n">SampleAndEnvironmentProperties</span><span class="o">=</span><span class="n">vanadium_dictionary</span><span class="p">,</span>
    <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Vanadium&#39;</span>
<span class="p">)</span>

<span class="c1"># Sample transmission</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
   <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;396986&#39;</span><span class="p">,</span>
   <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_transmission&#39;</span><span class="p">,</span>
   <span class="n">AbsorberTransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;cadmium_ws_1&#39;</span><span class="p">,</span>
   <span class="n">BeamInputWorkspace</span><span class="o">=</span><span class="s1">&#39;beam_ws_1&#39;</span><span class="p">,</span>
   <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Transmission&#39;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Sample transmission is </span><span class="si">{0:.3f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s1">&#39;sample_transmission_1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>

<span class="c1"># Sample reduction</span>
<span class="n">PolDiffILLReduction</span><span class="p">(</span>
    <span class="n">Run</span><span class="o">=</span><span class="s1">&#39;397004&#39;</span><span class="p">,</span>
    <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_ws&#39;</span><span class="p">,</span>
    <span class="n">AbsorberInputWorkspace</span><span class="o">=</span><span class="s1">&#39;absorber_ws&#39;</span><span class="p">,</span>
    <span class="n">ContainerInputWorkspace</span><span class="o">=</span><span class="s1">&#39;container_ws&#39;</span><span class="p">,</span>
    <span class="n">TransmissionInputWorkspace</span><span class="o">=</span><span class="s1">&#39;sample_transmission_1&#39;</span><span class="p">,</span>
    <span class="n">QuartzInputWorkspace</span><span class="o">=</span><span class="s1">&#39;pol_corrections&#39;</span><span class="p">,</span>
    <span class="n">OutputTreatment</span><span class="o">=</span><span class="s1">&#39;Individual&#39;</span><span class="p">,</span>
    <span class="n">SampleGeometry</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span>
    <span class="n">SampleAndEnvironmentProperties</span><span class="o">=</span><span class="n">sample_dictionary</span><span class="p">,</span>
    <span class="n">ProcessAs</span><span class="o">=</span><span class="s1">&#39;Sample&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Cadmium absorber transmission is 0.011
Quartz transmission is 0.700
Vanadium transmission is 0.886
Sample transmission is 0.962
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/ILL/Diffraction.html">ILL\Diffraction</a></p>
</div>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id17">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/be3e0b0ee38557d9593e311f5a2f06503b508191/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/PolDiffILLReduction.py">PolDiffILLReduction.py</a> <em>(last modified: 2021-01-05)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PoissonErrors-v1.html" title="Previous Chapter: PoissonErrors v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; PoissonErrors v1</span>
    </a>
  </li>
  <li>
    <a href="PolarizationCorrectionFredrikze-v1.html" title="Next Chapter: PolarizationCorrectionFredrikze v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">PolarizationC... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2021-02-09.<br/>
    </p>
  </div>
</footer>
  </body>
</html>