<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>GoniometerAnglesFromPhiRotation v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.9.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="GreaterThanMD v1" href="GreaterThanMD-v1.html" />
    <link rel="prev" title="GetTimeSeriesLogInformation v1" href="GetTimeSeriesLogInformation-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="goniometeranglesfromphirotation-v1">
<span id="algm-goniometeranglesfromphirotation"></span><span id="algm-goniometeranglesfromphirotation-v1"></span><h1>GoniometerAnglesFromPhiRotation v1<a class="headerlink" href="#goniometeranglesfromphirotation-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/GoniometerAnglesFromPhiRotation-v1_dlg.png"><img alt="../_images/GoniometerAnglesFromPhiRotation-v1_dlg.png" class="screenshot" src="../_images/GoniometerAnglesFromPhiRotation-v1_dlg.png" style="width: 256px;" /></a>
<p class="caption"><strong>GoniometerAnglesFromPhiRotation</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>The 2nd PeaksWorkspace is set up with the correct sample orientations and UB matrices</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="6%" />
<col width="13%" />
<col width="10%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>PeaksWorkspace1</td>
<td>Input</td>
<td>PeaksWorkspace</td>
<td><em>Mandatory</em></td>
<td>Input Peaks Workspace for Run 1</td>
</tr>
<tr class="row-odd"><td>PeaksWorkspace2</td>
<td>InOut</td>
<td>PeaksWorkspace</td>
<td><em>Mandatory</em></td>
<td>Input Peaks Workspace for Run 2</td>
</tr>
<tr class="row-even"><td>Tolerance</td>
<td>Input</td>
<td>number</td>
<td>0.12</td>
<td>Integer offset for h,k,and l values to be considered valid.(def=.12)</td>
</tr>
<tr class="row-odd"><td>MIND</td>
<td>Input</td>
<td>number</td>
<td>-1</td>
<td>Minimium d-spacing to consider,(def=-1)</td>
</tr>
<tr class="row-even"><td>MAXD</td>
<td>Input</td>
<td>number</td>
<td>-1</td>
<td>Maximum d-spacing to consider,(def=-1)</td>
</tr>
<tr class="row-odd"><td>Run1Phi</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Phi for Run 1(def=0.0)</td>
</tr>
<tr class="row-even"><td>Phi2</td>
<td>InOut</td>
<td>number</td>
<td>0</td>
<td>Phi angle for Run2(def=0.0)</td>
</tr>
<tr class="row-odd"><td>Chi2</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Chi angle for Run2</td>
</tr>
<tr class="row-even"><td>Omega2</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Omega angle for Run2</td>
</tr>
<tr class="row-odd"><td>NIndexed</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Number peaks indexed</td>
</tr>
<tr class="row-even"><td>AvErrIndex</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Average abs offset from integer values for indexed peaks</td>
</tr>
<tr class="row-odd"><td>AvErrAll</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Average abs offset from integer values for all peaks</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm is used for finding Goniometer angles when instrument
readings are basically unknown. The inputs are two PeaksWorkspaces
corresponding to sample orientations of the SAME crystal that differ
only in their phi rotation.</p>
<p>If the phi angles are known, this algorithm attempts to find the common
chi and omega rotations.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Load Peaks found in SXD23767.raw</span>
<span class="n">ws1</span> <span class="o">=</span><span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;SXD23767.peaks&#39;</span><span class="p">)</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">ws1</span><span class="o">.</span><span class="n">clone</span><span class="p">()</span>

<span class="c">#Set orientated lattice</span>
<span class="n">ublist</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mf">0.06452276</span><span class="p">,</span>  <span class="mf">0.2478114</span><span class="p">,</span>  <span class="o">-</span><span class="mf">0.23742194</span><span class="p">,</span> <span class="mf">0.29161678</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.00914316</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.12523779</span><span class="p">,</span> <span class="mf">0.06958942</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1802702</span><span class="p">,</span>  <span class="o">-</span><span class="mf">0.14649001</span><span class="p">]</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">ws1</span><span class="p">,</span><span class="n">UB</span><span class="o">=</span><span class="n">ublist</span><span class="p">)</span>

<span class="c"># Run Algorithm</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">GoniometerAnglesFromPhiRotation</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span><span class="n">ws2</span><span class="p">,</span><span class="n">Tolerance</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">MIND</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">MAXD</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;Chi: </span><span class="si">%.1f</span><span class="s">, Omega: </span><span class="si">%.1f</span><span class="s">, Indexed: </span><span class="si">%i</span><span class="s">, AvErrIndex: </span><span class="si">%.4f</span><span class="s"> AvErrAll: </span><span class="si">%.4f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span>  <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Chi: 90.0, Omega: 90.0, Indexed: 300, AvErrIndex: 0.2114 AvErrAll: 0.2114
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Crystal/Goniometer.html">Crystal\Goniometer</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/855d87d02cc81b30296c0eae91fc76b4b143c405/Framework/Crystal/src/GoniometerAnglesFromPhiRotation.cpp">GoniometerAnglesFromPhiRotation.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/855d87d02cc81b30296c0eae91fc76b4b143c405/Framework/Crystal/inc/MantidCrystal/GoniometerAnglesFromPhiRotation.h">GoniometerAnglesFromPhiRotation.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="GetTimeSeriesLogInformation-v1.html" title="Previous Chapter: GetTimeSeriesLogInformation v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; GetTimeSeriesLog...</span>
    </a>
  </li>
  <li>
    <a href="GreaterThanMD-v1.html" title="Next Chapter: GreaterThanMD v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">GreaterThanMD v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>