<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ReflectometryReductionOneAuto v2</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.9.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="Regroup v1" href="Regroup-v1.html" />
    <link rel="prev" title="ReflectometryReductionOneAuto v1" href="ReflectometryReductionOneAuto-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.9</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="reflectometryreductiononeauto-v2">
<span id="algm-reflectometryreductiononeauto"></span><span id="algm-reflectometryreductiononeauto-v2"></span><h1>ReflectometryReductionOneAuto v2<a class="headerlink" href="#reflectometryreductiononeauto-v2" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/ReflectometryReductionOneAuto-v2_dlg.png"><img alt="../_images/ReflectometryReductionOneAuto-v2_dlg.png" class="screenshot" src="../_images/ReflectometryReductionOneAuto-v2_dlg.png" style="width: 297px;" /></a>
<p class="caption"><strong>ReflectometryReductionOneAuto</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#workspace-groups" id="id4">Workspace Groups</a><ul>
<li><a class="reference internal" href="#polarization-analysis-off" id="id5">Polarization Analysis Off</a></li>
<li><a class="reference internal" href="#polarization-analysis-on" id="id6">Polarization Analysis On</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#previous-versions" id="id7">Previous Versions</a></li>
<li><a class="reference internal" href="#usage" id="id8">Usage</a></li>
<li><a class="reference internal" href="#source" id="id9">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Reduces a single TOF/Lambda reflectometry run into a mod Q vs I/I0 workspace attempting to pick instrument parameters for missing properties</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="2%" />
<col width="12%" />
<col width="6%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Input run in TOF or wavelength</td>
</tr>
<tr class="row-odd"><td>AnalysisMode</td>
<td>Input</td>
<td>string</td>
<td>PointDetectorAnalysis</td>
<td>Analysis mode. This property is only used when ProcessingInstructions is not set. Allowed values: [&#8216;PointDetectorAnalysis&#8217;, &#8216;MultiDetectorAnalysis&#8217;]</td>
</tr>
<tr class="row-even"><td>ProcessingInstructions</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Grouping pattern of workspace indices to yield only the detectors of interest. See GroupDetectors for syntax.</td>
</tr>
<tr class="row-odd"><td>ThetaIn</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Angle in degrees</td>
</tr>
<tr class="row-even"><td>WavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength Min in angstroms</td>
</tr>
<tr class="row-odd"><td>WavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength Max in angstroms</td>
</tr>
<tr class="row-even"><td>RegionOfDirectBeam</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>Indices of the spectra a pair (lower, upper) that mark the ranges that correspond to the direct beam in multi-detector mode.</td>
</tr>
<tr class="row-odd"><td>I0MonitorIndex</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>I0 monitor workspace index</td>
</tr>
<tr class="row-even"><td>MonitorBackgroundWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength minimum for monitor background subtraction in angstroms.</td>
</tr>
<tr class="row-odd"><td>MonitorBackgroundWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength maximum for monitor background subtraction in angstroms.</td>
</tr>
<tr class="row-even"><td>MonitorIntegrationWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength minimum for integration in angstroms.</td>
</tr>
<tr class="row-odd"><td>MonitorIntegrationWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength maximum for integration in angstroms.</td>
</tr>
<tr class="row-even"><td>NormalizeByIntegratedMonitors</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Normalize by dividing by the integrated monitors.</td>
</tr>
<tr class="row-odd"><td>FirstTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>First transmission run, or the low wavelength transmission run if SecondTransmissionRun is also provided.</td>
</tr>
<tr class="row-even"><td>SecondTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Second, high wavelength transmission run. Optional. Causes the FirstTransmissionRun to be treated as the low wavelength transmission run.</td>
</tr>
<tr class="row-odd"><td>Params</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>A comma separated list of first bin boundary, width, last bin boundary. These parameters are used for stitching together transmission runs. Values are in wavelength (angstroms). This input is only needed if a SecondTransmission run is provided.</td>
</tr>
<tr class="row-even"><td>StartOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Start wavelength for stitching transmission runs together. Only used if a second transmission run is provided.</td>
</tr>
<tr class="row-odd"><td>EndOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>End wavelength (angstroms) for stitching transmission runs together. Only used if a second transmission run is provided.</td>
</tr>
<tr class="row-even"><td>StrictSpectrumChecking</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Enforces spectrum number checking prior to normalization by transmission workspace. Applies to input workspace and transmission workspace.</td>
</tr>
<tr class="row-odd"><td>CorrectionAlgorithm</td>
<td>Input</td>
<td>string</td>
<td>AutoDetect</td>
<td>The type of correction to perform. Allowed values: [&#8216;None&#8217;, &#8216;AutoDetect&#8217;, &#8216;PolynomialCorrection&#8217;, &#8216;ExponentialCorrection&#8217;]</td>
</tr>
<tr class="row-even"><td>Polynomial</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Coefficients to be passed to the PolynomialCorrection algorithm.</td>
</tr>
<tr class="row-odd"><td>C0</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>C0 value to be passed to the ExponentialCorrection algorithm.</td>
</tr>
<tr class="row-even"><td>C1</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>C1 value to be passed to the ExponentialCorrection algorithm.</td>
</tr>
<tr class="row-odd"><td>MomentumTransferMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Minimum Q value in IvsQ Workspace. Used for Rebinning the IvsQ Workspace</td>
</tr>
<tr class="row-even"><td>MomentumTransferStep</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Resolution value in IvsQ Workspace. Used for Rebinning the IvsQ Workspace. This value will be made minus to apply logarithmic rebinning. If you wish to have linear bin-widths then please provide a negative value.</td>
</tr>
<tr class="row-odd"><td>MomentumTransferMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Maximum Q value in IvsQ Workspace. Used for Rebinning the IvsQ Workspace</td>
</tr>
<tr class="row-even"><td>ScaleFactor</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Factor you wish to scale Q workspace by.</td>
</tr>
<tr class="row-odd"><td>PolarizationAnalysis</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>Polarization analysis mode. Allowed values: [&#8216;None&#8217;, &#8216;PA&#8217;, &#8216;PNR&#8217;]</td>
</tr>
<tr class="row-even"><td>CPp</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Effective polarizing power of the polarizing system. Expressed as a ratio 0 &lt; Pp &lt; 1</td>
</tr>
<tr class="row-odd"><td>CAp</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Effective polarizing power of the analyzing system. Expressed as a ratio 0 &lt; Ap &lt; 1</td>
</tr>
<tr class="row-even"><td>CRho</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Ratio of efficiencies of polarizer spin-down to polarizer spin-up. This is characteristic of the polarizer flipper. Values are constants for each term in a polynomial expression.</td>
</tr>
<tr class="row-odd"><td>CAlpha</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Ratio of efficiencies of analyzer spin-down to analyzer spin-up. This is characteristic of the analyzer flipper. Values are factors for each term in a polynomial expression.</td>
</tr>
<tr class="row-even"><td>OutputWorkspaceBinned</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output workspace in Q (rebinned workspace)</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output workspace in Q (native binning)</td>
</tr>
<tr class="row-even"><td>OutputWorkspaceWavelength</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output workspace in wavelength</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm is a facade over <a class="reference internal" href="ReflectometryReductionOne-v2.html#algm-reflectometryreductionone"><em>ReflectometryReductionOne v2</em></a> (see <a class="reference internal" href="ReflectometryReductionOne-v2.html#algm-reflectometryreductionone"><em>ReflectometryReductionOne v2</em></a>
for more information on the wrapped algorithm). It optionally corrects the detector position and then pulls numeric
parameters out of the instrument parameter file where possible. These automatically applied defaults
can be overriden by providing your own values. In addition, it outputs a rebinned workspace in Q, and it optionally
performs polarization analysis if the input workspace is a workspace group.</p>
<p>First, if <tt class="docutils literal"><span class="pre">ThetaIn</span></tt> is given the algorithm will try to correct the detector position. For this, it uses
<tt class="docutils literal"><span class="pre">ProcessingInstructions</span></tt>, which corresponds to the grouping pattern of workspace indices that define the
detectors of interest. Only the detectors of interest will be corrected, the rest of the instrument components
will remain in the original position. Note that when <tt class="docutils literal"><span class="pre">ProcessingInstructions</span></tt> is not set, its value
is inferred from other properties, depending on the value of <tt class="docutils literal"><span class="pre">AnalysisMode</span></tt>:</p>
<ul class="simple">
<li>If <tt class="docutils literal"><span class="pre">AnalysisMode</span> <span class="pre">=</span> <span class="pre">PointDetectorAnalaysis</span></tt> the algorithm will search for <tt class="docutils literal"><span class="pre">PointDetectorStart</span></tt> and <tt class="docutils literal"><span class="pre">PointDetectorStep</span></tt> in the parameter file, and <tt class="docutils literal"><span class="pre">ProcessingInstructions</span></tt> will be set to <tt class="docutils literal"><span class="pre">PointDetectorStart:PointDetectorEnd</span></tt>.</li>
<li>If <tt class="docutils literal"><span class="pre">AnalysisMode</span> <span class="pre">=</span> <span class="pre">MultiDetectorAnalaysis</span></tt> the algorithm will search for <tt class="docutils literal"><span class="pre">MultiDetectorStart</span></tt> in the parameter file and all of the spectra from this value onwards will be used.</li>
</ul>
<p>Note that ProcessingInstructions are workspace indices, not detector IDs. The first few workspaces may correspond
to monitors, rather than detectors of interest. For the syntax of this property, see <a class="reference internal" href="GroupDetectors-v2.html#algm-groupdetectors"><em>GroupDetectors v2</em></a>.</p>
<p>Once the algorithm determines the detectors of interest it corrects their positions according to <tt class="docutils literal"><span class="pre">ThetaIn</span></tt>,
if given, for which it runs <a class="reference internal" href="SpecularReflectionPositionCorrect-v2.html#algm-specularreflectionpositioncorrect"><em>SpecularReflectionPositionCorrect v2</em></a>. If <tt class="docutils literal"><span class="pre">ThetaIn</span></tt> is not set, detectors
will not be corrected. However, it is recommended to use this option to ensure that <a class="reference internal" href="ReflectometryReductionOne-v2.html#algm-reflectometryreductionone"><em>ReflectometryReductionOne v2</em></a>
is able to convert from wavelength to momentum transfer properly.</p>
<p>Next, the algorithm will try to populate input properties which have not been set. Specifically, it will search for
<tt class="docutils literal"><span class="pre">LambdaMin</span></tt>, <tt class="docutils literal"><span class="pre">LambdaMax</span></tt>, <tt class="docutils literal"><span class="pre">I0MonitorIndex</span></tt>, <tt class="docutils literal"><span class="pre">MonitorBackgroundMin</span></tt>, <tt class="docutils literal"><span class="pre">MonitorBackgroundMax</span></tt>,
<tt class="docutils literal"><span class="pre">MonitorIntegralMin</span></tt> and <tt class="docutils literal"><span class="pre">MonitorIntegralMin</span></tt> in the parameter file to populate <tt class="docutils literal"><span class="pre">WavelengthMin</span></tt>,
<tt class="docutils literal"><span class="pre">WavelengthMax</span></tt>, <tt class="docutils literal"><span class="pre">I0MonitorIndex</span></tt>, <tt class="docutils literal"><span class="pre">MonitorBackgroundWavelengthMin</span></tt>, <tt class="docutils literal"><span class="pre">MonitorBackgroundWavelengthMax</span></tt>,
<tt class="docutils literal"><span class="pre">MonitorIntegrationWavelengthMin</span></tt> and <tt class="docutils literal"><span class="pre">MonitorIntegrationWavelengthMax</span></tt> respectively. The first two properties
will be used by <a class="reference internal" href="ReflectometryReductionOne-v2.html#algm-reflectometryreductionone"><em>ReflectometryReductionOne v2</em></a> to crop the workspace in wavelength, whereas the rest of the properties
refer to monitors and are used to create a temporary monitor workspace by which the detectors of interest will be normalized.
Note that there is an additional property referring to monitors, <tt class="docutils literal"><span class="pre">NormalizeByIntegratedMonitors</span></tt>, which can be used
to specify whether or not integrated monitors should be considered.</p>
<p>The rest of the input properties are not inferred from the parameter file, and must be specified manually. <tt class="docutils literal"><span class="pre">RegionOfDirectBeam</span></tt> is an optional
property that allows users to specify a region of direct beam that will be used to normalize
the detector signal. The region of direct beam is specified by workspace indices. For instance, <tt class="docutils literal"><span class="pre">RegionOfDirectBeam='2-3'</span></tt>
means that spectra with workspace indices <tt class="docutils literal"><span class="pre">2</span></tt> and <tt class="docutils literal"><span class="pre">3</span></tt> will be summed and the resulting
workspace will be used as the direct beam workspace.</p>
<p>Transmission corrections can be optionally applied by providing either one or
two transmission runs or polynomial corrections. Polynomial correction is enabled by setting the
<tt class="docutils literal"><span class="pre">CorrectionAlgorithm</span></tt> property. If set to <tt class="docutils literal"><span class="pre">AutoDetect</span></tt>, the algorithm looks at the instrument
parameters for the <tt class="docutils literal"><span class="pre">correction</span></tt> parameter. If this parameter is set to
<tt class="docutils literal"><span class="pre">polynomial</span></tt>, then polynomial correction is performed using the
<a class="reference internal" href="PolynomialCorrection-v1.html#algm-polynomialcorrection"><em>PolynomialCorrection v1</em></a> algorithm, with the polynomial string taken
from the instrument&#8217;s <tt class="docutils literal"><span class="pre">polystring</span></tt> parameter. If the
<tt class="docutils literal"><span class="pre">correction</span></tt> parameter is set to <tt class="docutils literal"><span class="pre">exponential</span></tt> instead, then
the <a class="reference internal" href="ExponentialCorrection-v1.html#algm-exponentialcorrection"><em>ExponentialCorrection v1</em></a> algorithm is used, with C0 and C1 taken
from the instrument parameters, <tt class="docutils literal"><span class="pre">C0</span></tt> and <tt class="docutils literal"><span class="pre">C1</span></tt>. All these values
can be specified manually by setting the <tt class="docutils literal"><span class="pre">CorrectionAlgorithm</span></tt> to either
<tt class="docutils literal"><span class="pre">PolynomialCorrection</span></tt> or <tt class="docutils literal"><span class="pre">ExponentialCorrection</span></tt> and setting
<tt class="docutils literal"><span class="pre">Polynomial</span></tt> or <tt class="docutils literal"><span class="pre">C0</span></tt> and <tt class="docutils literal"><span class="pre">C1</span></tt> properties accordingly.
Note that when using a correction algorithm, monitors will not be integrated, even if
<tt class="docutils literal"><span class="pre">NormalizeByIntegratedMonitors</span></tt> was set to true.</p>
<p>Finally, properties <tt class="docutils literal"><span class="pre">MomentumTransferMin</span></tt>, <tt class="docutils literal"><span class="pre">MomentumTransferStep</span></tt> and <tt class="docutils literal"><span class="pre">MomentumTransferMax</span></tt> are
used to rebin the output workspace in Q, and <tt class="docutils literal"><span class="pre">ScaleFactor</span></tt> is used to scale the rebinned workspace. When they
are not provided the algorithm will attempt to determine the bin width using <a class="reference internal" href="CalculateResolution-v1.html#algm-calculateresolution"><em>CalculateResolution v1</em></a> (note that, for
the latter to run successfully, a <tt class="docutils literal"><span class="pre">slit</span></tt> component with a <tt class="docutils literal"><span class="pre">vertical</span> <span class="pre">gap</span></tt> must be defined in the
instrument definition file).</p>
<p>See <a class="reference internal" href="ReflectometryReductionOne-v2.html#algm-reflectometryreductionone"><em>ReflectometryReductionOne v2</em></a> for more information
on how the input properties are used by the wrapped algorithm.</p>
<div class="section" id="workspace-groups">
<h3><a class="toc-backref" href="#id4">Workspace Groups</a><a class="headerlink" href="#workspace-groups" title="Permalink to this headline">¶</a></h3>
<p>If a workspace group is provided as input, each workspace in the group will be
reduced independently and sequentially using <a class="reference internal" href="ReflectometryReductionOne-v2.html#algm-reflectometryreductionone"><em>ReflectometryReductionOne v2</em></a>. Each of these
individual reductions will produce three output workspaces: an output workspace in
wavelength, an output workspace in Q with native binning, and a rebinned workspace in Q.
Output workspaces in wavelength will be grouped together to produce an output workspace group in wavelength, and output
workspaces in Q will be grouped together to produce an output workspace group in Q.
The diagram below illustrates this process (note that, for the sake of clarity, the rebinned output
workspace in Q, <tt class="docutils literal"><span class="pre">OutputWorkspaceBinned</span></tt>, is not represented but it is handled analogously to
<tt class="docutils literal"><span class="pre">OutputWorkspace</span></tt> and <tt class="docutils literal"><span class="pre">OutputWorkspaceWavelength</span></tt>):</p>
<img alt="../_images/ReflectometryReductionOneAuto-v2-Groups_noPA_wkflw.png" src="../_images/ReflectometryReductionOneAuto-v2-Groups_noPA_wkflw.png" />
<div class="section" id="polarization-analysis-off">
<h4><a class="toc-backref" href="#id5">Polarization Analysis Off</a><a class="headerlink" href="#polarization-analysis-off" title="Permalink to this headline">¶</a></h4>
<p>If <tt class="docutils literal"><span class="pre">PolarizationAnalysis</span> <span class="pre">=</span> <span class="pre">None</span></tt> the reduction stops here. Note that if
transmission runs are given in the form of a workspace group, each member in the
transmission group will be associated to the corresponding member in the input
workspace group, i.e., the first item in the transmission group will be used as the
transmission run for the first workspace in the input workspace group, the second
element in the transmission group will be used as the transmission run for the
second workspace in the input workspace group, etc. This is also illustrated
in the diagram above, where <tt class="docutils literal"><span class="pre">[0]</span></tt> represents the first element in a
workspace group, <tt class="docutils literal"><span class="pre">[1]</span></tt> the second element, etc. If transmission runs
are provided as matrix workspaces the specified runs will be used for all members
of the input workspace group.</p>
</div>
<div class="section" id="polarization-analysis-on">
<h4><a class="toc-backref" href="#id6">Polarization Analysis On</a><a class="headerlink" href="#polarization-analysis-on" title="Permalink to this headline">¶</a></h4>
<p>If <tt class="docutils literal"><span class="pre">PolarizationAnalysis</span></tt> is set to <tt class="docutils literal"><span class="pre">PA</span></tt> or <tt class="docutils literal"><span class="pre">PNR</span></tt>
the reduction continues and polarization corrections will be applied to
the output workspace in wavelength. The algorithm will use the properties <tt class="docutils literal"><span class="pre">PolarizationAnalysis</span></tt>,
<tt class="docutils literal"><span class="pre">CPp</span></tt>, <tt class="docutils literal"><span class="pre">CAp</span></tt>, <tt class="docutils literal"><span class="pre">CRho</span></tt> and <tt class="docutils literal"><span class="pre">CAlpha</span></tt> to run <a class="reference internal" href="PolarizationCorrection-v1.html#algm-polarizationcorrection"><em>PolarizationCorrection v1</em></a>.
The result will be a new workspace in wavelength, which will override the previous one, that will
be used as input to <a class="reference internal" href="ReflectometryReductionOne-v2.html#algm-reflectometryreductionone"><em>ReflectometryReductionOne v2</em></a> to calculate the new output workspaces in Q, which
in turn will override the existing workspaces in Q. Note that if transmission runs are provided in the form of workspace
groups, the individual workspaces will be summed to produce a matrix workspace that will be used as the
transmission run for all items in the input workspace group, as illustrated in the diagram below
(note that, for the sake of clarity, the rebinned output workspace in Q, <tt class="docutils literal"><span class="pre">OutputWorkspaceBinned</span></tt>, is not
represented but it is handled analogously to <tt class="docutils literal"><span class="pre">OutputWorkspace</span></tt>).</p>
<img alt="../_images/ReflectometryReductionOneAuto-v2-Groups_PA_wkflw.png" src="../_images/ReflectometryReductionOneAuto-v2-Groups_PA_wkflw.png" />
</div>
</div>
</div>
<div class="section" id="previous-versions">
<h2><a class="toc-backref" href="#id7">Previous Versions</a><a class="headerlink" href="#previous-versions" title="Permalink to this headline">¶</a></h2>
<p>This is version 2 of the algorithm. For version 1, please see <a class="reference external" href="ReflectometryReductionOneAuto-v1.html">here.</a></p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id8">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - Basic reduction with no transmission run, polynomial corrections will be automatically applied</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013460.nxs&#39;</span><span class="p">)</span>
<span class="n">IvsQ</span><span class="p">,</span> <span class="n">IvsQ_unbinned</span><span class="p">,</span> <span class="n">IvsLam</span> <span class="o">=</span> <span class="n">ReflectometryReductionOneAuto</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">ThetaIn</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">175</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">176</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ_unbinned</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">106</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ_unbinned</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">107</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">13</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">14</span><span class="p">])</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>0.00441
0.00462
0.63441
0.41079
0.44780
0.23690
</pre></div>
</div>
<p><strong>Example - Basic reduction with a transmission run</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013460.nxs&#39;</span><span class="p">)</span>
<span class="n">trans</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013463.nxs&#39;</span><span class="p">)</span>
<span class="n">IvsQ</span><span class="p">,</span> <span class="n">IvsQ_unbinned</span><span class="p">,</span> <span class="n">IvsLam</span> <span class="o">=</span> <span class="n">ReflectometryReductionOneAuto</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">FirstTransmissionRun</span><span class="o">=</span><span class="n">trans</span><span class="p">,</span> <span class="n">ThetaIn</span><span class="o">=</span><span class="mf">0.7</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">164</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">164</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ_unbinned</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">96</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ_unbinned</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">97</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">5</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">6</span><span class="p">])</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>0.00338
0.00338
1.16756
0.89144
1.46645
1.41351
</pre></div>
</div>
<p><strong>Example - Reduction overriding some default values</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013460.nxs&#39;</span><span class="p">)</span>
<span class="n">IvsQ</span><span class="p">,</span> <span class="n">IvsQ_unbinned</span><span class="p">,</span> <span class="n">IvsLam</span> <span class="o">=</span> <span class="n">ReflectometryReductionOneAuto</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">ThetaIn</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">MonitorBackgroundWavelengthMin</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">MonitorBackgroundWavelengthMax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">175</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">176</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ_unbinned</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">106</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ_unbinned</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">107</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">5</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;</span><span class="si">%.5f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">6</span><span class="p">])</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>0.00441
0.00462
0.64231
0.41456
0.51028
0.52242
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Reflectometry/ISIS.html">Reflectometry\ISIS</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id9">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/855d87d02cc81b30296c0eae91fc76b4b143c405/Framework/Algorithms/src/ReflectometryReductionOneAuto2.cpp">ReflectometryReductionOneAuto2.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/855d87d02cc81b30296c0eae91fc76b4b143c405/Framework/Algorithms/inc/MantidAlgorithms/ReflectometryReductionOneAuto2.h">ReflectometryReductionOneAuto2.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ReflectometryReductionOneAuto-v1.html" title="Previous Chapter: ReflectometryReductionOneAuto v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ReflectometryRed...</span>
    </a>
  </li>
  <li>
    <a href="Regroup-v1.html" title="Next Chapter: Regroup v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Regroup v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>