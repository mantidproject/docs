<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Workspaces</title>
    
    <link rel="stylesheet" href="../../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '4.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../../../index.html" />
    <link rel="up" title="Algorithms, Workspaces and Histories" href="index.html" />
    <link rel="next" title="Algorithim Histories" href="04_algorith_histories.html" />
    <link rel="prev" title="Algorithms" href="02_algorithms.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="workspaces">
<span id="id1"></span><h1>Workspaces<a class="headerlink" href="#workspaces" title="Permalink to this headline">¶</a></h1>
<p>Workspaces come in several forms, but the most common by far is the
<a class="reference internal" href="../../../concepts/MatrixWorkspace.html#matrixworkspace"><em>Matrix Workspace</em></a> which represents XYE data for one
or more spectra. The MatrixWorkspace itself can be sub-grouped into
<a class="reference internal" href="../../../concepts/EventWorkspace.html#eventworkspace"><em>Event Workspace</em></a> and <a class="reference internal" href="../../../concepts/Workspace2D.html#workspace2d"><em>Workspace2D</em></a>.</p>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/MatrixWorkspaceHierachy.png"><img alt="MatrixWorkspaceHierachy.png" src="../../../_images/MatrixWorkspaceHierachy.png" style="width: 300px;" /></a>
</div>
<div class="section" id="workspace2d">
<h2>Workspace2D<a class="headerlink" href="#workspace2d" title="Permalink to this headline">¶</a></h2>
<p>A Workspace2D consists of a workspace with 1 or more spectra. Typically,
each spectrum will be a histogram. For each spectrum X, Y (counts) and E
(error) data is stored as a separate array.</p>
<p><a class="reference internal" href="../../../_images/MBC_Workspace2D.png"><img alt="MBC_Workspace2D.png" src="../../../_images/MBC_Workspace2D.png" style="width: 400px;" /></a></p>
<p>Each workspace has two axes, the Spectrum axis and the X-axis. Where
an axis holds a known unit type, it may be converted to another set of
units.</p>
<p><a class="reference internal" href="../../../_images/MBC_axes_annotated.png"><img alt="MBC_axes_annotated.png" src="../../../_images/MBC_axes_annotated.png" style="width: 400px;" /></a></p>
<p>Rebinning a Workspace2D is a one-way process when the rebinning leads to
a coarser structure.</p>
<div class="section" id="ragged-workspaces">
<h3>Ragged Workspaces<a class="headerlink" href="#ragged-workspaces" title="Permalink to this headline">¶</a></h3>
<p>Converting x-axis units can lead to a ragged workspace, in which bin
boundaries are not consistent across the spectra. Some algorithms will
not accept input workspaces that are ragged. The fix to this is to apply
Rebin to the Ragged workspace structure, as the example below shows.</p>
<ol class="arabic">
<li><p class="first">run <strong>Load</strong> on <em>GEM38370_Focussed.nxs</em> setting the
<strong>OutputWorkspace</strong> to be <em>ws</em></p>
</li>
<li><p class="first">run <strong>ConvertUnits</strong> on <em>ws</em> setting <strong>OutputWorkspace</strong> to <em>lambda</em>,
<strong>Target</strong>=<em>Wavelength</em>, <strong>EMode</strong>=<em>Elastic</em>. Plotting this
in the <em>Color Fill Plot</em> demonstrates the ragged X-bins.</p>
<p><a class="reference internal" href="../../../_images/MBC_Ragged.png"><img alt="MBC_Ragged.png" src="../../../_images/MBC_Ragged.png" style="width: 300px;" /></a></p>
</li>
<li><p class="first">run <strong>Rebin</strong> on <em>lambda</em> setting <strong>Params</strong> to <em>0.5</em> and
<strong>OutputWorkspace</strong> to <em>Rebinned</em>. Plotting this in the <em>Color Fill
Plot</em> demonstrates that uniform binning across all spectra has been
achieved.</p>
<p><a class="reference internal" href="../../../_images/MBC_Rebinned.png"><img alt="MBC_Rebinned.png" src="../../../_images/MBC_Rebinned.png" style="width: 300px;" /></a></p>
</li>
</ol>
</div>
</div>
<div class="section" id="event-workspaces">
<h2>Event Workspaces<a class="headerlink" href="#event-workspaces" title="Permalink to this headline">¶</a></h2>
<p>An <a class="reference internal" href="../../../concepts/EventWorkspace.html#eventworkspace"><em>Event Workspace</em></a> stores information about each
individual event observation in detectors. More specifically, at a
neutron spallation source, this means that the time of arrival and
detector ID of each individual neutron is recorded. Only fairly recent
advances in computer and acquisition hardware have made storing this
detailed knowledge a practical solution. For example at the SNS facility
all data, except for data collected in monitors, are stored in this way.</p>
<p>Event specifies “when” and “where”</p>
<p><strong>Pulse time</strong> – when the proton pulse happened in absolute time</p>
<p><strong>Time-of-flight</strong> – time for the neutron to travel from moderator to
the detector</p>
<div class="section" id="basic-example">
<h3>Basic Example<a class="headerlink" href="#basic-example" title="Permalink to this headline">¶</a></h3>
<div class="figure">
<a class="reference internal image-reference" href="../../../_images/Binning_example.png"><img alt="Binning_example.png" src="../../../_images/Binning_example.png" style="width: 500px;" /></a>
</div>
</div>
<div class="section" id="rebinning">
<h3>Rebinning<a class="headerlink" href="#rebinning" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Rebinning is essentially free and can be conducted in-place. This is
because the data does not need to change, only the overlaying
histogramming.</li>
</ul>
</div>
<div class="section" id="performance">
<h3>Performance<a class="headerlink" href="#performance" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Each event list is separate</li>
<li>Sorting events is O(n) = n log(n)</li>
<li>Histogramming is O(n) = n</li>
<li>Only histogram as needed</li>
</ul>
</div>
</div>
<div class="section" id="example-of-workspace-usage">
<h2>Example of Workspace usage<a class="headerlink" href="#example-of-workspace-usage" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">Load the event data HYS_11388_event.nxs</p>
</li>
<li><p class="first">Execute the &#8216;SumSpectra&#8217; algorithm</p>
</li>
<li><p class="first">Rebin with Params=300 and plot, ensure PreserveEvents=True</p>
<p><a class="reference internal" href="../../../_images/MBC_Rebin_Coarse.png"><img alt="MBC_Rebin_Coarse.png" src="../../../_images/MBC_Rebin_Coarse.png" style="width: 400px;" /></a></p>
</li>
<li><p class="first">Rebin with Params=100, the plot will automatically update, ensure
PreserveEvents=True</p>
<p><a class="reference internal" href="../../../_images/MBC_Rebin_MED.png"><img alt="MBC_Rebin_MED.png" src="../../../_images/MBC_Rebin_MED.png" style="width: 400px;" /></a></p>
</li>
<li><p class="first">Rebin with Params=10 the plot will automatically update, ensure
PreserveEvents=True</p>
<p><a class="reference internal" href="../../../_images/MBC_Rebin_Fine.png"><img alt="MBC_Rebin_Fine.png" src="../../../_images/MBC_Rebin_Fine.png" style="width: 400px;" /></a></p>
</li>
</ol>
<p>Keep the workspace open for the next section.</p>
</div>
<div class="section" id="other-workspace-types">
<h2>Other Workspace Types<a class="headerlink" href="#other-workspace-types" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>GroupWorkspaces store a collection of other workspaces in a group,
this can be created manually and is often used in multi-period data.
Either the whole group or individual members can be processed using
algorithms.</li>
<li>TableWorkspaces stores data as cells. Columns determine the type of
the data, for example double precision float, while each entry
appears as a new row. This is analogous to a Microsoft Excel
Spreadsheet.</li>
<li>PeaksWorkspace is a special type of TableWorkspace with additional
support for Single Crystal peaks.</li>
<li><a class="reference internal" href="../../../concepts/MDWorkspace.html#mdworkspace"><em>MD Workspace</em></a> will be covered later in this course</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="02_algorithms.html" title="Previous Chapter: Algorithms"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Algorithms</span>
    </a>
  </li>
  <li>
    <a href="04_algorith_histories.html" title="Next Chapter: Algorithim Histories"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Algorithim Histo... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-07-22.<br/>
    </p>
  </div>
</footer>
  </body>
</html>