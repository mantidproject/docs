<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>FilterEvents v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="FilterEventsByLogValuePreNexus v2" href="FilterEventsByLogValuePreNexus-v2.html" />
    <link rel="prev" title="FilterByXValue v1" href="FilterByXValue-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="filterevents-v1">
<span id="algm-filterevents"></span><span id="algm-filterevents-v1"></span><h1>FilterEvents v1<a class="headerlink" href="#filterevents-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/FilterEvents-v1_dlg.png"><img alt="../_images/FilterEvents-v1_dlg.png" class="screenshot" src="../_images/FilterEvents-v1_dlg.png" style="width: 332px;" /></a>
<p class="caption"><strong>FilterEvents</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id2">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a></li>
<li><a class="reference internal" href="#specifying-the-splitting-strategy" id="id5">Specifying the splitting strategy</a></li>
<li><a class="reference internal" href="#unfiltered-events" id="id6">Unfiltered Events</a></li>
<li><a class="reference internal" href="#using-filterevents-with-fast-changing-logs" id="id7">Using FilterEvents with fast-changing logs</a><ul>
<li><a class="reference internal" href="#correcting-time-neutron-was-at-the-sample" id="id8">Correcting time neutron was at the sample</a></li>
</ul>
</li>
<li><a class="reference internal" href="#difference-from-filterbylogvalue" id="id9">Difference from FilterByLogValue</a></li>
<li><a class="reference internal" href="#usage" id="id10">Usage</a></li>
<li><a class="reference internal" href="#source" id="id11">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Filter events from an EventWorkspace to one or multiple EventWorkspaces according to a series of splitters.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><em>GenerateEventsFilter</em></a>, <a class="reference internal" href="FilterByTime-v1.html#algm-filterbytime"><em>FilterByTime</em></a>, <a class="reference internal" href="FilterByLogValue-v1.html#algm-filterbylogvalue"><em>FilterByLogValue</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="2%" />
<col width="12%" />
<col width="5%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>EventWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An input event workspace</td>
</tr>
<tr class="row-odd"><td>SplitterWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An input SpilltersWorskpace for filtering</td>
</tr>
<tr class="row-even"><td>OutputWorkspaceBaseName</td>
<td>Input</td>
<td>string</td>
<td>OutputWorkspace</td>
<td>The base name to use for the output workspace. The output workspace names are a combination of this and the index in splitter.</td>
</tr>
<tr class="row-odd"><td>InformationWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Optional output for the information of each splitter workspace index.</td>
</tr>
<tr class="row-even"><td>OutputTOFCorrectionWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>TOFCorrectWS</td>
<td>Name of output workspace for TOF correction factor.</td>
</tr>
<tr class="row-odd"><td>FilterByPulseTime</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Filter the event by its pulse time only for slow sample environment log.  This option can make execution of algorithm faster.  But it lowers precision.</td>
</tr>
<tr class="row-even"><td>GroupWorkspaces</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Option to group all the output workspaces.  Group name will be OutputWorkspaceBaseName.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspaceIndexedFrom1</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If selected, the minimum output workspace is indexed from 1 and continuous.</td>
</tr>
<tr class="row-even"><td>CorrectionToSample</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>Type of correction on neutron events to sample time from detector time.  Allowed values: [&#8216;None&#8217;, &#8216;Customized&#8217;, &#8216;Direct&#8217;, &#8216;Elastic&#8217;, &#8216;Indirect&#8217;]</td>
</tr>
<tr class="row-odd"><td>DetectorTOFCorrectionWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Name of table workspace containing the log time correction factor for each detector.</td>
</tr>
<tr class="row-even"><td>IncidentEnergy</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Value of incident energy (Ei) in meV in direct mode.</td>
</tr>
<tr class="row-odd"><td>SpectrumWithoutDetector</td>
<td>Input</td>
<td>string</td>
<td>Skip</td>
<td>Approach to deal with spectrum without detectors.  Allowed values: [&#8216;Skip&#8217;, &#8216;Skip only if TOF correction&#8217;]</td>
</tr>
<tr class="row-even"><td>SplitSampleLogs</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>If selected, all sample logs will be splitted by the  event splitters.  It is not recommended for fast event log splitters.</td>
</tr>
<tr class="row-odd"><td>NumberOutputWS</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Number of output output workspace splitted.</td>
</tr>
<tr class="row-even"><td>DBSpectrum</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Spectrum (workspace index) for debug purpose.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspaceNames</td>
<td>Output</td>
<td>str list</td>
<td>&nbsp;</td>
<td>List of output workspaces names</td>
</tr>
<tr class="row-even"><td>RelativeTime</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Flag to indicate that in the input Matrix splitting workspace,the time indicated by X-vector is relative to either run start time or some indicted time.</td>
</tr>
<tr class="row-odd"><td>FilterStartTime</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Start time for splitters that can be parsed to DateAndTime.</td>
</tr>
<tr class="row-even"><td>TimeSeriesPropertyLogs</td>
<td>Input</td>
<td>str list</td>
<td>&nbsp;</td>
<td>List of name of sample logs of TimeSeriesProperty format. They will be either excluded from splitting if ExcludedSpecifiedLogs is specified as True. Or They will be the only TimeSeriesProperty sample logs that will be split to child workspaces.</td>
</tr>
<tr class="row-odd"><td>ExcludeSpecifiedLogs</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>If true, all the TimeSeriesProperty logs listed will be excluded from duplicating. Otherwise, only those specified logs will be split.</td>
</tr>
<tr class="row-even"><td>DescriptiveOutputNames</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If selected, the names of the output workspaces will include information about each slice.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm filters events from a single <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>Event Workspace</em></a> to
one or multiple <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><em>EventWorkspaces</em></a> according to
the <tt class="docutils literal"><span class="pre">SplittersWorkspace</span></tt> property. The <a class="reference internal" href="../concepts/EventFiltering.html#eventfiltering"><em>Event Filtering</em></a> concept
page has a detailed introduction to event filtering.</p>
</div>
<div class="section" id="specifying-the-splitting-strategy">
<h2><a class="toc-backref" href="#id5">Specifying the splitting strategy</a><a class="headerlink" href="#specifying-the-splitting-strategy" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">SplittersWorkspace</span></tt> describes much of the information for
splitting the <tt class="docutils literal"><span class="pre">InputWorkspace</span></tt> into the various output
workspaces. It can have one of three types</p>
<table border="1" class="docutils">
<colgroup>
<col width="73%" />
<col width="15%" />
<col width="12%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">workspace class</th>
<th class="head">units</th>
<th class="head">rel/abs</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>seconds</td>
<td>either</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="../api/python/mantid/api/ISplittersWorkspace.html#mantid.api.ISplittersWorkspace" title="mantid.api.ISplittersWorkspace"><tt class="xref py py-class docutils literal"><span class="pre">SplittersWorkspace</span></tt></a></td>
<td>nanoseconds</td>
<td>absolute</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a></td>
<td>seconds</td>
<td>either</td>
</tr>
</tbody>
</table>
<p>Whether the values in <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a> and
<a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a> is treated as relative or
absolute time is dependent on the value of <tt class="docutils literal"><span class="pre">RelativeTime</span></tt>. In the
case of <tt class="docutils literal"><span class="pre">RelativeTime=True</span></tt>, the time is relative to the start of
the run (in the <tt class="docutils literal"><span class="pre">ws.run()['run_start']</span></tt>) or, if specified, the
<tt class="docutils literal"><span class="pre">FilterStartTime</span></tt>. In the case of <tt class="docutils literal"><span class="pre">RelativeTime=False</span></tt>, the times
are relative to the <a class="reference internal" href="../api/python/mantid/kernel/DateAndTime.html#mantid.kernel.DateAndTime" title="mantid.kernel.DateAndTime"><tt class="xref py py-class docutils literal"><span class="pre">GPS</span> <span class="pre">epoch</span></tt></a>.</p>
<p>Both <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a> and
<a class="reference internal" href="../api/python/mantid/api/ISplittersWorkspace.html#mantid.api.ISplittersWorkspace" title="mantid.api.ISplittersWorkspace"><tt class="xref py py-class docutils literal"><span class="pre">SplittersWorkspace</span></tt></a> have 3
columns, <tt class="docutils literal"><span class="pre">start</span></tt>, <tt class="docutils literal"><span class="pre">stop</span></tt>, and <tt class="docutils literal"><span class="pre">target</span></tt> which should be a float,
float, and string. The <a class="reference internal" href="../concepts/EventFiltering.html#eventfiltering"><em>event filtering</em></a> concept
page has details on creating the <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a> by hand.</p>
<p>If the <tt class="docutils literal"><span class="pre">SplittersWorkspace</span></tt> is a <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a>, it must have a single spectrum with the x-value is
the time boundaries and the y-value is the workspace group index.</p>
<p>The optional <tt class="docutils literal"><span class="pre">InformationWorkspace</span></tt> is a <a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><em>TableWorkspace</em></a> for information of splitters.</p>
</div>
<div class="section" id="unfiltered-events">
<h2><a class="toc-backref" href="#id6">Unfiltered Events</a><a class="headerlink" href="#unfiltered-events" title="Permalink to this headline">¶</a></h2>
<p>Some events are not inside any splitters. They are put to a workspace
name ended with <tt class="docutils literal"><span class="pre">_unfiltered</span></tt>. If
<tt class="docutils literal"><span class="pre">OutputWorkspaceIndexedFrom1=True</span></tt>, then this workspace will not be
created.</p>
</div>
<div class="section" id="using-filterevents-with-fast-changing-logs">
<h2><a class="toc-backref" href="#id7">Using FilterEvents with fast-changing logs</a><a class="headerlink" href="#using-filterevents-with-fast-changing-logs" title="Permalink to this headline">¶</a></h2>
<p>There are a few parameters to consider when the log filtering is
expected to produce a large splitter table. An example of such a case
would be a data file for which the events need to be split according
to a log with two or more states changing in the kHz range. To reduce
the filtering time, one may do the following:</p>
<ul class="simple">
<li>Make sure the <tt class="docutils literal"><span class="pre">SplitterWorkspace</span></tt> input is a <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a>. Such a workspace can be produced by using the
<tt class="docutils literal"><span class="pre">FastLog</span> <span class="pre">=</span> <span class="pre">True</span></tt> option when calling <a class="reference internal" href="GenerateEventsFilter-v1.html#algm-generateeventsfilter"><em>GenerateEventsFilter</em></a>.</li>
<li>Choose the logs to split. Filtering the logs can take a substantial
amount of time. To save time, you may want to split only the logs
you will need for analysis. To do so, set <tt class="docutils literal"><span class="pre">ExcludeSpecifiedLogs</span> <span class="pre">=</span>
<span class="pre">False</span></tt> and list the logs you need in
<tt class="docutils literal"><span class="pre">TimeSeriesPropertyLogs</span></tt>. For example, if we only need to know the
accumulated proton charge for each filtered workspace, we would set
<tt class="docutils literal"><span class="pre">TimeSeriesPropertyLogs</span> <span class="pre">=</span> <span class="pre">proton_charge</span></tt>.</li>
</ul>
<div class="section" id="correcting-time-neutron-was-at-the-sample">
<h3><a class="toc-backref" href="#id8">Correcting time neutron was at the sample</a><a class="headerlink" href="#correcting-time-neutron-was-at-the-sample" title="Permalink to this headline">¶</a></h3>
<p>When filtering fast logs, the time to filter by is the time that the
neutron was at the sample. This can be specified using the
<tt class="docutils literal"><span class="pre">CorrectionToSample</span></tt> parameter. Either the user specifies the
correction parameter for every pixel, or one is calculated. The
correction parameters are applied as</p>
<div class="math">
<p><img src="../_images/math/3e264675125db3f1c8d2e294463f6c0fc3a5c546.png" alt="TOF_{sample} = TOF_{detector} * scale[detectorID] + shift[detectorID]"/></p>
</div><p>and stored in the <tt class="docutils literal"><span class="pre">OutputTOFCorrectionWorkspace</span></tt>.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">CorrectionToSample=&quot;None&quot;</span></tt> applies no correction</li>
<li><tt class="docutils literal"><span class="pre">CorrectionToSample=&quot;Elastic&quot;</span></tt> applies <img class="math" src="../_images/math/6016909cd9c0f9d57b038f50e1511a17245dbaba.png" alt="shift = 0" style="vertical-align: -4px"/> with
<img class="math" src="../_images/math/c64b5bec9a309db1daec0080dfb6d55167e3aafe.png" alt="scale = L1/(L1+L2)" style="vertical-align: -5px"/> for detectors and <img class="math" src="../_images/math/9189b23ee1d8998fda828482bfc0caf44cda7a6b.png" alt="scale = L1/L_{monitor}" style="vertical-align: -5px"/>
for monitors</li>
<li><tt class="docutils literal"><span class="pre">CorrectionToSample=&quot;Direct&quot;</span></tt> applies <img class="math" src="../_images/math/c3d4d88eb6534b8414cb440c9f8ef4e1c3e4dad0.png" alt="scale = 0" style="vertical-align: 0px"/> and
<img class="math" src="../_images/math/4f792424f92529d4efd571a132824ef1257351d6.png" alt="shift = L1 / \sqrt{2 E_{fix} / m_n}" style="vertical-align: -7px"/>.  The value supplied in
<tt class="docutils literal"><span class="pre">IncidentEnergy</span></tt> will override the value found in the workspace&#8217;s
value of <tt class="docutils literal"><span class="pre">Ei</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">CorrectionToSample=&quot;Indirect&quot;</span></tt> applies <img class="math" src="../_images/math/115a0bffd20945e2944ec77f98827dbe33916d8b.png" alt="scale = 1" style="vertical-align: -1px"/> and
<img class="math" src="../_images/math/801c62418c08b8d8bf326873f9a4d349780b2b82.png" alt="shift = -1 * L2 / \sqrt{2 E_{fix} / m_n}" style="vertical-align: -7px"/> for detectors. For
monitors, uses the same corrections as <tt class="docutils literal"><span class="pre">Elastic</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">CorrectionToSample=&quot;Customized&quot;</span></tt> applies the correction supplied
in the <tt class="docutils literal"><span class="pre">DetectorTOFCorrectionWorkspace</span></tt>.</li>
</ul>
</div>
</div>
<div class="section" id="difference-from-filterbylogvalue">
<h2><a class="toc-backref" href="#id9">Difference from FilterByLogValue</a><a class="headerlink" href="#difference-from-filterbylogvalue" title="Permalink to this headline">¶</a></h2>
<p>In <a class="reference internal" href="FilterByLogValue-v1.html#algm-filterbylogvalue"><em>FilterByLogValue</em></a>,
<tt class="docutils literal"><span class="pre">EventList.splitByTime()</span></tt> is used. In FilterEvents, it only uses
this when <tt class="docutils literal"><span class="pre">FilterByPulse=True</span></tt>. Otherwise,
<tt class="docutils literal"><span class="pre">EventList.splitByFullTime()</span></tt> is used. The difference between
<tt class="docutils literal"><span class="pre">splitByTime</span></tt> and <tt class="docutils literal"><span class="pre">splitByFullTime</span></tt> is that <tt class="docutils literal"><span class="pre">splitByTime</span></tt>
filters events by pulse time, and <tt class="docutils literal"><span class="pre">splitByFullTime</span></tt> considers both
pulse time and TOF.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id10">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Filtering event without correction on TOF</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">)</span>
<span class="n">splitws</span><span class="p">,</span> <span class="n">infows</span> <span class="o">=</span> <span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">UnitOfTime</span><span class="o">=</span><span class="s">&#39;Nanoseconds&#39;</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;SampleTemp&#39;</span><span class="p">,</span>
        <span class="n">MinimumLogValue</span><span class="o">=</span><span class="mf">279.9</span><span class="p">,</span>  <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mf">279.98</span><span class="p">,</span> <span class="n">LogValueInterval</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="n">splitws</span><span class="p">,</span> <span class="n">InformationWorkspace</span><span class="o">=</span><span class="n">infows</span><span class="p">,</span>
        <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s">&#39;tempsplitws&#39;</span><span class="p">,</span>  <span class="n">GroupWorkspaces</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">FilterByPulseTime</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">OutputWorkspaceIndexedFrom1</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="n">CorrectionToSample</span> <span class="o">=</span> <span class="s">&quot;None&quot;</span><span class="p">,</span> <span class="n">SpectrumWithoutDetector</span> <span class="o">=</span> <span class="s">&quot;Skip&quot;</span><span class="p">,</span> <span class="n">SplitSampleLogs</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="n">OutputTOFCorrectionWorkspace</span><span class="o">=</span><span class="s">&#39;mock&#39;</span><span class="p">)</span>

<span class="c"># Print result</span>
<span class="n">wsgroup</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s">&quot;tempsplitws&quot;</span><span class="p">]</span>
<span class="n">wsnames</span> <span class="o">=</span> <span class="n">wsgroup</span><span class="o">.</span><span class="n">getNames</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">wsnames</span><span class="p">):</span>
    <span class="n">tmpws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;workspace </span><span class="si">%s</span><span class="s"> has </span><span class="si">%d</span><span class="s"> events&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>workspace tempsplitws_0 has 124 events
workspace tempsplitws_1 has 16915 events
workspace tempsplitws_2 has 10009 events
workspace tempsplitws_3 has 6962 events
workspace tempsplitws_4 has 22520 events
workspace tempsplitws_5 has 5133 events
workspace tempsplitws_unfiltered has 50603 events
</pre></div>
</div>
<p><strong>Example - Filtering event by a user-generated TableWorkspace</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">)</span>

<span class="c"># create TableWorkspace</span>
<span class="n">split_table_ws</span> <span class="o">=</span> <span class="n">CreateEmptyTableWorkspace</span><span class="p">()</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="s">&#39;start&#39;</span><span class="p">)</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;float&#39;</span><span class="p">,</span> <span class="s">&#39;stop&#39;</span><span class="p">)</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addColumn</span><span class="p">(</span><span class="s">&#39;str&#39;</span><span class="p">,</span> <span class="s">&#39;target&#39;</span><span class="p">)</span>

<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">100.</span><span class="p">,</span> <span class="s">&#39;a&#39;</span><span class="p">])</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mf">200.</span><span class="p">,</span> <span class="mf">300.</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mf">400.</span><span class="p">,</span> <span class="mf">600.</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">])</span>
<span class="n">split_table_ws</span><span class="o">.</span><span class="n">addRow</span><span class="p">([</span><span class="mf">600.</span><span class="p">,</span> <span class="mf">650.</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">])</span>

<span class="c"># filter events</span>
<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="n">split_table_ws</span><span class="p">,</span>
        <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s">&#39;tempsplitws3&#39;</span><span class="p">,</span>  <span class="n">GroupWorkspaces</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">FilterByPulseTime</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span> <span class="n">OutputWorkspaceIndexedFrom1</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="n">CorrectionToSample</span> <span class="o">=</span> <span class="s">&quot;None&quot;</span><span class="p">,</span> <span class="n">SpectrumWithoutDetector</span> <span class="o">=</span> <span class="s">&quot;Skip&quot;</span><span class="p">,</span> <span class="n">SplitSampleLogs</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
        <span class="n">OutputTOFCorrectionWorkspace</span><span class="o">=</span><span class="s">&#39;mock&#39;</span><span class="p">,</span>
        <span class="n">RelativeTime</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># Print result</span>
<span class="n">wsgroup</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s">&quot;tempsplitws3&quot;</span><span class="p">]</span>
<span class="n">wsnames</span> <span class="o">=</span> <span class="n">wsgroup</span><span class="o">.</span><span class="n">getNames</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">wsnames</span><span class="p">):</span>
    <span class="n">tmpws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;workspace </span><span class="si">%s</span><span class="s"> has </span><span class="si">%d</span><span class="s"> events&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
    <span class="n">split_log</span> <span class="o">=</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">run</span><span class="p">()</span><span class="o">.</span><span class="n">getProperty</span><span class="p">(</span><span class="s">&#39;splitter&#39;</span><span class="p">)</span>
    <span class="n">entry_0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime_as_string</span><span class="p">(</span><span class="n">split_log</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s">&#39;M8[s]&#39;</span><span class="p">)),</span> <span class="n">timezone</span><span class="o">=</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
    <span class="n">entry_1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">datetime_as_string</span><span class="p">(</span><span class="n">split_log</span><span class="o">.</span><span class="n">times</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dtype</span><span class="p">(</span><span class="s">&#39;M8[s]&#39;</span><span class="p">)),</span> <span class="n">timezone</span><span class="o">=</span><span class="s">&#39;UTC&#39;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;event splitter log: entry 0 and entry 1 are {0} and {1}.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">entry_0</span><span class="p">,</span> <span class="n">entry_1</span><span class="p">))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>workspace tempsplitws3_a has 77580 events
event splitter log: entry 0 and entry 1 are 2010-03-25T16:08:37Z and 2010-03-25T16:10:17Z.
workspace tempsplitws3_b has 0 events
event splitter log: entry 0 and entry 1 are 2010-03-25T16:08:37Z and 2010-03-25T16:11:57Z.
workspace tempsplitws3_c has 0 events
event splitter log: entry 0 and entry 1 are 2010-03-25T16:08:37Z and 2010-03-25T16:15:17Z.
workspace tempsplitws3_unfiltered has 34686 events
event splitter log: entry 0 and entry 1 are 2010-03-25T16:08:37Z and 2010-03-25T16:10:17Z.
</pre></div>
</div>
<p><strong>Example - Filtering event by pulse time</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">)</span>
<span class="n">splitws</span><span class="p">,</span> <span class="n">infows</span> <span class="o">=</span> <span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">UnitOfTime</span><span class="o">=</span><span class="s">&#39;Nanoseconds&#39;</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;SampleTemp&#39;</span><span class="p">,</span>
        <span class="n">MinimumLogValue</span><span class="o">=</span><span class="mf">279.9</span><span class="p">,</span>  <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mf">279.98</span><span class="p">,</span> <span class="n">LogValueInterval</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span>
    <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="n">splitws</span><span class="p">,</span>
    <span class="n">InformationWorkspace</span><span class="o">=</span><span class="n">infows</span><span class="p">,</span>
    <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s">&#39;tempsplitws&#39;</span><span class="p">,</span>
    <span class="n">GroupWorkspaces</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">FilterByPulseTime</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="n">OutputWorkspaceIndexedFrom1</span> <span class="o">=</span> <span class="bp">True</span><span class="p">,</span>
    <span class="n">CorrectionToSample</span> <span class="o">=</span> <span class="s">&quot;None&quot;</span><span class="p">,</span>
    <span class="n">SpectrumWithoutDetector</span> <span class="o">=</span> <span class="s">&quot;Skip&quot;</span><span class="p">,</span>
    <span class="n">SplitSampleLogs</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="n">OutputTOFCorrectionWorkspace</span><span class="o">=</span><span class="s">&#39;mock&#39;</span><span class="p">)</span>

<span class="c"># Print result</span>
<span class="n">wsgroup</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s">&quot;tempsplitws&quot;</span><span class="p">]</span>
<span class="n">wsnames</span> <span class="o">=</span> <span class="n">wsgroup</span><span class="o">.</span><span class="n">getNames</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">wsnames</span><span class="p">):</span>
    <span class="n">tmpws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;workspace </span><span class="si">%s</span><span class="s"> has </span><span class="si">%d</span><span class="s"> events&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>workspace tempsplitws_1 has 123 events
workspace tempsplitws_2 has 16951 events
workspace tempsplitws_3 has 9972 events
workspace tempsplitws_4 has 7019 events
workspace tempsplitws_5 has 22529 events
workspace tempsplitws_6 has 5067 events
</pre></div>
</div>
<p><strong>Example - Filtering event with correction on TOF</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;CNCS_7860_event.nxs&#39;</span><span class="p">)</span>
<span class="n">splitws</span><span class="p">,</span> <span class="n">infows</span> <span class="o">=</span> <span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">UnitOfTime</span><span class="o">=</span><span class="s">&#39;Nanoseconds&#39;</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;SampleTemp&#39;</span><span class="p">,</span>
        <span class="n">MinimumLogValue</span><span class="o">=</span><span class="mf">279.9</span><span class="p">,</span>  <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mf">279.98</span><span class="p">,</span> <span class="n">LogValueInterval</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">FilterEvents</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">SplitterWorkspace</span><span class="o">=</span><span class="n">splitws</span><span class="p">,</span> <span class="n">InformationWorkspace</span><span class="o">=</span><span class="n">infows</span><span class="p">,</span>
    <span class="n">OutputWorkspaceBaseName</span><span class="o">=</span><span class="s">&#39;tempsplitws&#39;</span><span class="p">,</span>
    <span class="n">GroupWorkspaces</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">FilterByPulseTime</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="n">OutputWorkspaceIndexedFrom1</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="n">CorrectionToSample</span> <span class="o">=</span> <span class="s">&quot;Direct&quot;</span><span class="p">,</span>
    <span class="n">IncidentEnergy</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
    <span class="n">SpectrumWithoutDetector</span> <span class="o">=</span> <span class="s">&quot;Skip&quot;</span><span class="p">,</span>
    <span class="n">SplitSampleLogs</span> <span class="o">=</span> <span class="bp">False</span><span class="p">,</span>
    <span class="n">OutputTOFCorrectionWorkspace</span><span class="o">=</span><span class="s">&#39;mock&#39;</span><span class="p">)</span>

<span class="c"># Print result</span>
<span class="n">wsgroup</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="s">&quot;tempsplitws&quot;</span><span class="p">]</span>
<span class="n">wsnames</span> <span class="o">=</span> <span class="n">wsgroup</span><span class="o">.</span><span class="n">getNames</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">wsnames</span><span class="p">):</span>
    <span class="n">tmpws</span> <span class="o">=</span> <span class="n">mtd</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;workspace </span><span class="si">%s</span><span class="s"> has </span><span class="si">%d</span><span class="s"> events&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">tmpws</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>workspace tempsplitws_0 has 123 events
workspace tempsplitws_1 has 16951 events
workspace tempsplitws_2 has 9972 events
workspace tempsplitws_3 has 7019 events
workspace tempsplitws_4 has 22514 events
workspace tempsplitws_5 has 5082 events
workspace tempsplitws_unfiltered has 50605 events
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Events/EventFiltering.html">Events\EventFiltering</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id11">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/Algorithms/src/FilterEvents.cpp">FilterEvents.cpp</a> <em>(last modified: 2019-06-18)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/Algorithms/inc/MantidAlgorithms/FilterEvents.h">FilterEvents.h</a> <em>(last modified: 2019-06-03)</em></p>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/scripts/FilterEvents.py">FilterEvents.py</a> <em>(last modified: 2019-04-30)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="FilterByXValue-v1.html" title="Previous Chapter: FilterByXValue v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; FilterByXValue v...</span>
    </a>
  </li>
  <li>
    <a href="FilterEventsByLogValuePreNexus-v2.html" title="Next Chapter: FilterEventsByLogValuePreNexus v2"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">FilterEventsByLo... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-07-22.<br/>
    </p>
  </div>
</footer>
  </body>
</html>