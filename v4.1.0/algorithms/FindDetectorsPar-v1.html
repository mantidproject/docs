<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>FindDetectorsPar v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="FindEPP v2" href="FindEPP-v2.html" />
    <link rel="prev" title="FindDetectorsOutsideLimits v1" href="FindDetectorsOutsideLimits-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="finddetectorspar-v1">
<span id="algm-finddetectorspar"></span><span id="algm-finddetectorspar-v1"></span><h1>FindDetectorsPar v1<a class="headerlink" href="#finddetectorspar-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/FindDetectorsPar-v1_dlg.png"><img alt="../_images/FindDetectorsPar-v1_dlg.png" class="screenshot" src="../_images/FindDetectorsPar-v1_dlg.png" style="width: 379px;" /></a>
<p class="caption"><strong>FindDetectorsPar</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#par-and-phx-files" id="id4"><a class="reference internal" href="SavePAR-v1.html#algm-savepar"><em>par</em></a> and <a class="reference internal" href="SavePHX-v1.html#algm-savephx"><em>phx</em></a> files</a></li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>The algorithm returns the angular parameters and second flight path for a workspace detectors (data, usually availble in par or phx file)</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="2%" />
<col width="13%" />
<col width="4%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The name of the workspace that will be used as input for the algorithm</td>
</tr>
<tr class="row-odd"><td>ReturnLinearRanges</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>if set to true, the algorithm would return linear detector&#8217;s ranges (dx,dy) rather then angular ranges (dAzimuthal,dPolar)</td>
</tr>
<tr class="row-even"><td>ParFile</td>
<td>Input</td>
<td>string</td>
<td>not_used.par</td>
<td>An optional file that contains of the list of angular parameters for the detectors and detectors groups; If specified, will use data from file instead of the data, calculated from the instument description. Allowed extensions: [&#8216;.par&#8217;, &#8216;.phx&#8217;]</td>
</tr>
<tr class="row-odd"><td>OutputParTable</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>If not empty, a name of a table workspace which  will contain the calculated par or phx values for the detectors</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Identifies geometrical parameters of detectors and groups of detectors
after the workspaces were grouped using ASCII or XML map file. Located
in DataHandling\Instrument\Detectors group and intended to be used as
Child Algorithm of <a class="reference internal" href="SaveNXSPE-v1.html#algm-savenxspe"><em>SaveNXSPE</em></a>
algorithm, though can be deployed independently. Dynamic casting from iAlgorithm
and accessors functions
return calculated parameters to <a class="reference internal" href="SaveNXSPE-v1.html#algm-savenxspe"><em>SaveNXSPE</em></a>
when FindDetectorsPar used as
the Child Algorithm of <a class="reference internal" href="SaveNXSPE-v1.html#algm-savenxspe"><em>SaveNXSPE</em></a>
procedure;</p>
<p>Internal Child Algorithm identifies the group topology, namely if a
group of detectors is arranged into a rectangular shape or in a ring.
The algorithm calculates the geometrical centre of the detectors group
and 6 points, located within +-1/4 width of the first detector of the
group. If the centre or any of these points belong to the group of the
detectors itself, the group assumed to have a rectangular topology, and
if not &#8211; the cylindrical one (ring).</p>
<p>Single detector defined to have the rectangular shape.</p>
<p>After identifying the topology, the parameters are calculated using
formulas for angles in Cartesian or Cylindrical coordinate systems
accordingly</p>
</div>
<div class="section" id="par-and-phx-files">
<h2><a class="toc-backref" href="#id4"><a class="reference internal" href="SavePAR-v1.html#algm-savepar"><em>par</em></a> and <a class="reference internal" href="SavePHX-v1.html#algm-savephx"><em>phx</em></a> files</a><a class="headerlink" href="#par-and-phx-files" title="Permalink to this headline">¶</a></h2>
<p>These files are ascii files which are used to describe the combined
detectors geometry defined by map files. There are no reasons for you to
use it unless this Mantid algorithm is working unsatisfactory for you.
In this case you can quickly modify and use par file until this
algorithm is modified. It is your responsibility then to assure the
correspondence between mapped detectors and parameters in the par file.</p>
<p>The par files are simple ASCII files with the following columns:</p>
<div class="highlight-python"><div class="highlight"><pre>1st column      sample-detector distance (m)
2nd  &quot;          scattering angle (deg)
3rd  &quot;          azimuthal angle (deg)   (west bank = 0 deg, north bank = -90 deg etc.)   (Note the reversed sign convention cf .phx files)
4th  &quot;          width  (m)
5th  &quot;          height (m)
</pre></div>
</div>
<p>When processed by this algorithm, 4th and 5th column are transformed
into angular values.</p>
<p><a class="reference internal" href="SavePHX-v1.html#algm-savephx"><em>Phx</em></a>
files are Mslice phx files, which do not contain
secondary flight path. This path is calculated by the algorithm from the
data in the instrument description and the angular values are calculated
as in nxspe file. There are no reason to use phx files to build nxspe
files at the moment unless you already have one and need to repeat your
previous results with Mantid.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">This algorithm is meant to be run as a child algorithm to one of the previously
mentioned algorithms. However, it can be used alone.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - Pars with (dPolar, dAzimuthal)</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&quot;MAR11001.raw&quot;</span><span class="p">)</span>
<span class="c"># Output workspace is None if OutputParTable is not used)</span>
<span class="n">pars</span> <span class="o">=</span> <span class="n">FindDetectorsPar</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">OutputParTable</span><span class="o">=</span><span class="s">&quot;pars&quot;</span><span class="p">)</span>
<span class="c"># pars is a TableWorkspace</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Workspace type = {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pars</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="c"># Show width column headers</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Width headers = ( {} , {} )&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pars</span><span class="o">.</span><span class="n">getColumnNames</span><span class="p">()[</span><span class="mi">3</span><span class="p">],</span> <span class="n">pars</span><span class="o">.</span><span class="n">getColumnNames</span><span class="p">()[</span><span class="mi">4</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Workspace type = TableWorkspace
Width headers = ( polar_width , azimuthal_width )
</pre></div>
</div>
<p><strong>Example - Pars with (dX (width), dY (height))</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&quot;MAR11001.raw&quot;</span><span class="p">)</span>
<span class="c"># Output workspace is None if OutputParTable is not used)</span>
<span class="n">pars</span> <span class="o">=</span> <span class="n">FindDetectorsPar</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">ReturnLinearRanges</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">OutputParTable</span><span class="o">=</span><span class="s">&quot;pars&quot;</span><span class="p">)</span>
<span class="c"># pars is a TableWorkspace</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Workspace type = {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pars</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="c"># Show width column headers</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Width headers = ( {} , {} )&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pars</span><span class="o">.</span><span class="n">getColumnNames</span><span class="p">()[</span><span class="mi">3</span><span class="p">],</span> <span class="n">pars</span><span class="o">.</span><span class="n">getColumnNames</span><span class="p">()[</span><span class="mi">4</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Workspace type = TableWorkspace
Width headers = ( det_width , det_height )
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Instrument.html">DataHandling\Instrument</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/DataHandling/src/FindDetectorsPar.cpp">FindDetectorsPar.cpp</a> <em>(last modified: 2019-06-05)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/DataHandling/inc/MantidDataHandling/FindDetectorsPar.h">FindDetectorsPar.h</a> <em>(last modified: 2018-10-05)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="FindDetectorsOutsideLimits-v1.html" title="Previous Chapter: FindDetectorsOutsideLimits v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; FindDetectorsOut...</span>
    </a>
  </li>
  <li>
    <a href="FindEPP-v2.html" title="Next Chapter: FindEPP v2"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">FindEPP v2 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-07-22.<br/>
    </p>
  </div>
</footer>
  </body>
</html>