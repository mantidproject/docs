<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SaveReflectometryAscii v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="SaveSESANS v1" href="SaveSESANS-v1.html" />
    <link rel="prev" title="SaveReflections v1" href="SaveReflections-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="savereflectometryascii-v1">
<span id="algm-savereflectometryascii"></span><span id="algm-savereflectometryascii-v1"></span><h1>SaveReflectometryAscii v1<a class="headerlink" href="#savereflectometryascii-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/SaveReflectometryAscii-v1_dlg.png"><img alt="../_images/SaveReflectometryAscii-v1_dlg.png" class="screenshot" src="../_images/SaveReflectometryAscii-v1_dlg.png" style="width: 317px;" /></a>
<p class="caption"><strong>SaveReflectometryAscii</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id2">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id3">Properties</a></li>
<li><a class="reference internal" href="#description" id="id4">Description</a></li>
<li><a class="reference internal" href="#computation-of-resolution-values" id="id5">Computation of resolution values</a></li>
<li><a class="reference internal" href="#mft-file-format" id="id6">MFT File Format</a></li>
<li><a class="reference internal" href="#txt-file-format" id="id7">TXT File Format</a></li>
<li><a class="reference internal" href="#dat-file-format" id="id8">DAT File Format</a></li>
<li><a class="reference internal" href="#custom-file-format-empty-field" id="id9">Custom File Format (Empty Field)</a></li>
<li><a class="reference internal" href="#usage" id="id10">Usage</a></li>
<li><a class="reference internal" href="#source" id="id11">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Saves a 2D workspace to an ascii file</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id2">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="SaveAscii-v2.html#algm-saveascii"><em>SaveAscii</em></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id3">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="3%" />
<col width="23%" />
<col width="7%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The name of the workspace containing the data you want to save.</td>
</tr>
<tr class="row-odd"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>The output filename</td>
</tr>
<tr class="row-even"><td>FileExtension</td>
<td>Input</td>
<td>string</td>
<td>.mft</td>
<td>Choose the file extension according to the file format. Allowed values: [&#8216;.mft&#8217;, &#8216;.txt&#8217;, &#8216;.dat&#8217;, &#8216;custom&#8217;]</td>
</tr>
<tr class="row-odd"><td>LogList</td>
<td>Input</td>
<td>str list</td>
<td>&nbsp;</td>
<td>List of logs to write to file.</td>
</tr>
<tr class="row-even"><td>WriteHeader</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether to write header lines.</td>
</tr>
<tr class="row-odd"><td>WriteResolution</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Whether to compute resolution values and write them as fourth data column.</td>
</tr>
<tr class="row-even"><td>Separator</td>
<td>Input</td>
<td>string</td>
<td>tab</td>
<td>The separator used for splitting data columns. Allowed values: [&#8216;comma&#8217;, &#8216;space&#8217;, &#8216;tab&#8217;]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id4">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm saves the first spectrum of a workspace in ASCII format in order to be processed by software, e.g. Motofit.
It is possible to provide a group of workspaces as input.
In this case, each filename contains the corresponding workspace name.
The choice of the file extension (<cite>.mft</cite>, <cite>.txt</cite>, <cite>.dat</cite>) defines the file format and appends the <cite>Filename</cite> with the corresponding extension except for the <cite>custom</cite> field, which represents a custom format where the <cite>Filename</cite> can be chosen freely.
In case of histogrammed input data, the resulting file will contain the bin centre for the x-values representing the quantity <cite>q</cite>.
It is especially useful for saving reflectometry reduction data.
A file can be loaded back into Mantid by <a class="reference internal" href="LoadAscii-v2.html#algm-loadascii"><em>LoadAscii v2</em></a>, which will not have an instrument defined and <cite>Sample Logs</cite> are missing.
This algorithm writes data in scientific exponential notation (E-notation) of double-precision.
Please note that <cite>SampleLog</cite> entries are not case sensitive, editing fields <cite>Title</cite> and <cite>title</cite> both edit the field <cite>title</cite>.</p>
</div>
<div class="section" id="computation-of-resolution-values">
<h2><a class="toc-backref" href="#id5">Computation of resolution values</a><a class="headerlink" href="#computation-of-resolution-values" title="Permalink to this headline">¶</a></h2>
<p>For the <a class="reference internal" href="#custom-file-format-empty-field">Custom File Format (Empty Field)</a> and the <a class="reference internal" href="#txt-file-format">TXT File Format</a> file format, the option <cite>WriteResolution</cite> enables the computation of the resolution values from existing x-values (points):</p>
<p><img class="math" src="../_images/math/e4b40f24f7ba2ceed940726f6ae1d556b803d350.png" alt="x_i \cdot \frac{x_1 - x_0}{x_1}" style="vertical-align: -9px"/>,</p>
<p>where the bin centre <img class="math" src="../_images/math/c2f01810eef41c68678f5efa3d9ca634ff6785da.png" alt="x_i" style="vertical-align: -3px"/> will be multiplied by the qutient of first and second bin centre <img class="math" src="../_images/math/7986aaa4a51f08ecf2aab8dba45433f9ba17775c.png" alt="x_{0}" style="vertical-align: -3px"/> and <img class="math" src="../_images/math/fdb3dea1a5af3eba58079744fd4c4f3657197132.png" alt="x_{1}" style="vertical-align: -4px"/>, respectively.</p>
</div>
<div class="section" id="mft-file-format">
<h2><a class="toc-backref" href="#id6">MFT File Format</a><a class="headerlink" href="#mft-file-format" title="Permalink to this headline">¶</a></h2>
<p>The file contains minimum 21 header lines each separating its name and value by a colon, followed by an empty line and a line describing the quantities of each column which are <cite>q</cite>, <cite>refl</cite>, <cite>refl_error</cite> and eventually <cite>q_res (FWHM)</cite>, if present, and the data.
The header lines contain the following information: <cite>Instrument</cite>, <cite>User-local contact</cite>, <cite>Title</cite>, <cite>Subtitle</cite>, <cite>Start date + time</cite>, <cite>End date + time</cite>, <cite>Theta 1 + dir + ref numbers</cite>, <cite>Theta 2 + dir + ref numbers</cite>, <cite>Theta 3 + dir + ref numbers</cite>, (foreseen potentially added angle(s),) followed by 9 user defined parameter lines, followed by potentially added user defined parameter lines, <cite>Number of file format</cite>, <cite>Number of data points</cite>.
The version of the file format is set randomly to the high value 40 in order to exceed all ILL Cosmos versions.
For the ILL instruments D17 and FIGARO, obligatory header lines will be automatically filled by using the workspaces <cite>Sample Logs</cite> information which can be modified as shown in the <a class="reference internal" href="#usage">Usage</a>.
The algorithm seeks to add the values for the following SampleLog entries: <cite>instrument.name</cite>, <cite>user.namelocalcontact</cite>, <cite>title</cite>, <cite>start_time</cite> and <cite>end_time</cite> which correspond to the header lines of names <cite>Instrument</cite>, <cite>User-local contact</cite>, <cite>Title</cite>, <cite>Start date + time</cite>, <cite>End date + time</cite>, respectively.
The options <cite>WriteHeader</cite>, <cite>WriteResolution</cite> and <cite>Separator</cite> do not have any effect and are not visible in the user interface.</p>
</div>
<div class="section" id="txt-file-format">
<h2><a class="toc-backref" href="#id7">TXT File Format</a><a class="headerlink" href="#txt-file-format" title="Permalink to this headline">¶</a></h2>
<p>This file format (ANSTO Ascii format) writes four columns of data without any additional information.
If the resolution values are not present will be optionally computed, see <a class="reference internal" href="#computation-of-resolution-values">Computation of resolution values</a>.
The options <cite>LogList</cite>, <cite>WriteHeader</cite>, <cite>WriteResolution</cite> and <cite>Separator</cite> do not have any effect and are not visible in the user interface.</p>
</div>
<div class="section" id="dat-file-format">
<h2><a class="toc-backref" href="#id8">DAT File Format</a><a class="headerlink" href="#dat-file-format" title="Permalink to this headline">¶</a></h2>
<p>Stores first the number of lines followed by three columns of data.
The option <cite>LogList</cite>, <cite>WriteResolution</cite> and <cite>Separator</cite> do not have any effect and are not visible in the user interface.</p>
</div>
<div class="section" id="custom-file-format-empty-field">
<h2><a class="toc-backref" href="#id9">Custom File Format (Empty Field)</a><a class="headerlink" href="#custom-file-format-empty-field" title="Permalink to this headline">¶</a></h2>
<p>Enables a selection to write header lines via the option <cite>WriteHeader</cite> and the separator via the option <cite>Separator</cite> as well as the number of columns to write, i.e. three or four via the option <cite>WriteResolution</cite>.
The header follows the specification of the <a class="reference internal" href="#mft-file-format">MFT File format</a>, if enabled.
Please consider to directly provide the desired file extension via the input <cite>Filename</cite>.
All options are taken into account and are visible in the user interface.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id10">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Save a workspace in reflectometry ASCII format</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># import the os path libraries for directory functions</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c"># create histogram workspace</span>
<span class="n">x</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">e</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span>
<span class="n">dx</span> <span class="o">=</span> <span class="p">[</span><span class="mf">9.5</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span>

<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">DataE</span><span class="o">=</span><span class="n">e</span><span class="p">,</span> <span class="n">Dx</span><span class="o">=</span><span class="n">dx</span><span class="p">)</span>

<span class="c"># Create an absolute path by joining the proposed filename to a directory</span>
<span class="c"># os.path.expanduser(&quot;~&quot;) used in this case returns the home directory of the current user</span>
<span class="nb">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="s">&quot;~&quot;</span><span class="p">),</span> <span class="s">&quot;ws&quot;</span><span class="p">)</span>

<span class="c"># Add Sample Log entries</span>
<span class="c"># Add a Title entry:</span>
<span class="n">AddSampleLog</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="n">LogText</span><span class="o">=</span><span class="s">&#39;MyTest&#39;</span><span class="p">,</span> <span class="n">LogType</span><span class="o">=</span><span class="s">&#39;String&#39;</span><span class="p">)</span>
<span class="c"># Add an entry called d as a Parameter (then, only eight not defined parameter lines remain):</span>
<span class="n">AddSampleLog</span><span class="p">(</span><span class="n">Workspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="n">LogText</span><span class="o">=</span><span class="s">&#39;0.3&#39;</span><span class="p">,</span> <span class="n">LogType</span><span class="o">=</span><span class="s">&#39;Number&#39;</span><span class="p">,</span> <span class="n">LogUnit</span><span class="o">=</span><span class="s">&#39;mm&#39;</span><span class="p">,</span> <span class="n">NumberType</span><span class="o">=</span><span class="s">&#39;Double&#39;</span><span class="p">)</span>

<span class="c"># Save with mft extension and using the option LogList: title will be added to a required header line and d will be additionally added</span>
<span class="c"># to the first parameter field.</span>
<span class="n">SaveReflectometryAscii</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">Filename</span><span class="o">=</span><span class="nb">file</span><span class="p">,</span> <span class="n">LogList</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;d&#39;</span><span class="p">])</span>

<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="nb">file</span> <span class="o">+</span> <span class="s">&quot;.mft&quot;</span><span class="p">):</span>
  <span class="n">myFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">((</span><span class="nb">file</span> <span class="o">+</span> <span class="s">&quot;.mft&quot;</span><span class="p">),</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
  <span class="k">print</span><span class="p">(</span><span class="n">myFile</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre>MFT
Instrument : Not defined
User-local contact : Not defined
Title : MyTest
Subtitle : Not defined
Start date + time : Not defined
End date + time : Not defined
Theta 1 + dir + ref numbers : Not defined
Theta 2 + dir + ref numbers : Not defined
Theta 3 + dir + ref numbers : Not defined
d : 0.29999999999999999 mm
Parameter  : Not defined
Parameter  : Not defined
Parameter  : Not defined
Parameter  : Not defined
Parameter  : Not defined
Parameter  : Not defined
Parameter  : Not defined
Parameter  : Not defined
Number of file format : 40
Number of data points : 3

                           q                        refl                    refl_err                q_res (FWHM)
       5.000000000000000e-01       0.000000000000000e+00       1.000000000000000e+00       9.500000000000000e+00
       1.500000000000000e+00       1.000000000000000e+00       1.000000000000000e+00       9.500000000000000e+00
       2.500000000000000e+00       2.000000000000000e+00       1.000000000000000e+00       9.500000000000000e+00
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Text.html">DataHandling\Text</a> | <a class="reference external" href="categories/ILL/Reflectometry.html">ILL\Reflectometry</a> | <a class="reference external" href="categories/Reflectometry.html">Reflectometry</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id11">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/DataHandling/src/SaveReflectometryAscii.cpp">SaveReflectometryAscii.cpp</a> <em>(last modified: 2019-06-05)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/DataHandling/inc/MantidDataHandling/SaveReflectometryAscii.h">SaveReflectometryAscii.h</a> <em>(last modified: 2019-03-26)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SaveReflections-v1.html" title="Previous Chapter: SaveReflections v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; SaveReflections ...</span>
    </a>
  </li>
  <li>
    <a href="SaveSESANS-v1.html" title="Next Chapter: SaveSESANS v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">SaveSESANS v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-07-22.<br/>
    </p>
  </div>
</footer>
  </body>
</html>