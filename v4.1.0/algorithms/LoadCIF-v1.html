<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LoadCIF v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="LoadCalFile v1" href="LoadCalFile-v1.html" />
    <link rel="prev" title="LoadBBY v1" href="LoadBBY-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="loadcif-v1">
<span id="algm-loadcif"></span><span id="algm-loadcif-v1"></span><h1>LoadCIF v1<a class="headerlink" href="#loadcif-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/LoadCIF-v1_dlg.png"><img alt="../_images/LoadCIF-v1_dlg.png" class="screenshot" src="../_images/LoadCIF-v1_dlg.png" style="width: 384px;" /></a>
<p class="caption"><strong>LoadCIF</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id3">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a></li>
<li><a class="reference internal" href="#required" id="id6">Required</a></li>
<li><a class="reference internal" href="#usage" id="id7">Usage</a></li>
<li><a class="reference internal" href="#source" id="id8">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id3">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>This algorithm loads a CIF file using the PyCifRW package and assigns a CrystalStructure to the sample of the workspace.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="5%" />
<col width="23%" />
<col width="9%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Workspace</td>
<td>InOut</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Workspace into which the crystal structure is placed.</td>
</tr>
<tr class="row-odd"><td>InputFile</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>A CIF file containing a crystal structure. Allowed values: [&#8216;cif&#8217;]</td>
</tr>
<tr class="row-even"><td>LoadUBMatrix</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Load UB-matrix from CIF file if available.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm uses <tt class="docutils literal"><span class="pre">PyCifRW</span></tt> to parse the supplied CIF-file and extract the information necessary to construct a
<tt class="docutils literal"><span class="pre">CrystalStructure</span></tt> object that is attached to the supplied workspace. For successfully loading a crystal structure,
the CIF-file must contain some mandatory fields, describing the three components that define the structure.</p>
<p><strong>Unit cell</strong></p>
<p>For the unit cell, at least <em>_cell_length_a</em> must be present. If <em>_cell_length_b</em> or <em>_cell_length_c</em> are absent, the
value is replaced with the one of <em>_cell_length_a</em>. Any absent item of <em>_cell_angle_alpha</em>, <em>_cell_angle_beta</em> or
<em>_cell_angle_gamma</em> is replaced with 90.</p>
<p><strong>Space group</strong></p>
<p>The space group is currently loaded based on one of the fields <em>_space_group_name_H-M_alt</em> or
<em>_symmetry_space_group_name_H-M</em>, where the former has precedence over the latter. The value has to correspond to one
of the registered space groups in Mantid (see the corresponding <a class="reference internal" href="../concepts/PointAndSpaceGroups.html#point-and-space-groups"><em>concept page</em></a>).</p>
<p>If neither of the fields is present, the loader tries to recover by using the space group number in either
<em>_symmetry_int_tables_number</em> or <em>_space_group_it_number</em> where again, the former has precedence. This only works if
there is only one setting registered for the specified space group type, because otherwise the algorithm can not decide
which one to use.</p>
<p><strong>Atoms</strong></p>
<p>There needs to be a <em>loop_</em> with at least the following fields: <em>_atom_site_label</em>, <em>_atom_site_fract_x</em>,
<em>_atom_site_fract_y</em> and <em>_atom_site_fract_z</em>. Additionally, <em>_atom_site_type_symbol</em>, <em>_atom_site_occupancy</em> and
<em>_atom_site_U_iso_or_equiv</em> and <em>_atom_site_B_iso_or_equiv</em> (internally converted to U by dividing by <img class="math" src="../_images/math/6108d0506d648fecb7df2e37553ee0412ef4a6ff.png" alt="8\pi^2" style="vertical-align: 0px"/>
are recognized. The labels are expected to contain the element symbol, any non-letter characters (numbers, special
characters) are removed. The <em>_atom_site_label</em> is only used for this purpose when <em>_atom_site_type_symbol</em>
is not present.</p>
<p>The algorithm can also compute <img class="math" src="../_images/math/a0215ddbfe4c29df4723e7b23a05d835c35151ea.png" alt="U_{equiv}" style="vertical-align: -6px"/> from anisotropic ADPs <a class="footnote-reference" href="#id2" id="id1">[1]</a> specified by the fields <em>_atom_site_aniso_u_11</em>,
<em>_atom_site_aniso_u_12</em>, <em>_atom_site_aniso_u_13</em>, <em>_atom_site_aniso_u_22</em>, <em>_atom_site_aniso_u_23</em> and
<em>_atom_site_aniso_u_33</em> (the <img class="math" src="../_images/math/fd8a1eb9153f0dc573e5ebe023a59474dadd17ef.png" alt="B" style="vertical-align: 0px"/>-based variant is recognized too, if both are present, <img class="math" src="../_images/math/adff44a4dc0781f2e2bc774cc30faef0a3c6c41c.png" alt="U" style="vertical-align: 0px"/> is used).
For this to work correctly, the field <em>_atom_site_aniso_label</em> has to be present and contain
the same strings as <em>_atom_site_label</em>. This calculation is only performed for atoms where the isotropic parameter is
missing or invalid. If neither isotropic nor anisotropic parameters are present for an atom, 0 is used.</p>
<p>Optionally, a <a class="reference internal" href="../concepts/Lattice.html#lattice"><em>UB matrix</em></a> can be loaded from the CIF-file and applied to the workspace via the SetUB-algorithm. For this,
the <em>_diffrn_orient_matrix_UB_xy</em> fields have to be set.</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>The equivalent isotropic displacement factor, R. X. Fischer &amp; E. Tillmanns, Acta Crystallogr. C, vol. 44, p. 775,
DOI: <a class="reference external" href="http://dx.doi.org/10.1107/S0108270187012745">10.1107/S0108270187012745</a></td></tr>
</tbody>
</table>
</div>
<div class="section" id="required">
<h2><a class="toc-backref" href="#id6">Required</a><a class="headerlink" href="#required" title="Permalink to this headline">¶</a></h2>
<p>This algorithm requires python package <tt class="docutils literal"><span class="pre">PyCifRW</span></tt>, available at the <a class="reference external" href="https://pypi.python.org/pypi/PyCifRW/4.1">python package index</a>
or through the operating system&#8217;s package manager. If the package is not present, this algorithm will not be available.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id7">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p>The following script loads a CIF-file and prints the space group of the crystal structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sample_ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">()</span>
<span class="n">LoadCIF</span><span class="p">(</span><span class="n">sample_ws</span><span class="p">,</span> <span class="s">&#39;LoadCIF_example_file.cif&#39;</span><span class="p">)</span>

<span class="c"># Get the space group from the crystal structure that was loaded</span>
<span class="n">crystal_structure</span> <span class="o">=</span> <span class="n">sample_ws</span><span class="o">.</span><span class="n">sample</span><span class="p">()</span><span class="o">.</span><span class="n">getCrystalStructure</span><span class="p">()</span>

<span class="k">print</span><span class="p">(</span><span class="s">&#39;Space group: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">crystal_structure</span><span class="o">.</span><span class="n">getSpaceGroup</span><span class="p">()</span><span class="o">.</span><span class="n">getHMSymbol</span><span class="p">()))</span>
</pre></div>
</div>
<p>The output is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Space</span> <span class="n">group</span><span class="p">:</span> <span class="n">F</span> <span class="n">d</span> <span class="o">-</span><span class="mi">3</span> <span class="n">m</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Diffraction/DataHandling.html">Diffraction\DataHandling</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id8">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/PythonInterface/plugins/algorithms/LoadCIF.py">LoadCIF.py</a> <em>(last modified: 2018-10-05)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadBBY-v1.html" title="Previous Chapter: LoadBBY v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadBBY v1</span>
    </a>
  </li>
  <li>
    <a href="LoadCalFile-v1.html" title="Next Chapter: LoadCalFile v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadCalFile v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-07-22.<br/>
    </p>
  </div>
</footer>
  </body>
</html>