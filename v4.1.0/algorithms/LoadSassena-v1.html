<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>LoadSassena v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="LoadSpec v1" href="LoadSpec-v1.html" />
    <link rel="prev" title="LoadSampleShape v1" href="LoadSampleShape-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="loadsassena-v1">
<span id="algm-loadsassena"></span><span id="algm-loadsassena-v1"></span><h1>LoadSassena v1<a class="headerlink" href="#loadsassena-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/LoadSassena-v1_dlg.png"><img alt="../_images/LoadSassena-v1_dlg.png" class="screenshot" src="../_images/LoadSassena-v1_dlg.png" style="width: 426px;" /></a>
<p class="caption"><strong>LoadSassena</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>load a Sassena output file into a group workspace.</div></blockquote>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="5%" />
<col width="20%" />
<col width="8%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>A Sassena file. Allowed extensions: [&#8216;.h5&#8217;, &#8216;.hd5&#8217;]</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The name of the group workspace to be created.</td>
</tr>
<tr class="row-even"><td>TimeUnit</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The Time unit in between data points, in picoseconds. Default is 1.0 picosec.</td>
</tr>
<tr class="row-odd"><td>SortByQVectors</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Sort structure factors by increasing momentum transfer?</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The Sassena application <a class="reference external" href="http://sassena.org">1</a> generates
intermediate scattering factors from molecular dynamics trajectories.
This algorithm reads Sassena output and stores all data in workspaces of
type <a class="reference internal" href="../concepts/Workspace2D.html#workspace2d"><em>Workspace2D</em></a>, grouped under a single
<a class="reference internal" href="../concepts/WorkspaceGroup.html#workspacegroup"><em>WorkspaceGroup</em></a>.</p>
<p>Sassena output files are in HDF5 format
<a class="reference external" href="http://www.hdfgroup.org/HDF5">2</a>, and can be made up of the
following datasets: <em>qvectors</em>, <em>fq</em>, <em>fq0</em>, <em>fq2</em>, and <em>fqt</em></p>
<p>Time units: Current Sassena version does not specify the time unit, thus
the user is required to enter the time in between consecutive data
points. Enter the number of picoseconds separating consecutive
datapoints.</p>
<p>The workspace for <strong>qvectors</strong>:</p>
<ul class="simple">
<li>X-values for the origin of the vector, default: (0,0,0)</li>
<li>Y-values for the tip of the vector</li>
<li>one spectra with three bins for each q-vector, one bin per vector
component. If orientational average was performed by Sassena, then
only the first component is non-zero.</li>
</ul>
<p>The workspaces for <strong>fq</strong>, <strong>fq0</strong>, and <strong>fq2</strong> contains two spectra:</p>
<ul class="simple">
<li>First spectrum is the real part, second spectrum is the imaginary
part</li>
<li>X-values contain the moduli of the q vector</li>
<li>Y-values contain the structure factors</li>
</ul>
<p>Dataset <strong>fqt</strong> is split into two workspaces, one for the real part and
the other for the imaginary part. The structure of these two workspaces
is the same:</p>
<ul class="simple">
<li>X-values contain the time variable</li>
<li>Y-values contain the structure factors</li>
<li>one spectra for each q-vector</li>
</ul>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadSassena</span><span class="p">(</span><span class="s">&quot;loadSassenaExample.h5&quot;</span><span class="p">,</span> <span class="n">TimeUnit</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&#39;workspaces instantiated:  {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">getNames</span><span class="p">())))</span>
<span class="n">fqtReal</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="c"># Real part of F(Q,t)</span>
<span class="c"># Let&#39;s fit it to a Gaussian. We start with an initial guess</span>
<span class="n">intensity</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">center</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="n">sigma</span> <span class="o">=</span> <span class="mf">200.0</span>
<span class="n">startX</span> <span class="o">=</span> <span class="o">-</span><span class="mf">900.0</span>
<span class="n">endX</span> <span class="o">=</span> <span class="mf">900.0</span>
<span class="n">myFunc</span> <span class="o">=</span> <span class="s">&#39;name=Gaussian,Height={0},PeakCentre={1},Sigma={2}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">intensity</span><span class="p">,</span><span class="n">center</span><span class="p">,</span><span class="n">sigma</span><span class="p">)</span>

<span class="c"># Call the Fit algorithm and perform the fit</span>
<span class="n">fit_output</span> <span class="o">=</span> <span class="n">Fit</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="n">myFunc</span><span class="p">,</span> <span class="n">InputWorkspace</span><span class="o">=</span><span class="n">fqtReal</span><span class="p">,</span> <span class="n">WorkspaceIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">StartX</span> <span class="o">=</span> <span class="n">startX</span><span class="p">,</span> <span class="n">EndX</span><span class="o">=</span><span class="n">endX</span><span class="p">,</span> <span class="n">Output</span><span class="o">=</span><span class="s">&#39;fit&#39;</span><span class="p">)</span>
<span class="n">paramTable</span> <span class="o">=</span> <span class="n">fit_output</span><span class="o">.</span><span class="n">OutputParameters</span>  <span class="c"># table containing the optimal fit parameters</span>
<span class="n">fitWorkspace</span> <span class="o">=</span> <span class="n">fit_output</span><span class="o">.</span><span class="n">OutputWorkspace</span>

<span class="k">print</span><span class="p">(</span><span class="s">&quot;The fit was: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fit_output</span><span class="o">.</span><span class="n">OutputStatus</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Fitted Height value is: {:.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">paramTable</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Fitted centre value is: {:.2f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">paramTable</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">1</span><span class="p">])))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Fitted sigma value is: {:.1f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">paramTable</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">2</span><span class="p">]))</span>
<span class="c"># fitWorkspace contains the data, the calculated and the difference patterns</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Number of spectra in fitWorkspace is: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fitWorkspace</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;The 989th y-value of the fitted curve: {:.3f}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">fitWorkspace</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">989</span><span class="p">]))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>workspaces instantiated:  ws_qvectors, ws_fqt.Re, ws_fqt.Im
The fit was: success
Fitted Height value is: 1.00
Fitted centre value is: 0.00
Fitted sigma value is: 100.0
Number of spectra in fitWorkspace is: 3
The 989th y-value of the fitted curve: 0.673
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Sassena.html">DataHandling\Sassena</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/DataHandling/src/LoadSassena.cpp">LoadSassena.cpp</a> <em>(last modified: 2019-06-17)</em></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/DataHandling/inc/MantidDataHandling/LoadSassena.h">LoadSassena.h</a> <em>(last modified: 2018-10-05)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadSampleShape-v1.html" title="Previous Chapter: LoadSampleShape v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadSampleShape ...</span>
    </a>
  </li>
  <li>
    <a href="LoadSpec-v1.html" title="Next Chapter: LoadSpec v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadSpec v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-07-22.<br/>
    </p>
  </div>
</footer>
  </body>
</html>