<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>IntegratePeaksProfileFitting v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="IntegratePeaksUsingClusters v1" href="IntegratePeaksUsingClusters-v1.html" />
    <link rel="prev" title="IntegratePeaksMDHKL v1" href="IntegratePeaksMDHKL-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="integratepeaksprofilefitting-v1">
<span id="algm-integratepeaksprofilefitting"></span><span id="algm-integratepeaksprofilefitting-v1"></span><h1>IntegratePeaksProfileFitting v1<a class="headerlink" href="#integratepeaksprofilefitting-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/IntegratePeaksProfileFitting-v1_dlg.png"><img alt="../_images/IntegratePeaksProfileFitting-v1_dlg.png" class="screenshot" src="../_images/IntegratePeaksProfileFitting-v1_dlg.png" style="width: 332px;" /></a>
<p class="caption"><strong>IntegratePeaksProfileFitting</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#similar-algorithms" id="id4">Similar algorithms</a></li>
<li><a class="reference internal" href="#inputs" id="id5">Inputs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#instrument-defined-parameters" id="id6">Instrument-Defined Parameters</a></li>
<li><a class="reference internal" href="#calculations" id="id7">Calculations</a><ul>
<li><a class="reference internal" href="#constructing-the-measured-intensity-distribution" id="id8">Constructing the Measured Intensity Distribution</a></li>
<li><a class="reference internal" href="#fitting-the-time-of-flight-coordinate" id="id9">Fitting the Time-of-Flight Coordinate</a></li>
<li><a class="reference internal" href="#fitting-the-non-tof-coordinate" id="id10">Fitting the Non-TOF Coordinate</a></li>
<li><a class="reference internal" href="#integrating-the-model" id="id11">Integrating the Model</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id12">Usage</a></li>
<li><a class="reference internal" href="#source" id="id13">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Fits a series of peaks using 3D profile fitting as an Ikeda-Carpenter function by a bivariate gaussian.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="4%" />
<col width="15%" />
<col width="6%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>OutputPeaksWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>PeaksWorkspace with integrated peaks</td>
</tr>
<tr class="row-odd"><td>OutputParamsWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>MatrixWorkspace with fit parameters</td>
</tr>
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An input Sample MDHistoWorkspace or MDEventWorkspace in HKL.</td>
</tr>
<tr class="row-odd"><td>PeaksWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>PeaksWorkspace with peaks to be integrated.</td>
</tr>
<tr class="row-even"><td>UBFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>File containing the UB Matrix in ISAW format. Leave blank to use loaded UB Matrix. Allowed extensions: [&#8216;.mat&#8217;]</td>
</tr>
<tr class="row-odd"><td>ModeratorCoefficientsFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>File containing the Pade coefficients describing moderator emission versus energy. Allowed extensions: [&#8216;.dat&#8217;]</td>
</tr>
<tr class="row-even"><td>StrongPeakParamsFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>File containing strong peaks profiles.  If left blank, strong peaks will be fit first. Allowed extensions: [&#8216;.pkl&#8217;]</td>
</tr>
<tr class="row-odd"><td>IntensityCutoff</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Minimum number of counts to force a profile</td>
</tr>
<tr class="row-even"><td>EdgeCutoff</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Pixels within EdgeCutoff from a detector edge will be have a profile forced.</td>
</tr>
<tr class="row-odd"><td>FracStop</td>
<td>Input</td>
<td>number</td>
<td>0.05</td>
<td>Fraction of max counts to include in peak selection.</td>
</tr>
<tr class="row-even"><td>MinpplFrac</td>
<td>Input</td>
<td>number</td>
<td>0.9</td>
<td>Min fraction of predicted background level to check</td>
</tr>
<tr class="row-odd"><td>MaxpplFrac</td>
<td>Input</td>
<td>number</td>
<td>1.1</td>
<td>Max fraction of predicted background level to check</td>
</tr>
<tr class="row-even"><td>DQMax</td>
<td>Input</td>
<td>number</td>
<td>0.15</td>
<td>Largest total side length (in Angstrom) to consider for profile fitting.</td>
</tr>
<tr class="row-odd"><td>PeakNumber</td>
<td>Input</td>
<td>number</td>
<td>-1</td>
<td>Which Peak to fit.  Leave negative for all.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm performs integration of single crystal Bragg peaks by fitting
the intensity distribution as a 3D distribution made of an Ikeda-Carpenter
function (TOF coordinate) and a bivariate Normal distribution.</p>
<div class="section" id="similar-algorithms">
<h3><a class="toc-backref" href="#id4">Similar algorithms</a><a class="headerlink" href="#similar-algorithms" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference internal" href="IntegratePeaksMD-v2.html#algm-integratepeaksmd"><em>IntegratePeaksMD v2</em></a> or <a class="reference internal" href="IntegrateEllipsoids-v1.html#algm-integrateellipsoids"><em>IntegrateEllipsoids v1</em></a> for peak-minus-background
integration algorithms in reciprocal space.</p>
</div>
<div class="section" id="inputs">
<h3><a class="toc-backref" href="#id5">Inputs</a><a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h3>
<p>The algorithms takes two input workspaces:</p>
<ul class="simple">
<li>A MDEventWorkspace containing the events in multi-dimensional space.
This would be the output of
<a class="reference internal" href="ConvertToMD-v1.html#algm-converttomd"><em>ConvertToMD v1</em></a>.</li>
<li>As well as a PeaksWorkspace containing single-crystal peak locations.
This could be the output of <a class="reference internal" href="FindPeaksMD-v1.html#algm-findpeaksmd"><em>FindPeaksMD v1</em></a> or <a class="reference internal" href="PredictPeaks-v1.html#algm-predictpeaks"><em>PredictPeaks v1</em></a>.  All peaks should
be from the same run.</li>
<li>The OutputPeaksWorkspace will contain a copy of the input PeaksWorkspace,
with the integrated intensities and errors changed.</li>
<li>The OutputParamsWorkspace is a TableWorkspace containing the fit parameters.
Peaks which could not be fit are omitted.</li>
</ul>
</div>
</div>
<div class="section" id="instrument-defined-parameters">
<h2><a class="toc-backref" href="#id6">Instrument-Defined Parameters</a><a class="headerlink" href="#instrument-defined-parameters" title="Permalink to this headline">¶</a></h2>
<p>In addition to the input parameters defined above, there are several other parameters
to be aware of which are pre-defined for each instrument.  The instrument is determined
from the instrument that is loaded into PeaksWorkspace. If the instrument parameters file
does not contain parameters, the algorithm defaults to MaNDi parameters. Default
values are below:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="39%" />
<col width="14%" />
<col width="14%" />
<col width="13%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameter</th>
<th class="head">Description</th>
<th class="head">MaNDi</th>
<th class="head">TOPAZ</th>
<th class="head">CORELLI</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>DQPixel</td>
<td>The side length for each
voxel used for fitting.
Units: 1/Angstrom</td>
<td>0.003</td>
<td>0.006</td>
<td>0.007</td>
</tr>
<tr class="row-odd"><td>FracHKL</td>
<td>The distance between peaks
(in fraction of hkl) that
is used for fitting.</td>
<td>0.25</td>
<td>0.25</td>
<td>0.25</td>
</tr>
<tr class="row-even"><td>MinDtBinWidth</td>
<td>The smallest time bin used
for fitting the TOF profile
Units: microseconds</td>
<td>15</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="row-odd"><td>MaxDtBinWidth</td>
<td>The largest time bin used
for fitting the TOF profile
Units: microseconds</td>
<td>50</td>
<td>15</td>
<td>60</td>
</tr>
<tr class="row-even"><td>NTheta</td>
<td>The number of bins along
the scattering direction
used for BVG fitting.</td>
<td>50</td>
<td>50</td>
<td>50</td>
</tr>
<tr class="row-odd"><td>NPhi</td>
<td>The number of bins along
the azimuthal direction
used for BVG fitting.</td>
<td>50</td>
<td>50</td>
<td>50</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="calculations">
<h2><a class="toc-backref" href="#id7">Calculations</a><a class="headerlink" href="#calculations" title="Permalink to this headline">¶</a></h2>
<p>This algorithm will fit a set of peaks in a PeaksWorkspace.  The intensity profile
is fit to an MDHisto workspace formed around the peak location.</p>
<div class="section" id="constructing-the-measured-intensity-distribution">
<h3><a class="toc-backref" href="#id8">Constructing the Measured Intensity Distribution</a><a class="headerlink" href="#constructing-the-measured-intensity-distribution" title="Permalink to this headline">¶</a></h3>
<p>To construct the measured distribution to be fit, a histogram of events is made around the peak.
This histogram is in (q<sub>x</sub>,  q<sub>y</sub>, q<sub>z</sub>) and composed of voxels of side
length <strong>DQPixel</strong>.  To minimize the effect of neighboring peaks on profile fitting, the variable
<strong>qMask</strong> is used to only consider a region around the peak in (h,k,l) space.  It will filter voxels
outside of (h ± <strong>FracHKL</strong>, k ± <strong>FracHKL</strong>, l ± <strong>FracHKL</strong>) from calculations used for profile
fitting. In practice, values of 0.25 &lt; <strong>fracHKL</strong> &lt; 0.5 seem to work best.</p>
</div>
<div class="section" id="fitting-the-time-of-flight-coordinate">
<h3><a class="toc-backref" href="#id9">Fitting the Time-of-Flight Coordinate</a><a class="headerlink" href="#fitting-the-time-of-flight-coordinate" title="Permalink to this headline">¶</a></h3>
<p>The time-of-flight (TOF), t, of each voxel is determined as:</p>
<div class="math">
<p><img src="../_images/math/d6a0ed71d8de00d6f367646514dde3dbbd520c02.png" alt="t = k \times \frac{(L_1 + L_2)\sin(\theta)}{|\vec{q}|}"/></p>
</div><p>The events are histogrammed by their <cite>t</cite> values to create a TOF profile.  This profile can then be fit
to the Ikeda Carpenter function.  To separate the peak and background, different levels of intensity are
filtered out.  The predicted background level is determined as the average background not near the peak or off the edge
and values within <strong>Minppl_frac</strong> and <strong>Maxppl_frac</strong> times the predicted value are tried.  The best fit to the expected
moderator emission (determined by the moderator coefficients defined in <strong>ModeratorCoefficientsFile</strong>) is
taken and these voxels are considered to be signal.</p>
</div>
<div class="section" id="fitting-the-non-tof-coordinate">
<h3><a class="toc-backref" href="#id10">Fitting the Non-TOF Coordinate</a><a class="headerlink" href="#fitting-the-non-tof-coordinate" title="Permalink to this headline">¶</a></h3>
<p>TOF goes as <img class="math" src="../_images/math/55b7255fb05fbc850236fad3f5019098aabbd317.png" alt="1/|\vec{q}|" style="vertical-align: -5px"/> and so it is natural to use spherical coordinate.  In that sense, the other two coordinates
are  <img class="math" src="../_images/math/6443167bb941894e99d0d69c4b3b355f4bcd0058.png" alt="(q_{\theta} ,  q_{\phi_az})" style="vertical-align: -6px"/> - along the scattering angle and azimuthal angle, respectively.  From the
MDHisto Workspace (filtered by <strong>qMask</strong> and using only the signal voxels from the TOF fight), a 2D histogram is constructed
which is fit to a bivariate normal distribution.  The histogram has <strong>NTheta</strong> <img class="math" src="../_images/math/67822dd868566f30d9b5bae6e432e381e602d3ac.png" alt="\times" style="vertical-align: 0px"/> <strong>NPhi</strong> bins.</p>
<p>For weak peaks or peaks near detector edges, the 2D histogram likely does not reflect the full profile.  To address this, the
profile of the nearest strong peaks is forced when doing the BVG fit.  The profile is fit (allowed to vary 10% in
<img class="math" src="../_images/math/099c99e8c07e93d751a3e04f510a855aed9559d4.png" alt="\sigma_x, \sigma_y, \rho" style="vertical-align: -6px"/> ) and location and amplitude are not fixed.  Weak peaks are defined as peaks with fewer
than <strong>IntensityCutoff</strong> counts from peak-minus-background integration or within <strong>EdgeCutoff</strong> pixels of the detector edge.</p>
<p>The strong peaks library can be generated in two ways.  First, it can be provided as an input file through <strong>StrongPeakParamsFile</strong>.
The <strong>StrongPeakParamsFile</strong> should be a .pkl file which contains a Numpy array containing the parameters used for strong peaks.
Alternatively, if no file is provided, the algorithm will go through and fit strong peaks first, building the strong peaks library
as it goes.  After fitting all of the strong peaks, defined as peaks with spherical intensities above <strong>IntensityCutoff</strong> and further
than <strong>EdgeCutoff</strong> pixels from the edge, it will fit weak peaks using those profiles. For initial guesses, the algorithm will fit
the first 30 peaks using the instrument default parameters.  After that, it will use already fit peaks to determine initial guesses.</p>
</div>
<div class="section" id="integrating-the-model">
<h3><a class="toc-backref" href="#id11">Integrating the Model</a><a class="headerlink" href="#integrating-the-model" title="Permalink to this headline">¶</a></h3>
<p>The final intensity profile is given by</p>
<div class="math">
<p><img src="../_images/math/32656d5bed5aa099fa56df2a7036e1115c09f8d1.png" alt="Y(\vec{q}) = A \times Y_{TOF}(\vec{q}) \times Y_{BVG}(\vec{q}) + B"/></p>
</div><p>where <img class="math" src="../_images/math/565d5265a5771ce110bca359c85a858ec1d8e7e2.png" alt="A" style="vertical-align: 0px"/> and <img class="math" src="../_images/math/fd8a1eb9153f0dc573e5ebe023a59474dadd17ef.png" alt="B" style="vertical-align: 0px"/> are scaling constants.  Here the background is assumed to be constant <img class="math" src="../_images/math/fd8a1eb9153f0dc573e5ebe023a59474dadd17ef.png" alt="B" style="vertical-align: 0px"/> over the volume of
the peak, so the model of the peak itself is <img class="math" src="../_images/math/d5aa21f8c293e48b88f6c0f551190f69fcdebc9c.png" alt="Y_{model}(\vec{q}) = A \times Y_{TOF}(\vec{q}) \times Y_{BVG}(\vec{q})" style="vertical-align: -4px"/>.
The peak intensity <img class="math" src="../_images/math/8cbabf0be514c984d6ec320163dd139dc67e0d12.png" alt="I" style="vertical-align: 0px"/>, is given by summing <img class="math" src="../_images/math/d50a566a2878354cbbca856f5315aa1ed0ca6a45.png" alt="Y_{model}(\vec{q})" style="vertical-align: -4px"/> over voxels which are greater than <strong>FracStop</strong> of the maximum.</p>
<p><img class="math" src="../_images/math/f09d616d942f42b422ff5dfe8e46d5641cf68855.png" alt="\sigma(I)" style="vertical-align: -4px"/> is given  as</p>
<div class="math">
<p><img src="../_images/math/49880978cd14b748ff01fd478724be1b62d8f646.png" alt="\sigma(I) = \sqrt{\Sigma N_{obs} + \Sigma N_{BG} + \frac{\Sigma N_{obs}(N_{obs}-N_{model})^2}{\Sigma N_{obs}}}"/></p>
</div><p>where the first two terms come from Poissionian statistics and the final term is the variance of the fit. Those
sums are over the same voxels used to calculate intensity.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id12">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - IntegratePeaksProfileFitting</strong></p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;/SNS/MANDI/IPTS-8776/0/5921/NeXus/MANDI_5921_event.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;MANDI_5921_event&#39;</span><span class="p">)</span>
 <span class="n">MANDI_5921_md</span> <span class="o">=</span> <span class="n">ConvertToMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;MANDI_5921_event&#39;</span><span class="p">,</span>  <span class="n">QDimensions</span><span class="o">=</span><span class="s">&#39;Q3D&#39;</span><span class="p">,</span> <span class="n">dEAnalysisMode</span><span class="o">=</span><span class="s">&#39;Elastic&#39;</span><span class="p">,</span>
                          <span class="n">Q3DFrames</span><span class="o">=</span><span class="s">&#39;Q_lab&#39;</span><span class="p">,</span> <span class="n">QConversionScales</span><span class="o">=</span><span class="s">&#39;Q in A^-1&#39;</span><span class="p">,</span>
                          <span class="n">MinValues</span><span class="o">=</span><span class="s">&#39;-5, -5, -5&#39;</span><span class="p">,</span> <span class="n">Maxvalues</span><span class="o">=</span><span class="s">&#39;5, 5, 5&#39;</span><span class="p">,</span> <span class="n">MaxRecursionDepth</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                          <span class="n">LorentzCorrection</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
 <span class="n">LoadIsawPeaks</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;/SNS/MANDI/shared/ProfileFitting/demo_5921.integrate&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s">&#39;peaks_ws&#39;</span><span class="p">)</span>

 <span class="n">IntegratePeaksProfileFitting</span><span class="p">(</span><span class="n">OutputPeaksWorkspace</span><span class="o">=</span><span class="s">&#39;peaks_ws_out&#39;</span><span class="p">,</span> <span class="n">OutputParamsWorkspace</span><span class="o">=</span><span class="s">&#39;params_ws&#39;</span><span class="p">,</span>
         <span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;MANDI_5921_md&#39;</span><span class="p">,</span> <span class="n">PeaksWorkspace</span><span class="o">=</span><span class="s">&#39;peaks_ws&#39;</span><span class="p">,</span>
         <span class="n">UBFile</span><span class="o">=</span><span class="s">&#39;/SNS/MANDI/shared/ProfileFitting/demo_5921.mat&#39;</span><span class="p">,</span> <span class="n">MinpplFrac</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">MaxpplFrac</span><span class="o">=</span><span class="mf">1.1</span><span class="p">,</span>
         <span class="n">ModeratorCoefficientsFile</span><span class="o">=</span><span class="s">&#39;/SNS/MANDI/shared/ProfileFitting/franz_coefficients_2017.dat&#39;</span><span class="p">,</span>
         <span class="n">StrongPeakParamsFile</span><span class="o">=</span><span class="s">&#39;/SNS/MANDI/shared/ProfileFitting/strongPeakParams_beta_lac_mut_mbvg.pkl&#39;</span><span class="p">,</span>
         <span class="n">peakNumber</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Crystal/Integration.html">Crystal\Integration</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id13">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4f102e5150ac52e22844cc01d797043938307727/Framework/PythonInterface/plugins/algorithms/IntegratePeaksProfileFitting.py">IntegratePeaksProfileFitting.py</a> <em>(last modified: 2018-11-02)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="IntegratePeaksMDHKL-v1.html" title="Previous Chapter: IntegratePeaksMDHKL v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; IntegratePeaksMD...</span>
    </a>
  </li>
  <li>
    <a href="IntegratePeaksUsingClusters-v1.html" title="Next Chapter: IntegratePeaksUsingClusters v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">IntegratePeaksUs... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-07-22.<br/>
    </p>
  </div>
</footer>
  </body>
</html>