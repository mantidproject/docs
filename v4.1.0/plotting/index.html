<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Introduction to Matplotlib in Mantid</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '4.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="Release Notes" href="../release/index.html" />
    <link rel="prev" title="&lt;no title&gt;" href="../api/python/changes.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>4.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="contents local topic" id="table-of-contents">
<span id="plotting"></span><p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction-to-matplotlib-in-mantid" id="id1">Introduction to Matplotlib in Mantid</a></li>
<li><a class="reference internal" href="#showing-saving-figures" id="id2">Showing/saving figures</a></li>
<li><a class="reference internal" href="#simple-plots" id="id3">Simple plots</a></li>
<li><a class="reference internal" href="#plotting-sample-logs" id="id4">Plotting Sample Logs</a></li>
<li><a class="reference internal" href="#complex-plots" id="id5">Complex plots</a></li>
<li><a class="reference internal" href="#change-matplotlib-defaults" id="id6">Change Matplotlib Defaults</a></li>
</ul>
</div>
<div class="section" id="introduction-to-matplotlib-in-mantid">
<h1><a class="toc-backref" href="#id1">Introduction to Matplotlib in Mantid</a><a class="headerlink" href="#introduction-to-matplotlib-in-mantid" title="Permalink to this headline">¶</a></h1>
<p>Mantid can now use <a class="reference external" href="https://matplotlib.org/">Matplotlib</a> to produce figures.
There are several advantages of using this software package:</p>
<ul class="simple">
<li>it is python based, so it can easily be incorporated into Mantid scripts</li>
<li>there is a large user community, and therefore excellent documentation and examples are available</li>
<li>it is easy to change from plotting on the screen to produce publication quality plots in various image formats</li>
</ul>
<p>While Matplotlib is using data arrays for inputs in the plotting routines,
it is now possible to also use several types on Mantid workspaces instead.
For a detailed list of functions that use workspaces, see the documentation
of the <a class="reference internal" href="../api/python/mantid/plots/index.html#mantid-plots"><em>mantid.plots</em></a> module.</p>
<p>This page is intended to provide examples about how to use different
Matplotlib commands for several types of common task that Mantid users are interested in.</p>
<p>To understand the matplotlib vocabulary, a useful tool is the <a class="reference external" href="https://matplotlib.org/examples/showcase/anatomy.html">&#8220;anatomy of a figure&#8221;</a>, also shown below.</p>
<p>(<a class="reference external" href="../plotting/index-1.py">Source code</a>, <a class="reference external" href="../plotting/index-1.png">png</a>, <a class="reference external" href="../plotting/index-1.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-1.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-1.png" src="../_images/index-1.png" />
</div>
<p>Here are some of the highlights:</p>
<ul class="simple">
<li><strong>Figure</strong> is the main container in matplotlib. You can think of it as the page</li>
<li><strong>Axes</strong> is the coordinate system. It contains most of the figure elements, such as Axis, Line2D, Text.
One can have multiple Axes objects in one Figure</li>
<li><strong>Axis</strong> is the container for the ticks and labels for the x and y axis of the plot</li>
</ul>
</div>
<div class="section" id="showing-saving-figures">
<h1><a class="toc-backref" href="#id2">Showing/saving figures</a><a class="headerlink" href="#showing-saving-figures" title="Permalink to this headline">¶</a></h1>
<p>There are two main ways that one can visualize images produced by matplotlib. The first one
is to pop up a window with the required graph. For that, we use the <cite>show()</cite> function of the figure.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c">#some code to generate figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>If one wants to save the output, the figure object has a function called <cite>savefig</cite>.
The main argument of savefig is the filename. Matplotlib will figure out the format of the figure
from the file extension. The &#8216;png&#8217;, &#8216;ps&#8217;, &#8216;eps&#8217;, and &#8216;pdf&#8217; extensions will work with
almost any backend. For more information, see the documentation of
<a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure.savefig">Figure.savefig</a>
Just replace the code above with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="c">#some code to generate figure</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;plot1.png&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s">&#39;plot1.eps&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Sometimes one wants to save a multi-page pdf document. Here is how to do this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_pdf</span> <span class="kn">import</span> <span class="n">PdfPages</span>

<span class="k">with</span> <span class="n">PdfPages</span><span class="p">(</span><span class="s">&#39;/home/andrei/Desktop/multipage_pdf.pdf&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pdf</span><span class="p">:</span>
    <span class="c">#page1</span>
    <span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;Page1&#39;</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    <span class="c">#page2</span>
    <span class="n">fig</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;Page2&#39;</span><span class="p">)</span>
    <span class="n">pdf</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="simple-plots">
<h1><a class="toc-backref" href="#id3">Simple plots</a><a class="headerlink" href="#simple-plots" title="Permalink to this headline">¶</a></h1>
<p>For matrix workspaces, if we use the <cite>mantid</cite> projection, one can plot the data in a similar
fashion as the plotting of arrays in matplotlib. Moreover, one can combine the two in the same figure</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span>

<span class="c"># Create a workspace that has a Gaussian peak</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y0</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">20</span><span class="p">)</span>
<span class="n">err</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y0</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y</span> <span class="o">+=</span> <span class="n">err</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">DataE</span><span class="o">=</span><span class="n">err</span><span class="p">,</span> <span class="n">NSpec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">UnitX</span><span class="o">=</span><span class="s">&#39;DeltaE&#39;</span><span class="p">)</span>

<span class="c"># Plot - note that the projection=&#39;mantid&#39; keyword is passed to all axes</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;projection&#39;</span><span class="p">:</span><span class="s">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;rs&#39;</span><span class="p">)</span> <span class="c"># plot the workspace with errorbars, using red squares</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="s">&#39;k-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Initial guess&#39;</span><span class="p">)</span> <span class="c"># plot the initial guess with black line</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span> <span class="c"># show the legend</span>
<span class="c">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-2.py">Source code</a>, <a class="reference external" href="../plotting/index-2.png">png</a>, <a class="reference external" href="../plotting/index-2.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-2.png" src="../_images/index-2.png" />
</div>
<p>Some data should be visualized as two dimensional colormaps</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">Load</span><span class="p">,</span> <span class="n">ConvertToMD</span><span class="p">,</span> <span class="n">BinMD</span><span class="p">,</span> <span class="n">ConvertUnits</span><span class="p">,</span> <span class="n">Rebin</span>
<span class="kn">from</span> <span class="nn">matplotlib.colors</span> <span class="kn">import</span> <span class="n">LogNorm</span>

<span class="c"># generate a nice 2D multi-dimensional workspace</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&#39;CNCS_7860&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">ConvertUnits</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span><span class="n">Target</span><span class="o">=</span><span class="s">&#39;DeltaE&#39;</span><span class="p">,</span> <span class="n">EMode</span><span class="o">=</span><span class="s">&#39;Direct&#39;</span><span class="p">,</span> <span class="n">EFixed</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">Rebin</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">Params</span><span class="o">=</span><span class="s">&#39;-3,0.025,3&#39;</span><span class="p">,</span> <span class="n">PreserveEvents</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">md</span> <span class="o">=</span> <span class="n">ConvertToMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                 <span class="n">QDimensions</span><span class="o">=</span><span class="s">&#39;|Q|&#39;</span><span class="p">,</span>
                 <span class="n">dEAnalysisMode</span><span class="o">=</span><span class="s">&#39;Direct&#39;</span><span class="p">)</span>
<span class="n">sqw</span> <span class="o">=</span> <span class="n">BinMD</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">md</span><span class="p">,</span>
            <span class="n">AlignedDim0</span><span class="o">=</span><span class="s">&#39;|Q|,0,3,100&#39;</span><span class="p">,</span>
            <span class="n">AlignedDim1</span><span class="o">=</span><span class="s">&#39;DeltaE,-3,3,100&#39;</span><span class="p">)</span>

<span class="c">#2D plot</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;projection&#39;</span><span class="p">:</span><span class="s">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">sqw</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">LogNorm</span><span class="p">())</span>
<span class="n">cbar</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">cbar</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="s">&#39;Intensity (arb. units)&#39;</span><span class="p">)</span> <span class="c">#add text to colorbar</span>
<span class="c">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-3.py">Source code</a>, <a class="reference external" href="../plotting/index-3.png">png</a>, <a class="reference external" href="../plotting/index-3.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-3.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-3.png" src="../_images/index-3.png" />
</div>
<p>One can then change properties of the plot. Here is an example that
changes the label of the data, changes the label of the x and y axis,
changes the limits for the y axis, adds a title, change tick orientations,
and adds a grid</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span>

<span class="c"># Create a workspace that has a Gaussian peak</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y0</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mf">50.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mf">10.</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mf">20.</span><span class="p">)</span>
<span class="n">err</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y0</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mf">20.</span><span class="p">)</span>
<span class="n">y</span> <span class="o">+=</span> <span class="n">err</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">DataE</span><span class="o">=</span><span class="n">err</span><span class="p">,</span> <span class="n">NSpec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">UnitX</span><span class="o">=</span><span class="s">&#39;DeltaE&#39;</span><span class="p">)</span>

<span class="c"># Plot - note that the projection=&#39;mantid&#39; keyword is passed to all axes</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;projection&#39;</span><span class="p">:</span><span class="s">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;rs&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Data&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y0</span><span class="p">,</span><span class="s">&#39;k-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Initial guess&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Better energy estimate ($10^3\mu eV$)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Neutron counts&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;Gaussian example&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s">&#39;out&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="c">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-4.py">Source code</a>, <a class="reference external" href="../plotting/index-4.png">png</a>, <a class="reference external" href="../plotting/index-4.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-4.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-4.png" src="../_images/index-4.png" />
</div>
<p>Let&#8217;s create now a figure with two panels. In the upper part we show the workspace as
above, but we add a fit, In the bottom part we add the difference.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">division</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span><span class="p">,</span> <span class="n">Fit</span>

<span class="c"># Create a workspace that has a Gaussian peak</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y0</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">20</span><span class="p">)</span>
<span class="n">err</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y0</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">10.</span><span class="o">+</span><span class="mi">50</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mi">10</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="mi">20</span><span class="p">)</span>
<span class="n">y</span> <span class="o">+=</span> <span class="n">err</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">err</span><span class="p">))</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="n">x</span><span class="p">,</span> <span class="n">DataY</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">DataE</span><span class="o">=</span><span class="n">err</span><span class="p">,</span> <span class="n">NSpec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">UnitX</span><span class="o">=</span><span class="s">&#39;DeltaE&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">Fit</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="s">&#39;name=LinearBackground,A0=10,A1=0.;name=Gaussian,Height=60.,PeakCentre=10.,Sigma=3.&#39;</span><span class="p">,</span>
             <span class="n">InputWorkspace</span><span class="o">=</span><span class="s">&#39;w&#39;</span><span class="p">,</span>
             <span class="n">Output</span><span class="o">=</span><span class="s">&#39;w&#39;</span><span class="p">,</span>
             <span class="n">OutputCompositeMembers</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c"># The handle to the output workspace is result.OutputWorkspace. The first spectrum is the data,</span>
<span class="c"># the second is the fit, the third is the difference. Subsequent spectra are the calculated</span>
<span class="c"># functions of each of the components of the fit (here LinearBackground and Gaussian)</span>
<span class="c"># Note that the difference spectrum has 0 errors. One can copy the errors from data</span>
<span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="o">.</span><span class="n">setE</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="o">.</span><span class="n">readE</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>

<span class="c">#do the plotting</span>
<span class="n">fig</span><span class="p">,</span> <span class="p">[</span><span class="n">ax_top</span><span class="p">,</span> <span class="n">ax_bottom</span><span class="p">]</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
                                        <span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                                        <span class="n">ncols</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                                        <span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                                        <span class="n">gridspec_kw</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;height_ratios&#39;</span><span class="p">:[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">]},</span>
                                        <span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;projection&#39;</span><span class="p">:</span><span class="s">&#39;mantid&#39;</span><span class="p">})</span>

<span class="n">ax_top</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="p">,</span><span class="s">&#39;rs&#39;</span><span class="p">,</span><span class="n">wkspIndex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Data&#39;</span><span class="p">)</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="p">,</span><span class="s">&#39;b-&#39;</span><span class="p">,</span><span class="n">wkspIndex</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s">&#39;Fit&#39;</span><span class="p">)</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Neutron counts&#39;</span><span class="p">)</span>
<span class="n">ax_top</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">&#39;both&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
<span class="n">ax_bottom</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">OutputWorkspace</span><span class="p">,</span><span class="s">&#39;ko&#39;</span><span class="p">,</span><span class="n">wkspIndex</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax_bottom</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">&#39;both&#39;</span><span class="p">,</span> <span class="n">direction</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
<span class="n">ax_bottom</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Difference&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-5.py">Source code</a>, <a class="reference external" href="../plotting/index-5.png">png</a>, <a class="reference external" href="../plotting/index-5.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-5.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-5.png" src="../_images/index-5.png" />
</div>
<p>One can do twin axes as well:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>

<span class="c"># Create some mock data</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">data1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="n">data2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">t</span><span class="p">)</span>
<span class="n">ws1</span><span class="o">=</span><span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">data1</span><span class="p">,</span><span class="n">UnitX</span><span class="o">=</span><span class="s">&#39;MomentumTransfer&#39;</span><span class="p">)</span>
<span class="n">ws2</span><span class="o">=</span><span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="n">data2</span><span class="p">,</span><span class="n">UnitX</span><span class="o">=</span><span class="s">&#39;MomentumTransfer&#39;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;projection&#39;</span><span class="p">:</span><span class="s">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">color</span> <span class="o">=</span> <span class="s">&#39;red&#39;</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ws1</span><span class="p">,</span><span class="s">&#39;r-&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;exp&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">color</span> <span class="o">=</span> <span class="s">&#39;blue&#39;</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ws2</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;sin&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">labelcolor</span><span class="o">=</span><span class="n">color</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-6.py">Source code</a>, <a class="reference external" href="../plotting/index-6.png">png</a>, <a class="reference external" href="../plotting/index-6.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-6.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-6.png" src="../_images/index-6.png" />
</div>
</div>
<div class="section" id="plotting-sample-logs">
<h1><a class="toc-backref" href="#id4">Plotting Sample Logs</a><a class="headerlink" href="#plotting-sample-logs" title="Permalink to this headline">¶</a></h1>
<p>The <tt class="xref py py-func docutils literal"><span class="pre">mantid.plots.MantidAxes.plot</span></tt> function can show sample logs. By default,
the time axis represents the time since the first proton charge pulse (the
beginning of the run), but one can also plot absolute time using <cite>FullTime=True</cite></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">Load</span>

<span class="n">w</span><span class="o">=</span><span class="n">Load</span><span class="p">(</span><span class="s">&#39;CNCS_7860&#39;</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="s">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="s">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;ChopperStatus5&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;From run start&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&#39;ChopperStatus5&#39;</span><span class="p">,</span><span class="n">FullTime</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">&#39;Absolute time&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-7.py">Source code</a>, <a class="reference external" href="../plotting/index-7.png">png</a>, <a class="reference external" href="../plotting/index-7.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-7.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-7.png" src="../_images/index-7.png" />
</div>
<p>Note that the parasite axes in matplotlib do not accept the projection keyword.
So one needs to use <a class="reference internal" href="../api/python/mantid/plots/index.html#mantid.plots.plotfunctions.plot" title="mantid.plots.plotfunctions.plot"><tt class="xref py py-func docutils literal"><span class="pre">mantid.plots.plotfunctions.plot</span></tt></a> instead.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">Load</span>
<span class="n">w</span><span class="o">=</span><span class="n">Load</span><span class="p">(</span><span class="s">&#39;CNCS_7860&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;projection&#39;</span><span class="p">:</span><span class="s">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="n">LogName</span><span class="o">=</span><span class="s">&#39;ChopperStatus5&#39;</span><span class="p">)</span>
<span class="n">axt</span><span class="o">=</span><span class="n">ax</span><span class="o">.</span><span class="n">twiny</span><span class="p">()</span>
<span class="n">plots</span><span class="o">.</span><span class="n">plotfunctions</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">axt</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">LogName</span><span class="o">=</span><span class="s">&#39;ChopperStatus5&#39;</span><span class="p">,</span> <span class="n">FullTime</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="c">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-8.py">Source code</a>, <a class="reference external" href="../plotting/index-8.png">png</a>, <a class="reference external" href="../plotting/index-8.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-8.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-8.png" src="../_images/index-8.png" />
</div>
</div>
<div class="section" id="complex-plots">
<h1><a class="toc-backref" href="#id5">Complex plots</a><a class="headerlink" href="#complex-plots" title="Permalink to this headline">¶</a></h1>
<p>One common type of a slightly more complex figure involves drawing an inset.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateWorkspace</span><span class="p">,</span> <span class="n">FFT</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">rcParams</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">250</span><span class="p">)</span>
<span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mf">1.1</span><span class="o">*</span><span class="n">x</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="mf">7.</span><span class="p">)</span>
<span class="n">err</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">0.01</span><span class="o">+</span><span class="n">x</span><span class="o">/</span><span class="mf">200.</span><span class="p">)</span>
<span class="n">w</span><span class="o">=</span><span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">err</span><span class="p">,</span><span class="n">UnitX</span><span class="o">=</span><span class="s">&#39;tof&#39;</span><span class="p">)</span>
<span class="n">fft</span><span class="o">=</span><span class="n">FFT</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

<span class="c"># make all ticks point in</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;xtick.direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;in&#39;</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;ytick.direction&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;in&#39;</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;projection&#39;</span><span class="p">:</span><span class="s">&#39;mantid&#39;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">errorbar</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="s">&#39;ks&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;Asymmetry&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mf">1.5</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.7</span><span class="p">,</span><span class="mf">0.72</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.2</span><span class="p">],</span><span class="n">projection</span><span class="o">=</span><span class="s">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fft</span><span class="p">,</span><span class="n">specNum</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;Frequency (MHz)&#39;</span><span class="p">)</span>
<span class="n">ax_inset</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;|FFT|&#39;</span><span class="p">)</span>
<span class="c"># note that thight_layout will produce a warning here &quot;This figure includes</span>
<span class="c"># Axes that are not compatible with tight_layout, so its results might be incorrect.&quot;</span>
<span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">UserWarning</span><span class="p">)</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="c">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-9.py">Source code</a>, <a class="reference external" href="../plotting/index-9.png">png</a>, <a class="reference external" href="../plotting/index-9.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-9.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-9.png" src="../_images/index-9.png" />
</div>
<p>Plotting dispersion curves  on multiple panels can also be done using matplotlib:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">matplotlib.gridspec</span> <span class="kn">import</span> <span class="n">GridSpec</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="n">CreateMDHistoWorkspace</span>
<span class="kn">from</span> <span class="nn">mantid</span> <span class="kn">import</span> <span class="n">plots</span>

<span class="c"># Generate nice (fake) dispersion data</span>
<span class="c"># Gamma to K</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.333</span><span class="p">,</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">60</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>
<span class="n">omega_hh</span> <span class="o">=</span> <span class="mf">20.</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">x</span><span class="o">*</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">I_hh</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">*</span><span class="mf">5.</span><span class="p">)</span>
<span class="n">signal</span> <span class="o">=</span> <span class="n">I_hh</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">omega_hh</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">signal</span><span class="p">[</span><span class="n">y</span><span class="o">&gt;</span><span class="mi">25</span><span class="o">+</span><span class="mi">100</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">ws1</span><span class="o">=</span><span class="n">CreateMDHistoWorkspace</span><span class="p">(</span><span class="n">Dimensionality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                           <span class="n">Extents</span><span class="o">=</span><span class="s">&#39;0,0.3333,0,60&#39;</span><span class="p">,</span>
                           <span class="n">SignalInput</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
                           <span class="n">ErrorInput</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">signal</span><span class="p">),</span>
                           <span class="n">NumberOfBins</span><span class="o">=</span><span class="s">&#39;{0},{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">)),</span>
                           <span class="n">Names</span><span class="o">=</span><span class="s">&#39;Dim1,Dim2&#39;</span><span class="p">,</span>
                           <span class="n">Units</span><span class="o">=</span><span class="s">&#39;MomentumTransfer,EnergyTransfer&#39;</span><span class="p">)</span>
<span class="c"># K to M</span>
<span class="n">q</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span> <span class="p">(</span><span class="mf">0.333</span><span class="p">,</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="n">e</span><span class="p">)</span>
<span class="n">omega_hm2h</span><span class="o">=</span><span class="mf">20.</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="mf">0.333</span><span class="p">))</span>
<span class="n">signal</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">omega_hm2h</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="n">signal</span><span class="p">[</span><span class="n">y</span><span class="o">&gt;</span><span class="mi">35</span><span class="p">]</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span>
<span class="n">ws2</span><span class="o">=</span><span class="n">CreateMDHistoWorkspace</span><span class="p">(</span><span class="n">Dimensionality</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                           <span class="n">Extents</span><span class="o">=</span><span class="s">&#39;0.3333,0.5,0,60&#39;</span><span class="p">,</span>
                           <span class="n">SignalInput</span><span class="o">=</span><span class="n">signal</span><span class="p">,</span>
                           <span class="n">ErrorInput</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">signal</span><span class="p">),</span>
                           <span class="n">NumberOfBins</span><span class="o">=</span><span class="s">&#39;{0},{1}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">q</span><span class="p">),</span><span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">)),</span>
                           <span class="n">Names</span><span class="o">=</span><span class="s">&#39;Dim1,Dim2&#39;</span><span class="p">,</span>
                           <span class="n">Units</span><span class="o">=</span><span class="s">&#39;MomentumTransfer,EnergyTransfer&#39;</span><span class="p">)</span>


<span class="n">d</span><span class="o">=</span><span class="mf">6.7</span>
<span class="n">a</span><span class="o">=</span><span class="mf">2.454</span>
<span class="c">#Gamma is (0,0,0)</span>
<span class="c">#A is (0,0,1/2)</span>
<span class="c">#K is (1/3,1/3,0)</span>
<span class="c">#M is (1/2,0,0)</span>
<span class="n">gamma_a</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">d</span>
<span class="n">gamma_m</span><span class="o">=</span><span class="mf">2.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mf">3.</span><span class="p">)</span><span class="o">/</span><span class="n">a</span>
<span class="n">m_k</span><span class="o">=</span><span class="mf">2.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">a</span>
<span class="n">gamma_k</span><span class="o">=</span><span class="mf">4.</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">3</span><span class="o">/</span><span class="n">a</span>

<span class="n">fig</span><span class="o">=</span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">gs</span> <span class="o">=</span> <span class="n">GridSpec</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span>
              <span class="n">width_ratios</span><span class="o">=</span><span class="p">[</span><span class="n">gamma_k</span><span class="p">,</span><span class="n">m_k</span><span class="p">,</span><span class="n">gamma_m</span><span class="p">,</span><span class="n">gamma_a</span><span class="p">],</span>
              <span class="n">wspace</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">ax1</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">projection</span><span class="o">=</span><span class="s">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">,</span><span class="n">projection</span><span class="o">=</span><span class="s">&#39;mantid&#39;</span><span class="p">)</span>
<span class="n">ax3</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="n">ax4</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">gs</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="n">sharey</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">ws1</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">ws2</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mf">17.</span><span class="p">])</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="p">])</span>


<span class="c">#Adjust plotting parameters</span>

<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">&#39;E (meV)&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mf">0.</span><span class="p">,</span><span class="mf">40.</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">r&#39;$[\epsilon,\epsilon,0], 0 \leq \epsilon \leq 1/3$&#39;</span><span class="p">)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">])</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s">&#39;$\Gamma$&#39;</span><span class="p">,</span><span class="s">&#39;$K$&#39;</span><span class="p">])</span>
<span class="c">#ax1.spines[&#39;right&#39;].set_visible(False)</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>

<span class="n">ax2</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">r&#39;$[1/3+\epsilon,1/3-2\epsilon,0], 0 \leq \epsilon \leq 1/6$&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s">&#39;$M$&#39;</span><span class="p">])</span>
<span class="c">#ax2.spines[&#39;left&#39;].set_visible(False)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>

<span class="c">#invert axis</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">r&#39;$[\epsilon,0,0], 1/2 \geq \epsilon \geq 0$&#39;</span><span class="p">)</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s">&#39;$\Gamma$&#39;</span><span class="p">])</span>
<span class="n">ax3</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>

<span class="n">ax4</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">get_yaxis</span><span class="p">()</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">r&#39;$[0,0,\epsilon], 0 \leq \epsilon \leq 1/2$&#39;</span><span class="p">)</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">])</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="s">&#39;$A$&#39;</span><span class="p">])</span>
<span class="n">ax4</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">direction</span><span class="o">=</span><span class="s">&#39;in&#39;</span><span class="p">)</span>
<span class="c">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-10.py">Source code</a>, <a class="reference external" href="../plotting/index-10.png">png</a>, <a class="reference external" href="../plotting/index-10.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-10.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/index-10.png" src="../_images/index-10.png" />
</div>
</div>
<div class="section" id="change-matplotlib-defaults">
<span id="mpldefaults"></span><h1><a class="toc-backref" href="#id6">Change Matplotlib Defaults</a><a class="headerlink" href="#change-matplotlib-defaults" title="Permalink to this headline">¶</a></h1>
<p>It is possible to alter the default appearance of Matplotlib plots, e.g. linewidths, label sizes,
colour cycles etc. This is most readily achieved by setting the <tt class="docutils literal"><span class="pre">rcParams</span></tt> at the start of a
Mantid Workbench session. The example below shows a plot with the default line width, followed be resetting the parameters with <tt class="docutils literal"><span class="pre">rcParams</span></tt>. An example with many of the
editable parameters is available at <a class="reference external" href="https://matplotlib.org/users/customizing.html">the Matplotlib site</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="c"># Set up the data</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="n">offsets</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="c"># Create array with shifted-sine curve along each column</span>
<span class="n">yy</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">transpose</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">phi</span><span class="p">)</span> <span class="k">for</span> <span class="n">phi</span> <span class="ow">in</span> <span class="n">offsets</span><span class="p">])</span>
<span class="c"># Plot the data</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yy</span><span class="p">)</span>

<span class="c">## Reset the parameters</span>

<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">mpl</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;lines.linewidth&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mf">2.0</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;axes.grid&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;axes.facecolor&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">)</span>
<span class="n">mpl</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s">&#39;grid.linestyle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;--&#39;</span>
<span class="c"># Plot the data</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">yy</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../plotting/index-11.py">Source code</a>)</p>
<div class="figure">
<img alt="../_images/index-11_00.png" src="../_images/index-11_00.png" />
<p class="caption">(<a class="reference external" href="../plotting/index-11_00.png">png</a>, <a class="reference external" href="../plotting/index-11_00.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-11_00.pdf">pdf</a>)</p>
</div>
<div class="figure">
<img alt="../_images/index-11_01.png" src="../_images/index-11_01.png" />
<p class="caption">(<a class="reference external" href="../plotting/index-11_01.png">png</a>, <a class="reference external" href="../plotting/index-11_01.hires.png">hires.png</a>, <a class="reference external" href="../plotting/index-11_01.pdf">pdf</a>)</p>
</div>
<p>For much more on customising the graph appearance see the <a class="reference external" href="https://matplotlib.org/users/dflt_style_changes.html">Matplotlib documentation</a>.</p>
<p>A list of some common properties you might want to change and the keywords to set:</p>
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="44%" />
<col width="21%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Parameter</td>
<td>Keyword</td>
<td>Default</td>
</tr>
<tr class="row-even"><td>Error bar cap</td>
<td><tt class="docutils literal"><span class="pre">errorbar.capsize</span></tt></td>
<td>0</td>
</tr>
<tr class="row-odd"><td>Line width</td>
<td><tt class="docutils literal"><span class="pre">lines.linewidth</span></tt></td>
<td>1.25</td>
</tr>
<tr class="row-even"><td>Grid on/off</td>
<td><tt class="docutils literal"><span class="pre">axes.grid</span></tt></td>
<td>False</td>
</tr>
<tr class="row-odd"><td>Ticklabel size</td>
<td><tt class="docutils literal"><span class="pre">xtick.labelsize</span></tt>
<tt class="docutils literal"><span class="pre">ytick.labelsize</span></tt></td>
<td>medium</td>
</tr>
<tr class="row-even"><td>Minor ticks on/off</td>
<td><tt class="docutils literal"><span class="pre">xtick.minor.visible</span></tt>
<tt class="docutils literal"><span class="pre">ytick.minor.visible</span></tt></td>
<td>False</td>
</tr>
<tr class="row-odd"><td>Face colour</td>
<td><tt class="docutils literal"><span class="pre">axes.facecolor</span></tt></td>
<td>white</td>
</tr>
<tr class="row-even"><td>Font type</td>
<td><tt class="docutils literal"><span class="pre">font.family</span></tt></td>
<td>sans-serif</td>
</tr>
</tbody>
</table>
<p>A much fuller list of properties is avialble <a class="reference external" href="https://matplotlib.org/users/customizing.html">in the Matplotlib documentation</a>.</p>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="../api/python/changes.html" title="Previous Chapter: <no title>"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; <no title></span>
    </a>
  </li>
  <li>
    <a href="../release/index.html" title="Next Chapter: Release Notes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Release Notes &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2019-07-22.<br/>
    </p>
  </div>
</footer>
  </body>
</html>