<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>LoadILLDiffraction v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LoadILLIndirect v2" href="LoadILLIndirect-v2.html" />
    <link rel="prev" title="LoadIDFFromNexus v1" href="LoadIDFFromNexus-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">LoadILLDiffraction v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="loadilldiffraction-v1">
<span id="algm-loadilldiffraction"></span><span id="algm-loadilldiffraction-v1"></span><h1>LoadILLDiffraction v1<a class="headerlink" href="#loadilldiffraction-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/LoadILLDiffraction-v1_dlg.png"><img alt="../_images/LoadILLDiffraction-v1_dlg.png" class="screenshot" src="../_images/LoadILLDiffraction-v1_dlg.png" style="width: 365px;" /></a>
<p class="caption"><span class="caption-text"><strong>LoadILLDiffraction</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a><ul>
<li><a class="reference internal" href="#loading-d20" id="id6">Loading D20</a></li>
<li><a class="reference internal" href="#scans" id="id7">Scans</a></li>
<li><a class="reference internal" href="#logs" id="id8">Logs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#d2b-alignment" id="id9">D2B alignment</a></li>
<li><a class="reference internal" href="#d2b-pixel-numbering-in-tubes" id="id10">D2B pixel numbering in tubes</a></li>
<li><a class="reference internal" href="#usage" id="id11">Usage</a></li>
<li><a class="reference internal" href="#source" id="id12">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Loads ILL diffraction nexus files.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="LoadNexus-v1.html#algm-loadnexus"><span class="std std-ref">LoadNexus</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="2%" />
<col width="14%" />
<col width="4%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>File path of the data file to load. Allowed extensions: [‘.nxs’]</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>The output workspace.</td>
</tr>
<tr class="row-even"><td>DataType</td>
<td>Input</td>
<td>string</td>
<td>Auto</td>
<td>Select the type of data, with or without calibration already applied. If Auto then the calibrated data is loaded if available, otherwise the raw data is loaded. Allowed values: [‘Auto’, ‘Raw’, ‘Calibrated’]</td>
</tr>
<tr class="row-odd"><td>TwoThetaOffset</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>2 theta offset for D1B data, in degrees.</td>
</tr>
<tr class="row-even"><td>AlignTubes</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Apply vertical and horizontal alignment of tubes as defined in IPF</td>
</tr>
<tr class="row-odd"><td>ConvertAxisAndTranspose</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether to convert the spectrum axis to 2theta and transpose (for 1D detector and no-scan configuration)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This is the loader for the raw <cite>.nxs</cite> files produced by the powder diffractometers at ILL.
Currently it supports the instruments D20, D1B and D2B, as well as IN5, PANTHER, and SHARP in the data scan mode.</p>
<p>The <em>TwoThetaOffset</em> parameter corresponding to the rotation of the detector is optional and only used for D1B. It is to be provided in degrees.</p>
<div class="section" id="loading-d20">
<h3><a class="toc-backref" href="#id6">Loading D20</a><a class="headerlink" href="#loading-d20" title="Permalink to this headline">¶</a></h3>
<p>For D20 1-dimensional detector, it supports 3 resolution modes:</p>
<ul class="simple">
<li><strong>low</strong> is the physical configuration, i.e. 1536 pixels. This corresponds to the IDF <em>D20_lr</em>.</li>
<li><strong>nominal</strong> is the default configuration, i.e. pixels split by 2 by DAQ, so in total 3072 pixels. This corresponds to IDF <em>D20</em>.</li>
<li><strong>high</strong> is when each pixel is split by 3, resulting in 4608 pixels. This corresponds to IDF <em>D20_hr</em>.</li>
</ul>
<p>Note, that all the IDFs contain only active pixels, and do not count the last 2 banks which are permanently inactive.</p>
<p>The <em>2theta</em> value of the first pixel is read from the file, and the whole detector is rotated correspondingly.</p>
</div>
<div class="section" id="scans">
<h3><a class="toc-backref" href="#id7">Scans</a><a class="headerlink" href="#scans" title="Permalink to this headline">¶</a></h3>
<p>The loader is able to load the following scan configurations:</p>
<ul class="simple">
<li><strong>no scan</strong>, used for D20, when a single file contains a single dataset, e.g. data acquired with static detector at a single temperature point. In this case x-axis is just a single point.</li>
<li><strong>detector scan</strong>, used always for D2B, and for D20 calibration runs, when the detector moves during the run. In this configuration the output is a <em>scanning workspace</em> containing one spectrum for each pixel at each time index. The x-axis is again a single point.</li>
<li><strong>other scan</strong>, e.g. omega scan for D20, IN5, PANTHER, and SHARP, which is another type of motor scan, but it is not the detector that moves, but the sample. In this case, the data in the raw file is organised just as for <em>detector scan</em>, but the output workspace is not a <em>scanning workspace</em>. It is a regular workspace with x-axis corresponding to the scanned variable, e.g. omega angle.</li>
</ul>
</div>
<div class="section" id="logs">
<h3><a class="toc-backref" href="#id8">Logs</a><a class="headerlink" href="#logs" title="Permalink to this headline">¶</a></h3>
<p>The loader creates time series logs for each of the scanned variable in the <cite>.nxs</cite> file. The scanned variable name is added under <cite>ScanVar</cite> log.</p>
</div>
</div>
<div class="section" id="d2b-alignment">
<h2><a class="toc-backref" href="#id9">D2B alignment</a><a class="headerlink" href="#d2b-alignment" title="Permalink to this headline">¶</a></h2>
<p>For D2B, the loader applies tube alignment; first rotating them horizontally around the sample, then translating them vertically.
This is done based on <em>tube_centers</em> and <em>tube_angles</em> parameters defined in the Instrument Parameter File.</p>
</div>
<div class="section" id="d2b-pixel-numbering-in-tubes">
<h2><a class="toc-backref" href="#id10">D2B pixel numbering in tubes</a><a class="headerlink" href="#d2b-pixel-numbering-in-tubes" title="Permalink to this headline">¶</a></h2>
<p>For D2B it assumes that the counts written in the nexus file follow “U-shape” convention; that is, the first tube counts are written from bottom to top, the second one: from top to bottom, and so on.
Note that in the IDF of D2B detector IDs grow ascending from bottom to top for all the tubes.
The loader takes care that the correct counts are attributed to correct pixels.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id11">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In Mantid this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - LoadILLDiffraction - D20 no scan</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">LoadILLDiffraction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;ILL/D20/967100.nxs&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The output has </span><span class="si">{0}</span><span class="s1"> bins (no scan) and </span><span class="si">{1}</span><span class="s1"> spectra&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>The output has 1 bins (no scan) and 3073 spectra
</pre></div>
</div>
<p><strong>Example - LoadILLDiffraction - D20 omega scan</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">LoadILLDiffraction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;ILL/D20/000017.nxs&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The output has </span><span class="si">{0}</span><span class="s1"> bins (scan) and </span><span class="si">{1}</span><span class="s1"> spectra&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>The output has 21 bins (scan) and 3073 spectra
</pre></div>
</div>
<p><strong>Example - LoadILLDiffraction - D2B detector scan</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">LoadILLDiffraction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;ILL/D2B/508093.nxs&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The output has </span><span class="si">{0}</span><span class="s1"> bins (detector scan) and </span><span class="si">{1}</span><span class="s1"> spectra&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>The output has 1 bins (detector scan) and 409625 spectra
</pre></div>
</div>
<p><strong>Example - LoadILLDiffraction - D1B</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">LoadILLDiffraction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;ILL/D1B/473432.nxs&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The output has </span><span class="si">{0}</span><span class="s1"> bin (detector scan) and </span><span class="si">{1}</span><span class="s1"> spectra&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>The output has 1 bin (detector scan) and 1281 spectra
</pre></div>
</div>
<p><strong>Example - LoadILLDiffraction - IN5</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">LoadILLDiffraction</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s1">&#39;ILL/IN5/199857.nxs&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The output has </span><span class="si">{0}</span><span class="s1"> bin (omega scan) and </span><span class="si">{1}</span><span class="s1"> spectra&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">(),</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>The output has 17 bin (omega scan) and 98305 spectra
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Nexus.html">DataHandling\Nexus</a> | <a class="reference external" href="categories/ILL/Diffraction.html">ILL\Diffraction</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id12">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/7cec3a047fd2864c82ac0280d76fe566152576ec/Framework/DataHandling/inc/MantidDataHandling/LoadILLDiffraction.h">LoadILLDiffraction.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/7cec3a047fd2864c82ac0280d76fe566152576ec/Framework/DataHandling/src/LoadILLDiffraction.cpp">LoadILLDiffraction.cpp</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadIDFFromNexus-v1.html" title="Previous Chapter: LoadIDFFromNexus v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadIDFFromNexus v1</span>
    </a>
  </li>
  <li>
    <a href="LoadILLIndirect-v2.html" title="Next Chapter: LoadILLIndirect v2"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadILLIndirect v2 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>