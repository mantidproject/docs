<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>TOFSANSResolutionByPixel v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="TOFTOFCropWorkspace v1" href="TOFTOFCropWorkspace-v1.html" />
    <link rel="prev" title="TOFSANSResolution v1" href="TOFSANSResolution-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">TOFSANSResolutionByPixel v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="tofsansresolutionbypixel-v1">
<span id="algm-tofsansresolutionbypixel"></span><span id="algm-tofsansresolutionbypixel-v1"></span><h1>TOFSANSResolutionByPixel v1<a class="headerlink" href="#tofsansresolutionbypixel-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/TOFSANSResolutionByPixel-v1_dlg.png"><img alt="../_images/TOFSANSResolutionByPixel-v1_dlg.png" class="screenshot" src="../_images/TOFSANSResolutionByPixel-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>TOFSANSResolutionByPixel</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculate the Q resolution for TOF SANS data for each pixel.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="TOFSANSResolution-v1.html#algm-tofsansresolution"><span class="std std-ref">TOFSANSResolution</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="4%" />
<col width="25%" />
<col width="7%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Name the workspace to calculate the resolution for, for each pixel and wavelength</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Name of the newly created workspace which contains the Q resolution.</td>
</tr>
<tr class="row-even"><td>DeltaR</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Virtual ring width on the detector (mm).</td>
</tr>
<tr class="row-odd"><td>SampleApertureRadius</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Sample aperture radius, R2 (mm).</td>
</tr>
<tr class="row-even"><td>SourceApertureRadius</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Source aperture radius, R1 (mm).</td>
</tr>
<tr class="row-odd"><td>SigmaModerator</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Moderator time spread (microseconds) as afunction of wavelength (Angstroms).</td>
</tr>
<tr class="row-even"><td>CollimationLength</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Collimation length (m)</td>
</tr>
<tr class="row-odd"><td>AccountForGravity</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether to correct for the effects of gravity</td>
</tr>
<tr class="row-even"><td>ExtraLength</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Additional length for gravity correction.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Calculates the Q-resolution per pixel according to Mildner and Carpenter equation</p>
<div class="math">
\[(\sigma_Q )^2 = \frac{4\pi^2}{12\lambda^2} [ 3(\frac{R_1}{L_1})^2 + 3(\frac{R_2}{L_3})^2 + (\frac{\Delta R}{L_2})^2 ] + Q^2(\frac{\sigma_{\lambda}}{\lambda})^2\]</div>
<p>where <span class="math">\(L1\)</span> and <span class="math">\(L2\)</span>  are the collimation length and sample-to-detector distance respectively and</p>
<div class="math">
\[\frac{1}{L_3} = \frac{1}{L_1} + \frac{1}{L_2}\]</div>
<p>and</p>
<div class="math">
\[(\sigma_{\lambda})^2 = (\Delta \lambda )^2 / 12 + (\sigma_{moderator})^2\]</div>
<p>where <span class="math">\(\sigma_{\lambda}\)</span> is the overall effective standard deviation in wavelength.
<span class="math">\(\Delta \lambda\)</span> values are found from the wavelength binning of the InputWorkspace,
<span class="math">\(\sigma_{moderator}\)</span> is the moderator time spread (the variation in time for the moderator
to emit neutrons of a given wavelength). Note that <span class="math">\(\Delta \lambda\)</span> may be imposed
by wavelength steps set elsewhere in Mantid which should be at least as large as the
equivalent time bins used in the original histogram data collection. For event mode data
<span class="math">\(\Delta \lambda\)</span> is in theory very small, but in practice a histogram in
time has to be generated (perhaps using monitor time bins or specifically set
event-time-bins), before a rebinning into user provided wavelength steps in InputWorkspace.
Again the latter steps should be the largest.</p>
<p>Q values needed here are calculated in the same way as for Q1D, including correction
for gravity for which detector coordinates are assumed centred at zero wavelength.</p>
<p><span class="math">\(\sigma_Q\)</span> is returned as the y-values of the InputWorkspace, and the
remaining variables in the main equation above are related to parameters of this
algorithm as follows:</p>
<ul class="simple">
<li><span class="math">\(R_1\)</span> equals SourceApertureRadius</li>
<li><span class="math">\(R_2\)</span> equals SampleApertureRadius</li>
<li><span class="math">\(\Delta R\)</span> equals DeltaR</li>
<li><span class="math">\(\sigma_{moderator}\)</span> equals SigmaModerator</li>
<li><span class="math">\(\L_1\)</span> equals CollimationLength</li>
</ul>
<p><span class="math">\(\lambda\)</span> in the equation is the midpoint of wavelength
histogram bin values of InputWorkspace.</p>
<p>Collimation length <span class="math">\(L_1\)</span> in metres in the equation here is the distance between the
first beam defining pinhole (Radius <span class="math">\(R_1\)</span>) and the sample aperture (radius <span class="math">\(R_2\)</span>).
(Beware that <span class="math">\(L_1\)</span> is more often the moderator to sample distance.)</p>
<p>For rectangular collimation apertures, size H x W, Mildner &amp; Carpenter say to
use <span class="math">\(R = \sqrt{( H^2 +W^2)/6 }\)</span>. Note that we are assuming isotropically averaged,
scalar <span class="math">\(Q\)</span>, and making some small angle approximations. Results on higher angle detectors
may not be accurate. For data reduction sliced in different directions on the detector
(e.g. GISANS) adjust the calling parameters to suit the collimation in that direction.</p>
<p>Note that <span class="math">\(\Delta\)</span> is the full width of a rectangular distribution in radius or wavelength,
for which the standard deviation is <span class="math">\(\sigma=\Delta/\sqrt{12}\)</span>. For a Gaussian distribution
the FWHM (full width at half maximum) is <span class="math">\(\sqrt{8\ln{2}}\sigma=2.35482\sigma\)</span>. For an exponential decay
<span class="math">\(e^{-t/\tau}\)</span>, the standard deviation (and the mean) is <span class="math">\(\tau\)</span>. For non-rectangular
distributions these equations allow the equivalent <span class="math">\(\Delta\)</span> to be entered as <span class="math">\(\Delta=\sqrt{12}\sigma\)</span>.</p>
<p>This version of the algorithm neglects wavelength-dependent detector detection depth effects.</p>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/SANS.html">SANS</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/7cec3a047fd2864c82ac0280d76fe566152576ec/Framework/Algorithms/inc/MantidAlgorithms/TOFSANSResolutionByPixel.h">TOFSANSResolutionByPixel.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/7cec3a047fd2864c82ac0280d76fe566152576ec/Framework/Algorithms/src/TOFSANSResolutionByPixel.cpp">TOFSANSResolutionByPixel.cpp</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="TOFSANSResolution-v1.html" title="Previous Chapter: TOFSANSResolution v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; TOFSANSResolution v1</span>
    </a>
  </li>
  <li>
    <a href="TOFTOFCropWorkspace-v1.html" title="Next Chapter: TOFTOFCropWorkspace v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">TOFTOFCropWor... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>