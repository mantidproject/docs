<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>PaalmanPingsAbsorptionCorrection v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="PaalmanPingsMonteCarloAbsorption v1" href="PaalmanPingsMonteCarloAbsorption-v1.html" />
    <link rel="prev" title="PSIBackgroundSubtraction v1" href="PSIBackgroundSubtraction-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Algorithms</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">PaalmanPingsAbsorptionCorrection v1</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="paalmanpingsabsorptioncorrection-v1">
<span id="algm-paalmanpingsabsorptioncorrection"></span><span id="algm-paalmanpingsabsorptioncorrection-v1"></span><h1>PaalmanPingsAbsorptionCorrection v1<a class="headerlink" href="#paalmanpingsabsorptioncorrection-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/PaalmanPingsAbsorptionCorrection-v1_dlg.png"><img alt="../_images/PaalmanPingsAbsorptionCorrection-v1_dlg.png" class="screenshot" src="../_images/PaalmanPingsAbsorptionCorrection-v1_dlg.png" style="width: 361px;" /></a>
<p class="caption"><span class="caption-text"><strong>PaalmanPingsAbsorptionCorrection</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a><ul>
<li><a class="reference internal" href="#assumptions" id="id6">Assumptions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id7">Usage</a></li>
<li><a class="reference internal" href="#source" id="id8">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculates the attenuation due to absorption and single scattering in a generic sample shape for all Paalmin-pings terms.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="SetSampleMaterial-v1.html#algm-setsamplematerial"><span class="std std-ref">SetSampleMaterial</span></a>, <a class="reference internal" href="AbsorptionCorrection-v1.html#algm-absorptioncorrection"><span class="std std-ref">AbsorptionCorrection</span></a>, <a class="reference internal" href="ApplyPaalmanPingsCorrection-v1.html#algm-applypaalmanpingscorrection"><span class="std std-ref">ApplyPaalmanPingsCorrection</span></a>, <a class="reference internal" href="PaalmanPingsMonteCarloAbsorption-v1.html#algm-paalmanpingsmontecarloabsorption"><span class="std std-ref">PaalmanPingsMonteCarloAbsorption</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="4%" />
<col width="21%" />
<col width="6%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>The X values for the input workspace must be in units of wavelength</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td>WorkspaceGroup</td>
<td><em>Mandatory</em></td>
<td>Output workspace name</td>
</tr>
<tr class="row-even"><td>NumberOfWavelengthPoints</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The number of wavelength points for which the numerical integral is calculated (default: all points)</td>
</tr>
<tr class="row-odd"><td>ElementSize</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The size of one side of an integration element cube in mm</td>
</tr>
<tr class="row-even"><td>ContainerElementSize</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The size of one side of an integration element cube in mm for container.Default to be the same as ElementSize.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm was adapted from <a class="reference internal" href="AbsorptionCorrection-v1.html#algm-absorptioncorrection"><span class="std std-ref">AbsorptionCorrection v1</span></a>. This
algorithm uses a numerical integration method to calculate
Paalman-Ping attenuation factors resulting from absorption and single
scattering in a sample and container with the material properties
given. Factors are calculated for each spectrum (i.e. detector
position) and wavelength point, as defined by the input workspace. The
sample is first bounded by a cuboid, which is divided up into small
cubes. The cubes whose centres lie within the sample make up the set
of integration elements (so you have a kind of ‘Lego’ model of the
sample) and path lengths through the sample and container are
calculated for the centre-point of each element, and a numerical
integration is carried out using these path lengths over the volume
elements.</p>
<p>The output workspace will be a <a class="reference internal" href="../concepts/WorkspaceGroup.html#workspacegroup"><span class="std std-ref">WorkspaceGroup</span></a>
containing workpsace with the attenuation factors for <span class="math">\(A_{s,s}\)</span>,
<span class="math">\(A_{s,sc}\)</span>, <span class="math">\(A_{c,c}\)</span> and <span class="math">\(A_{c,sc}\)</span>. This output
can be applied as the <code class="docutils literal"><span class="pre">CorrectionsWorkspace</span></code> input of
<a class="reference internal" href="ApplyPaalmanPingsCorrection-v1.html#algm-applypaalmanpingscorrection"><span class="std std-ref">ApplyPaalmanPingsCorrection v1</span></a>.</p>
<p>Note that the duration of this algorithm is strongly dependent on the
element size chosen, and that too small an element size can cause the
algorithm to fail because of insufficient memory.</p>
<div class="section" id="assumptions">
<h3><a class="toc-backref" href="#id6">Assumptions</a><a class="headerlink" href="#assumptions" title="Permalink to this headline">¶</a></h3>
<p>This algorithm assumes that the (parallel) beam illuminates the entire
sample <strong>unless</strong> a ‘gauge volume’ has been defined using the
<a class="reference internal" href="DefineGaugeVolume-v1.html#algm-definegaugevolume"><span class="std std-ref">DefineGaugeVolume v1</span></a> algorithm (or by otherwise
adding a valid XML string <a class="reference internal" href="../concepts/HowToDefineGeometricShape.html#howtodefinegeometricshape"><span class="std std-ref">defining a
shape</span></a> to a <a class="reference internal" href="../concepts/Run.html#run"><span class="std std-ref">Run</span></a> property called
“GaugeVolume”). In this latter case only scattering within this volume
(and the sample) is integrated, because this is all the detector can
‘see’. The full sample is still used for the neutron paths.</p>
<p>It is worth pointing out that the parameter <code class="docutils literal"><span class="pre">ContainerElementSize</span></code> has very
limited impact on the final absorption correction factor, therefore it is generally
safe to use the same element size for both sample and container regardless of
the actual geometry difference when running this algorithm.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id7">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example: A cylinder sample in can</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="p">[</span><span class="mf">1.7981</span><span class="p">,</span> <span class="mf">1.7983</span><span class="p">],</span> <span class="n">DataY</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">]</span><span class="o">*</span><span class="mi">4</span><span class="p">,</span> <span class="n">NSpec</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">UnitX</span><span class="o">=</span><span class="s2">&quot;Wavelength&quot;</span><span class="p">,</span> <span class="n">YUnitLabel</span><span class="o">=</span><span class="s2">&quot;Counts&quot;</span><span class="p">)</span>
<span class="n">EditInstrumentGeometry</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span>
    <span class="n">PrimaryFlightPath</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
    <span class="n">SpectrumIDs</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
    <span class="n">L2</span><span class="o">=</span><span class="p">[</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span>
    <span class="n">Polar</span><span class="o">=</span><span class="p">[</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">,</span> <span class="mf">170.0</span><span class="p">,</span> <span class="mf">90.0</span><span class="p">],</span>
    <span class="n">Azimuthal</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">45.0</span><span class="p">],</span>
    <span class="n">DetectorIDs</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
    <span class="n">InstrumentName</span><span class="o">=</span><span class="s2">&quot;Instrument&quot;</span><span class="p">)</span>
<span class="n">SetSample</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span>
    <span class="n">Geometry</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Shape&quot;</span><span class="p">:</span> <span class="s2">&quot;Cylinder&quot;</span><span class="p">,</span> <span class="s2">&quot;Height&quot;</span><span class="p">:</span> <span class="mf">5.68</span><span class="p">,</span> <span class="s2">&quot;Radius&quot;</span><span class="p">:</span> <span class="mf">0.295</span><span class="p">},</span>
    <span class="n">Material</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ChemicalFormula&quot;</span><span class="p">:</span> <span class="s2">&quot;La-(B11)5.94-(B10)0.06&quot;</span><span class="p">,</span> <span class="s2">&quot;SampleNumberDensity&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">},</span>
    <span class="n">ContainerGeometry</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;Shape&quot;</span><span class="p">:</span> <span class="s1">&#39;HollowCylinder&#39;</span><span class="p">,</span> <span class="s1">&#39;Height&#39;</span><span class="p">:</span> <span class="mf">5.68</span><span class="p">,</span> <span class="s1">&#39;InnerRadius&#39;</span><span class="p">:</span> <span class="mf">0.295</span><span class="p">,</span> <span class="s1">&#39;OuterRadius&#39;</span><span class="p">:</span> <span class="mf">0.315</span><span class="p">},</span>
    <span class="n">ContainerMaterial</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;ChemicalFormula&quot;</span><span class="p">:</span> <span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="s2">&quot;SampleNumberDensity&quot;</span><span class="p">:</span> <span class="mf">0.0721</span><span class="p">})</span>
<span class="nb">abs</span> <span class="o">=</span> <span class="n">PaalmanPingsAbsorptionCorrection</span><span class="p">(</span><span class="n">ws</span><span class="p">)</span>
<span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ass&quot;</span><span class="p">,</span> <span class="s2">&quot;assc&quot;</span><span class="p">,</span> <span class="s2">&quot;acc&quot;</span><span class="p">,</span> <span class="s2">&quot;acsc&quot;</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:4}</span><span class="s2"> </span><span class="si">{:.4f}</span><span class="s2">(θ=10) </span><span class="si">{:.4f}</span><span class="s2">(θ=90) </span><span class="si">{:.4f}</span><span class="s2">(θ=170) </span><span class="si">{:.4f}</span><span class="s2">(θ=90,φ=45)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">mtd</span><span class="p">[</span><span class="s2">&quot;abs_&quot;</span><span class="o">+</span><span class="n">a</span><span class="p">]</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">))))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>ass  0.1298(θ=10) 0.1708(θ=90) 0.2119(θ=170) 0.1332(θ=90,φ=45)
assc 0.1253(θ=10) 0.1650(θ=90) 0.2048(θ=170) 0.1280(θ=90,φ=45)
acc  0.9418(θ=10) 0.9416(θ=90) 0.9422(θ=170) 0.9311(θ=90,φ=45)
acsc 0.3258(θ=10) 0.4221(θ=90) 0.5782(θ=170) 0.4014(θ=90,φ=45)
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/CorrectionFunctions/AbsorptionCorrections.html">CorrectionFunctions\AbsorptionCorrections</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id8">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/7cec3a047fd2864c82ac0280d76fe566152576ec/Framework/Algorithms/inc/MantidAlgorithms/PaalmanPingsAbsorptionCorrection.h">PaalmanPingsAbsorptionCorrection.h</a></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/7cec3a047fd2864c82ac0280d76fe566152576ec/Framework/Algorithms/src/PaalmanPingsAbsorptionCorrection.cpp">PaalmanPingsAbsorptionCorrection.cpp</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PSIBackgroundSubtraction-v1.html" title="Previous Chapter: PSIBackgroundSubtraction v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; PSIBackground...</span>
    </a>
  </li>
  <li>
    <a href="PaalmanPingsMonteCarloAbsorption-v1.html" title="Next Chapter: PaalmanPingsMonteCarloAbsorption v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">PaalmanPingsM... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>