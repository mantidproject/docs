<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Framework Changes</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Indirect Geometry Changes" href="indirect_geometry.html" />
    <link rel="prev" title="Direct Geometry Changes" href="direct_geometry.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.4</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
    <p>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="nav-item nav-item-0"><a href="../../index.html">Documentation</a> &#187;</li>
        
            <li class="nav-item nav-item-1"><a href="../index.html" >Release Notes</a> &#187;</li>
          
            <li class="nav-item nav-item-2"><a href="index.html" accesskey="U">Mantid 6.4.0 Release Notes</a> &#187;</li>
          
        
        
          
            <li class="nav-item nav-item-this"><a href="">Framework Changes</a></li>
          
        
      </ul>
    </div> </p>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="framework-changes">
<h1>Framework Changes<a class="headerlink" href="#framework-changes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#concepts" id="id6">Concepts</a></li>
<li><a class="reference internal" href="#algorithms" id="id7">Algorithms</a><ul>
<li><a class="reference internal" href="#new-features" id="id8">New Features</a></li>
<li><a class="reference internal" href="#bugfixes" id="id9">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fit-functions" id="id10">Fit Functions</a><ul>
<li><a class="reference internal" href="#id1" id="id11">New Features</a></li>
<li><a class="reference internal" href="#id2" id="id12">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#kernel" id="id13">Kernel</a><ul>
<li><a class="reference internal" href="#id3" id="id14">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python" id="id15">Python</a><ul>
<li><a class="reference internal" href="#id4" id="id16">New Features</a></li>
<li><a class="reference internal" href="#id5" id="id17">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installation" id="id18">Installation</a></li>
<li><a class="reference internal" href="#mantidworkbench" id="id19">MantidWorkbench</a></li>
</ul>
</div>
<div class="section" id="concepts">
<h2><a class="toc-backref" href="#id6">Concepts</a><a class="headerlink" href="#concepts" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="algorithms">
<h2><a class="toc-backref" href="#id7">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-features">
<h3><a class="toc-backref" href="#id8">New Features</a><a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <a class="reference internal" href="../../algorithms/DiscusMultipleScatteringCorrection-v1.html#algm-discusmultiplescatteringcorrection"><span class="std std-ref">DiscusMultipleScatteringCorrection</span></a> algorithm has been improved.<ul>
<li>The algorithm now supports inelastic instruments (direct and indirect). <strong>Please Note:</strong> This improvement has involved several breaking changes:<ul>
<li>The parameter <code class="docutils literal"><span class="pre">SofqWorkspace</span></code> has been renamed to <code class="docutils literal"><span class="pre">StructureFactorWorkspace</span></code>.</li>
<li>The parameter <code class="docutils literal"><span class="pre">NumberOfWavelengthPoints</span></code> has been renamed <code class="docutils literal"><span class="pre">NumberOfSimulationPoints</span></code>.</li>
<li>The <code class="docutils literal"><span class="pre">EMode</span></code> parameter has been dropped (the mode is now determined from the workspace instead).</li>
<li>The algorithm now requires the input workspace for elastic calculations to have units of momentum (<code class="docutils literal"><span class="pre">k</span></code>) instead of wavelength.</li>
</ul>
</li>
<li>The performance has been improved when <code class="docutils literal"><span class="pre">ImportanceSampling</span></code> is enabled.</li>
<li>The output <code class="docutils literal"><span class="pre">WorkspaceGroup</span></code> that is created has been updated. The names of the member workspaces are now prefixed by the group name and some additional
workspaces have been added to store the integral of the scattering weight across the x axis (Delta E for inelastic and Momentum for elastic)</li>
</ul>
</li>
<li><a class="reference internal" href="../../algorithms/LoadAndMerge-v1.html#algm-loadandmerge"><span class="std std-ref">LoadAndMerge</span></a> now offers a possibility to have a joined workspace as output instead of a workspace group.</li>
<li><a class="reference internal" href="../../algorithms/ConjoinXRuns-v1.html#algm-conjoinxruns"><span class="std std-ref">ConjoinXRuns</span></a> can now set a linear integer range as the axis of the output joined workspace.</li>
<li><a class="reference internal" href="../../algorithms/CalculateFlux-v1.html#algm-calculateflux"><span class="std std-ref">CalculateFlux</span></a> now also works on workspaces with dimensionless x-axis.</li>
<li>The <a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><span class="std std-ref">Fit</span></a> algorithm now has a <code class="docutils literal"><span class="pre">StepSizeMethod</span></code> property, allowing you to calculate the step size between each iteration using the square root of epsilon.</li>
<li>The <a class="reference internal" href="../../fitting/fitfunctions/AsymmetricPearsonVII.html#func-asymmetricpearsonvii"><span class="std std-ref">Asymmetric Pearson VII</span></a> fit function  can now be chosen as a <code class="docutils literal"><span class="pre">ProfileFunction</span></code> for the <a class="reference internal" href="../../algorithms/PoldiDataAnalysis-v1.html#algm-poldidataanalysis-v1"><span class="std std-ref">PoldiDataAnalysis</span></a> algorithm.</li>
<li><a class="reference internal" href="../../algorithms/LoadNexusLogs-v1.html#algm-loadnexuslogs"><span class="std std-ref">LoadNexusLogs</span></a> now accepts a regular expression for the <code class="docutils literal"><span class="pre">BlockList</span></code> property.</li>
<li>Reintroduced <a class="reference internal" href="../../algorithms/IntegrateEllipsoids-v1.html#algm-integrateellipsoids-v1"><span class="std std-ref">IntegrateEllipsoids v1</span></a> from release v6.0.0 as v1, marked the latest <a class="reference internal" href="../../algorithms/IntegrateEllipsoids-v2.html#algm-integrateellipsoids-v2"><span class="std std-ref">IntegrateEllipsoids v2</span></a> as v2, and created a wrapper that automatically switches between them as a <a class="reference internal" href="../../algorithms/IntegrateEllipsoids-v3.html#algm-integrateellipsoids-v3"><span class="std std-ref">IntegrateEllipsoids v3</span></a>.</li>
<li>The <a class="reference internal" href="../../algorithms/ReplaceSpecialValues-v1.html#algm-replacespecialvalues-v1"><span class="std std-ref">ReplaceSpecialValues v1</span></a> algorithm can now be used to replace negative numbers by disabling the <code class="docutils literal"><span class="pre">UseAbsolute</span></code> property.</li>
</ul>
</div>
<div class="section" id="bugfixes">
<h3><a class="toc-backref" href="#id9">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <a class="reference internal" href="../../algorithms/MonteCarloAbsorption-v1.html#algm-montecarloabsorption"><span class="std std-ref">MonteCarloAbsorption</span></a> algorithm will now get the beam profile from the sample environment in case the sample shape is not defined,
e.g. in a container-only absorption correction calculation with sparse instrument geometry.</li>
<li>Removal of whitespace characters from <code class="docutils literal"><span class="pre">FileProperty</span></code> and <code class="docutils literal"><span class="pre">MultiFileProperty</span></code> properties in algorithms can now be disabled.</li>
<li><a class="reference internal" href="../../algorithms/LoadAndMerge-v1.html#algm-loadandmerge"><span class="std std-ref">LoadAndMerge</span></a> no longer trims whitespace characters in the <code class="docutils literal"><span class="pre">Filename</span></code> property.</li>
<li><a class="reference internal" href="../../algorithms/SmoothNeighbours-v1.html#algm-smoothneighbours"><span class="std std-ref">SmoothNeighbours</span></a> no longer holds on to its internal input workspace after completing execution. This ensures a more prompt removal
of the memory it holds when replacing the input workspace
with the same name.</li>
<li>The x unit validation on the parameter <code class="docutils literal"><span class="pre">ScatteringCrossSection</span></code> in <a class="reference internal" href="../../algorithms/DiscusMultipleScatteringCorrection-v1.html#algm-discusmultiplescatteringcorrection"><span class="std std-ref">DiscusMultipleScatteringCorrection</span></a> has been corrected to check for momentum.</li>
<li><a class="reference internal" href="../../algorithms/Rebin2D-v1.html#algm-rebin2d"><span class="std std-ref">Rebin2D v1</span></a> can now take an <a class="reference internal" href="../../concepts/EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspace</span></a> as an input without crashing.</li>
<li>Workbench will no longer crash if the algorithm dialog for <a class="reference internal" href="../../algorithms/DiscusMultipleScatteringCorrection-v1.html#algm-discusmultiplescatteringcorrection"><span class="std std-ref">DiscusMultipleScatteringCorrection</span></a> is opened while a group workspace is present in the Workspaces list.</li>
<li><a class="reference internal" href="../../algorithms/ConvertToPointData-v1.html#algm-converttopointdata"><span class="std std-ref">ConvertToPointData</span></a> and <a class="reference internal" href="../../algorithms/ConvertToHistogram-v1.html#algm-converttohistogram"><span class="std std-ref">ConvertToHistogram</span></a> now handle bin fractions in <code class="docutils literal"><span class="pre">RebinnedOutput</span></code> workspaces by setting all fractions to unity instead of zero. This is because these workspaces are always created as histograms so conversion means discarding the bin information but setting them to zero gives <code class="docutils literal"><span class="pre">NaN</span></code>s.</li>
</ul>
</div>
</div>
<div class="section" id="fit-functions">
<h2><a class="toc-backref" href="#id10">Fit Functions</a><a class="headerlink" href="#fit-functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id11">New Features</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>An <a class="reference internal" href="../../fitting/fitfunctions/AsymmetricPearsonVII.html#func-asymmetricpearsonvii"><span class="std std-ref">AsymmetricPearsonVII</span></a> fit function has been implemented in order to improve the description of peaks that have an asymmetric shape.</li>
<li>Functions have been extended to allow for Function Attribute Validators. This feature further extends to the <code class="docutils literal"><span class="pre">FitPropertyBrowser</span></code>.
This allows the value of attributes to be restricted in numerous ways, using validators already available in the Mantid Kernel. Examples of validation include (but are not limited to):<ul>
<li>A numeric value that is bound by a numeric min/max.</li>
<li>A string value that must be one of a list of possible values.</li>
<li>A string value that is required to contain specific sub-strings.</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id12">Bugfixes</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Individual members of composite multi-domain fit functions are now visible.</li>
<li>Mantid will no longer crash when a <code class="docutils literal"><span class="pre">WorkspaceGroup</span></code> is used in a <a class="reference internal" href="../../fitting/fitfunctions/TabulatedFunction.html#func-tabulatedfunction"><span class="std std-ref">TabulatedFunction</span></a>. Instead, a runtime error is shown explaining that the attribute cannot be assigned.</li>
<li>It is now possible to use the same values for the <code class="docutils literal"><span class="pre">WorkspaceIndex</span></code> and <code class="docutils literal"><span class="pre">Workspace</span> <span class="pre">Index</span></code> fields when creating a composite function in the fitting browser.</li>
</ul>
</div>
</div>
<div class="section" id="kernel">
<h2><a class="toc-backref" href="#id13">Kernel</a><a class="headerlink" href="#kernel" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id14">Bugfixes</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed a bug that prevented the correct inversion of large tridiagonal matrices.</li>
</ul>
</div>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="#id15">Python</a><a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id16">New Features</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added possibility to forward log messages to Python using <code class="docutils literal"><span class="pre">mantid.utils.logging.log_to_python</span></code>.</li>
<li><code class="docutils literal"><span class="pre">setAutoTrim</span></code> and <code class="docutils literal"><span class="pre">getAutoTrim</span></code> from the <a class="reference internal" href="../../api/python/mantid/kernel/Property.html#mantid.kernel.Property" title="mantid.kernel.Property"><code class="xref py py-obj docutils literal"><span class="pre">Property</span></code></a> class are now exposed to Python.</li>
<li><code class="docutils literal"><span class="pre">getNumberDetectors</span></code> from the <a class="reference internal" href="../../api/python/mantid/geometry/Instrument.html#mantid.geometry.Instrument" title="mantid.geometry.Instrument"><code class="xref py py-obj docutils literal"><span class="pre">Instrument</span></code></a> class is now exposed to the Python API.</li>
</ul>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id17">Bugfixes</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Mantid will no longer hang when performing ADS updates from multiple python algorithms at the same time.</li>
</ul>
</div>
</div>
<div class="section" id="installation">
<h2><a class="toc-backref" href="#id18">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="mantidworkbench">
<h2><a class="toc-backref" href="#id19">MantidWorkbench</a><a class="headerlink" href="#mantidworkbench" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="mantidworkbench.html"><span class="doc">Mantid Workbench Changes</span></a>.</p>
<p><a class="reference internal" href="index.html#v6-4-0"><span class="std std-ref">Release 6.4.0</span></a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="direct_geometry.html" title="Previous Chapter: Direct Geometry Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Direct Geomet...</span>
    </a>
  </li>
  <li>
    <a href="indirect_geometry.html" title="Next Chapter: Indirect Geometry Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Geom... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>