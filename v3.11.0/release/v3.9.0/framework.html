<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Framework Changes</title>
    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '3.11.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../../index.html" />
    <link rel="up" title="Mantid 3.9.0 Release Notes" href="index.html" />
    <link rel="next" title="UI &amp; Usability Changes" href="ui.html" />
    <link rel="prev" title="Mantid 3.9.0 Release Notes" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.11</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="framework-changes">
<h1>Framework Changes<a class="headerlink" href="#framework-changes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#changes" id="id2">Changes</a></li>
<li><a class="reference internal" href="#algorithms" id="id3">Algorithms</a><ul>
<li><a class="reference internal" href="#new" id="id4">New</a></li>
<li><a class="reference internal" href="#improved" id="id5">Improved</a></li>
<li><a class="reference internal" href="#renamed" id="id6">Renamed</a></li>
<li><a class="reference internal" href="#bug-fixes" id="id7">Bug Fixes</a></li>
<li><a class="reference internal" href="#deprecated" id="id8">Deprecated</a></li>
<li><a class="reference internal" href="#removed" id="id9">Removed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#curvefitting" id="id10">CurveFitting</a><ul>
<li><a class="reference internal" href="#id1" id="id11">Improved</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="changes">
<h2><a class="toc-backref" href="#id2">Changes</a><a class="headerlink" href="#changes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Mantid now supports automatic updates to the facilities.xml file in the same way that it does the instrument definitions.  This allows extensions and changes to the list of supported instruments without needing to install a new release of Mantid.</li>
<li>This has been initially put into place to support a data file naming change for Vesuvio, but will help for future changes as well.</li>
<li>Mantid is aware of the change to file naming for Vesuvio, you can continue to use EVS or VESUVIO as a prefix when trying to load files from this instrument, and Mantid will map that to the correct filenames.</li>
<li>Mantid will correctly handle the naming format changes to Polaris, it will automatically select between the old and new filename format whilst loading files correctly.</li>
</ul>
</div>
<div class="section" id="algorithms">
<h2><a class="toc-backref" href="#id3">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new">
<h3><a class="toc-backref" href="#id4">New</a><a class="headerlink" href="#new" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/ConvertToConstantL2-v1.html#algm-converttoconstantl2"><em>ConvertToConstantL2</em></a> is the new name for CorrectFlightPaths.</li>
<li><a class="reference internal" href="../../algorithms/BinWidthAtX-v1.html#algm-binwidthatx"><em>BinWidthAtX</em></a> calculates the bin width at X, averaged over all histograms.</li>
<li><a class="reference internal" href="../../algorithms/MedianBinWidth-v1.html#algm-medianbinwidth"><em>MedianBinWidth</em></a> provides the median bin widths of histograms.</li>
</ul>
</div>
<div class="section" id="improved">
<h3><a class="toc-backref" href="#id5">Improved</a><a class="headerlink" href="#improved" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><a class="reference internal" href="../../algorithms/CalculateFlatBackground-v1.html#algm-calculateflatbackground"><em>CalculateFlatBackground</em></a> has a new mode &#8216;Moving Average&#8217;, which takes the minimum of a moving window average as the flat background.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/StartLiveData-v1.html#algm-startlivedata"><em>StartLiveData</em></a> and its dialog now support dynamic listener properties, based on the specific LiveListener being used.</p>
</li>
<li><p class="first">All algorithms using AsciiPointBase now have a new property &#8216;Separator&#8217; which allows the delimiter to be set to either comma, space or tab. This affects <a class="reference internal" href="../../algorithms/SaveReflCustomAscii-v1.html#algm-savereflcustomascii"><em>SaveReflCustomAscii</em></a>, <a class="reference internal" href="../../algorithms/SaveReflThreeColumnAscii-v1.html#algm-savereflthreecolumnascii"><em>SaveReflThreeColumnAscii</em></a>, <a class="reference internal" href="../../algorithms/SaveANSTOAscii-v1.html#algm-saveanstoascii"><em>SaveANSTOAscii</em></a> and <a class="reference internal" href="../../algorithms/SaveILLCosmosAscii-v1.html#algm-saveillcosmosascii"><em>SaveILLCosmosAscii</em></a>.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/ReplaceSpecialValues-v1.html#algm-replacespecialvalues"><em>ReplaceSpecialValues</em></a> allows for &#8216;small&#8217; values, which are below a user specified threshold, to be replaced.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/Stitch1DMany-v1.html#algm-stitch1dmany"><em>Stitch1DMany</em></a> has a new property &#8216;ScaleFactorFromPeriod&#8217;, which enables it to apply scale factors from a particular period when stitching group workspaces. The documentation for this algorithm has also been improved.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/SaveMDWorkspaceToVTK-v1.html#algm-savemdworkspacetovtk"><em>SaveMDWorkspaceToVTK</em></a> has a working progress bar.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/SumSpectra-v1.html#algm-sumspectra"><em>SumSpectra</em></a> has an option to ignore special floating point values called &#8216;RemoveSpecialValues&#8217;. This is off by default. When enabled it will ignore values such as NaN or Infinity during the summation of the spectra.  It was also updated to fix special values being used in some cases when the option was selected.</p>
</li>
<li><dl class="first docutils">
<dt><a class="reference internal" href="../../algorithms/MonteCarloAbsorption-v1.html#algm-montecarloabsorption"><em>MonteCarloAbsorption</em></a>:</dt>
<dd><ul class="first last simple">
<li>An <cite>Interpolation</cite> option has been added. The availabile options are: <cite>Linear</cite> &amp; <cite>CSpline</cite>.</li>
<li>The method of selecting the scattering point has ben updated to give better agreement with numerical algorithms (e.g. <a class="reference internal" href="../../algorithms/CylinderAbsorption-v1.html#algm-cylinderabsorption"><em>CylinderAbsorption</em></a>).</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/SetSample-v1.html#algm-setsample"><em>SetSample</em></a> now accepts an Angle argument for defining a rotated flat plate sample.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/SavePlot1D-v1.html#algm-saveplot1d"><em>SavePlot1D</em></a> now supports optional <tt class="docutils literal"><span class="pre">SpectraList</span></tt> for plotting</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/MaskDetectors-v1.html#algm-maskdetectors"><em>MaskDetectors</em></a> has a new option to mask detectors by the instrument&#8217;s component name. It can accept a masked workspace with a differing number of spectra to the input workspace, providing that the number of detectors match. This can be useful in the case of hardware grouped detectors.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/LoadIsawDetCal-v1.html#algm-loadisawdetcal"><em>LoadIsawDetCal</em></a> now accepts multiple files in a single <tt class="docutils literal"><span class="pre">Filename</span></tt> property.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/SavePlot1D-v1.html#algm-saveplot1d"><em>SavePlot1D</em></a> now supports optional <tt class="docutils literal"><span class="pre">SpectraList</span></tt> for plotting</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/MayersSampleCorrection-v1.html#algm-mayerssamplecorrection"><em>MayersSampleCorrection</em></a>: The calculation of the azimuth angle has been fixed. Previously it was set equal to the Mantid definition of phi but the old code defined it as the angle away from the scattering plane.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/MatchPeaks-v1.html#algm-matchpeaks"><em>MatchPeaks</em></a> performs circular shift operation (numpy roll) along the x-axis to align the peaks in the spectra.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/FindEPP-v2.html#algm-findepp"><em>FindEPP</em></a> is improved to better determine the initial parameters and range for the fitting.</p>
</li>
<li><p class="first"><a class="reference internal" href="../../algorithms/StartLiveData-v1.html#algm-startlivedata"><em>StartLiveData</em></a> can now accept LiveListener properties as parameters, based on the value of the &#8220;Instrument&#8221; parameter.</p>
</li>
</ul>
</div>
<div class="section" id="renamed">
<h3><a class="toc-backref" href="#id6">Renamed</a><a class="headerlink" href="#renamed" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/ConvertToConstantL2-v1.html#algm-converttoconstantl2"><em>CorrectFlightPaths</em></a> has been renamed to <a class="reference internal" href="../../algorithms/ConvertToConstantL2-v1.html#algm-converttoconstantl2"><em>ConvertToConstantL2</em></a>.</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h3><a class="toc-backref" href="#id7">Bug Fixes</a><a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Bin masking information was incorrectly saved when converting workspaces into nexus files, which is now fixed.</li>
<li><a class="reference internal" href="../../algorithms/LoadEventNexus-v1.html#algm-loadeventnexus"><em>LoadEventNexus</em></a> should no longer leak memory when the execution is cancelled.</li>
<li><a class="reference internal" href="../../algorithms/LoadNexusProcessed-v1.html#algm-loadnexusprocessed"><em>LoadNexusProcessed</em></a> will now load the stored workspace names from a processed Nexus file in the case of multiperiod data.</li>
<li>If a run is aborted and restarted, the <tt class="docutils literal"><span class="pre">running</span></tt> log in the workspace will correctly reflect this. (<tt class="docutils literal"><span class="pre">running</span></tt> will be false at all times before the abort.)</li>
<li>Fixed several issues with masked detectors and neighbour counts in the nearest-neighbour code used by a few algorithms.</li>
<li>Issues with <a class="reference internal" href="../../algorithms/CalculateFlatBackground-v1.html#algm-calculateflatbackground"><em>CalculateFlatBackground</em></a> with  <strong>Return Background</strong> option returning fake values has been fixed.</li>
<li><a class="reference internal" href="../../algorithms/ShiftLogTime-v1.html#algm-shiftlogtime"><em>ShiftLogTime</em></a> now correctly handles shift in the negative direction</li>
</ul>
</div>
<div class="section" id="deprecated">
<h3><a class="toc-backref" href="#id8">Deprecated</a><a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/AbortRemoteJob-v2.html#algm-abortremotejob"><em>AbortRemoteJob</em></a> is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/Authenticate-v2.html#algm-authenticate"><em>Authenticate</em></a>  is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/CentroidPeaksMD-v2.html#algm-centroidpeaksmd"><em>CentroidPeaksMD</em></a>  is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/ConvertEmptyToTof-v1.html#algm-convertemptytotof"><em>ConvertEmptyToTof</em></a>.</li>
<li><a class="reference internal" href="../../algorithms/ConvertUnitsUsingDetectorTable-v1.html#algm-convertunitsusingdetectortable"><em>ConvertUnitsUsingDetectorTable</em></a>.</li>
<li><a class="reference internal" href="../../algorithms/DownloadRemoteFile-v2.html#algm-downloadremotefile"><em>DownloadRemoteFile</em></a> is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/FFTSmooth-v2.html#algm-fftsmooth"><em>FFTSmooth</em></a> is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/OneStepMDEW-v1.html#algm-onestepmdew"><em>OneStepMDEW</em></a>.</li>
<li><a class="reference internal" href="../../algorithms/QueryAllRemoteJobs-v2.html#algm-queryallremotejobs"><em>QueryAllRemoteJobs</em></a> is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/RefinePowderInstrumentParameters-v3.html#algm-refinepowderinstrumentparameters"><em>RefinePowderInstrumentParameters</em></a> is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/SetupILLD33Reduction-v1.html#algm-setupilld33reduction"><em>SetupILLD33Reduction</em></a>.</li>
<li><a class="reference internal" href="../../algorithms/StartRemoteTransaction-v2.html#algm-startremotetransaction"><em>StartRemoteTransaction</em></a> is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/LoadILLDiffraction-v1.html#algm-loadilldiffraction"><em>LoadILLAscii</em></a>.</li>
<li><a class="reference internal" href="../../algorithms/StopRemoteTransaction-v2.html#algm-stopremotetransaction"><em>StopRemoteTransaction</em></a> is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/SubmitRemoteJob-v2.html#algm-submitremotejob"><em>SubmitRemoteJob</em></a> is deprecated in favour of v2.</li>
<li><a class="reference internal" href="../../algorithms/Transpose3D-v1.html#algm-transpose3d"><em>Transpose3D</em></a> is deprecated in favour <a class="reference internal" href="../../algorithms/TransposeMD-v1.html#algm-transposemd"><em>TransposeMD</em></a>.</li>
<li>The Python function <cite>IMDDimension.getName()</cite> has been deprecated in favour of <cite>IMDDimension.name</cite>.</li>
<li>The duplicate Python function <cite>Workspace.getName()</cite> has been deprecated in favour of <cite>Workspace.name()</cite>.</li>
</ul>
</div>
<div class="section" id="removed">
<h3><a class="toc-backref" href="#id9">Removed</a><a class="headerlink" href="#removed" title="Permalink to this headline">¶</a></h3>
<p>The following (previously deprecated) algorithms versions have now been removed:</p>
<ul class="simple">
<li>LoadEventPreNexus v1</li>
<li>LoadLogsForSNSPulsedMagnet v1</li>
<li>Lorentzian1D v1</li>
<li>ProcessDasNexusLog v1</li>
<li>LoadILL v1</li>
<li>SANSDirectBeamScaling v1</li>
</ul>
</div>
</div>
<div class="section" id="curvefitting">
<h2><a class="toc-backref" href="#id10">CurveFitting</a><a class="headerlink" href="#curvefitting" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Recommendations for which fitting method to use for a given data set has been added to <a class="reference internal" href="../../concepts/FittingMinimizers.html#fittingminimizers"><em>FittingMinimzers page</em></a>.</li>
<li>Improved documentation of the these fitting minimizers.</li>
<li>Algorithm <a class="reference internal" href="../../algorithms/CalculateCostFunction-v1.html#algm-calculatecostfunction"><em>CalculateCostFunction</em></a> calculates a value of any available cost function.</li>
<li>Algorithm <a class="reference internal" href="../../algorithms/EstimateFitParameters-v1.html#algm-estimatefitparameters"><em>EstimateFitParameters</em></a> estimates the initial values of a fiting function in given intervals.</li>
<li><cite>Exclude</cite> is new property of <a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><em>Fit</em></a>, which allows for a user defined range to be excluded from a fit.</li>
<li>System tests and Fitting Benchmarks have been added for testing the minimizer, the scripts generate the tables displayed on <a class="reference internal" href="../../concepts/FittingMinimizers.html#fittingminimizers"><em>FittingMinimzers page</em></a>. This System tests also demo how these tables can be created as a standard Mantid script.</li>
</ul>
<p>The work on benchmarking fitting has received funding from the Horizon 2020 Framework
Programme of the European Union under the SINE2020 project Grant No 654000</p>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id11">Improved</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <cite>Peak Radius</cite> global setting for 1D peaks is replaced with <cite>PeakRadius</cite> property of the <a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><em>Fit</em></a> algorithm (see algorithm&#8217;s <a class="reference internal" href="../../algorithms/Fit-v1.html#algm-fit"><em>description</em></a> for the details).</li>
</ul>
<div class="figure">
<a class="screenshot reference internal image-reference" href="../../_images/NoPeakRadius_3.9.png"><img alt="../../_images/NoPeakRadius_3.9.png" class="screenshot" src="../../_images/NoPeakRadius_3.9.png" style="width: 550px;" /></a>
</div>
<ul class="simple">
<li>The output and normalization MDHistoWorkspaces from <a class="reference internal" href="../../algorithms/MDNormSCD-v1.html#algm-mdnormscd"><em>MDNormSCD</em></a> and <a class="reference internal" href="../../algorithms/MDNormDirectSC-v1.html#algm-mdnormdirectsc"><em>MDNormDirectSC</em></a> have the &#8216;displayNormalization&#8217; set to &#8216;NoNormalization&#8217;. For older outputs, the <cite>setDisplayNormalization</cite> function is now exposed to python.</li>
</ul>
<p>Full list of
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.9%22+is%3Amerged+label%3A%22Component%3A+Framework%22">Framework</a>
and
<a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.9%22+is%3Amerged+label%3A%22Component%3A+Python%22">Python</a>
changes on GitHub</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Mantid 3.9.0 Release Notes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Mantid 3.9.0 Rel...</span>
    </a>
  </li>
  <li>
    <a href="ui.html" title="Next Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">UI & Usability C... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>