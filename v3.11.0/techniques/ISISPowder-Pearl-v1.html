<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ISIS Powder Diffraction Scripts - PEARL Reference</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.11.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="up" title="Techniques" href="index.html" />
    <link rel="next" title="ISIS Powder Diffraction Scripts - POLARIS Reference" href="ISISPowder-Polaris-v1.html" />
    <link rel="prev" title="ISIS Powder Diffraction Scripts" href="ISISPowder-Index-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.11</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="isis-powder-diffraction-scripts-pearl-reference">
<span id="isis-powder-diffraction-pearl-ref"></span><h1>ISIS Powder Diffraction Scripts - PEARL Reference<a class="headerlink" href="#isis-powder-diffraction-scripts-pearl-reference" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#creating-pearl-object" id="id5">Creating PEARL Object</a><ul>
<li><a class="reference internal" href="#example" id="id6">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#methods" id="id7">Methods</a><ul>
<li><a class="reference internal" href="#create-vanadium" id="id8">create_vanadium</a><ul>
<li><a class="reference internal" href="#id1" id="id9">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#focus" id="id10">focus</a><ul>
<li><a class="reference internal" href="#id2" id="id11">Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#calibration-mapping-file" id="id12">Calibration Mapping File</a><ul>
<li><a class="reference internal" href="#id3" id="id13">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#parameters" id="id14">Parameters</a><ul>
<li><a class="reference internal" href="#attenuation-file-path" id="id15">attenuation_file_path</a></li>
<li><a class="reference internal" href="#calibration-directory" id="id16">calibration_directory</a></li>
<li><a class="reference internal" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref" id="id17">calibration_mapping_file</a></li>
<li><a class="reference internal" href="#config-file" id="id18">config_file</a></li>
<li><a class="reference internal" href="#do-absorb-corrections" id="id19">do_absorb_corrections</a></li>
<li><a class="reference internal" href="#file-ext" id="id20">file_ext</a></li>
<li><a class="reference internal" href="#focus-mode" id="id21">focus_mode</a><ul>
<li><a class="reference internal" href="#all" id="id22">All</a></li>
<li><a class="reference internal" href="#groups" id="id23">Groups</a></li>
<li><a class="reference internal" href="#trans" id="id24">Trans</a></li>
<li><a class="reference internal" href="#mods" id="id25">Mods</a></li>
</ul>
</li>
<li><a class="reference internal" href="#long-mode" id="id26">long_mode</a></li>
<li><a class="reference internal" href="#output-directory" id="id27">output_directory</a></li>
<li><a class="reference internal" href="#perform-attenuation" id="id28">perform_attenuation</a></li>
<li><a class="reference internal" href="#run-in-cycle" id="id29">run_in_cycle</a></li>
<li><a class="reference internal" href="#run-number" id="id30">run_number</a></li>
<li><a class="reference internal" href="#tt-mode" id="id31">tt_mode</a></li>
<li><a class="reference internal" href="#user-name" id="id32">user_name</a></li>
<li><a class="reference internal" href="#vanadium-normalisation" id="id33">vanadium_normalisation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#advanced-parameters" id="id34">Advanced Parameters</a><ul>
<li><a class="reference internal" href="#focused-cropping-values" id="id35">focused_cropping_values</a></li>
<li><a class="reference internal" href="#monitor-lambda-crop-range" id="id36">monitor_lambda_crop_range</a></li>
<li><a class="reference internal" href="#monitor-integration-range" id="id37">monitor_integration_range</a></li>
<li><a class="reference internal" href="#monitor-mask-regions" id="id38">monitor_mask_regions</a></li>
<li><a class="reference internal" href="#monitor-spectrum-number" id="id39">monitor_spectrum_number</a></li>
<li><a class="reference internal" href="#monitor-spline-coefficient" id="id40">monitor_spline_coefficient</a></li>
<li><a class="reference internal" href="#raw-data-tof-cropping" id="id41">raw_data_tof_cropping</a></li>
<li><a class="reference internal" href="#spline-coefficient" id="id42">spline_coefficient</a></li>
<li><a class="reference internal" href="#tt35-grouping-filename" id="id43">tt35_grouping_filename</a></li>
<li><a class="reference internal" href="#tt70-grouping-filename" id="id44">tt70_grouping_filename</a></li>
<li><a class="reference internal" href="#tt88-grouping-filename" id="id45">tt88_grouping_filename</a></li>
<li><a class="reference internal" href="#vanadium-absorb-filename" id="id46">vanadium_absorb_filename</a></li>
<li><a class="reference internal" href="#vanadium-tof-cropping" id="id47">vanadium_tof_cropping</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="creating-pearl-object">
<span id="creating-pearl-object-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id5">Creating PEARL Object</a><a class="headerlink" href="#creating-pearl-object" title="Permalink to this headline">¶</a></h2>
<p>This method assumes you are familiar with the concept of objects in Python.
If not more details can be read here: <a class="reference internal" href="ISISPowder-Tutorials.html#intro-to-objects-isis-powder-diffraction-ref"><em>A quick introduction to objects</em></a></p>
<p>To create a PEARL object the following parameters are required:</p>
<ul class="simple">
<li><a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><em>calibration_directory</em></a></li>
<li><a class="reference internal" href="#output-directory-pearl-isis-powder-diffraction-ref"><em>output_directory</em></a></li>
<li><a class="reference internal" href="#user-name-pearl-isis-powder-diffraction-ref"><em>user_name</em></a></li>
</ul>
<p>Optionally a configuration file may be specified if one exists
using the following parameter:</p>
<ul class="simple">
<li><a class="reference internal" href="#config-file-pearl-isis-powder-diffraction-ref"><em>config_file</em></a></li>
</ul>
<p>See <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><em>Using configuration files</em></a>
on YAML configuration files for more details</p>
<div class="section" id="example">
<h3><a class="toc-backref" href="#id6">Example</a><a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">isis_powder</span> <span class="kn">import</span> <span class="n">Pearl</span>

<span class="n">calibration_dir</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\calibration_dir&quot;</span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\output_dir&quot;</span>

<span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="n">calibration_dir</span><span class="p">,</span>
                      <span class="n">output_directory</span><span class="o">=</span><span class="n">output_dir</span><span class="p">,</span>
                      <span class="n">user_name</span><span class="o">=</span><span class="s">&quot;Mantid&quot;</span><span class="p">)</span>

<span class="c"># Optionally we could provide a configuration file like so</span>
<span class="c"># Notice how the file name ends with .yaml</span>
<span class="n">config_file_path</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\config_file.yaml</span>
<span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="n">config_file_path</span><span class="p">,</span>
                      <span class="n">user_name</span><span class="o">=</span><span class="s">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="methods">
<h2><a class="toc-backref" href="#id7">Methods</a><a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h2>
<p>The following methods can be executed on a PEARL object:</p>
<ul class="simple">
<li><a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a></li>
<li><a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a></li>
</ul>
<p>For information on creating a PEARL object see:
<a class="reference internal" href="#creating-pearl-object-isis-powder-diffraction-ref"><em>Creating PEARL Object</em></a></p>
<div class="section" id="create-vanadium">
<span id="create-vanadium-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id8">create_vanadium</a><a class="headerlink" href="#create-vanadium" title="Permalink to this headline">¶</a></h3>
<p>The <em>create_vanadium</em> method allows a user to process a vanadium run.
Whilst processing the vanadium run the scripts can apply any corrections
the user enables and will spline the resulting workspace(s) for later focusing.</p>
<p>On PEARL the following parameters are required when executing <em>create_vanadium</em>:</p>
<ul class="simple">
<li><a class="reference internal" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref"><em>calibration_mapping_file</em></a></li>
<li><a class="reference internal" href="#do-absorb-corrections-pearl-isis-powder-diffraction-ref"><em>do_absorb_corrections</em></a></li>
<li><a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><em>long_mode</em></a></li>
<li><a class="reference internal" href="#run-in-cycle-pearl-isis-powder-diffraction-ref"><em>run_in_cycle</em></a></li>
<li><a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><em>tt_mode</em></a></li>
</ul>
<div class="section" id="id1">
<h4><a class="toc-backref" href="#id9">Example</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                              <span class="n">do_absorb_corrections</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">long_mode</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                              <span class="n">run_in_cycle</span><span class="o">=</span><span class="s">&quot;100&quot;</span><span class="p">,</span> <span class="n">tt_mode</span><span class="o">=</span><span class="s">&quot;tt88&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="focus">
<span id="focus-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id10">focus</a><a class="headerlink" href="#focus" title="Permalink to this headline">¶</a></h3>
<p>The <em>focus</em> method processes the user specified run(s). It aligns,
focuses and optionally applies corrections if the user has requested them.</p>
<p>On PEARL the following parameters are required when executing <em>focus</em>:</p>
<ul class="simple">
<li><a class="reference internal" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref"><em>calibration_mapping_file</em></a></li>
<li><a class="reference internal" href="#focus-mode-pearl-isis-powder-diffraction-ref"><em>focus_mode</em></a></li>
<li><a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><em>long_mode</em></a></li>
<li><a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><em>perform_attenuation</em></a></li>
<li><a class="reference internal" href="#run-number-pearl-isis-powder-diffraction-ref"><em>run_number</em></a></li>
<li><a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><em>tt_mode</em></a></li>
<li><a class="reference internal" href="#vanadium-normalisation-pearl-isis-powder-diffraction-ref"><em>vanadium_normalisation</em></a></li>
</ul>
<p>The following parameter is required if
<a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><em>perform_attenuation</em></a> is set to <strong>True</strong></p>
<ul class="simple">
<li><a class="reference internal" href="#attenuation-file-path-pearl-isis-powder-diffraction-ref"><em>attenuation_file_path</em></a></li>
</ul>
<p>The following parameter may also be optionally set:</p>
<ul class="simple">
<li><a class="reference internal" href="#file-ext-pearl-isis-powder-diffraction-ref"><em>file_ext</em></a></li>
</ul>
<div class="section" id="id2">
<h4><a class="toc-backref" href="#id11">Example</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Notice how the filename ends with .yaml</span>
<span class="n">cal_mapping_file</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\cal_mapping.yaml&quot;</span>

<span class="n">attenuation_path</span> <span class="o">=</span> <span class="s">r&quot;C:\path\to\attenuation_file&quot;</span>

<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="n">cal_mapping_file</span><span class="p">,</span>
                    <span class="n">focus_mode</span><span class="o">=</span><span class="s">&quot;all&quot;</span><span class="p">,</span> <span class="n">long_mode</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                    <span class="n">perform_attenuation</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                    <span class="n">attenuation_file_path</span><span class="o">=</span><span class="n">attenuation_path</span><span class="p">,</span>
                    <span class="n">run_number</span><span class="o">=</span><span class="s">&quot;100-110&quot;</span><span class="p">,</span> <span class="n">tt_mode</span><span class="o">=</span><span class="s">&quot;tt88&quot;</span><span class="p">,</span>
                    <span class="n">vanadium_normalisation</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="calibration-mapping-file">
<span id="calibration-mapping-pearl-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id12">Calibration Mapping File</a><a class="headerlink" href="#calibration-mapping-file" title="Permalink to this headline">¶</a></h2>
<p>The calibration mapping file holds the mapping between
run numbers, current label, offset filename and the empty
and vanadium numbers.</p>
<p>For more details on the calibration mapping file see:
<a class="reference internal" href="ISISPowder-Tutorials.html#cycle-mapping-files-isis-powder-diffraction-ref"><em>Cycle mapping files</em></a></p>
<p>The layout on PEARL should look as follows
substituting the example values included for appropriate values:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">1-100</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">label</span><span class="p-Indicator">:</span> <span class="s">&quot;1_1&quot;</span>
  <span class="l-Scalar-Plain">offset_file_name</span><span class="p-Indicator">:</span> <span class="s">&quot;offset_file.cal&quot;</span>
  <span class="l-Scalar-Plain">empty_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;10&quot;</span>
  <span class="l-Scalar-Plain">vanadium_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;20&quot;</span>
</pre></div>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id13">Example</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">1-100</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">label</span><span class="p-Indicator">:</span> <span class="s">&quot;1_1&quot;</span>
  <span class="l-Scalar-Plain">offset_file_name</span><span class="p-Indicator">:</span> <span class="s">&quot;offset_file.cal&quot;</span>
  <span class="l-Scalar-Plain">empty_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;10&quot;</span>
  <span class="l-Scalar-Plain">vanadium_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;20&quot;</span>

<span class="l-Scalar-Plain">101-</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">label</span><span class="p-Indicator">:</span> <span class="s">&quot;1_2&quot;</span>
  <span class="l-Scalar-Plain">offset_file_name</span><span class="p-Indicator">:</span> <span class="s">&quot;offset_file.cal&quot;</span>
  <span class="l-Scalar-Plain">empty_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;110&quot;</span>
  <span class="l-Scalar-Plain">vanadium_run_numbers</span><span class="p-Indicator">:</span> <span class="s">&quot;120&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="parameters">
<h2><a class="toc-backref" href="#id14">Parameters</a><a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>The following parameters for PEARL are intended for regular use
when using the ISIS Powder scripts.</p>
<div class="section" id="attenuation-file-path">
<span id="attenuation-file-path-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id15">attenuation_file_path</a><a class="headerlink" href="#attenuation-file-path" title="Permalink to this headline">¶</a></h3>
<p>Required if <a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><em>perform_attenuation</em></a>
is set to <strong>True</strong></p>
<p>The full path to the attenuation file to use within the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a> method.</p>
<p>The workspace will be attenuated with the specified file
if the <a class="reference internal" href="#focus-mode-pearl-isis-powder-diffraction-ref"><em>focus_mode</em></a>
is set to <strong>all</strong> or <strong>trans</strong>. For more details see
<a class="reference internal" href="../algorithms/PearlMCAbsorption-v1.html#algm-pearlmcabsorption"><em>PearlMCAbsorption</em></a></p>
<p><em>Note: The path to the file must include the file extension</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span><span class="p">(</span><span class="n">attenuation_file_path</span><span class="o">=</span><span class="s">r&quot;C:\path\to\attenuation_file.out&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="calibration-directory">
<span id="calibration-directory-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id16">calibration_directory</a><a class="headerlink" href="#calibration-directory" title="Permalink to this headline">¶</a></h3>
<p>This parameter should be the full path to the calibration folder.
Within the folder the following should be present:</p>
<ul class="simple">
<li>Grouping .cal files:<ul>
<li><a class="reference internal" href="#tt35-grouping-filename-pearl-isis-powder-diffraction-ref"><em>tt35_grouping_filename</em></a></li>
<li><a class="reference internal" href="#tt70-grouping-filename-pearl-isis-powder-diffraction-ref"><em>tt70_grouping_filename</em></a></li>
<li><a class="reference internal" href="#tt88-grouping-filename-pearl-isis-powder-diffraction-ref"><em>tt88_grouping_filename</em></a></li>
</ul>
</li>
<li>Vanadium Absorption File
(see: <a class="reference internal" href="#vanadium-absorb-filename-pearl-isis-powder-diffraction-ref"><em>vanadium_absorb_filename</em></a>)</li>
<li>Folder(s) with the label name specified in mapping file (e.g. &#8220;1_1&#8221;)<ul>
<li>Inside each folder should be the offset file with name specified in mapping file</li>
</ul>
</li>
</ul>
<p>The script will also save out vanadium splines into the relevant
label folder which are subsequently loaded and used within the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a> method.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">calibration_directory</span><span class="o">=</span><span class="s">r&quot;C:\path\to\calibration_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="calibration-mapping-file-pearl-isis-powder-diffraction-ref">
<span id="id4"></span><h3><a class="toc-backref" href="#id17">calibration_mapping_file</a><a class="headerlink" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref" title="Permalink to this headline">¶</a></h3>
<p>This parameter gives the full path to the YAML file containing the
calibration mapping. For more details on this file see:
<a class="reference internal" href="#calibration-mapping-pearl-isis-powder-diffraction-ref"><em>Calibration Mapping File</em></a></p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Notice the filename always ends in .yaml</span>
<span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">calibration_mapping_file</span><span class="o">=</span><span class="s">r&quot;C:\path\to\file\calibration_mapping.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="config-file">
<span id="config-file-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id18">config_file</a><a class="headerlink" href="#config-file" title="Permalink to this headline">¶</a></h3>
<p>The full path to the YAML configuration file. This file is
described in detail here: <a class="reference internal" href="ISISPowder-Tutorials.html#configuration-files-isis-powder-diffraction-ref"><em>Using configuration files</em></a>
It is recommended to set this parameter at object creation instead
of on a method as it will warn if any parameters are overridden
in the scripting window.</p>
<p><em>Note: This should be the full path to the file including extension</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Notice the filename always ends in .yaml</span>
<span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">config_file</span><span class="o">=</span><span class="s">r&quot;C:\path\to\file\configuration.yaml&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="do-absorb-corrections">
<span id="do-absorb-corrections-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id19">do_absorb_corrections</a><a class="headerlink" href="#do-absorb-corrections" title="Permalink to this headline">¶</a></h3>
<p>Indicates whether to perform vanadium absorption corrections
when calling <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a>.
If set to True the vanadium absorption file
(described here: <a class="reference internal" href="#vanadium-absorb-filename-pearl-isis-powder-diffraction-ref"><em>vanadium_absorb_filename</em></a>)
will be loaded and the vanadium sample will be divided by the pre-calculated
absorption corrections.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">do_absorb_corrections</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="file-ext">
<span id="file-ext-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id20">file_ext</a><a class="headerlink" href="#file-ext" title="Permalink to this headline">¶</a></h3>
<p><em>Optional</em></p>
<p>Specifies a file extension to use when using the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a> method.</p>
<p>This should be used to process partial runs. When
processing full runs (i.e. completed runs) it should not
be specified as Mantid will automatically determine the
best extension to use.</p>
<p><em>Note: A leading dot (.) is not required but
is preferred for readability</em></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">file_ext</span><span class="o">=</span><span class="s">&quot;.s01&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="focus-mode">
<span id="focus-mode-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id21">focus_mode</a><a class="headerlink" href="#focus-mode" title="Permalink to this headline">¶</a></h3>
<p>Determines how the banks are grouped when using the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a> method.
Each mode is further described below.</p>
<p>Accepted values are: <strong>All</strong>, <strong>Groups</strong>, <strong>Mods</strong> and <strong>Trans</strong></p>
<div class="section" id="all">
<h4><a class="toc-backref" href="#id22">All</a><a class="headerlink" href="#all" title="Permalink to this headline">¶</a></h4>
<p>In all mode banks 1-9 (inclusive) are summed into a single spectra
then scaled down to 1/9 of their original values.</p>
<p>The workspace is also attenuated if
<a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><em>perform_attenuation</em></a>
is set to <strong>True</strong>.</p>
<p>Workspaces containing banks 10-14 are left as
separate workspaces with appropriate names.</p>
</div>
<div class="section" id="groups">
<h4><a class="toc-backref" href="#id23">Groups</a><a class="headerlink" href="#groups" title="Permalink to this headline">¶</a></h4>
<p>In groups mode banks 1+2+3, 4+5+6, 7+8+9 are summed into three (3)
separate workspaces. Each workspace is scaled down to a 1/3 of original scale.</p>
<p>The workspaces containing banks 4-9 (inclusive) are then added
into a separate workspace and scaled down to 1/2 original scale.</p>
<p>Banks 10-14 are left as separate workspaces with appropriate names.</p>
</div>
<div class="section" id="trans">
<h4><a class="toc-backref" href="#id24">Trans</a><a class="headerlink" href="#trans" title="Permalink to this headline">¶</a></h4>
<p>In trans mode banks 1-9 (inclusive) are summed into a single spectra
then scaled down to 1/9 original scale.</p>
<p>The workspace is also attenuated if
<a class="reference internal" href="#perform-attenuation-pearl-isis-powder-diffraction-ref"><em>perform_attenuation</em></a>
is set to <strong>True</strong>.</p>
<p>All banks are also output as individual workspaces with appropriate names
with no additional processing applied.</p>
</div>
<div class="section" id="mods">
<h4><a class="toc-backref" href="#id25">Mods</a><a class="headerlink" href="#mods" title="Permalink to this headline">¶</a></h4>
<p>In mods mode every bank is left as individual workspaces with
appropriate names. No additional processing is performed.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">focus_mode</span><span class="o">=</span><span class="s">&quot;all&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="long-mode">
<span id="long-mode-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id26">long_mode</a><a class="headerlink" href="#long-mode" title="Permalink to this headline">¶</a></h3>
<p>Determines the TOF window to process data in. This
affects both the <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
and <a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a> methods.</p>
<p>As this affects the vanadium spline used the
<a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a> method
will need to be called once for each <em>long_mode</em> value (<strong>True</strong> and/or <strong>False</strong>)
if the user intends to use a different mode. This will create
a spline for the relevant mode which is automatically used when focusing.</p>
<p>When <em>long_mode</em> is <strong>False</strong> the TOF window processed is
between 0-20,000 μs</p>
<p>When <em>long_mode</em> is <strong>True</strong> the TOF window processed is
between 0-40,000 μs</p>
<p>This also affects the <a class="reference internal" href="#advanced-parameters-pearl-isis-powder-diffraction-ref"><em>Advanced Parameters</em></a>
used. More detail can be found for each individual parameter
listed under the advanced parameters section.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">long_mode</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c"># Or</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">long_mode</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="output-directory">
<span id="output-directory-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id27">output_directory</a><a class="headerlink" href="#output-directory" title="Permalink to this headline">¶</a></h3>
<p>Specifies the path to the output directory to save resulting files
into. The script will automatically create a folder
with the label determined from the
<a class="reference internal" href="#calibration-mapping-file-pearl-isis-powder-diffraction-ref"><em>calibration_mapping_file</em></a>
and within that create another folder for the current
<a class="reference internal" href="#user-name-pearl-isis-powder-diffraction-ref"><em>user_name</em></a>.</p>
<p>Within this folder processed data will be saved out in
several formats.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">output_directory</span><span class="o">=</span><span class="s">r&quot;C:\path\to\output_dir&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="perform-attenuation">
<span id="perform-attenuation-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id28">perform_attenuation</a><a class="headerlink" href="#perform-attenuation" title="Permalink to this headline">¶</a></h3>
<p>Indicates whether to perform attenuation corrections
whilst running <a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a>.
For more details of the corrections performed see:
<a class="reference internal" href="../algorithms/PearlMCAbsorption-v1.html#algm-pearlmcabsorption"><em>PearlMCAbsorption</em></a></p>
<p>If this is set to <strong>True</strong>
<a class="reference internal" href="#attenuation-file-path-pearl-isis-powder-diffraction-ref"><em>attenuation_file_path</em></a>
must be set too.</p>
<p><em>Note: This correction will only be performed if &#8216;focus_mode&#8217;
is in</em> <strong>All</strong> or <strong>Trans</strong>.
See: <a class="reference internal" href="#focus-mode-pearl-isis-powder-diffraction-ref"><em>focus_mode</em></a>
for more details.</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">perform_attenuation</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="run-in-cycle">
<span id="run-in-cycle-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id29">run_in_cycle</a><a class="headerlink" href="#run-in-cycle" title="Permalink to this headline">¶</a></h3>
<p>Indicates a run from the current cycle to use when calling
<a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a>.
This does not have the be the first run of the cycle or
the run number corresponding to the vanadium. However it
must be in the correct cycle according to the
<a class="reference internal" href="#calibration-mapping-pearl-isis-powder-diffraction-ref"><em>Calibration Mapping File</em></a>.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># In this example assume we mean a cycle with run numbers 100-200</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">run_in_cycle</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="run-number">
<span id="run-number-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id30">run_number</a><a class="headerlink" href="#run-number" title="Permalink to this headline">¶</a></h3>
<p>Specifies the run number(s) to process when calling the
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a> method.</p>
<p>This parameter accepts a single value or a range
of values with the following syntax:</p>
<p><strong>-</strong> : Indicates a range of runs inclusive
(e.g. <em>1-10</em> would process 1, 2, 3....8, 9, 10)</p>
<p><strong>,</strong> : Indicates a gap between runs
(e.g. <em>1, 3, 5, 7</em> would process run numbers 1, 3, 5, 7)</p>
<p>These can be combined like so:
<em>1-3, 5, 8-10</em> would process run numbers 1, 2, 3, 5, 8, 9, 10.</p>
<p>On Pearl any ranges of runs indicates the runs will be summed
before any additional processing takes place. For example
a run input of <em>1, 3, 5</em> will sum runs 1, 3 and 5 together
before proceeding to focus them.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Sum and process run numbers 1, 3, 5, 6, 7</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="s">&quot;1, 3, 5-7&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c"># Or just a single run</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">run_number</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="tt-mode">
<span id="tt-mode-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id31">tt_mode</a><a class="headerlink" href="#tt-mode" title="Permalink to this headline">¶</a></h3>
<p>Specifies the detectors to be considered from the
grouping files. This is used in the
<a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a> and
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a> methods.</p>
<p>For more details of the grouping file which is selected between
see the following:</p>
<ul class="simple">
<li><a class="reference internal" href="#tt35-grouping-filename-pearl-isis-powder-diffraction-ref"><em>tt35_grouping_filename</em></a></li>
<li><a class="reference internal" href="#tt70-grouping-filename-pearl-isis-powder-diffraction-ref"><em>tt70_grouping_filename</em></a></li>
<li><a class="reference internal" href="#tt88-grouping-filename-pearl-isis-powder-diffraction-ref"><em>tt88_grouping_filename</em></a></li>
</ul>
<p>Accepted values are: <strong>tt35</strong>, <strong>tt70</strong> and <strong>tt80</strong></p>
<p>When calling <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
<strong>all</strong> can be used to implicitly process all of the supported
values indicated above.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span><span class="o">.</span><span class="n">create_vanadium</span><span class="p">(</span><span class="n">tt_mode</span><span class="o">=</span><span class="s">&quot;all&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="c"># Or</span>
<span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">tt_mode</span><span class="o">=</span><span class="s">&quot;tt35&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="user-name">
<span id="user-name-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id32">user_name</a><a class="headerlink" href="#user-name" title="Permalink to this headline">¶</a></h3>
<p>Specifies the name of the current user when creating a
new PEARL object. This is only used when saving data to
sort data into respective user folders.
See <a class="reference internal" href="#output-directory-pearl-isis-powder-diffraction-ref"><em>output_directory</em></a>
for more details.</p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span> <span class="o">=</span> <span class="n">Pearl</span><span class="p">(</span><span class="n">user_name</span><span class="o">=</span><span class="s">&quot;Mantid&quot;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="vanadium-normalisation">
<span id="vanadium-normalisation-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id33">vanadium_normalisation</a><a class="headerlink" href="#vanadium-normalisation" title="Permalink to this headline">¶</a></h3>
<p>Indicates whether to divide the focused workspace within
<a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a> mode with a
previously generated vanadium spline.</p>
<p>This requires a vanadium to have been previously created
with the <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
method</p>
<p>Accepted values are: <strong>True</strong> or <strong>False</strong></p>
<p>Example Input:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pearl_example</span><span class="o">.</span><span class="n">focus</span><span class="p">(</span><span class="n">vanadium_normalisation</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="advanced-parameters">
<span id="advanced-parameters-pearl-isis-powder-diffraction-ref"></span><h2><a class="toc-backref" href="#id34">Advanced Parameters</a><a class="headerlink" href="#advanced-parameters" title="Permalink to this headline">¶</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>These values are not intended to be changed and should
reflect optimal defaults for the instrument. For more
details please read:
<a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><em>Instrument advanced properties</em></a></p>
<p class="last">This section is mainly intended to act as reference of the
current settings distributed with Mantid</p>
</div>
<p>All values changed in the advanced configuration file
requires the user to restart Mantid for the new values to take effect.
Please read <a class="reference internal" href="ISISPowder-Tutorials.html#instrument-advanced-properties-isis-powder-diffraction-ref"><em>Instrument advanced properties</em></a>
before proceeding to change values within the advanced configuration file.</p>
<div class="section" id="focused-cropping-values">
<span id="focused-cropping-values-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id35">focused_cropping_values</a><a class="headerlink" href="#focused-cropping-values" title="Permalink to this headline">¶</a></h3>
<p>Indicates a list of TOF values to crop the focused workspace
which was created by <a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a>
on a bank by bank basis.</p>
<p>This parameter is a list of bank cropping values with
one list entry per bank. The values <strong>must</strong> have a smaller
TOF window than the <a class="reference internal" href="#vanadium-tof-cropping-pearl-isis-powder-diffraction-ref"><em>vanadium_tof_cropping</em></a></p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><em>long_mode</em></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following TOF windows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Long mode OFF:</span>
      <span class="n">focused_cropping_values</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 1</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 2</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 3</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 4</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 5</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 6</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 7</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 8</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 9</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 10</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 11</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 12</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">),</span>  <span class="c"># Bank 13</span>
      <span class="p">(</span><span class="mi">1500</span><span class="p">,</span> <span class="mi">19900</span><span class="p">)</span>   <span class="c"># Bank 14</span>
    <span class="p">]</span>

<span class="c"># Long mode ON:</span>
      <span class="n">focused_cropping_values</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 1</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 2</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 3</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 4</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 5</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 6</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 7</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 8</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 9</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 10</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 11</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 12</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">),</span>  <span class="c"># Bank 13</span>
      <span class="p">(</span><span class="mi">20300</span><span class="p">,</span> <span class="mi">39990</span><span class="p">)</span>   <span class="c"># Bank 14</span>
    <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="monitor-lambda-crop-range">
<span id="monitor-lambda-crop-range-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id36">monitor_lambda_crop_range</a><a class="headerlink" href="#monitor-lambda-crop-range" title="Permalink to this headline">¶</a></h3>
<p>The range in dSpacing to crop a monitor spectra to when generating a
spline of the current to the target. This is should be stored as a tuple of
both values (lower and upper bound).</p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><em>long_mode</em></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Long mode OFF:</span>
  <span class="n">monitor_lambda_crop_range</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.03</span><span class="p">,</span> <span class="mf">6.00</span><span class="p">)</span>

<span class="c"># Long mode ON:</span>
  <span class="n">monitor_lambda_crop_range</span><span class="p">:</span> <span class="p">(</span><span class="mf">5.9</span><span class="p">,</span> <span class="mf">12.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="monitor-integration-range">
<span id="monitor-integration-range-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id37">monitor_integration_range</a><a class="headerlink" href="#monitor-integration-range" title="Permalink to this headline">¶</a></h3>
<p>The maximum and minimum values for a bin whilst
integrating the monitor spectra.
Any values that fall outside of this range will not be considered.
This should be stored as a tuple of both values (lower and upper bound).
See: <a class="reference internal" href="../algorithms/Integration-v1.html#algm-integration"><em>Integration</em></a> for more details.</p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><em>long_mode</em></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Long mode OFF:</span>
<span class="n">monitor_integration_range</span><span class="p">:</span> <span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)</span>

<span class="c"># Long mode ON:</span>
<span class="n">monitor_integration_range</span><span class="p">:</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="monitor-mask-regions">
<span id="monitor-mask-regions-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id38">monitor_mask_regions</a><a class="headerlink" href="#monitor-mask-regions" title="Permalink to this headline">¶</a></h3>
<p>The masks applied to monitor spectra when normalising a workspace.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">monitor_mask_regions</span><span class="p">:</span> <span class="p">[[</span><span class="mf">3.45</span><span class="p">,</span> <span class="mf">2.96</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span>  <span class="mf">1.73</span><span class="p">],</span>
                       <span class="p">[</span><span class="mf">3.7</span><span class="p">,</span>  <span class="mf">3.2</span><span class="p">,</span>  <span class="mf">2.26</span><span class="p">,</span> <span class="mf">1.98</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="section" id="monitor-spectrum-number">
<span id="monitor-spectrum-number-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id39">monitor_spectrum_number</a><a class="headerlink" href="#monitor-spectrum-number" title="Permalink to this headline">¶</a></h3>
<p>The workspace spectrum number that represents a
monitor which can be used to calculate current.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">monitor_spectrum_number</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</pre></div>
</div>
</div>
<div class="section" id="monitor-spline-coefficient">
<span id="monitor-spline-coefficient-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id40">monitor_spline_coefficient</a><a class="headerlink" href="#monitor-spline-coefficient" title="Permalink to this headline">¶</a></h3>
<p>Determines the spline coefficient to use whilst
processing the monitor spectra to normalise by
current. For more details see:
<a class="reference internal" href="../algorithms/SplineBackground-v1.html#algm-splinebackground"><em>SplineBackground</em></a></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">monitor_spline_coefficient</span><span class="p">:</span> <span class="mi">20</span>
</pre></div>
</div>
</div>
<div class="section" id="raw-data-tof-cropping">
<span id="raw-data-tof-cropping-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id41">raw_data_tof_cropping</a><a class="headerlink" href="#raw-data-tof-cropping" title="Permalink to this headline">¶</a></h3>
<p>Determines the TOF window to crop all spectra down to before any
processing in the <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
and <a class="reference internal" href="#focus-pearl-isis-powder-diffraction-ref"><em>focus</em></a> methods.</p>
<p>This helps remove negative counts where at very low TOF
the empty counts can exceed the captured neutron counts
of the run to process. It also is used
to crop to the correct TOF window depending on the
value of the <a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><em>long_mode</em></a> parameter.</p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><em>long_mode</em></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Long mode OFF:</span>
  <span class="n">raw_data_tof_cropping</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">19995</span><span class="p">)</span>

<span class="c"># Long mode ON:</span>
  <span class="n">raw_data_tof_cropping</span><span class="p">:</span> <span class="p">(</span><span class="mi">20280</span><span class="p">,</span> <span class="mi">39995</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="spline-coefficient">
<span id="spline-coefficient-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id42">spline_coefficient</a><a class="headerlink" href="#spline-coefficient" title="Permalink to this headline">¶</a></h3>
<p>Determines the spline coefficient to use after processing
the vanadium in <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
method. For more details see: <a class="reference internal" href="../algorithms/SplineBackground-v1.html#algm-splinebackground"><em>SplineBackground</em></a></p>
<p><em>Note that if this value is changed &#8216;create_vanadium&#8217;
will need to be called again.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">spline_coefficient</span><span class="p">:</span> <span class="mi">60</span>
</pre></div>
</div>
</div>
<div class="section" id="tt35-grouping-filename">
<span id="tt35-grouping-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id43">tt35_grouping_filename</a><a class="headerlink" href="#tt35-grouping-filename" title="Permalink to this headline">¶</a></h3>
<p>Determines the name of the grouping cal file which is located
within top level of the <a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><em>calibration_directory</em></a>
if <a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><em>tt_mode</em></a> is set to <strong>tt35</strong></p>
<p>The grouping file determines the detector ID to bank mapping to use
whilst focusing the spectra into banks.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tt35_grouping_filename</span><span class="p">:</span> <span class="s">&quot;pearl_group_12_1_TT35.cal&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="tt70-grouping-filename">
<span id="tt70-grouping-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id44">tt70_grouping_filename</a><a class="headerlink" href="#tt70-grouping-filename" title="Permalink to this headline">¶</a></h3>
<p>Determines the name of the grouping cal file which is located
within top level of the <a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><em>calibration_directory</em></a>
if <a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><em>tt_mode</em></a> is set to <strong>tt70</strong></p>
<p>The grouping file determines the detector ID to bank mapping to use
whilst focusing the spectra into banks.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tt70_grouping_filename</span><span class="p">:</span> <span class="s">&quot;pearl_group_12_1_TT70.cal&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="tt88-grouping-filename">
<span id="tt88-grouping-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id45">tt88_grouping_filename</a><a class="headerlink" href="#tt88-grouping-filename" title="Permalink to this headline">¶</a></h3>
<p>Determines the name of the grouping cal file which is located
within top level of the <a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><em>calibration_directory</em></a>
if <a class="reference internal" href="#tt-mode-pearl-isis-powder-diffraction-ref"><em>tt_mode</em></a> is set to <strong>tt88</strong></p>
<p>The grouping file determines the detector ID to bank mapping to use
whilst focusing the spectra into banks.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">tt88_grouping_filename</span><span class="p">:</span> <span class="s">&quot;pearl_group_12_1_TT88.cal&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="vanadium-absorb-filename">
<span id="vanadium-absorb-filename-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id46">vanadium_absorb_filename</a><a class="headerlink" href="#vanadium-absorb-filename" title="Permalink to this headline">¶</a></h3>
<p>Determines the name of the precalculated vanadium absorption
correction values to apply when running
<a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a>.</p>
<p>This file must be located within the top level of the
<a class="reference internal" href="#calibration-directory-pearl-isis-powder-diffraction-ref"><em>calibration_directory</em></a>
directory.</p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">vanadium_absorb_filename</span><span class="p">:</span> <span class="s">&quot;pearl_absorp_sphere_10mm_newinst2_long.nxs&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="vanadium-tof-cropping">
<span id="vanadium-tof-cropping-pearl-isis-powder-diffraction-ref"></span><h3><a class="toc-backref" href="#id47">vanadium_tof_cropping</a><a class="headerlink" href="#vanadium-tof-cropping" title="Permalink to this headline">¶</a></h3>
<p>Determines the TOF window to crop all banks to
within the <a class="reference internal" href="#create-vanadium-pearl-isis-powder-diffraction-ref"><em>create_vanadium</em></a>
method. This is applied after focusing and before a spline is taken.</p>
<p>It is used to remove low counts at the start and end of the vanadium run
to produce a spline which better matches the data.</p>
<p>This parameter is stored as a tuple of both values (lower and upper bound).
The values <strong>must</strong> have a larger TOF window than the
<a class="reference internal" href="#focused-cropping-values-pearl-isis-powder-diffraction-ref"><em>focused_cropping_values</em></a>
and a smaller window than <a class="reference internal" href="#raw-data-tof-cropping-pearl-isis-powder-diffraction-ref"><em>raw_data_tof_cropping</em></a>.</p>
<p><em>Note: The value passed with the</em>
<a class="reference internal" href="#long-mode-pearl-isis-powder-diffraction-ref"><em>long_mode</em></a> <em>parameter
determines the set of values used.</em></p>
<p>On PEARL this is set to the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Long mode OFF:</span>
  <span class="n">vanadium_tof_cropping</span><span class="p">:</span> <span class="p">(</span><span class="mi">1400</span><span class="p">,</span> <span class="mi">19990</span><span class="p">)</span>
<span class="c"># Long mode ON:</span>
  <span class="n">vanadium_tof_cropping</span><span class="p">:</span> <span class="p">(</span><span class="mi">20295</span><span class="p">,</span> <span class="mi">39993</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Category</strong>: <a class="reference external" href="categories/Techniques.html">Techniques</a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ISISPowder-Index-v1.html" title="Previous Chapter: ISIS Powder Diffraction Scripts"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; ISIS Powder Diff...</span>
    </a>
  </li>
  <li>
    <a href="ISISPowder-Polaris-v1.html" title="Next Chapter: ISIS Powder Diffraction Scripts - POLARIS Reference"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ISIS Powder Diff... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>