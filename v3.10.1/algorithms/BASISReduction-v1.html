<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>BASISReduction v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.10.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="BASISReduction311 v1" href="BASISReduction311-v1.html" />
    <link rel="prev" title="AverageLogData v1" href="AverageLogData-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.10</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="basisreduction-v1">
<span id="algm-basisreduction"></span><span id="algm-basisreduction-v1"></span><h1>BASISReduction v1<a class="headerlink" href="#basisreduction-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/BASISReduction-v1_dlg.png"><img alt="../_images/BASISReduction-v1_dlg.png" class="screenshot" src="../_images/BASISReduction-v1_dlg.png" style="width: 249px;" /></a>
<p class="caption"><strong>BASISReduction</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#reflection-selector" id="id4">Reflection Selector</a></li>
<li><a class="reference internal" href="#vanadium-normalization" id="id5">Vanadium Normalization</a></li>
<li><a class="reference internal" href="#dynamic-susceptibility" id="id6">Dynamic Susceptibility</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id7">Usage</a></li>
<li><a class="reference internal" href="#source" id="id8">Source</a></li>
<li><a class="reference internal" href="#workflow" id="id9">Workflow</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Multiple-file BASIS reduction for its two reflections.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="4%" />
<col width="6%" />
<col width="8%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>RunNumbers</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Sample run numbers</td>
</tr>
<tr class="row-odd"><td>DoIndividual</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Do each run individually</td>
</tr>
<tr class="row-even"><td>NoMonitorNorm</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Stop monitor normalization</td>
</tr>
<tr class="row-odd"><td>GroupDetectors</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>Switch for grouping detectors. Allowed values: [&#8216;None&#8217;, &#8216;Low-Resolution&#8217;, &#8216;By-Tube&#8217;]</td>
</tr>
<tr class="row-even"><td>NormalizeToFirst</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Normalize spectra to intensity of spectrum with lowest Q?</td>
</tr>
<tr class="row-odd"><td>ReflectionType</td>
<td>Input</td>
<td>string</td>
<td>silicon111</td>
<td>Analyzer. Documentation lists typical associated property values. Allowed values: [&#8216;silicon111&#8217;, &#8216;silicon311&#8217;]</td>
</tr>
<tr class="row-even"><td>EnergyBins</td>
<td>Input</td>
<td>dbl list</td>
<td>-150,0.4,500</td>
<td>Energy transfer binning scheme (in ueV)</td>
</tr>
<tr class="row-odd"><td>MomentumTransferBins</td>
<td>Input</td>
<td>dbl list</td>
<td>0.3,0.2,1.9</td>
<td>Momentum transfer binning scheme</td>
</tr>
<tr class="row-even"><td>MaskFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>See documentation for latest mask files. Allowed extensions: [&#8216;.xml&#8217;]</td>
</tr>
<tr class="row-odd"><td>DivideByVanadium</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Do we normalize by the vanadium intensity?</td>
</tr>
<tr class="row-even"><td>NormalizationType</td>
<td>Input</td>
<td>string</td>
<td>by Q slice</td>
<td>Select a Vanadium normalization. Allowed values: [&#8216;by Q slice&#8217;, &#8216;by detector ID&#8217;]</td>
</tr>
<tr class="row-odd"><td>NormRunNumbers</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Normalization run numbers</td>
</tr>
<tr class="row-even"><td>NormWavelengthRange</td>
<td>Input</td>
<td>dbl list</td>
<td>6.24,6.3</td>
<td>Wavelength range for normalization</td>
</tr>
<tr class="row-odd"><td>OutputSusceptibility</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Output dynamic susceptibility (Xqw)</td>
</tr>
</tbody>
</table>
<p>For each property, the algorithm will remember the last value used. If user deletes
this value and leaves blank the property field, the default value will be used. Default
values are typical of the silicon111 reflection.</p>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p><strong>Run numbers</strong>:
The syntax for the run numbers designation allows runs to be segregated
into sets. The semicolon symbol &#8221;;&#8221; is used to separate the runs into sets.
Runs within each set are jointly reduced.</p>
<p>Examples:</p>
<ul class="simple">
<li>2144-2147,2149,2156  is a single set. All runs jointly reduced.</li>
<li>2144-2147,2149;2156  is set 2144-2147,2149 and set 2156. The sets are reduced separately from each other.</li>
</ul>
<p>If <em>DoIndividual</em> is checked, then each run number is reduced separately
from the rest. The semicolon symbol is ignored.</p>
<p><strong>Momentum transfer binning scheme</strong>: Three values are required, the
center of the bin with the minimum momentum, the bin width, and the
center of the bin with the maximum momentum.</p>
<p><strong>Rescaling to first spectrum</strong>: Since the Y-scale has arbitrary units, a
rescaling convention is taken whereby the maximum of the
first spectrum (lowest Q-value) is rescaled to 1.0. This rescaling may not
be employed when the intent is to compare to other runs, like can substraction
of comparison between deuterated and hydrogenated samples.</p>
<div class="section" id="reflection-selector">
<h3><a class="toc-backref" href="#id4">Reflection Selector</a><a class="headerlink" href="#reflection-selector" title="Permalink to this headline">¶</a></h3>
<p>Currently two types of reflection are possible, associated with the two analyzers of BASIS.
There are typical values for the properties of each reflection:</p>
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="31%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Reflection</th>
<th class="head"><dl class="first last docutils">
<dt>Energy bins</dt>
<dd>(micro-eV)</dd>
</dl>
</th>
<th class="head"><dl class="first last docutils">
<dt>Momentum transfer bins</dt>
<dd>(inverse Angstroms)</dd>
</dl>
</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>silicon111</td>
<td>-150, 0.4, 500</td>
<td>0.3, 0.2, 1.9</td>
</tr>
<tr class="row-odd"><td>silicon311</td>
<td>-740, 1.6, 740</td>
<td>0.5, 0.2, 3.7</td>
</tr>
</tbody>
</table>
<p>Also the following default mask files are associated to each reflection:</p>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="72%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Reflection</th>
<th class="head">Mask file</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>silicon111</td>
<td>BASIS_Mask_default_111.xml</td>
</tr>
<tr class="row-odd"><td>silicon311</td>
<td>BASIS_Mask_default_311.xml</td>
</tr>
</tbody>
</table>
<p>These mask files can be found in the SNS filesystem
(<strong>/SNS/BSS/shared/autoreduce/new_masks_08_12_2015/</strong>)</p>
</div>
<div class="section" id="vanadium-normalization">
<h3><a class="toc-backref" href="#id5">Vanadium Normalization</a><a class="headerlink" href="#vanadium-normalization" title="Permalink to this headline">¶</a></h3>
<p>The syntax for the vanadium run numbers designation (<strong>NormRunNumbers</strong>) is the same as in
the case of the sample (hyphens and commas are understood) but no
semicolons are allowed. As a result, only one set of vanadium run numbers
is generated, and all runs are jointly reduced into a single vanadium workspace.
Thus, if we had entered three sets of sample run numbers, then three
reduced workspaces will be produced and all will be divided by the same
vanadium workspace.</p>
<p>Normalization type <strong>by Q slice</strong> is the default
normalization. In this case, the sample is reduced into <img class="math" src="../_images/math/79ab23d72cccae53f0cdbee97634427daf02b13d.png" alt="S_{s}(Q,E)" style="vertical-align: -4px"/> and
the vanadium is reduced into <img class="math" src="../_images/math/c8e773c9fb16ee2112ef075f7e08746cdd2f31f6.png" alt="S_{v}(Q,E)" style="vertical-align: -4px"/>. Later, <img class="math" src="../_images/math/c8e773c9fb16ee2112ef075f7e08746cdd2f31f6.png" alt="S_{v}(Q,E)" style="vertical-align: -4px"/> is integrated
along the energy axis in the range [-0.034, 0.034]meV to produce <img class="math" src="../_images/math/10f6ba9b43f529d15069b7f1fefbd0cb309c8276.png" alt="S_{v}(Q)" style="vertical-align: -4px"/>.
Finally the sample is divided by the vanadium, <img class="math" src="../_images/math/5e8d69ac33342cbd03ccdae5342895e2e53b7eca.png" alt="S_{s}(Q,E) / S_{v}(Q)" style="vertical-align: -5px"/>.</p>
<p>Normalization type <strong>by detector ID</strong> carries out the division on each
detector of the instrument. If we have for detector <img class="math" src="../_images/math/4cc7324e0d6c8c591e4d865a21144bda81fd3011.png" alt="i" style="vertical-align: 0px"/> sample <img class="math" src="../_images/math/ba390a56c0989f54158a63ae0e246dbd837eb3de.png" alt="S_s(\lambda, i)" style="vertical-align: -4px"/>
and vanadium <img class="math" src="../_images/math/82ade7827749682a4dfcc2704027eea69a55607f.png" alt="S_v(\lambda, i)" style="vertical-align: -4px"/>, we integrate along the <img class="math" src="../_images/math/412c0294db757d8807fe8fc2975ab586bb9042d8.png" alt="\lambda" style="vertical-align: 0px"/> axis in the
range given by <strong>NormWavelengthRange</strong> to obtain
<img class="math" src="../_images/math/9760301bbd40dfb8aac8e96feb3e6c92a2188879.png" alt="S_v(i)" style="vertical-align: -4px"/> and then divide <img class="math" src="../_images/math/785fa0b419732c9e08985f1e16889cf7977a4c22.png" alt="S_s(\lambda, i)/S_v(i)=S'_s(\lambda, i)" style="vertical-align: -5px"/>. From this
point on, the reduction process continues using <img class="math" src="../_images/math/173d13e6990c75743f9296b138f770d06ef90389.png" alt="S'_s" style="vertical-align: -5px"/> in place of <img class="math" src="../_images/math/da0081d2168b556659ababe2aca9d6916a2aa1bf.png" alt="S_s" style="vertical-align: -3px"/>.</p>
</div>
<div class="section" id="dynamic-susceptibility">
<h3><a class="toc-backref" href="#id6">Dynamic Susceptibility</a><a class="headerlink" href="#dynamic-susceptibility" title="Permalink to this headline">¶</a></h3>
<p>If &lt;i&gt;OutputSusceptibility&lt;/i&gt; is checked, one additional workspace and one Nexus file will be generated,
both containing the dynamic susceptibility as a function of frequency, in units of GHz.
The extension denoting this quantity in the workspace and file names is &#8220;Xqw&#8221;
(the extension for the structure factor is &#8220;sqw&#8221;).</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id7">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Perform a reduction:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">BASISReduction</span><span class="p">(</span><span class="n">RunNumbers</span><span class="o">=</span><span class="s">&quot;59671&quot;</span><span class="p">,</span>
               <span class="n">EnergyBins</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">120</span><span class="p">,</span><span class="mf">0.4</span><span class="p">,</span><span class="mi">120</span><span class="p">],</span>
               <span class="n">MomentumTransferBins</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">1.9</span><span class="p">],</span>
               <span class="n">DivideByVanadium</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
               <span class="n">NormRunNumbers</span><span class="o">=</span><span class="s">&quot;58183&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Inelastic/Reduction.html">Inelastic\Reduction</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id8">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/ff859df4a5faa6fa5e3cecb8f2efeb4c4aa53864/Framework/PythonInterface/plugins/algorithms/BASISReduction.py">BASISReduction.py</a></p>
</div>
<div class="section" id="workflow">
<h2><a class="toc-backref" href="#id9">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/BASISReduction-v1_wkflw.png" src="../_images/BASISReduction-v1_wkflw.png" />
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="AverageLogData-v1.html" title="Previous Chapter: AverageLogData v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; AverageLogData v...</span>
    </a>
  </li>
  <li>
    <a href="BASISReduction311-v1.html" title="Next Chapter: BASISReduction311 v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">BASISReduction31... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>