<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SofQW3 v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="SofQWMoments v1" href="SofQWMoments-v1.html" />
    <link rel="prev" title="SofQW2 v1" href="SofQW2-v1.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="sofqw3-v1">
<span id="algm-sofqw3"></span><span id="algm-sofqw3-v1"></span><h1>SofQW3 v1<a class="headerlink" href="#sofqw3-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/SofQW3-v1_dlg.png"><img alt="../_images/SofQW3-v1_dlg.png" class="screenshot" src="../_images/SofQW3-v1_dlg.png" style="width: 360px;" /></a>
<p class="caption"><strong>SofQW3</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculate the intensity as a function of momentum transfer and energy.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="3%" />
<col width="8%" />
<col width="5%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td>MatrixWorkspace</td>
<td>Mandatory</td>
<td>Reduced data in units of energy transfer DeltaE. The workspace must contain histogram data and have common bins across all spectra.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td>MatrixWorkspace</td>
<td>Mandatory</td>
<td>The name to use for the q-omega workspace.</td>
</tr>
<tr class="row-even"><td>QAxisBinning</td>
<td>Input</td>
<td>dbl list</td>
<td>Mandatory</td>
<td>The bin parameters to use for the q axis (in the format used by the <a class="reference internal" href="Rebin-v1.html#algm-rebin"><em>Rebin v1</em></a> algorithm).</td>
</tr>
<tr class="row-odd"><td>EMode</td>
<td>Input</td>
<td>string</td>
<td>Mandatory</td>
<td>The energy transfer analysis mode (Direct/Indirect)</td>
</tr>
<tr class="row-even"><td>EFixed</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>The value of fixed energy: <img class="math" src="../_images/math/67a0b078f2a23c2a112fa770355a05c391d59569.png" alt="E_i" style="vertical-align: -3px"/> (EMode=Direct) or <img class="math" src="../_images/math/40bfef00f5c4b68f21cd987ae4423b63f9250c9a.png" alt="E_f" style="vertical-align: -6px"/> (EMode=Indirect) (meV). Must be set here if not available in the instrument definition.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Converts a 2D workspace from <a class="reference external" href="http://www.mantidproject.org/Unit_Factory">units</a>
of spectrum number/<strong>energy transfer</strong>
to the intensity as a function of <strong>momentum transfer</strong> <img class="math" src="../_images/math/f59dd7fde255c3f2d4d4d2f0631914aa7604d031.png" alt="Q" style="vertical-align: -4px"/>
and <strong>energy transfer</strong> <img class="math" src="../_images/math/e7f3976c8fc98924a2661d692ffbe4a2f6b7e4d8.png" alt="\Delta E" style="vertical-align: 0px"/>. The rebinning is done as a
weighted sum of overlapping polygons with
fractional area tracking. The result is stored in a new workspace type:
<strong>RebinnedOutput</strong>. The new workspace presents the data as the
fractional counts divided by the fractional area. The biggest
consequence of this method is that in places where there are no counts
and no acceptance (no fractional areas), <strong>nan</strong>-s will result.</p>
<p>The algorithm operates in non-PSD mode by default. This means that all
azimuthal angles and widths are forced to zero. PSD mode will determine
the azimuthal angles and widths from the instrument geometry. This mode
is activated by placing the following named parameter in a Parameter
file: <em>detector-neighbour-offset</em>. The integer value of this parameter
should be the number of pixels that separates two pixels at the same
vertical position in adjacent tubes.</p>
<p>See  <a class="reference internal" href="SofQW-v1.html#algm-sofqw"><em>SofQW v1</em></a> for centerpoint binning  or <a class="reference internal" href="SofQW2-v1.html#algm-sofqw2"><em>SofQW2 v1</em></a>
for simpler and less precise but faster binning strategies.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - simple transformation of inelastic workspace:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># create sample inelastic workspace for MARI instrument containing 1 at all spectra</span>
<span class="n">ws</span><span class="o">=</span><span class="n">CreateSimulationWorkspace</span><span class="p">(</span><span class="n">Instrument</span><span class="o">=</span><span class="s">&#39;MAR&#39;</span><span class="p">,</span><span class="n">BinParams</span><span class="o">=</span><span class="s">&#39;-10,1,10&#39;</span><span class="p">)</span>
<span class="c"># convert workspace into Matrix workspace with Q-dE coordinates</span>
<span class="n">ws</span><span class="o">=</span><span class="n">SofQW3</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span><span class="n">QAxisBinning</span><span class="o">=</span><span class="s">&#39;-3,0.1,3&#39;</span><span class="p">,</span><span class="n">Emode</span><span class="o">=</span><span class="s">&#39;Direct&#39;</span><span class="p">,</span><span class="n">EFixed</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The converted X-Y values are:&quot;</span>
<span class="n">Xrow</span><span class="o">=</span><span class="n">ws</span><span class="o">.</span><span class="n">readX</span><span class="p">(</span><span class="mi">59</span><span class="p">);</span>
<span class="n">Yrow</span><span class="o">=</span><span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">59</span><span class="p">);</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">):</span>
 <span class="k">print</span> <span class="s">&#39;! {0:&gt;6.2f} {1:&gt;6.2f} &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Xrow</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">Yrow</span><span class="p">[</span><span class="n">i</span><span class="p">]),</span>
 <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="mi">10</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
     <span class="k">print</span> <span class="s">&#39;!</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">,</span>
<span class="k">print</span> <span class="s">&#39;! {0:&gt;6.2f} ------- !&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">Xrow</span><span class="p">[</span><span class="mi">20</span><span class="p">]),</span>
</pre></div>
</div>
<p><strong>Output:</strong></p>
<div class="highlight-none"><div class="highlight"><pre>The converted X-Y values are:
! -10.00   1.00  !  -9.00   1.00  !  -8.00   1.00  !  -7.00   1.00  !  -6.00   1.00  !  -5.00   1.00  !  -4.00   1.00  !  -3.00   1.00  !  -2.00   1.00  !  -1.00   1.00  !
!   0.00   1.00  !   1.00   1.00  !   2.00   1.00  !   3.00   1.00  !   4.00   1.00  !   5.00   1.00  !   6.00   1.00  !   7.00   1.00  !   8.00   1.00  !   9.00   1.00  !
!  10.00 ------- !
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Inelastic.html">Inelastic</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Mantid.<br/>
    </p>
  </div>
</footer>
  </body>
</html>