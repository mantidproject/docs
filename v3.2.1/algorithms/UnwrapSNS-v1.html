<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>UnwrapSNS v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.2.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="UpdateInstrumentFromFile v1" href="UpdateInstrumentFromFile-v1.html" />
    <link rel="prev" title="UnwrapMonitor v1" href="UnwrapMonitor-v1.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.2</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="unwrapsns-v1">
<span id="algm-unwrapsns"></span><span id="algm-unwrapsns-v1"></span><h1>UnwrapSNS v1<a class="headerlink" href="#unwrapsns-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/UnwrapSNS-v1_dlg.png"><img alt="../_images/UnwrapSNS-v1_dlg.png" class="screenshot" src="../_images/UnwrapSNS-v1_dlg.png" style="width: 463px;" /></a>
<p class="caption"><strong>UnwrapSNS</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Takes an input workspace that contains &#8216;raw&#8217; data, unwraps the data according to the reference flightpath provided and converts the units to wavelength. The output workspace will have common bins in the maximum theoretical wavelength range.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="3%" />
<col width="6%" />
<col width="4%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td>MatrixWorkspace</td>
<td>Mandatory</td>
<td>Contains numbers counts against time of flight (TOF).</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td>MatrixWorkspace</td>
<td>Mandatory</td>
<td>This workspace will be in the units of time of flight. (See <a class="reference external" href="http://www.mantidproject.org/Units">http://www.mantidproject.org/Units</a>)</td>
</tr>
<tr class="row-even"><td>LRef</td>
<td>Input</td>
<td>number</td>
<td>Mandatory</td>
<td>A distance at which it is possible to deduce if a particle is from the current or a past frame based on its arrival time. This time criterion can be set with the property below e.g. correct when arrival time &lt; Tmin.</td>
</tr>
<tr class="row-odd"><td>Tmin</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>With LRef this defines the maximum speed expected for particles. For each count or time bin the mean particle speed is calculated and if this is greater than LRef/Tmin its TOF is corrected.</td>
</tr>
<tr class="row-even"><td>Tmax</td>
<td>Input</td>
<td>number</td>
<td>Optional</td>
<td>The maximum time of flight of the data used for the width of the frame. If not set the maximum time of flight of the data is used.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Slow moving (low energy and long wavelength neutrons) may be detected
after the end of the frame in which they entered the experimental
apparatus. A schematic example of this is shown below where the neutrons
are marked as circles.</p>
<div class="figure">
<img alt="../_images/UnwrapSNS_inst.png" src="../_images/UnwrapSNS_inst.png" />
</div>
<p>The two neutons on the right of the diagram were actually produced in
frame 1 but will be recorded in frame 2 at low time of flight (TOF) and
a straight <a class="reference internal" href="ConvertUnits-v1.html#algm-convertunits"><em>ConvertUnits v1</em></a> will bin them at high energy
and short wavelength! <a class="reference internal" href="#algm-unwrapsns"><em>UnwrapSNS v1</em></a> moves those particles to
the end of the spectrum by increasing their time of flight by the
duration of a frame multiplied by the number (one or more) of frames
they were &#8220;late&#8221; by.</p>
<p>To assess if it is impossible for a particle to have arrived in the same
frame it was detected a maximum speed for particles is calculated based
on LRef and Tmin. The algorithm then calculates the mean speed of all
detected particles and corrects those whose speed was greater than the
maximum.</p>
<p>Normally LRef is the total length of the flight path from the source
(particle location when t=0) to a detector. For event data, if the
detector with the shortest flight path was chosen it maybe possible to
leave the Tmin empty and so that a first particle arrival time is used.
Otherwise the Tmin should be set to &lt; the arrival time of the fastest
neutron at the given detector.</p>
<p>If Tmin was set either Tmax or DataFrameWidth must be set to ensure the
frame duration calculated correctly. If Tmax was set the frame width is
the difference between Tmax and Tmin. DataFrameWidth overrides this and
the width is the difference between the longest and shortest TOFs in the
data.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example: Unwrap sample data</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="s">&quot;Event&quot;</span><span class="p">,</span><span class="n">NumBanks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">wsOut</span> <span class="o">=</span> <span class="n">UnwrapSNS</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span><span class="n">LRef</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;Input&quot;</span><span class="p">,</span>  <span class="n">ws</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="n">ws</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="k">print</span> <span class="s">&quot;Output&quot;</span><span class="p">,</span>  <span class="n">wsOut</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="n">wsOut</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Input 30.0
Output 0.0
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/CorrectionFunctions.html">CorrectionFunctions</a> | <a class="reference external" href="categories/InstrumentCorrections.html">InstrumentCorrections</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Mantid.<br/>
    </p>
  </div>
</footer>
  </body>
</html>