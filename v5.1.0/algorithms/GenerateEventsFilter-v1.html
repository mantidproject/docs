<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>GenerateEventsFilter v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '5.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="GenerateGroupingPowder v1" href="GenerateGroupingPowder-v1.html" />
    <link rel="prev" title="GeneralisedSecondDifference v1" href="GeneralisedSecondDifference-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>5.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="generateeventsfilter-v1">
<span id="algm-generateeventsfilter"></span><span id="algm-generateeventsfilter-v1"></span><h1>GenerateEventsFilter v1<a class="headerlink" href="#generateeventsfilter-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/GenerateEventsFilter-v1_dlg.png"><img alt="../_images/GenerateEventsFilter-v1_dlg.png" class="screenshot" src="../_images/GenerateEventsFilter-v1_dlg.png" style="width: 332px;" /></a>
<p class="caption"><span class="caption-text"><strong>GenerateEventsFilter</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a><ul>
<li><a class="reference internal" href="#input-workspace" id="id6">Input Workspace</a></li>
<li><a class="reference internal" href="#workspace-to-store-event-splitters" id="id7">Workspace to store event splitters</a></li>
<li><a class="reference internal" href="#functionalities" id="id8">Functionalities</a></li>
<li><a class="reference internal" href="#generate-event-filters-by-time" id="id9">Generate event filters by time</a><ul>
<li><a class="reference internal" href="#unit-of-time" id="id10">Unit of time</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generate-event-filters-by-sample-log-value" id="id11">Generate event filters by sample log value</a><ul>
<li><a class="reference internal" href="#about-how-log-value-is-recorded" id="id12">About how log value is recorded</a></li>
<li><a class="reference internal" href="#comparison-to-filterbylogvalue" id="id13">Comparison to FilterByLogValue</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#algorithm-parameters-and-examples" id="id14">Algorithm Parameters and Examples</a><ul>
<li><a class="reference internal" href="#parameter-centre" id="id15">Parameter: <code class="docutils literal"><span class="pre">Centre</span></code></a></li>
<li><a class="reference internal" href="#parameter-fastlog" id="id16">Parameter: <code class="docutils literal"><span class="pre">FastLog</span></code></a></li>
<li><a class="reference internal" href="#parameter-minimumlogvalue-maximumlogvalue-logvaluetolerance-and-logvalueinterval" id="id17">Parameter: <code class="docutils literal"><span class="pre">MinimumLogValue</span></code>, <code class="docutils literal"><span class="pre">MaximumLogValue</span></code>, <code class="docutils literal"><span class="pre">LogValueTolerance</span></code> and <code class="docutils literal"><span class="pre">LogValueInterval</span></code></a><ul>
<li><a class="reference internal" href="#double-value-log" id="id18">Double value log</a></li>
<li><a class="reference internal" href="#integer-value-log" id="id19">Integer value log</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-filter-by-double-log-value-from-to" id="id20">Example: Filter by double log value from <img class="math" src="../_images/math/db3eb628e295a537525a83809c4b1213e6cc38d7.png" alt="s_0" style="vertical-align: -3px"/> to <img class="math" src="../_images/math/1c01b10e2f375b3cc3a2e901dada532e9d65a695.png" alt="s_f" style="vertical-align: -6px"/></a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id21">Usage</a></li>
<li><a class="reference internal" href="#source" id="id22">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Generate one or a set of event filters according to time or specified log’s value.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>, <a class="reference internal" href="FilterByTime-v1.html#algm-filterbytime"><span class="std std-ref">FilterByTime</span></a>, <a class="reference internal" href="FilterByLogValue-v1.html#algm-filterbylogvalue"><span class="std std-ref">FilterByLogValue</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="2%" />
<col width="10%" />
<col width="3%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>An input Matrix workspace.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></td>
<td><em>Mandatory</em></td>
<td>The name to use for the output SplittersWorkspace object, i.e., the filter.</td>
</tr>
<tr class="row-even"><td>InformationWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Optional output for the information of each splitter workspace index</td>
</tr>
<tr class="row-odd"><td>FastLog</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Fast log will make output workspace to be a matrix workspace.</td>
</tr>
<tr class="row-even"><td>StartTime</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>The start time, such that all events before this time are filtered out. It could be (1) relative time to run start time in unit as specified property ‘UnitOfTime’ or (2) absolute time. Absolute time takes a string in format as 1990-01-01T00:00:00, while the relative time takes integer or float.</td>
</tr>
<tr class="row-odd"><td>StopTime</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>The stop time, such that all events after this time are filtered out. It could be (1) relative time to run start time in unit as specified property ‘UnitOfTime’ or (2) absolute time. Absolute time takes a string in format as 1990-01-01T00:00:00, while the relative time takes integer or float.</td>
</tr>
<tr class="row-even"><td>TimeInterval</td>
<td>Input</td>
<td>dbl list</td>
<td>&#160;</td>
<td>Array for lengths of time intervals for splitters.  If the array is empty, then there will be one splitter created from StartTime and StopTime. If the array has one value, then all splitters will have same time intervals. If the size of the array is larger than one, then the splitters can have various time interval values.</td>
</tr>
<tr class="row-odd"><td>UnitOfTime</td>
<td>Input</td>
<td>string</td>
<td>Seconds</td>
<td>StartTime, StopTime and DeltaTime can be given in various unit.The unit can be ‘Seconds’ or ‘Nanoseconds’ from run start time.They can also be defined as ‘Percentage’ of total run time. Allowed values: [‘Seconds’, ‘Nanoseconds’, ‘Percent’]</td>
</tr>
<tr class="row-even"><td>LogName</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Name of the sample log to use to filter. For example, the pulse charge is recorded in ‘ProtonCharge’.</td>
</tr>
<tr class="row-odd"><td>MinimumLogValue</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Minimum log value for which to keep events.</td>
</tr>
<tr class="row-even"><td>MaximumLogValue</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Maximum log value for which to keep events.</td>
</tr>
<tr class="row-odd"><td>LogValueInterval</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Delta of log value to be sliced into from min log value and max log value. If not given, then only value</td>
</tr>
<tr class="row-even"><td>FilterLogValueByChangingDirection</td>
<td>Input</td>
<td>string</td>
<td>Both</td>
<td>d(log value)/dt can be positive and negative.  They can be put to different splitters.There are 3 options, ‘Both’, ‘Increase’ and ‘Decrease’ corresponding to d(log value)/dt can be any value, positive only and negative only respectively. Allowed values: [‘Both’, ‘Increase’, ‘Decrease’]</td>
</tr>
<tr class="row-odd"><td>TimeTolerance</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Tolerance in time for the event times to keep. It is used in the case to filter by single value.</td>
</tr>
<tr class="row-even"><td>LogBoundary</td>
<td>Input</td>
<td>string</td>
<td>Centre</td>
<td>How to treat log values as being measured in the centre of time. There are three options, ‘Centre’, ‘Left’ and ‘Other’.  Allowed values: [‘Centre’, ‘Left’, ‘Other’]</td>
</tr>
<tr class="row-odd"><td>LogValueTolerance</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Tolerance of the log value to be included in filter.  It is used in the case to filter by multiple values.</td>
</tr>
<tr class="row-even"><td>TitleOfSplitters</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Title of output splitters workspace and information workspace.</td>
</tr>
<tr class="row-odd"><td>UseParallelProcessing</td>
<td>Input</td>
<td>string</td>
<td>Serial</td>
<td>Use multiple cores to generate events filter by log values.  Serial: Use a single core. Good for slow log.  Parallel: Use multiple cores. Appropriate for fast log.  Allowed values: [‘Serial’, ‘Parallel’]</td>
</tr>
<tr class="row-even"><td>NumberOfThreads</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Number of threads forced to use in the parallel mode.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm is able to generate event splitters according to user’s
requirement for filtering events. The generated time splitters are
stored either in a <a class="reference internal" href="../api/python/mantid/api/ISplittersWorkspace.html#splittersworkspace"><span class="std std-ref">Splitters Workspace</span></a> or a
<a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a>. Both of them will be used by
algorithm <a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>
to filter events from an
<a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspace</span></a>.</p>
<p>This algorithm is designed as a general-purposed event splitter
generator. Combined with <a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>,
it will replace</p>
<ul class="simple">
<li><a class="reference internal" href="FilterByTime-v1.html#algm-filterbytime"><span class="std std-ref">FilterByTime</span></a></li>
<li><a class="reference internal" href="FilterByLogValue-v1.html#algm-filterbylogvalue"><span class="std std-ref">FilterByLogValue</span></a></li>
</ul>
<p>Moreover, the time resolution of these two algorithms is microseconds,
i.e., the wall time of an (neutron) event. While the original
<a class="reference internal" href="FilterByTime-v1.html#algm-filterbytime"><span class="std std-ref">FilterByTime</span></a>
and
<a class="reference internal" href="FilterByLogValue-v1.html#algm-filterbylogvalue"><span class="std std-ref">FilterByLogValue</span></a>
are of the resolution of pulse time. It is also enhanced to process the fast
frequency sample logs, which can be even faster than chopper frequencies.</p>
<div class="section" id="input-workspace">
<h3><a class="toc-backref" href="#id6">Input Workspace</a><a class="headerlink" href="#input-workspace" title="Permalink to this headline">¶</a></h3>
<p>This algorithm mainly uses the information retrieved from sample logs to create
event splitters.
Therefore, EventWorkspace is only required if the run end time cannot be determined by sample logs.
For example, proton charge log cannot be found.</p>
</div>
<div class="section" id="workspace-to-store-event-splitters">
<h3><a class="toc-backref" href="#id7">Workspace to store event splitters</a><a class="headerlink" href="#workspace-to-store-event-splitters" title="Permalink to this headline">¶</a></h3>
<p>An event splitter used in Mantid contains start time, stop time and
target workspace. Any data structure that has the above 3 properties can
serve as an event splitter. There are two types of output workspaces for storing
event splitters that are supported by this algorithm.</p>
<ul class="simple">
<li><a class="reference internal" href="../api/python/mantid/api/ISplittersWorkspace.html#splittersworkspace"><span class="std std-ref">Splitters Workspace</span></a>: It is a
<a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a> that has 3 columns for start
time, stop time and target workspace for events within start time and
stop time. This type of workspace is appropriate for the case that
the amount of generated event splitters are not huge;</li>
<li><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a>: It uses X-axis to store time
stamp in total nanoseconds and Y-axis to store target workspace. For
example, x_i, x_i+1 and y_i construct an event filter as start
time is x_i, stop time is x_i+1, and target workspace is y_i-th
workspace. If y_i is less than 0, then it means that all events
between time x_i and x_i+1 will be discarded. This type of
workspace is appropriate for the case that the amount of generated
event splitters are huge, because processing a
<a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a> is way faster than a
<a class="reference internal" href="../concepts/TableWorkspaces.html#table-workspaces"><span class="std std-ref">TableWorkspace</span></a> in Mantid.</li>
</ul>
</div>
<div class="section" id="functionalities">
<span id="functionalities-generateeventfilter-ref"></span><h3><a class="toc-backref" href="#id8">Functionalities</a><a class="headerlink" href="#functionalities" title="Permalink to this headline">¶</a></h3>
<p>Here are the types of event filters (i.e.,
<a class="reference internal" href="../api/python/mantid/api/ISplittersWorkspace.html#splittersworkspace"><span class="std std-ref">Splitters Workspace</span></a>) that can be generated by
this algorithm:</p>
<ul class="simple">
<li>A filter for one time interval.</li>
<li>A series of filters for multiple continuous time intervals, which
have the same length of period. Each of them has an individual
workspace index associated. These workspace indices are incremented
by 1 from 0 along with their orders in time.</li>
<li>A series of filters for multiple continuous time intervals, which
have various lengths of period.
Each of them has an individual workspace index associated.
These workspace indices are incremented by 1 from 0 along with their
order in time.</li>
<li>A filter containing one or multiple time intervals according to a
specified log value. Any log value of the time that falls into the
selected time intervals is equal or within the tolerance of a user
specified value.</li>
<li>A series filters containing one or multiple time intervals according
to specified log values incremented by a constant value. Any log
value of the time that falls into the selected time intervals is
equal or within the tolerance of the log value as v_0 + n x delta_v
+/- tolerance_v.</li>
</ul>
</div>
<div class="section" id="generate-event-filters-by-time">
<span id="filterbytime-generateeventfilter-ref"></span><h3><a class="toc-backref" href="#id9">Generate event filters by time</a><a class="headerlink" href="#generate-event-filters-by-time" title="Permalink to this headline">¶</a></h3>
<p>Event filters can be created by defining start time, stop time and time intervals.
The three input properties for them are <code class="docutils literal"><span class="pre">StartTime</span></code>, <code class="docutils literal"><span class="pre">StopTime</span></code> and <code class="docutils literal"><span class="pre">TimeInterval</span></code>,
respectively.</p>
<p><code class="docutils literal"><span class="pre">TimeInterval</span></code> accepts an array of doubles.
If the array size is zero, then there will be one and only splitter will be
created from <code class="docutils literal"><span class="pre">StartTime</span></code> and <code class="docutils literal"><span class="pre">StopTime</span></code>.
If the size of the array is one, then all event splitters will have the same duration
of time.
In general if the array is composed as <img class="math" src="../_images/math/39e388cbfeb39b7260ed6eeda8926f673e75a298.png" alt="t_1, t_2, \cdots, t_n" style="vertical-align: -4px"/>,
and <img class="math" src="../_images/math/dc42cd3d3068382cc9ef08c41a274d9543aee598.png" alt="T_0" style="vertical-align: -3px"/> is the run start time,
then the event splitters will have the time boundaries as</p>
<div class="math">
<p><img src="../_images/math/881d3b01c904ec395bfc75839b3d84c3c30d5782.png" alt="(T_0, T_0+t_1), (T_0+t_1, T_0+t_1+t_2), \cdots, (T_0+\sum_{i=1}^{n-1}t_i, T_0+\sum_{i=1}^nt_i), (T_0+\sum_{i=1}^nt_i, T_0+\sum_{i=1}^nt_i+t_1), \cdots"/></p>
</div><p>until the stop time is reached.</p>
<div class="section" id="unit-of-time">
<h4><a class="toc-backref" href="#id10">Unit of time</a><a class="headerlink" href="#unit-of-time" title="Permalink to this headline">¶</a></h4>
<p>There are three types of units that are supported for time.
They are second, nanosecond and percentage of duration from <code class="docutils literal"><span class="pre">StartTime</span></code> to <code class="docutils literal"><span class="pre">StopTime</span></code>.</p>
</div>
</div>
<div class="section" id="generate-event-filters-by-sample-log-value">
<span id="filterbylogv-generateeventfilter-ref"></span><h3><a class="toc-backref" href="#id11">Generate event filters by sample log value</a><a class="headerlink" href="#generate-event-filters-by-sample-log-value" title="Permalink to this headline">¶</a></h3>
<p>The sample log will be divided to intervals as <img class="math" src="../_images/math/6d74e8e3b505791480485a640bfa4d857b493d35.png" alt="v_0, v_1, \cdots, v_{i-1}, v_i, v_{i+1}, \cdots" style="vertical-align: -5px"/>.
All log entries, whose values falls into range <img class="math" src="../_images/math/9c44a56f1727b20574e42ea70ae01479ef0db870.png" alt="[v_j, v_{j+1})" style="vertical-align: -6px"/>, will be assigned to
a same workspace group.</p>
<div class="section" id="about-how-log-value-is-recorded">
<h4><a class="toc-backref" href="#id12">About how log value is recorded</a><a class="headerlink" href="#about-how-log-value-is-recorded" title="Permalink to this headline">¶</a></h4>
<p>SNS DAS records log values upon its changing. The frequency of log
sampling is significantly faster than change of the log, i.e., sample
environment devices. Therefore, it is reasonable to assume that all the
log value changes as step functions.</p>
<p>The option to do interpolation is not supported at this moment.</p>
</div>
<div class="section" id="comparison-to-filterbylogvalue">
<h4><a class="toc-backref" href="#id13">Comparison to FilterByLogValue</a><a class="headerlink" href="#comparison-to-filterbylogvalue" title="Permalink to this headline">¶</a></h4>
<p>1. If the first log value is within the specified range and the first
log time is after run star time, FilterByLogValue assumes that the log
value before the first recorded log time is also within range, and thus
the first splitter starts from the run star time, while
<a class="reference internal" href="#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter</span></a>
tends to be more conservative, and thus the first
splitter will start from the first log time.</p>
<p>2. FilterByLogValue only filters events at the resolution of pulse time,
while <a class="reference internal" href="#algm-generateeventsfilter"><span class="std std-ref">GenerateEventsFilter</span></a> can improve the
resolution to 1 microsecond.</p>
</div>
</div>
</div>
<div class="section" id="algorithm-parameters-and-examples">
<h2><a class="toc-backref" href="#id14">Algorithm Parameters and Examples</a><a class="headerlink" href="#algorithm-parameters-and-examples" title="Permalink to this headline">¶</a></h2>
<p>Here are the introductions to some important parameters (i.e., algorithm’s properties).</p>
<div class="section" id="parameter-centre">
<h3><a class="toc-backref" href="#id15">Parameter: <code class="docutils literal"><span class="pre">Centre</span></code></a><a class="headerlink" href="#parameter-centre" title="Permalink to this headline">¶</a></h3>
<p>The input Boolean parameter <code class="docutils literal"><span class="pre">centre</span></code> is for filtering by log value(s).
If option <code class="docutils literal"><span class="pre">centre</span></code> is taken, then for each interval,</p>
<ul class="simple">
<li>starting time = log_time - tolerance_time;</li>
<li>stopping time = log_time - tolerance_time;</li>
</ul>
<p>It is a shift to left.</p>
</div>
<div class="section" id="parameter-fastlog">
<h3><a class="toc-backref" href="#id16">Parameter: <code class="docutils literal"><span class="pre">FastLog</span></code></a><a class="headerlink" href="#parameter-fastlog" title="Permalink to this headline">¶</a></h3>
<p>When <code class="docutils literal"><span class="pre">FastLog</span></code> is set to True, a <a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><span class="std std-ref">MatrixWorkspace</span></a> will be used to store the event
splitters, which is more appropriate for fast changing logs. (see above for details).</p>
</div>
<div class="section" id="parameter-minimumlogvalue-maximumlogvalue-logvaluetolerance-and-logvalueinterval">
<h3><a class="toc-backref" href="#id17">Parameter: <code class="docutils literal"><span class="pre">MinimumLogValue</span></code>, <code class="docutils literal"><span class="pre">MaximumLogValue</span></code>, <code class="docutils literal"><span class="pre">LogValueTolerance</span></code> and <code class="docutils literal"><span class="pre">LogValueInterval</span></code></a><a class="headerlink" href="#parameter-minimumlogvalue-maximumlogvalue-logvaluetolerance-and-logvalueinterval" title="Permalink to this headline">¶</a></h3>
<p>These four parameters are used to determine the log value intervals for
filtering events.</p>
<div class="section" id="double-value-log">
<h4><a class="toc-backref" href="#id18">Double value log</a><a class="headerlink" href="#double-value-log" title="Permalink to this headline">¶</a></h4>
<p>Let user-specified minimum log value to be <img class="math" src="../_images/math/0aceb94c12c481939bb498f87762dafe5142a0d0.png" alt="L_{min}" style="vertical-align: -3px"/>,
LogValueTolerance to be <img class="math" src="../_images/math/1c830742422ece3ed035f2cb703543f1e53245f2.png" alt="t" style="vertical-align: 0px"/>, and LogValueInterval to be <img class="math" src="../_images/math/591b907fa7ee32c200305f45926716d48b014170.png" alt="\delta" style="vertical-align: 0px"/>,
then the log value intervals are</p>
<div class="math">
<p><img src="../_images/math/234a28eba80c859d16a40c41a8b7af039e0eff53.png" alt="[L_{min}-t, L_{min}-tol+\delta), [L_{min}-tol+\delta, L_{min}-tol+2\cdot\delta), \cdots"/></p>
</div><p>The default value of LogValueTolerance is LogValueInterval divided by 2.</p>
</div>
<div class="section" id="integer-value-log">
<h4><a class="toc-backref" href="#id19">Integer value log</a><a class="headerlink" href="#integer-value-log" title="Permalink to this headline">¶</a></h4>
<p>It is a little bit different for sample log recorded with integer.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">MinimumLogValue</span></code> and <code class="docutils literal"><span class="pre">MaximumLogValue</span></code> can be same such that only entries with exactly the same log value
will be considered;</li>
<li>If <code class="docutils literal"><span class="pre">LogValueInterval</span></code> is not give (i.e., default value is used), then any log enetry with log value
larger and equal to <code class="docutils literal"><span class="pre">MinimumLogValue</span></code> and smaller and equal to <code class="docutils literal"><span class="pre">MaximumLogValue</span></code> will be considered.
Be noticed that in the same case for double value log, log entry with value equal to <code class="docutils literal"><span class="pre">MaximumLogValue</span></code>
will be excluded.</li>
</ul>
</div>
</div>
<div class="section" id="example-filter-by-double-log-value-from-to">
<h3><a class="toc-backref" href="#id20">Example: Filter by double log value from <img class="math" src="../_images/math/db3eb628e295a537525a83809c4b1213e6cc38d7.png" alt="s_0" style="vertical-align: -3px"/> to <img class="math" src="../_images/math/1c01b10e2f375b3cc3a2e901dada532e9d65a695.png" alt="s_f" style="vertical-align: -6px"/></a><a class="headerlink" href="#example-filter-by-double-log-value-from-to" title="Permalink to this headline">¶</a></h3>
<p>There are two setup to acquire the same result:</p>
<ul class="simple">
<li>Use single-log-value mode:<ul>
<li>MinimumLogValue = <img class="math" src="../_images/math/db3eb628e295a537525a83809c4b1213e6cc38d7.png" alt="s_0" style="vertical-align: -3px"/></li>
<li>MaximumLogValue = <img class="math" src="../_images/math/1c01b10e2f375b3cc3a2e901dada532e9d65a695.png" alt="s_f" style="vertical-align: -6px"/></li>
<li>LogValueInterval is left to default</li>
</ul>
</li>
<li>Use multiple-log-value mode:<ul>
<li>MinimumLogValue = <img class="math" src="../_images/math/db3eb628e295a537525a83809c4b1213e6cc38d7.png" alt="s_0" style="vertical-align: -3px"/></li>
<li>MaximumLogValue = <img class="math" src="../_images/math/1c01b10e2f375b3cc3a2e901dada532e9d65a695.png" alt="s_f" style="vertical-align: -6px"/></li>
<li>LogValueInterval = <img class="math" src="../_images/math/22eaeb4b2e3401eda240de98f15e85659cb1acf3.png" alt="s_f - s_0" style="vertical-align: -6px"/></li>
<li>LogValueTolerance = 0</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id21">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In Mantid this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - Generate event filter by temperature value</strong></p>
<p>The following is a contrived example to show how one would use the algorithm to split
up an <a class="reference internal" href="../concepts/EventWorkspace.html#eventworkspace"><span class="std std-ref">EventWorkspace</span></a> by a temperature
log. The resulting workspaces would then be fed to
<a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>
for further processing.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s2">&quot;CNCS_7860_event.nxs&quot;</span><span class="p">)</span>
<span class="c1"># The InformationWorkspace name is mandatory</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">InformationWorkspace</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="n">UnitOfTime</span><span class="o">=</span><span class="s2">&quot;Nanoseconds&quot;</span><span class="p">,</span>
                           <span class="n">Logname</span><span class="o">=</span><span class="s2">&quot;SampleTemp&quot;</span><span class="p">,</span> <span class="n">MinimumLogValue</span><span class="o">=</span><span class="mf">279.9</span><span class="p">,</span> <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mf">279.98</span><span class="p">,</span>
                           <span class="n">LogValueInterval</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="c1"># The first workspace is the SplittersWorkspace and the second is the InformationWorkspace</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of workspaces = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ws2</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;First workspace type = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Second workspace type = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of columns in first TableWorkspace = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of rows in first TableWorkspace = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of columns in second TableWorkspace = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of rows in second TableWorkspace = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Number of workspaces = 2
First workspace type = TableWorkspace
Second workspace type = TableWorkspace
Number of columns in first TableWorkspace = 3
Number of rows in first TableWorkspace = 6
Number of columns in second TableWorkspace = 2
Number of rows in second TableWorkspace = 9
</pre></div>
</div>
<p><strong>Example - Generate event filter by temperature value with an empty workspace</strong></p>
<p>The following is a contrived example to show how one would use the algorithm to
generate event splitters from an empty workspace, which has sample logs in run object,
by a temperature log.
The resulting workspaces would then be fed to
<a class="reference internal" href="FilterEvents-v1.html#algm-filterevents"><span class="std std-ref">FilterEvents</span></a>
for further processing.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">DataX</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">DataY</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">NSpec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;ws&#39;</span><span class="p">)</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">LoadNexusLogs</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="s2">&quot;CNCS_7860_event.nxs&quot;</span><span class="p">)</span>
<span class="c1"># The InformationWorkspace name is mandatory</span>
<span class="n">ws2</span> <span class="o">=</span> <span class="n">GenerateEventsFilter</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;ws&#39;</span><span class="p">,</span> <span class="n">InformationWorkspace</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span> <span class="n">UnitOfTime</span><span class="o">=</span><span class="s2">&quot;Nanoseconds&quot;</span><span class="p">,</span>
                           <span class="n">Logname</span><span class="o">=</span><span class="s2">&quot;SampleTemp&quot;</span><span class="p">,</span> <span class="n">MinimumLogValue</span><span class="o">=</span><span class="mf">279.9</span><span class="p">,</span> <span class="n">MaximumLogValue</span><span class="o">=</span><span class="mf">279.98</span><span class="p">,</span>
                           <span class="n">LogValueInterval</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="c1"># The first workspace is the SplittersWorkspace and the second is the InformationWorkspace</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of workspaces = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ws2</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;First workspace type = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Second workspace type = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of columns in first TableWorkspace = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of rows in first TableWorkspace = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of columns in second TableWorkspace = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">columnCount</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Number of rows in second TableWorkspace = </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ws2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">rowCount</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Number of workspaces = 2
First workspace type = TableWorkspace
Second workspace type = TableWorkspace
Number of columns in first TableWorkspace = 3
Number of rows in first TableWorkspace = 6
Number of columns in second TableWorkspace = 2
Number of rows in second TableWorkspace = 9
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Events/EventFiltering.html">Events\EventFiltering</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id22">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4bf80a7e778829043647a0f1f1511c68ec66963d/Framework/Algorithms/inc/MantidAlgorithms/GenerateEventsFilter.h">GenerateEventsFilter.h</a> <em>(last modified: 2020-03-25)</em></p>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/4bf80a7e778829043647a0f1f1511c68ec66963d/Framework/Algorithms/src/GenerateEventsFilter.cpp">GenerateEventsFilter.cpp</a> <em>(last modified: 2020-04-07)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="GeneralisedSecondDifference-v1.html" title="Previous Chapter: GeneralisedSecondDifference v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; GeneralisedSe...</span>
    </a>
  </li>
  <li>
    <a href="GenerateGroupingPowder-v1.html" title="Next Chapter: GenerateGroupingPowder v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">GenerateGroup... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2020-09-29.<br/>
    </p>
  </div>
</footer>
  </body>
</html>