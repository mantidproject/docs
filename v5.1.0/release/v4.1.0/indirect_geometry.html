<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Indirect Geometry Changes</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '5.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MantidPlot Changes" href="mantidplot.html" />
    <link rel="prev" title="Framework Changes" href="framework.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>5.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="indirect-geometry-changes">
<h1>Indirect Geometry Changes<a class="headerlink" href="#indirect-geometry-changes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#instrument-definitions" id="id9">Instrument Definitions</a></li>
<li><a class="reference internal" href="#algorithms" id="id10">Algorithms</a><ul>
<li><a class="reference internal" href="#improvements" id="id11">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-analysis-interface" id="id12">Data Analysis Interface</a><ul>
<li><a class="reference internal" href="#id1" id="id13">Improvements</a></li>
<li><a class="reference internal" href="#bug-fixes" id="id14">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-corrections-interface" id="id15">Data Corrections Interface</a><ul>
<li><a class="reference internal" href="#id2" id="id16">Improvements</a></li>
<li><a class="reference internal" href="#id3" id="id17">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-reduction-interface" id="id18">Data Reduction Interface</a><ul>
<li><a class="reference internal" href="#id4" id="id19">Improvements</a></li>
<li><a class="reference internal" href="#id5" id="id20">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#diffraction-interface" id="id21">Diffraction Interface</a><ul>
<li><a class="reference internal" href="#id6" id="id22">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indirect-settings-interface" id="id23">Indirect Settings Interface</a><ul>
<li><a class="reference internal" href="#new-features" id="id24">New Features</a></li>
</ul>
</li>
<li><a class="reference internal" href="#simulations-interface" id="id25">Simulations Interface</a><ul>
<li><a class="reference internal" href="#id7" id="id26">Bug Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#the-workbench" id="id27">The Workbench</a></li>
<li><a class="reference internal" href="#tools-interface" id="id28">Tools Interface</a><ul>
<li><a class="reference internal" href="#id8" id="id29">Improvements</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="instrument-definitions">
<h2><a class="toc-backref" href="#id9">Instrument Definitions</a><a class="headerlink" href="#instrument-definitions" title="Permalink to this headline">¶</a></h2>
<p>The IDF of IN16B has been rewritten to properly model the neutronic positions of the pixels as reflections with respect to spherical analysers.
This is needed for the new inverted time-of-flight mode (BATS), but also improves the model for the standard doppler mode.
Particularly, this will allow us to calculate correct absorption corrections before grouping the pixels tube by tube.
With the new IDF, the flight-paths inside the sample will properly take into account the off-plane angle, which was not the case with the previous IDF.
This change has a retroactive effect, but for reductions where the detectors were grouped, it should not produce different results.</p>
<div class="figure align-left">
<a class="reference internal image-reference" href="../../_images/IN16B-R.png"><img alt="../../_images/IN16B-R.png" src="../../_images/IN16B-R.png" style="width: 376.81px; height: 319.48px;" /></a>
</div>
<div class="figure align-right">
<a class="reference internal image-reference" href="../../_images/IN16B-N.png"><img alt="../../_images/IN16B-N.png" src="../../_images/IN16B-N.png" style="width: 387.0px; height: 316.5px;" /></a>
</div>
</div>
<div class="section" id="algorithms">
<h2><a class="toc-backref" href="#id10">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this headline">¶</a></h2>
<div class="section" id="improvements">
<h3><a class="toc-backref" href="#id11">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/IndirectILLEnergyTransfer-v1.html#algm-indirectillenergytransfer"><span class="std std-ref">IndirectILLEnergyTransfer</span></a> is extended to support reduction for the new inverted TOF option (BATS) of IN16B.</li>
<li><a class="reference internal" href="../../algorithms/ModeratorTzeroLinear-v1.html#algm-moderatortzerolinear"><span class="std std-ref">ModeratorTzeroLinear</span></a> now permits the passing of parameter values as input properties.</li>
<li><a class="reference internal" href="../../algorithms/BASISPowderDiffraction-v1.html#algm-basispowderdiffraction"><span class="std std-ref">BASISPowderDiffraction</span></a> resolves between the run with old and new DAS.</li>
<li><a class="reference internal" href="../../algorithms/BASISPowderDiffraction-v1.html#algm-basispowderdiffraction"><span class="std std-ref">BASISPowderDiffraction</span></a> now permits flux normalization by proton charge and run duration.</li>
<li><a class="reference internal" href="../../algorithms/BASISReduction-v1.html#algm-basisreduction"><span class="std std-ref">BASISReduction</span></a> now permits flux normalization by proton charge and run duration.</li>
<li><a class="reference internal" href="../../algorithms/BASISReduction-v1.html#algm-basisreduction"><span class="std std-ref">BASISReduction</span></a> now permits retaining events only within a time window.</li>
<li><a class="reference internal" href="../../algorithms/BASISReduction-v1.html#algm-basisreduction"><span class="std std-ref">BASISReduction</span></a> can output the powder diffraction spectra.</li>
<li><a class="reference internal" href="../../algorithms/BASISCrystalDiffraction-v1.html#algm-basiscrystaldiffraction"><span class="std std-ref">BASISCrystalDiffraction</span></a> resolves between the run with old and new DAS.</li>
<li><a class="reference internal" href="../../algorithms/Abins-v1.html#algm-abins"><span class="std std-ref">Abins</span></a> permits individually numbered atom contributions to simulated INS spectrum to be specified, alongside the existing option to select by element.</li>
</ul>
</div>
</div>
<div class="section" id="data-analysis-interface">
<h2><a class="toc-backref" href="#id12">Data Analysis Interface</a><a class="headerlink" href="#data-analysis-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id13">Improvements</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Improved the output options of MSD Fit, Iqt Fit, Conv Fit and F(Q)Fit so that Chi_squared can now be plotted.</li>
<li>Improved the I(Q, t) tab by adding more validation checks for the input data.</li>
<li>Improved the Fit and Difference plots in MSD Fit, Iqt Fit, Conv Fit and F(Q)Fit. It is now possible to adjust their
relative sizes by dragging a ‘handle’ between the plots.</li>
<li>Improved the I(Q, t) tab by allowing an asymmetric energy range by unticking ‘Symmetric Energy Range’.</li>
<li>Improved the I(Q, t) tab by adding the ability to change the plotted spectrum using the ‘Spectrum’ spin box.</li>
</ul>
</div>
<div class="section" id="bug-fixes">
<h3><a class="toc-backref" href="#id14">Bug Fixes</a><a class="headerlink" href="#bug-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed an error caused by loading a Sample into ConvFit which does not have a resolution parameter for the analyser.</li>
<li>Fixed a crash caused by changing the Preview Spectrum on Elwin after clicking Run.</li>
<li>Fixed a bug where the loaded workspace in Data Analysis doesn’t update after being changed on a different
interface.</li>
<li>Fixed a bug with the StartX and EndX selectors seen on the Preview Plots.</li>
<li>Fixed a bug causing the errors calculated on Iqt to be too small towards the end of the spectra.</li>
</ul>
<div class="figure align-center" style="width: 90%">
<img alt="The bug causing small Iqt errors." class="screenshot" src="../../_images/Iqt_Errors_Bug.PNG" />
</div>
</div>
</div>
<div class="section" id="data-corrections-interface">
<h2><a class="toc-backref" href="#id15">Data Corrections Interface</a><a class="headerlink" href="#data-corrections-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id16">Improvements</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Improved the setting of sample and container neutron information by allowing the entry of cross sections as an
alternative to a chemical formula. The cross sections can be entered in the Calculate Paalman Pings tab and
Calculate Monte Carlo Absorption tab. This uses the <a class="reference internal" href="../../algorithms/SetSampleMaterial-v1.html#algm-setsamplematerial"><span class="std std-ref">SetSampleMaterial</span></a> algorithm.</li>
</ul>
</div>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id17">Bug Fixes</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed a bug where the output plots on the Calculate Paalman Pings and Calculate Monte Carlo Absorption tabs had
the wrong axis labels and units.</li>
<li>Fixed a bug where Calculate Paalman Pings would crash if an EFixed value had not been provided.</li>
<li>Fixed a bug where Apply Aborption Corrections would crash when provided an invalid corrections workspace.</li>
</ul>
</div>
</div>
<div class="section" id="data-reduction-interface">
<h2><a class="toc-backref" href="#id18">Data Reduction Interface</a><a class="headerlink" href="#data-reduction-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id19">Improvements</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added an option called <em>Group Output</em> to group the output files from a reduction on ISISEnergyTransfer.</li>
<li>Improved ISISEnergyTransfer by automatically loading the Detailed Balance from the sample logs if available.</li>
<li>Removed the obsolete <em>Plot Raw</em> button in ISIS Calibration.</li>
<li>Improved the validation checks for input data on all tabs.</li>
<li>Improved performance of starting up the interface, by optimising the loading of parameter files.</li>
</ul>
</div>
<div class="section" id="id5">
<h3><a class="toc-backref" href="#id20">Bug Fixes</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed a bug in the <a class="reference internal" href="../../algorithms/Integration-v1.html#algm-integration"><span class="std std-ref">Integration</span></a> algorithm causing the Moments tab to crash.</li>
<li>Fixed an unexpected error when opening the Data Reduction interface with an unrelated facility selected.</li>
<li>Fixed a crash on the Symmetrise, Sqw and Moments tab caused by attempting to load raw data.</li>
<li>Fixed a crash on attempting to plot a loaded file before running the reduction.</li>
</ul>
</div>
</div>
<div class="section" id="diffraction-interface">
<h2><a class="toc-backref" href="#id21">Diffraction Interface</a><a class="headerlink" href="#diffraction-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id6">
<h3><a class="toc-backref" href="#id22">Bug Fixes</a><a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed a bug which allowed an out-of-range Spectra Min and Spectra Max.</li>
</ul>
</div>
</div>
<div class="section" id="indirect-settings-interface">
<h2><a class="toc-backref" href="#id23">Indirect Settings Interface</a><a class="headerlink" href="#indirect-settings-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-features">
<h3><a class="toc-backref" href="#id24">New Features</a><a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>A <a class="reference internal" href="../../interfaces/Indirect Settings.html#interface-indirect-settings"><span class="std std-ref">Settings</span></a> GUI is now available and can be opened using the button
next to the help <em>?</em> button on the bottom left of the interfaces. It can also be opened from the Indirect
interfaces menu.</li>
</ul>
<div class="figure align-center" style="width: 90%">
<img alt="The Indirect settings GUI." class="screenshot" src="../../_images/Indirect_Settings.png" />
</div>
<ul class="simple">
<li>The <em>Settings</em> GUI allows you to turn off the restriction of input data based on their name.</li>
<li>The <em>Settings</em> GUI allows you to turn on error bars for the output plots.</li>
</ul>
</div>
</div>
<div class="section" id="simulations-interface">
<h2><a class="toc-backref" href="#id25">Simulations Interface</a><a class="headerlink" href="#simulations-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id7">
<h3><a class="toc-backref" href="#id26">Bug Fixes</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed a crash in MolDyn when plotting output data.</li>
</ul>
</div>
</div>
<div class="section" id="the-workbench">
<h2><a class="toc-backref" href="#id27">The Workbench</a><a class="headerlink" href="#the-workbench" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>The Indirect Corrections GUI has been added to the Workbench.</li>
<li>The Indirect Data Reduction GUI has been added to the Workbench.</li>
<li>The Indirect Diffraction GUI has been added to the Workbench.</li>
<li>The Indirect Simulations GUI has been added to the Workbench.</li>
<li>The Indirect Tools GUI has been added to the Workbench.</li>
</ul>
<div class="figure align-center" style="width: 90%">
<img alt="The Indirect Data Reduction GUI in the Workbench." class="screenshot" src="../../_images/Indirect_Data_Reduction_Sqw.png" />
</div>
</div>
<div class="section" id="tools-interface">
<h2><a class="toc-backref" href="#id28">Tools Interface</a><a class="headerlink" href="#tools-interface" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id8">
<h3><a class="toc-backref" href="#id29">Improvements</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a verification for the chemical formula input on the Transmission tab.</li>
</ul>
<p><a class="reference internal" href="index.html#v4-1-0"><span class="std std-ref">Release 4.1.0</span></a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="framework.html" title="Previous Chapter: Framework Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Framework Changes</span>
    </a>
  </li>
  <li>
    <a href="mantidplot.html" title="Next Chapter: MantidPlot Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">MantidPlot Changes &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2020-09-29.<br/>
    </p>
  </div>
</footer>
  </body>
</html>