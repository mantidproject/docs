<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ConvertAxisByFormula v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="ConvertCWPDMDToSpectra v1" href="ConvertCWPDMDToSpectra-v1.html" />
    <link rel="prev" title="ConvertAxesToRealSpace v1" href="ConvertAxesToRealSpace-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="convertaxisbyformula-v1">
<span id="algm-convertaxisbyformula"></span><span id="algm-convertaxisbyformula-v1"></span><h1>ConvertAxisByFormula v1<a class="headerlink" href="#convertaxisbyformula-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/ConvertAxisByFormula-v1_dlg.png"><img alt="../_images/ConvertAxisByFormula-v1_dlg.png" class="screenshot" src="../_images/ConvertAxisByFormula-v1_dlg.png" style="width: 308px;" /></a>
<p class="caption"><strong>ConvertAxisByFormula</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Converts the X or Y axis of a MatrixWorkspace via a user defined math formula.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="4%" />
<col width="25%" />
<col width="7%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Name of the input workspace</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Name of the output workspace</td>
</tr>
<tr class="row-even"><td>Axis</td>
<td>Input</td>
<td>string</td>
<td>X</td>
<td>The axis to modify. Allowed values: [&#8216;X&#8217;, &#8216;Y&#8217;]</td>
</tr>
<tr class="row-odd"><td>Formula</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The formula to use to convert the values, x or y may be used to refer to the axis values</td>
</tr>
<tr class="row-even"><td>AxisTitle</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The label of he new axis. If not set then the title will not change.</td>
</tr>
<tr class="row-odd"><td>AxisUnits</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The units of the new axis. If not set then the unit will not change</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm allows users to adjust the axes of a workspace by a user
defined math formula. It will NOT adjust or rearrange the data values
(other than in one case the X values) of a workspace. Therefore
alterations that will rearrange the order of the axes are not
recommended. This only works for MatrixWorkspaces, so will not work on
Multi Dimensional Workspaces or Table Workspaces. Like the
<a class="reference internal" href="ConvertSpectrumAxis-v2.html#algm-convertspectrumaxis"><em>ConvertSpectrumAxis v2</em></a> algorithm the result of
this algorithm will have custom units defined for the axis you have
altered, and as such may not work in all other algorithms.</p>
<p>The algorithm can operate on the X or Y axis, but cannot alter the
values of a spectrum axis (the axis used as the Y axis on newly loaded
Raw data). If you wish to alter this axis use the
<a class="reference internal" href="ConvertSpectrumAxis-v2.html#algm-convertspectrumaxis"><em>ConvertSpectrumAxis v2</em></a> algorithm first.</p>
<p>The formula is defined in a simple math syntax. For example:</p>
<ul class="simple">
<li>Squaring - <em>x^2</em></li>
<li>Square root - <em>sqrt(x)</em></li>
<li>Cubing - <em>x^3</em></li>
<li>Basic addition - <em>y + 3</em></li>
<li>Brackets - <em>(y+1)/20</em></li>
<li>Natural Log - <em>ln(x)</em></li>
<li>Log 10 - <em>log(x)</em></li>
<li>Exponent - <em>exp(y)</em></li>
<li>Round to nearest integer - <em>rint(y/10)</em></li>
<li>Absolute value - <em>abs(y-100)</em></li>
</ul>
<p><em>x</em> and <em>y</em> can be used interchangeably to refer to the current axis value.</p>
<p>Refer to the
<a class="reference external" href="http://muparser.beltoforion.de/mup_features.html#idDef2">muparser page</a>
for a full list of the functions available.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Squaring the X axis:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create sample input workspace</span>
<span class="n">dataX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">dataY</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">input</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">dataX</span><span class="p">,</span> <span class="n">dataY</span><span class="p">)</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">ConvertAxisByFormula</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span>
                              <span class="n">Axis</span><span class="o">=</span><span class="s">&quot;X&quot;</span><span class="p">,</span>
                              <span class="n">Formula</span><span class="o">=</span><span class="s">&quot;x^2&quot;</span><span class="p">,</span>
                              <span class="n">AxisTitle</span><span class="o">=</span><span class="s">&quot;Squared X&quot;</span><span class="p">,</span>
                              <span class="n">AxisUnits</span><span class="o">=</span><span class="s">&quot;x^2&quot;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;New X values:&quot;</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">extractValues</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;New X units:&quot;</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span><span class="o">.</span><span class="n">symbol</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;New X title:&quot;</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span><span class="o">.</span><span class="n">caption</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>New X values: [  1.   4.   9.  16.  25.]
New X units: x^2
New X title: Squared X
</pre></div>
</div>
<p><strong>Example - Doubling the Y axis:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">mantid.api</span> <span class="kn">import</span> <span class="n">NumericAxis</span>

<span class="c"># Create sample input workspace (with 5 spectra)</span>
<span class="n">dataX</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
<span class="n">dataY</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">input</span> <span class="o">=</span> <span class="n">CreateWorkspace</span><span class="p">(</span><span class="n">dataX</span><span class="p">,</span> <span class="n">dataY</span><span class="p">,</span> <span class="n">NSpec</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="c"># Create numeric Y axis with values [1..5]</span>
<span class="n">yAxis</span> <span class="o">=</span> <span class="n">NumericAxis</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span>
  <span class="n">yAxis</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># Replace Y axis in the input workspace. This is necessary because CreateWorkspace</span>
<span class="c"># uses TextAxis by default, which are not suitable for conversion.</span>
<span class="nb">input</span><span class="o">.</span><span class="n">replaceAxis</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">yAxis</span><span class="p">)</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">ConvertAxisByFormula</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="nb">input</span><span class="p">,</span>
                              <span class="n">Axis</span><span class="o">=</span><span class="s">&quot;Y&quot;</span><span class="p">,</span>
                              <span class="n">Formula</span><span class="o">=</span><span class="s">&quot;y*2&quot;</span><span class="p">,</span>
                              <span class="n">AxisTitle</span><span class="o">=</span><span class="s">&quot;Doubled Y&quot;</span><span class="p">,</span>
                              <span class="n">AxisUnits</span><span class="o">=</span><span class="s">&quot;y*2&quot;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;New Y values:&quot;</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">extractValues</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;New Y units:&quot;</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span><span class="o">.</span><span class="n">symbol</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;New Y title:&quot;</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span><span class="o">.</span><span class="n">caption</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>New Y values: [  2.   4.   6.   8.  10.]
New Y units: y*2
New Y title: Doubled Y
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Transforms/Axes.html">Transforms\Axes</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/939e6b7103a9dafe3e7e23581d47d06fd4669ecd/Framework/Algorithms/src/ConvertAxisByFormula.cpp">ConvertAxisByFormula.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/939e6b7103a9dafe3e7e23581d47d06fd4669ecd/Framework/Algorithms/inc/MantidAlgorithms/ConvertAxisByFormula.h">ConvertAxisByFormula.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ConvertAxesToRealSpace-v1.html" title="Previous Chapter: ConvertAxesToRealSpace v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; ConvertAxesToRea...</span>
    </a>
  </li>
  <li>
    <a href="ConvertCWPDMDToSpectra-v1.html" title="Next Chapter: ConvertCWPDMDToSpectra v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">ConvertCWPDMDToS... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>