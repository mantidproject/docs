<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>DgsReduction v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="DgsRemap v1" href="DgsRemap-v1.html" />
    <link rel="prev" title="DgsProcessDetectorVanadium v1" href="DgsProcessDetectorVanadium-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="dgsreduction-v1">
<span id="algm-dgsreduction"></span><span id="algm-dgsreduction-v1"></span><h1>DgsReduction v1<a class="headerlink" href="#dgsreduction-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/DgsReduction-v1_dlg.png"><img alt="../_images/DgsReduction-v1_dlg.png" class="screenshot" src="../_images/DgsReduction-v1_dlg.png" style="width: 318px;" /></a>
<p class="caption"><strong>DgsReduction</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#workflow" id="id4">Workflow</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Top-level workflow algorithm for DGS reduction.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="3%" />
<col width="17%" />
<col width="5%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SampleInputFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>File containing the sample data to reduce. Allowed extensions: [&#8216;_event.nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>SampleInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Workspace to be reduced</td>
</tr>
<tr class="row-even"><td>SampleInputMonitorWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>A monitor workspace associated with the input sample workspace.</td>
</tr>
<tr class="row-odd"><td>DetCalFilename</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>A detector calibration file.</td>
</tr>
<tr class="row-even"><td>RelocateDetectors</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Move detectors to position specified in cal file.</td>
</tr>
<tr class="row-odd"><td>IncidentEnergyGuess</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Set the value of the incident energy guess in meV.</td>
</tr>
<tr class="row-even"><td>UseIncidentEnergyGuess</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Use the incident energy guess as the actual value (will not be calculated).</td>
</tr>
<tr class="row-odd"><td>TimeZeroGuess</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Set the value of time zero offset in microseconds.</td>
</tr>
<tr class="row-even"><td>Monitor1SpecId</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Spectrum ID for the first monitor to use in Ei calculation.</td>
</tr>
<tr class="row-odd"><td>Monitor2SpecId</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Spectrum ID for the second monitor to use in Ei calculation.</td>
</tr>
<tr class="row-even"><td>EnergyTransferRange</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>A comma separated list of first bin boundary, width, last bin boundary. Negative width value indicates logarithmic binning.</td>
</tr>
<tr class="row-odd"><td>SofPhiEIsDistribution</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>The final S(Phi, E) data is made to be a distribution.</td>
</tr>
<tr class="row-even"><td>HardMaskFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>A file or workspace containing a hard mask. Allowed extensions: [&#8216;.xml&#8217;]</td>
</tr>
<tr class="row-odd"><td>GroupingFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>A file containing grouping (mapping) information. Allowed extensions: [&#8216;.xml&#8217;]</td>
</tr>
<tr class="row-even"><td>ShowIntermediateWorkspaces</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Flag to show the intermediate workspaces (diagnostic mask, integrated detector vanadium, integrated absolute units) from the reduction.</td>
</tr>
<tr class="row-odd"><td>IncidentBeamNormalisation</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>Options for incident beam normalisation on data. Allowed values: [&#8216;None&#8217;, &#8216;ByCurrent&#8217;, &#8216;ToMonitor&#8217;]</td>
</tr>
<tr class="row-even"><td>MonitorIntRangeLow</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Set the lower bound for monitor integration.</td>
</tr>
<tr class="row-odd"><td>MonitorIntRangeHigh</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Set the upper bound for monitor integration.</td>
</tr>
<tr class="row-even"><td>TimeIndepBackgroundSub</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, time-independent background will be calculated and removed.</td>
</tr>
<tr class="row-odd"><td>TibTofRangeStart</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Set the lower TOF bound for time-independent background subtraction.</td>
</tr>
<tr class="row-even"><td>TibTofRangeEnd</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Set the upper TOF bound for time-independent background subtraction.</td>
</tr>
<tr class="row-odd"><td>CorrectKiKf</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Apply the ki/kf correction.</td>
</tr>
<tr class="row-even"><td>DetectorVanadiumInputFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>File containing the sample detector vanadium data to reduce. Allowed extensions: [&#8216;_event.nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>DetectorVanadiumInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Sample detector vanadium workspace to be reduced</td>
</tr>
<tr class="row-even"><td>DetectorVanadiumInputMonitorWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>A monitor workspace associated with the input sample detector vanadium workspace.</td>
</tr>
<tr class="row-odd"><td>SaveProcessedDetVan</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Save the processed detector vanadium workspace</td>
</tr>
<tr class="row-even"><td>SaveProcDetVanFilename</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Provide a filename for saving the processed detector vanadium. Allowed extensions: [&#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-odd"><td>UseProcessedDetVan</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, treat the detector vanadium as processed. This includes not running diagnostics on the processed data.</td>
</tr>
<tr class="row-even"><td>UseBoundsForDetVan</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, integrate the detector vanadium over a given range.</td>
</tr>
<tr class="row-odd"><td>DetVanIntRangeLow</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Set the lower bound for integrating the detector vanadium.</td>
</tr>
<tr class="row-even"><td>DetVanIntRangeHigh</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Set the upper bound for integrating the detector vanadium.</td>
</tr>
<tr class="row-odd"><td>DetVanIntRangeUnits</td>
<td>Input</td>
<td>string</td>
<td>Energy</td>
<td>Options for the units on the detector vanadium integration. Allowed values: [&#8216;Energy&#8217;, &#8216;Wavelength&#8217;, &#8216;TOF&#8217;]</td>
</tr>
<tr class="row-even"><td>HighCounts</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mask detectors above this threshold.</td>
</tr>
<tr class="row-odd"><td>LowCounts</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mask detectors below this threshold.</td>
</tr>
<tr class="row-even"><td>LowOutlier</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Lower bound defining outliers as fraction of median value</td>
</tr>
<tr class="row-odd"><td>HighOutlier</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Upper bound defining outliers as fraction of median value</td>
</tr>
<tr class="row-even"><td>MedianTestHigh</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mask detectors above this threshold.</td>
</tr>
<tr class="row-odd"><td>MedianTestLow</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mask detectors below this threshold.</td>
</tr>
<tr class="row-even"><td>MedianTestLevelsUp</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>Mask detectors below this threshold.</td>
</tr>
<tr class="row-odd"><td>MedianTestCorrectForSolidAngle</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Flag to correct for solid angle efficiency.</td>
</tr>
<tr class="row-even"><td>ErrorBarCriterion</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Some selection criteria for the detector tests.</td>
</tr>
<tr class="row-odd"><td>DetectorVanadium2InputFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>File containing detector vanadium data to compare against. Allowed extensions: [&#8216;_event.nxs&#8217;]</td>
</tr>
<tr class="row-even"><td>DetectorVanadium2InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Detector vanadium workspace to compare against</td>
</tr>
<tr class="row-odd"><td>DetectorVanadium2InputMonitorWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>A monitor workspace associated with the input comparison detector vanadium workspace.</td>
</tr>
<tr class="row-even"><td>DetVanRatioVariation</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mask detectors if the time variation is above this threshold.</td>
</tr>
<tr class="row-odd"><td>BackgroundCheck</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, run a background check on detector vanadium.</td>
</tr>
<tr class="row-even"><td>SamBkgMedianTestHigh</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mask detectors above this threshold.</td>
</tr>
<tr class="row-odd"><td>SamBkgMedianTestLow</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mask detectors below this threshold.</td>
</tr>
<tr class="row-even"><td>SamBkgErrorBarCriterion</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Some selection criteria for the detector tests.</td>
</tr>
<tr class="row-odd"><td>BackgroundTofStart</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Start TOF for the background check.</td>
</tr>
<tr class="row-even"><td>BackgroundTofEnd</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>End TOF for the background check.</td>
</tr>
<tr class="row-odd"><td>RejectZeroBackground</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, check the background region for anomolies.</td>
</tr>
<tr class="row-even"><td>PsdBleed</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, perform a PSD bleed test.</td>
</tr>
<tr class="row-odd"><td>MaxFramerate</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The maximum framerate to check.</td>
</tr>
<tr class="row-even"><td>IgnoredPixels</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>A list of pixels to ignore in the calculations.</td>
</tr>
<tr class="row-odd"><td>DoAbsoluteUnits</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true, perform an absolute units normalisation.</td>
</tr>
<tr class="row-even"><td>AbsUnitsSampleInputFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The sample (vanadium) file used in the absolute units normalisation.</td>
</tr>
<tr class="row-odd"><td>AbsUnitsSampleInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The sample (vanadium) workspace for absolute units normalisation.</td>
</tr>
<tr class="row-even"><td>AbsUnitsSampleInputMonitorWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>A monitor workspace associated with the input absolute units sample workspace.</td>
</tr>
<tr class="row-odd"><td>AbsUnitsGroupingFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Grouping file for absolute units normalisation.</td>
</tr>
<tr class="row-even"><td>AbsUnitsDetectorVanadiumInputFile</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>The detector vanadium file used in the absolute units normalisation.</td>
</tr>
<tr class="row-odd"><td>AbsUnitsDetectorVanadiumInputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>The detector vanadium workspace for absolute units normalisation.</td>
</tr>
<tr class="row-even"><td>AbsUnitsDetectorVanadiumInputMonitorWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>A monitor workspace associated with the input absolute units sample detector vanadium workspace.</td>
</tr>
<tr class="row-odd"><td>AbsUnitsIncidentEnergy</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The incident energy for the vanadium sample.</td>
</tr>
<tr class="row-even"><td>AbsUnitsMinimumEnergy</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The minimum energy for the integration range.</td>
</tr>
<tr class="row-odd"><td>AbsUnitsMaximumEnergy</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The maximum energy for the integration range.</td>
</tr>
<tr class="row-even"><td>VanadiumMass</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>The mass of vanadium.</td>
</tr>
<tr class="row-odd"><td>SampleMass</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The mass of sample.</td>
</tr>
<tr class="row-even"><td>SampleRmm</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The rmm of sample.</td>
</tr>
<tr class="row-odd"><td>AbsUnitsLowOutlier</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Lower bound defining outliers as fraction of median value</td>
</tr>
<tr class="row-even"><td>AbsUnitsHighOutlier</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Upper bound defining outliers as fraction of median value</td>
</tr>
<tr class="row-odd"><td>AbsUnitsMedianTestHigh</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mask detectors above this threshold.</td>
</tr>
<tr class="row-even"><td>AbsUnitsMedianTestLow</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Mask detectors below this threshold.</td>
</tr>
<tr class="row-odd"><td>AbsUnitsErrorBarCriterion</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Some selection criteria for the detector tests.</td>
</tr>
<tr class="row-even"><td>DoPowderDataConversion</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Flag to switch on converting DeltaE to SQW.</td>
</tr>
<tr class="row-odd"><td>PowderMomTransferRange</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>A comma separated list of first bin boundary, width, last bin boundary. Negative width value indicates logarithmic binning.</td>
</tr>
<tr class="row-even"><td>SavePowderNexusFile</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Flag to use to save a processed NeXus file for powder data.</td>
</tr>
<tr class="row-odd"><td>SavePowderNexusFilename</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Provide a filename for saving the processed powder data. Allowed extensions: [&#8216;.nxs&#8217;]</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Provide a name for the output workspace.</td>
</tr>
<tr class="row-odd"><td>ReductionProperties</td>
<td>Output</td>
<td>string</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This is the top-level workflow algorithm for direct geometry
spectrometer data reduction. This algorithm is responsible for gathering
the necessary parameters and generating calls to other workflow or
standard algorithms.</p>
<div class="section" id="workflow">
<h3><a class="toc-backref" href="#id4">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
<p>Parameters for the child algorithms are not shown due to the sheer number.
They will be detailed in the child algorithm diagrams. Items in
parallelograms are output workspaces from their respective algorithms.
Not all output workspaces are subsequently used by other algorithms.</p>
<img alt="../_images/DgsReduction-v1_wkflw.png" src="../_images/DgsReduction-v1_wkflw.png" />
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Simplest SNS Script</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="p">[</span><span class="s">&#39;default.facility&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;SNS&quot;</span>
<span class="c"># SNS reduction does not require IncidentEnergyGuess since the NeXus</span>
<span class="c"># files contain an EnergyRequest log.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">DgsReduction</span><span class="p">(</span><span class="n">SampleInputFile</span><span class="o">=</span><span class="s">&quot;CNCS_7860_event.nxs&quot;</span><span class="p">)</span>
<span class="c"># More than one output from DgsReduction</span>
<span class="c"># (E vs Phi Workspace, Name of Property Manager)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c"># Check the conversion</span>
<span class="n">xaxis</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;X axis =&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">caption</span><span class="p">(),</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">symbol</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;Energy mode =&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">getEMode</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;Workspace type =&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>X axis = Energy transfer / meV
Energy mode = Direct
Workspace type = Workspace2D
</pre></div>
</div>
<p><strong>Example - Simplest ISIS Script</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="p">[</span><span class="s">&#39;default.facility&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;ISIS&quot;</span>
<span class="c"># ISIS reduction required IncidentEnergyGuess since RAW files don&#39;t</span>
<span class="c"># have a corresponding log.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">DgsReduction</span><span class="p">(</span><span class="n">SampleInputFile</span><span class="o">=</span><span class="s">&quot;MAR11001.raw&quot;</span><span class="p">,</span>
                  <span class="n">IncidentEnergyGuess</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="c"># More than one output from DgsRedution</span>
<span class="c"># (E vs Phi Workspace, Name of Property Manager)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c"># Check the conversion</span>
<span class="n">xaxis</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">getAxis</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getUnit</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;X axis =&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">caption</span><span class="p">(),</span> <span class="s">&quot;/&quot;</span><span class="p">,</span> <span class="n">xaxis</span><span class="o">.</span><span class="n">symbol</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;Energy mode =&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">getEMode</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;Workspace type =&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>X axis = Energy transfer / meV
Energy mode = Direct
Workspace type = Workspace2D
</pre></div>
</div>
<p><strong>Example - Get as Eventworkspace for SNS</strong></p>
<p>The following shows that event data can be the result of the redcuction instead of
histogram data.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="p">[</span><span class="s">&#39;default.facility&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;SNS&quot;</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">DgsReduction</span><span class="p">(</span><span class="n">SampleInputFile</span><span class="o">=</span><span class="s">&quot;CNCS_7860_event.nxs&quot;</span><span class="p">,</span>
                  <span class="n">IncidentBeamNormalisation</span><span class="o">=</span><span class="s">&quot;ByCurrent&quot;</span><span class="p">,</span>
                  <span class="n">SofPhiEIsDistribution</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span> <span class="s">&quot;Workspace type =&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;Number of events =&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Workspace type = EventWorkspace
Number of events = 78037
</pre></div>
</div>
<p><strong>Example - Correct Data Before Reduction for SNS</strong></p>
<p>The following is a contrived example to show that the data can be loaded and
corrected and/or filtered before passing it to the algorithm. The key here is that
the *InputWorkspace properties must be used. It also shows a couple of more
properties being used.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">config</span><span class="p">[</span><span class="s">&#39;default.facility&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&quot;SNS&quot;</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&quot;CNCS_7860_event.nxs&quot;</span><span class="p">,</span> <span class="n">LoadMonitors</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">monitor</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">valC3</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">getRun</span><span class="p">()[</span><span class="s">&#39;Phase3&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">getStatistics</span><span class="p">()</span><span class="o">.</span><span class="n">median</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">FilterByLogValue</span><span class="p">(</span><span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">LogName</span><span class="o">=</span><span class="s">&quot;Phase3&quot;</span><span class="p">,</span> <span class="n">MinimumValue</span><span class="o">=</span><span class="n">valC3</span><span class="o">-</span><span class="mf">0.3</span><span class="p">,</span>
                      <span class="n">MaximumValue</span><span class="o">=</span><span class="n">valC3</span><span class="o">+</span><span class="mf">0.3</span><span class="p">)</span>
<span class="c"># Although CNCS doesn&#39;t use its monitors, this is how instruments that do need</span>
<span class="c"># to call the algorithm.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">DgsReduction</span><span class="p">(</span><span class="n">SampleInputWorkspace</span><span class="o">=</span><span class="n">ws</span><span class="p">,</span> <span class="n">SampleInputMonitorWorkspace</span><span class="o">=</span><span class="n">monitor</span><span class="p">,</span>
                  <span class="n">IncidentBeamNormalisation</span><span class="o">=</span><span class="s">&quot;ByCurrent&quot;</span><span class="p">,</span> <span class="n">SofPhiEIsDistribution</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">ws</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span> <span class="s">&quot;Workspace type =&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">id</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&quot;Number of events =&quot;</span><span class="p">,</span> <span class="n">w</span><span class="o">.</span><span class="n">getNumberEvents</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Workspace type = EventWorkspace
Number of events = 2178
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Workflow/Inelastic.html">Workflow\Inelastic</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/939e6b7103a9dafe3e7e23581d47d06fd4669ecd/Framework/WorkflowAlgorithms/src/DgsReduction.cpp">DgsReduction.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/939e6b7103a9dafe3e7e23581d47d06fd4669ecd/Framework/WorkflowAlgorithms/inc/MantidWorkflowAlgorithms/DgsReduction.h">DgsReduction.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="DgsProcessDetectorVanadium-v1.html" title="Previous Chapter: DgsProcessDetectorVanadium v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; DgsProcessDetect...</span>
    </a>
  </li>
  <li>
    <a href="DgsRemap-v1.html" title="Next Chapter: DgsRemap v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">DgsRemap v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>