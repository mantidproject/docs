<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SmoothNeighbours v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="SofQW v1" href="SofQW-v1.html" />
    <link rel="prev" title="SmoothMD v1" href="SmoothMD-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="smoothneighbours-v1">
<span id="algm-smoothneighbours"></span><span id="algm-smoothneighbours-v1"></span><h1>SmoothNeighbours v1<a class="headerlink" href="#smoothneighbours-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/SmoothNeighbours-v1_dlg.png"><img alt="../_images/SmoothNeighbours-v1_dlg.png" class="screenshot" src="../_images/SmoothNeighbours-v1_dlg.png" style="width: 338px;" /></a>
<p class="caption"><strong>SmoothNeighbours</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#processing-either-generically-or-assuming-rectangular-detectors" id="id4">Processing Either Generically or Assuming Rectangular Detectors</a></li>
<li><a class="reference internal" href="#for-all-instruments" id="id5">For All Instruments</a></li>
<li><a class="reference internal" href="#for-instruments-with-rectangular-detectors" id="id6">For Instruments With Rectangular Detectors</a></li>
<li><a class="reference internal" href="#weightedsum-parameter" id="id7">WeightedSum parameter</a></li>
<li><a class="reference internal" href="#flat-weighting" id="id8">Flat Weighting</a></li>
<li><a class="reference internal" href="#linear-weighting" id="id9">Linear Weighting</a></li>
<li><a class="reference internal" href="#parabolic-weighting" id="id10">Parabolic Weighting</a></li>
<li><a class="reference internal" href="#gaussian-weighting" id="id11">Gaussian Weighting</a></li>
<li><a class="reference internal" href="#for-eventworkspaces" id="id12">For EventWorkspaces</a></li>
<li><a class="reference internal" href="#for-workspace2d-s" id="id13">For Workspace2D&#8217;s</a></li>
<li><a class="reference internal" href="#neighbour-searching" id="id14">Neighbour Searching</a></li>
<li><a class="reference internal" href="#property-values-of-examples" id="id15">Property Values of Examples</a></li>
<li><a class="reference internal" href="#how-it-works" id="id16">How it Works</a></li>
<li><a class="reference internal" href="#ignore-masks" id="id17">Ignore Masks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id18">Usage</a></li>
<li><a class="reference internal" href="#source" id="id19">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Perform a moving-average smoothing by summing spectra of nearest neighbours over the face of detectors.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="2%" />
<col width="10%" />
<col width="3%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The workspace containing the spectra to be averaged.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>The name of the workspace to be created as the output of the algorithm.</td>
</tr>
<tr class="row-even"><td>WeightedSum</td>
<td>Input</td>
<td>string</td>
<td>Flat</td>
<td>What sort of Weighting scheme to use?   Flat: Effectively no-weighting, all weights are 1.   Linear: Linear weighting 1 - r/R from origin.   Parabolic : Weighting as cutoff - x + cutoff - y + 1.  Gaussian : Uses the absolute distance x^2 + y^2 ... normalised by the cutoff^2. Allowed values: [&#8216;Flat&#8217;, &#8216;Linear&#8217;, &#8216;Parabolic&#8217;, &#8216;Gaussian&#8217;]</td>
</tr>
<tr class="row-odd"><td>Sigma</td>
<td>Input</td>
<td>number</td>
<td>0.5</td>
<td>Sigma value for gaussian weighting schemes. Defaults to 0.5.</td>
</tr>
<tr class="row-even"><td>IgnoreMaskedDetectors</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>If true, do not consider masked detectors in the NN search.</td>
</tr>
<tr class="row-odd"><td>PreserveEvents</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>If the InputWorkspace is an EventWorkspace, this will preserve the full event list (warning: this will use much more memory!).</td>
</tr>
<tr class="row-even"><td>AdjX</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The number of X (horizontal) adjacent pixels to average together. Only for instruments with RectangularDetectors.</td>
</tr>
<tr class="row-odd"><td>AdjY</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The number of Y (vertical) adjacent pixels to average together. Only for instruments with RectangularDetectors.</td>
</tr>
<tr class="row-even"><td>SumPixelsX</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The total number of X (horizontal) adjacent pixels to sum together. Only for instruments with RectangularDetectors.  AdjX will be ignored if SumPixelsX &gt; 1.</td>
</tr>
<tr class="row-odd"><td>SumPixelsY</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>The total number of Y (vertical) adjacent pixels to sum together. Only for instruments with RectangularDetectors. AdjY will be ignored if SumPixelsY &gt; 1</td>
</tr>
<tr class="row-even"><td>ZeroEdgePixels</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>The number of pixels to zero at edges. Only for instruments with RectangularDetectors.</td>
</tr>
<tr class="row-odd"><td>RadiusUnits</td>
<td>Input</td>
<td>string</td>
<td>Meters</td>
<td>Units used to specify the radius?   Meters : Radius is in meters.   NumberOfPixels : Radius is in terms of the number of pixels. Allowed values: [&#8216;Meters&#8217;, &#8216;NumberOfPixels&#8217;]</td>
</tr>
<tr class="row-even"><td>Radius</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>The radius around a pixel to look for nearest neighbours to average.  If 0, will use the AdjX and AdjY parameters for rectangular detectors instead.</td>
</tr>
<tr class="row-odd"><td>NumberOfNeighbours</td>
<td>Input</td>
<td>number</td>
<td>8</td>
<td>Number of nearest neighbouring pixels. Alternative to providing the radius. The default is 8.</td>
</tr>
<tr class="row-even"><td>SumNumberOfNeighbours</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Sum nearest neighbouring pixels with same parent. Number of pixels will be reduced. The default is false.</td>
</tr>
<tr class="row-odd"><td>ExpandSumAllPixels</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>OuputWorkspace will have same number of pixels as InputWorkspace using SumPixelsX and SumPixelsY.  Individual pixels will have averages.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm performs a moving-average smoothing of data by summing
spectra of nearest neighbours over the face of detectors. The output
workspace has the same number of spectra as the input workspace. This
works on both <a class="reference external" href="http://mantidproject.org/EventWorkspace">EventWorkspaces</a> and
<a class="reference external" href="http://mantidproject.org/Workspace2D">Workspace2D</a>&#8216;s. It has two main modes of operation.</p>
<div class="section" id="processing-either-generically-or-assuming-rectangular-detectors">
<h3><a class="toc-backref" href="#id4">Processing Either Generically or Assuming Rectangular Detectors</a><a class="headerlink" href="#processing-either-generically-or-assuming-rectangular-detectors" title="Permalink to this headline">¶</a></h3>
<p>You may either specify properties for the Rectangular Detector Group, or
the Non-uniform Detector Group, but not both. If you provide inputs for
the Rectangular Detector group, then the algorithm execution will assume
that this is your desired processing route.</p>
</div>
<div class="section" id="for-all-instruments">
<h3><a class="toc-backref" href="#id5">For All Instruments</a><a class="headerlink" href="#for-all-instruments" title="Permalink to this headline">¶</a></h3>
<p>Going through the input workspace pixel-by-pixel, Mantid finds the
nearest-neighbours with the given Radius of each pixel. The spectra are
then summed together, and normalizing to unity (see the weighting
section below).</p>
</div>
<div class="section" id="for-instruments-with-rectangular-detectors">
<h3><a class="toc-backref" href="#id6">For Instruments With Rectangular Detectors</a><a class="headerlink" href="#for-instruments-with-rectangular-detectors" title="Permalink to this headline">¶</a></h3>
<p>The algorithm looks through the <a class="reference external" href="http://mantidproject.org/Instrument">Instrument</a> to find all
the <a class="reference internal" href="../concepts/RectangularDetector.html#rectangulardetector"><em>RectangularDetectors</em></a> defined. For each
pixel in each detector, the AdjX*AdjY neighboring spectra are summed
together and saved in the output workspace.</p>
</div>
<div class="section" id="weightedsum-parameter">
<h3><a class="toc-backref" href="#id7">WeightedSum parameter</a><a class="headerlink" href="#weightedsum-parameter" title="Permalink to this headline">¶</a></h3>
<p>A weighting strategy can be applied to control how the weights are
calculated. This defaults to a flat weighting strategy. Weights are
summed and scaled so that they add up to 1.</p>
</div>
<div class="section" id="flat-weighting">
<h3><a class="toc-backref" href="#id8">Flat Weighting</a><a class="headerlink" href="#flat-weighting" title="Permalink to this headline">¶</a></h3>
<p>All weights are 1. This is completely position in-senitive.</p>
</div>
<div class="section" id="linear-weighting">
<h3><a class="toc-backref" href="#id9">Linear Weighting</a><a class="headerlink" href="#linear-weighting" title="Permalink to this headline">¶</a></h3>
<p>Weights are calculated according to <img class="math" src="../_images/math/422bbda08a5019878e7ccebb96278ea5c714dde1.png" alt="w = 1 - r/R" style="vertical-align: -5px"/>, where <img class="math" src="../_images/math/efe9dc01d6e2fca16dbf81148e1aebaef667c4cb.png" alt="w" style="vertical-align: 0px"/> is the
weighting factor, <img class="math" src="../_images/math/3293e7078f4805bf0742b947e522da0a58d8e2b5.png" alt="r" style="vertical-align: 0px"/> is the distance from the detector and <img class="math" src="../_images/math/80ea11cbf3510e6208511b42c16940439a65a7e2.png" alt="R" style="vertical-align: 0px"/> is the
cut-off radius.</p>
</div>
<div class="section" id="parabolic-weighting">
<h3><a class="toc-backref" href="#id10">Parabolic Weighting</a><a class="headerlink" href="#parabolic-weighting" title="Permalink to this headline">¶</a></h3>
<p>For rectangular detectors it may be used as follows: The radius must be
zero and a AdjX and AdjY parameter must be provided.
<img class="math" src="../_images/math/eea0fc128e7cdbd587b6d8aaadfea12f8c9d3555.png" alt="w = AdjX - abs(x) + AdjY - abs(y) + 1" style="vertical-align: -4px"/></p>
<p>For non-rectangular detectors, the cut-off radius is used in the
calculation. <img class="math" src="../_images/math/140194baad928c677d7bfa01cd0e9f71ac6c710e.png" alt="w = R - abs(x) + R - abs(y) + 1" style="vertical-align: -4px"/></p>
</div>
<div class="section" id="gaussian-weighting">
<h3><a class="toc-backref" href="#id11">Gaussian Weighting</a><a class="headerlink" href="#gaussian-weighting" title="Permalink to this headline">¶</a></h3>
<p>This weighting is calculated from the Gaussian distribution</p>
<p><img class="math" src="../_images/math/66fa7b7a5586d208f74ab5adc87116ac5b7c7ce2.png" alt="w = e^{-r^2/(2\sigma^2)}" style="vertical-align: 0px"/></p>
<p>where <img class="math" src="../_images/math/5e9b85c3d65bbf5da3aeccaa4006d2db0d88a384.png" alt="r^2 = x^2 + y^2 + z^2" style="vertical-align: -4px"/> and <img class="math" src="../_images/math/867e88734ade43673557344be7e57c5488afba70.png" alt="\sigma" style="vertical-align: 0px"/> is the number of
standard deviations controlling the width of the distribution curve</p>
<p>Important notes about this algorithm are that:</p>
<ul class="simple">
<li>Distances are normalised by the radius cut-off to make them
dimensionless and scaled to 1 at the boundaries.</li>
</ul>
</div>
<div class="section" id="for-eventworkspaces">
<h3><a class="toc-backref" href="#id12">For EventWorkspaces</a><a class="headerlink" href="#for-eventworkspaces" title="Permalink to this headline">¶</a></h3>
<p>Both methods of smoothing will <strong>significantly</strong> increase the memory
usage of the workspace. For example, if AdjX=AdjY=1, the algorithm will
sum 9 nearest neighbours in most cases. This increases the memory used
by a factor of 9.</p>
</div>
<div class="section" id="for-workspace2d-s">
<h3><a class="toc-backref" href="#id13">For Workspace2D&#8217;s</a><a class="headerlink" href="#for-workspace2d-s" title="Permalink to this headline">¶</a></h3>
<p>You can use PreserveEvents = false to avoid the memory issues with an
EventWorkspace input. Please note that the algorithm <strong>does not check</strong>
that the bin X boundaries match.</p>
</div>
<div class="section" id="neighbour-searching">
<h3><a class="toc-backref" href="#id14">Neighbour Searching</a><a class="headerlink" href="#neighbour-searching" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="../_images/NNSearchByRadius.jpg"><img alt="Fig1" src="../_images/NNSearchByRadius.jpg" style="width: 100%;" /></a></td>
<td><a class="reference internal" href="../_images/NNSearchIrregularGrid.jpg"><img alt="Fig2" src="../_images/NNSearchIrregularGrid.jpg" style="width: 100%;" /></a></td>
<td><a class="reference internal" href="../_images/NNSearchLimitByRadius.jpg"><img alt="Fig3" src="../_images/NNSearchLimitByRadius.jpg" style="width: 100%;" /></a></td>
<td><a class="reference internal" href="../_images/NNSearchLimitByNNs.jpg"><img alt="Fig4" src="../_images/NNSearchLimitByNNs.jpg" style="width: 100%;" /></a></td>
<td><a class="reference internal" href="../_images/NNSearchXY.jpg"><img alt="Fig5" src="../_images/NNSearchXY.jpg" style="width: 100%;" /></a></td>
</tr>
<tr class="row-even"><td><em>Fig. 1</em></td>
<td><em>Fig. 2</em></td>
<td><em>Fig. 3</em></td>
<td><em>Fig. 4</em></td>
<td><em>Fig. 5</em></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="property-values-of-examples">
<h3><a class="toc-backref" href="#id15">Property Values of Examples</a><a class="headerlink" href="#property-values-of-examples" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>Fig. 1:</strong></p>
<p>Requesting NumberOfNeighbours=36, Radius=3. Algorithm looks for
36 nearest neighbours with a cut-off of 3 detector widths.</p>
</li>
<li><p class="first"><strong>Fig. 2:</strong></p>
<p>Requesting NumberOfNeighbours=46, Radius=2. Algorithm looks
for 46 nearest neighbours with a cut-off of 2 detector widths.</p>
</li>
<li><p class="first"><strong>Fig. 3:</strong></p>
<p>Requesting NumberOfNeighbours=56, Radius=3. Algorithm looks
for 56 nearest neighbours with a cut-off of 3 detector widths.</p>
</li>
<li><p class="first"><strong>Fig. 4:</strong></p>
<p>Requesting NumberOfNeighbours=8, Radius=3. Algorithm looks
for 8 nearest neighbours with a cut-off of 3 detector widths.</p>
</li>
<li><p class="first"><strong>Fig. 5:</strong></p>
<p>Requesting AdjX=4, AdjY=2, Radius=0. Algorithm fetches
neighbours in the specified pattern.</p>
</li>
</ul>
</div>
<div class="section" id="how-it-works">
<h3><a class="toc-backref" href="#id16">How it Works</a><a class="headerlink" href="#how-it-works" title="Permalink to this headline">¶</a></h3>
<p>The algorithm will fetch neigbours using the intesection of those inside
the radius cut-off and those less than the NumberOfNeighbours specified.
<em>Fig. 1</em> illustrates this process. Searching is relative to the central
detector, those constrained by both specified number of neighbours have
been highlighted. In this case the radius cut-off and the number of
neighbours constrain the same number of detectors.</p>
<p>Searching via the number of neighbours will not necessarily return the
neighbours in a grid with the same number of detectors in each axis.
<em>Fig. 2</em> shows how neighbours might be returned if distances are
non-uniform. If RectangularDetectors are available, you may force the
searching to occur in rectangular manner (described below).</p>
<p>The SmoothingNeighbours algorithm will only take those neighbours which
are in the intersection between those constrained by the cut-off and
those constrained by the specified number of neighbours. If the radius
cut-off is the limiting factor, then those neighbours outside will not
be considered. This is illustrated in <em>Fig. 3</em> where the blue detectors
will not be considered, but will not with this radius cut-off, while the
green ones will. Likewise, in <em>Fig. 4</em> the effect of reducing the
NumberOfNeighbours property can be seen.</p>
<p>If the radius is set to 0, the instrument is treated as though it has
rectangular detectors. AdjX and AdjY can then be used to control the
number of neighbours independently in x and y using the AdjX and AdjY
properties. <em>Fig. 5</em> Shows the effect of this type of searching.</p>
</div>
<div class="section" id="ignore-masks">
<h3><a class="toc-backref" href="#id17">Ignore Masks</a><a class="headerlink" href="#ignore-masks" title="Permalink to this headline">¶</a></h3>
<p>The algorithm will ignore masked detectors if this flag is set.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id18">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Smooth using radius:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create a workspace with a single rectangular bank of size 3x3. One bin only.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="s">&quot;Flat background&quot;</span><span class="p">,</span>
                           <span class="n">NumBanks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                           <span class="n">XMin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">XMax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">BinWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># Initial values</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span>
          <span class="mf">4.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span>
          <span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">):</span>
  <span class="n">ws</span><span class="o">.</span><span class="n">dataY</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

<span class="c"># Run the algorithm</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">SmoothNeighbours</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">Radius</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
                          <span class="n">RadiusUnits</span> <span class="o">=</span> <span class="s">&#39;NumberOfPixels&#39;</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;Number of histograms:&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&#39;Smoothed values:&#39;</span>
<span class="k">print</span> <span class="n">output</span><span class="o">.</span><span class="n">extractY</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Number of histograms: 9
Smoothed values:
[[ 2.        ]
 [ 2.16666667]
 [ 2.        ]
 [ 2.        ]
 [ 2.22222222]
 [ 2.33333333]
 [ 2.5       ]
 [ 2.5       ]
 [ 2.5       ]]
</pre></div>
</div>
<p><strong>Example -  Smooth using AdjX and AdjY:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create a workspace with a single rectangular bank of size 3x3. One bin only.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="s">&quot;Flat background&quot;</span><span class="p">,</span>
                           <span class="n">NumBanks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                           <span class="n">XMin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">XMax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">BinWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># Initial values</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span>
          <span class="mf">4.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span>
          <span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">):</span>
  <span class="n">ws</span><span class="o">.</span><span class="n">dataY</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

<span class="c"># Run the algorithm</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">SmoothNeighbours</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">AdjX</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">AdjY</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;Number of histograms:&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&#39;Smoothed values:&#39;</span>
<span class="k">print</span> <span class="n">output</span><span class="o">.</span><span class="n">extractY</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Number of histograms: 9
Smoothed values:
[[ 2.16666667]
 [ 2.16666667]
 [ 2.16666667]
 [ 2.22222222]
 [ 2.22222222]
 [ 2.22222222]
 [ 2.5       ]
 [ 2.5       ]
 [ 2.5       ]]
</pre></div>
</div>
<p><strong>Example -  Smooth and sum using SumPixelsX and SumPixelsY:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Create a workspace with a single rectangular bank of size 3x3. One bin only.</span>
<span class="n">ws</span> <span class="o">=</span> <span class="n">CreateSampleWorkspace</span><span class="p">(</span><span class="n">Function</span><span class="o">=</span><span class="s">&quot;Flat background&quot;</span><span class="p">,</span>
                           <span class="n">NumBanks</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">BankPixelWidth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
                           <span class="n">XMin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                           <span class="n">XMax</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                           <span class="n">BinWidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c"># Initial values</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span>
          <span class="mf">4.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span>
          <span class="mf">1.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">9</span><span class="p">):</span>
  <span class="n">ws</span><span class="o">.</span><span class="n">dataY</span><span class="p">(</span><span class="n">i</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

<span class="c"># Run the algorithm</span>
<span class="n">output</span> <span class="o">=</span> <span class="n">SmoothNeighbours</span><span class="p">(</span><span class="n">ws</span><span class="p">,</span> <span class="n">SumPixelsX</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">SumPixelsY</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="k">print</span> <span class="s">&#39;Number of histograms:&#39;</span><span class="p">,</span> <span class="n">output</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()</span>
<span class="k">print</span> <span class="s">&#39;Smoothed values:&#39;</span>
<span class="k">print</span> <span class="n">output</span><span class="o">.</span><span class="n">extractY</span><span class="p">()</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>Number of histograms: 3
Smoothed values:
[[ 6.]
 [ 6.]
 [ 8.]]
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Transforms/Smoothing.html">Transforms\Smoothing</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id19">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/939e6b7103a9dafe3e7e23581d47d06fd4669ecd/Framework/Algorithms/src/SmoothNeighbours.cpp">SmoothNeighbours.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/939e6b7103a9dafe3e7e23581d47d06fd4669ecd/Framework/Algorithms/inc/MantidAlgorithms/SmoothNeighbours.h">SmoothNeighbours.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="SmoothMD-v1.html" title="Previous Chapter: SmoothMD v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; SmoothMD v1</span>
    </a>
  </li>
  <li>
    <a href="SofQW-v1.html" title="Next Chapter: SofQW v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">SofQW v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>