<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>CalculateResolution v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.6.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="CalculateSampleTransmission v1" href="CalculateSampleTransmission-v1.html" />
    <link rel="prev" title="CalculatePeaksHKL v1" href="CalculatePeaksHKL-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.6</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="calculateresolution-v1">
<span id="algm-calculateresolution"></span><span id="algm-calculateresolution-v1"></span><h1>CalculateResolution v1<a class="headerlink" href="#calculateresolution-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/CalculateResolution-v1_dlg.png"><img alt="../_images/CalculateResolution-v1_dlg.png" class="screenshot" src="../_images/CalculateResolution-v1_dlg.png" style="width: 289px;" /></a>
<p class="caption"><strong>CalculateResolution</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a><ul>
<li><a class="reference internal" href="#beam-divergence" id="id4">Beam Divergence</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id5">Usage</a></li>
<li><a class="reference internal" href="#source" id="id6">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculates the reflectometry resolution (dQ/Q) for a given workspace.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="5%" />
<col width="29%" />
<col width="9%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Workspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Workspace to calculate the instrument resolution of.</td>
</tr>
<tr class="row-odd"><td>TwoTheta</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Two theta scattering angle in degrees.</td>
</tr>
<tr class="row-even"><td>FirstSlitName</td>
<td>Input</td>
<td>string</td>
<td>slit1</td>
<td>Component name of the first slit.</td>
</tr>
<tr class="row-odd"><td>SecondSlitName</td>
<td>Input</td>
<td>string</td>
<td>slit2</td>
<td>Component name of the second slit.</td>
</tr>
<tr class="row-even"><td>VerticalGapParameter</td>
<td>Input</td>
<td>string</td>
<td>vertical gap</td>
<td>Parameter the vertical gap of each slit can be found in.</td>
</tr>
<tr class="row-odd"><td>TwoThetaLogName</td>
<td>Input</td>
<td>string</td>
<td>Theta</td>
<td>Name two theta can be found in the run log as.</td>
</tr>
<tr class="row-even"><td>Resolution</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Calculated resolution (dq/q).</td>
</tr>
<tr class="row-odd"><td>TwoThetaOut</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Two theta scattering angle in degrees.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm takes a workspace and a value for two theta, and attempts to calculate
the reflectometry resolution (dQ/Q) from them. If no value is provided for two theta
then CalculateResolution will attempt to fetch a value from the workspace&#8217;s log
using the two theta log name provided.</p>
<p>CalculateResolution outputs two values, the calculated resolution and the value of
TwoTheta that was used in the calculation. The latter is useful when TwoTheta was not
given to CalculateResolution, causing CalculateResolution to extract it from the
workspace&#8217;s sample log.</p>
<p>The effective inverse of this algorithm is <a class="reference internal" href="CalculateSlits-v1.html#algm-calculateslits"><em>CalculateSlits v1</em></a>.</p>
<div class="section" id="beam-divergence">
<h3><a class="toc-backref" href="#id4">Beam Divergence</a><a class="headerlink" href="#beam-divergence" title="Permalink to this headline">¶</a></h3>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/collimation_diagram.png"><img alt="collimation_diagram.png" src="../_images/collimation_diagram.png" style="width: 525.5px; height: 386.5px;" /></a>
<p class="caption">Schematic showing beam divergence using two slits (<em>Slit1</em> and <em>Slit2</em>)</p>
</div>
<p><strong>Proof</strong></p>
<div class="math">
<p><img src="../_images/math/c42215227f968f360a832bd52b52504d072ba1ea.png" alt="\frac{d1}{x}  \equiv \frac{d2}{l - x}  \equiv tan\alpha

 \therefore \frac{d1}{x} = \frac{d1 + d2}{l}

 \therefore \alpha = tan^{-1}\left(\frac{d1 + d2}{l}\right)"/></p>
</div><p>where <img class="math" src="../_images/math/23bf3bdd8ce99fdb75f17e8b49934c62e9cf0841.png" alt="\alpha" style="vertical-align: 0px"/> gives is the beam divergence in radians. Parameter <em>d1</em> is the vertical distance of <em>Slit1</em> opening, <em>d2</em> is the same for <em>Slit2</em>. parameter <em>l</em> is the distance between the slits in the beam direction. See figure above for
reference.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id5">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ws</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s">&#39;INTER00013460&#39;</span><span class="p">)</span>
<span class="n">res</span><span class="p">,</span> <span class="n">two_theta</span> <span class="o">=</span> <span class="n">CalculateResolution</span><span class="p">(</span><span class="n">Workspace</span> <span class="o">=</span> <span class="n">ws</span><span class="p">,</span> <span class="n">TwoTheta</span> <span class="o">=</span> <span class="mf">0.7</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Resolution: </span><span class="si">%.4f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">res</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Two Theta: </span><span class="si">%.4f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">two_theta</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre>Resolution: 0.0340
Two Theta: 0.7000
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Reflectometry/ISIS.html">Reflectometry\ISIS</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id6">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/939e6b7103a9dafe3e7e23581d47d06fd4669ecd/Framework/Algorithms/src/CalculateResolution.cpp">CalculateResolution.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/939e6b7103a9dafe3e7e23581d47d06fd4669ecd/Framework/Algorithms/inc/MantidAlgorithms/CalculateResolution.h">CalculateResolution.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="CalculatePeaksHKL-v1.html" title="Previous Chapter: CalculatePeaksHKL v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; CalculatePeaksHK...</span>
    </a>
  </li>
  <li>
    <a href="CalculateSampleTransmission-v1.html" title="Next Chapter: CalculateSampleTransmission v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">CalculateSampleT... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>