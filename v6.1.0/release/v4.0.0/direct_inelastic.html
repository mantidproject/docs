<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Direct Inelastic Changes</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Framework Changes" href="framework.html" />
    <link rel="prev" title="Diffraction Changes" href="diffraction.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="direct-inelastic-changes">
<h1>Direct Inelastic Changes<a class="headerlink" href="#direct-inelastic-changes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#algorithms" id="id5">Algorithms</a><ul>
<li><a class="reference internal" href="#new-algorithms" id="id6">New Algorithms</a></li>
<li><a class="reference internal" href="#improvements" id="id7">Improvements</a></li>
<li><a class="reference internal" href="#bugfixes" id="id8">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#interfaces" id="id9">Interfaces</a><ul>
<li><a class="reference internal" href="#new-features" id="id10">New features</a></li>
<li><a class="reference internal" href="#id1" id="id11">Improvements</a></li>
<li><a class="reference internal" href="#id2" id="id12">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#python" id="id13">Python</a><ul>
<li><a class="reference internal" href="#id3" id="id14">Improvements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#instrument-definitions" id="id15">Instrument definitions</a><ul>
<li><a class="reference internal" href="#id4" id="id16">Improvements</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="algorithms">
<h2><a class="toc-backref" href="#id5">Algorithms</a><a class="headerlink" href="#algorithms" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-algorithms">
<h3><a class="toc-backref" href="#id6">New Algorithms</a><a class="headerlink" href="#new-algorithms" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added a new algorithm to ILL’s reduction workflow: <a class="reference internal" href="../../algorithms/DirectILLTubeBackground-v1.html#algm-directilltubebackground"><span class="std std-ref">DirectILLTubeBackground</span></a> which can be used to calculate the time-independent backgrounds for instruments with PSD detectors such as IN5.</li>
<li>The new algorithm <a class="reference internal" href="../../algorithms/SofTwoThetaTOF-v1.html#algm-softwothetatof"><span class="std std-ref">SofTwoThetaTOF</span></a> can be used to convert a workspace from (spectrum number, TOF) units to (<span class="math">\(2\theta\)</span>, TOF) averaging the intensities over constant scattering angles.</li>
<li>The new algorithm <a class="reference internal" href="../../algorithms/MDNorm-v1.html#algm-mdnorm"><span class="std std-ref">MDNorm</span></a> can be used to calculate cross section for single crystal direct inelastic measurements.</li>
<li><a class="reference internal" href="../../algorithms/LoadPLN-v1.html#algm-loadpln"><span class="std std-ref">LoadPLN</span></a> loader for an ANSTO PELICAN event file.</li>
<li>Version 3 of <a class="reference internal" href="../../algorithms/GetEiMonDet-v3.html#algm-geteimondet"><span class="std std-ref">GetEiMonDet v3</span></a> is now available. The upgraded version now fits a Gaussian to summed detector data making the energy calculation more robust. Version 2 has been deprecated and will be removed in a future release.</li>
</ul>
</div>
<div class="section" id="improvements">
<h3><a class="toc-backref" href="#id7">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/DirectILLIntegrateVanadium-v1.html#algm-directillintegratevanadium"><span class="std std-ref">DirectILLIntegrateVanadium</span></a> now masks zero counting detectors from the integral.</li>
<li>Changes to <a class="reference internal" href="../../algorithms/ComputeCalibrationCoefVan-v1.html#algm-computecalibrationcoefvan"><span class="std std-ref">ComputeCalibrationCoefVan</span></a>:<ul>
<li>It is now possible to turn off the Debye-Waller correction.</li>
<li>The temperature sample log entry can be given in an instrument parameter <code class="docutils literal"><span class="pre">temperature_sample_log</span></code>.</li>
<li>The temperature sample log can now be a time series.</li>
</ul>
</li>
<li><a class="reference internal" href="../../algorithms/ComputeIncoherentDOS-v1.html#algm-computeincoherentdos"><span class="std std-ref">ComputeIncoherentDOS</span></a> now supports computation from <span class="math">\(S(2\theta,E)\)</span> workspace.</li>
<li>The upper limit of the empty container scaling factor in <a class="reference internal" href="../../algorithms/DirectILLApplySelfShielding-v1.html#algm-directillapplyselfshielding"><span class="std std-ref">DirectILLApplySelfShielding</span></a> has been removed.</li>
<li><a class="reference internal" href="../../algorithms/ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD</span></a> now has <cite>ConverterType = {Default, Indexed}</cite> setting: <cite>Default</cite> keeps the old
version of algorithm, <cite>Indexed</cite> provide the new one with better performance and some restrictions
(see <a class="reference internal" href="../../algorithms/ConvertToMD-v1.html#algm-converttomd"><span class="std std-ref">ConvertToMD</span></a> Notes).</li>
<li><a class="reference internal" href="../../algorithms/DirectILLCollectData-v1.html#algm-directillcollectdata"><span class="std std-ref">DirectILLCollectData</span></a> now automatically disables incident energy calibration and normalises to time instead of monitor counts if the monitor counts are deemed too low.</li>
<li>There are two new properties in ref:<cite>DirectILLReduction &lt;algm-DirectILLReduction&gt;</cite>:<ul>
<li><code class="docutils literal"><span class="pre">EnergyRebinning</span></code> allows mixing automatic bin widths with user specified ones when rebinning the energy transfer axis.</li>
<li><code class="docutils literal"><span class="pre">GroupingAngleStep</span></code> allows one to specify a <span class="math">\(2\theta\)</span> step for detector grouping. By default, a step of 0.01 degrees or the value of <code class="docutils literal"><span class="pre">natural-angle-step</span></code> instrument parameter is used.</li>
</ul>
</li>
<li>The <code class="docutils literal"><span class="pre">SofQW</span></code> algorithms have a new property <code class="docutils literal"><span class="pre">DetectorTwoThetaRanges</span></code> which can be used to supply detector scattering angle coverage information for <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon</span></a>.</li>
<li>The built-in version of MSlice has been updated to include the full CLI, generating scripts from plots and waterfall plotting.</li>
</ul>
</div>
<div class="section" id="bugfixes">
<h3><a class="toc-backref" href="#id8">Bugfixes</a><a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fixed a bug in <a class="reference internal" href="../../algorithms/DirectILLCollectData-v1.html#algm-directillcollectdata"><span class="std std-ref">DirectILLCollectData</span></a> which prevented the <em>OutputIncidentEnergyWorkspace</em> being generated if <em>IncidentEnergyCalibration</em> was turned off.</li>
<li>Fixed the detector <span class="math">\(2\theta\)</span> coverage calculation in <a class="reference internal" href="../../algorithms/SofQWNormalisedPolygon-v1.html#algm-sofqwnormalisedpolygon"><span class="std std-ref">SofQWNormalisedPolygon</span></a>. The algorithm was computing the angle between the detector center and top point, not the actual minimum and maximum <span class="math">\(2\theta\)</span>. The width is now calculated accurately for cylinder and cuboid shapes. For other shapes, an approximate method is used.</li>
<li>Fixed a bug in <a class="reference internal" href="../../algorithms/Rebin2D-v1.html#algm-rebin2d"><span class="std std-ref">Rebin2D</span></a> which requires that an input workspace had to have fractional area weights for the <cite>UseFractionalArea</cite> option to work. The behaviour is now that if the input workspace does not have fractional areas, and <cite>UseFractionalArea</cite> is true, then fractional area tracking will be used with input fractions set to unity.</li>
<li><a class="reference internal" href="../../algorithms/LoadILLTOF-v2.html#algm-loadilltof"><span class="std std-ref">LoadILLTOF</span></a> now properly closes the loaded file.</li>
</ul>
</div>
</div>
<div class="section" id="interfaces">
<h2><a class="toc-backref" href="#id9">Interfaces</a><a class="headerlink" href="#interfaces" title="Permalink to this headline">¶</a></h2>
<div class="section" id="new-features">
<h3><a class="toc-backref" href="#id10">New features</a><a class="headerlink" href="#new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added the ability to save the results of the TOFTOF reduction as Ascii files.</li>
</ul>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id11">Improvements</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>New instrument geometry for CNCS.</li>
<li>Improved <code class="docutils literal"><span class="pre">Save</span></code>-section of the TOFTOF reduction dialog.</li>
<li>Behavior of the <a class="reference internal" href="../../algorithms/LoadDNSLegacy-v1.html#algm-loaddnslegacy"><span class="std std-ref">LoadDNSLegacy</span></a> for TOF data has been changed: the algorithm does not try to guess elastic channel any more, but asks for the user input. Neutron wavelength can optionally be specified as user input.</li>
<li><a class="reference internal" href="../../algorithms/LoadDNSSCD-v1.html#algm-loaddnsscd"><span class="std std-ref">LoadDNSSCD</span></a> has been improved to be able to load TOF data.</li>
<li><a class="reference internal" href="../../algorithms/MDNormDirectSC-v1.html#algm-mdnormdirectsc"><span class="std std-ref">MDNormDirectSC</span></a> now can handle merged MD workspaces.</li>
</ul>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id12">Bugfixes</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Several bugs in <a class="reference internal" href="../../interfaces/direct/PyChop.html#pychop"><span class="std std-ref">PyChop</span></a> have been fixed, including the printing out of multiple Ei reps in the “Show Ascii” dialog, the disappearing axes labels in the Q-E tab, and incorrect energies in the multi-rep calculations. The calculation of the time width for LET has also been corrected for the relative sizes of the disk slots and the guide opening, which is important for “High Flux” mode calculations, where the energy widths were calculated to be narrower than is really the case. Finally the time-distance diagrams have been updated with the option to only show the first frame, and the MARI instrument file has been updated with the measured MARI flux.</li>
</ul>
</div>
</div>
<div class="section" id="python">
<h2><a class="toc-backref" href="#id13">Python</a><a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3><a class="toc-backref" href="#id14">Improvements</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The <code class="docutils literal"><span class="pre">directtools</span></code> plotting and utility module has been updated:<ul>
<li>Added a new function <a class="reference internal" href="../../techniques/DirecttoolsPythonModule.html#directtools.plotDOS" title="directtools.plotDOS"><code class="xref py py-func docutils literal"><span class="pre">directtools.plotDOS()</span></code></a> to support plotting the density-of-states.</li>
<li>Improved the automatic E ranges, cut labels and other visuals.</li>
<li>All functions should be applicable to non-ILL data.</li>
<li><code class="docutils literal"><span class="pre">defaultrcParams</span></code> was renamed to <code class="docutils literal"><span class="pre">defaultrcparams</span></code> to be consistent with the rest of the functions.</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="instrument-definitions">
<h2><a class="toc-backref" href="#id15">Instrument definitions</a><a class="headerlink" href="#instrument-definitions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id4">
<h3><a class="toc-backref" href="#id16">Improvements</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>IN5: pixel radius and height are now more realistic and the detector ID of the monitor is now 100000 instead of 0.</li>
</ul>
<p><a class="reference internal" href="index.html#v4-0-0"><span class="std std-ref">Release 4.0.0</span></a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="diffraction.html" title="Previous Chapter: Diffraction Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Diffraction Changes</span>
    </a>
  </li>
  <li>
    <a href="framework.html" title="Next Chapter: Framework Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Framework Changes &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2021-06-03.<br/>
    </p>
  </div>
</footer>
  </body>
</html>