<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>LoadVesuvio v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="LoadVisionElasticBS v1" href="LoadVisionElasticBS-v1.html" />
    <link rel="prev" title="LoadTOFRawNexus v1" href="LoadTOFRawNexus-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="loadvesuvio-v1">
<span id="algm-loadvesuvio"></span><span id="algm-loadvesuvio-v1"></span><h1>LoadVesuvio v1<a class="headerlink" href="#loadvesuvio-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id3">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/LoadVesuvio-v1_dlg.png"><img alt="../_images/LoadVesuvio-v1_dlg.png" class="screenshot" src="../_images/LoadVesuvio-v1_dlg.png" style="width: 305px;" /></a>
<p class="caption"><span class="caption-text"><strong>LoadVesuvio</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id4">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id5">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id6">Properties</a></li>
<li><a class="reference internal" href="#description" id="id7">Description</a><ul>
<li><a class="reference internal" href="#ip-file" id="id8">IP File</a></li>
<li><a class="reference internal" href="#information-on-vesuvio-operation" id="id9">Information on Vesuvio operation</a></li>
<li><a class="reference internal" href="#period" id="id10">2 period</a></li>
<li><a class="reference internal" href="#id1" id="id11">3 period</a></li>
<li><a class="reference internal" href="#id2" id="id12">6 period</a></li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id13">Usage</a></li>
<li><a class="reference internal" href="#source" id="id14">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id4">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Loads raw data produced by the Vesuvio instrument at ISIS.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id5">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="LoadEmptyVesuvio-v1.html#algm-loademptyvesuvio"><span class="std std-ref">LoadEmptyVesuvio</span></a>, <a class="reference internal" href="LoadRaw-v3.html#algm-loadraw"><span class="std std-ref">LoadRaw</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id6">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="2%" />
<col width="9%" />
<col width="5%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Filename</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>The run numbers that should be loaded. E.g.14188  - for single run14188-14195 - for summed consecutive runs14188,14195 - for summed non-consecutive runs</td>
</tr>
<tr class="row-odd"><td>SpectrumList</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>The spectrum numbers to load. A dash will load a range and a semicolon delimits spectra to sum</td>
</tr>
<tr class="row-even"><td>Mode</td>
<td>Input</td>
<td>string</td>
<td>DoubleDifference</td>
<td>The difference option. Valid values: [‘SingleDifference’, ‘DoubleDifference’, ‘ThickDifference’, ‘FoilOut’, ‘FoilIn’, ‘FoilInOut’]. Allowed values: [‘SingleDifference’, ‘DoubleDifference’, ‘ThickDifference’, ‘FoilOut’, ‘FoilIn’, ‘FoilInOut’]</td>
</tr>
<tr class="row-odd"><td>InstrumentParFile</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>An optional IP file. If provided the values are used to correct the default instrument values and attach the t0 values to each detector. Allowed values: [‘dat’, ‘par’]</td>
</tr>
<tr class="row-even"><td>SumSpectra</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true then the final output is a single spectrum containing the sum of all of the requested spectra. All detector angles/parameters are averaged over the individual inputs</td>
</tr>
<tr class="row-odd"><td>LoadMonitors</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If true then the monitor data is loaded and will be output by the algorithm into a separate workspace.</td>
</tr>
<tr class="row-even"><td>LoadLogFiles</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>If true, then the log files for the specified runs will be loaded.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></td>
<td><em>Mandatory</em></td>
<td>The name of the output workspace.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id7">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="http://www.isis.stfc.ac.uk/instruments/vesuvio/vesuvio4837.html">Vesuvio</a> instrument at ISIS produces
<a class="reference external" href="http://www.mantidproject.org/RawFile">RAW</a> files in the standard format. However, due to the unique design
of the instrument the raw counts from the input files must be manipulated before they are considered useful.</p>
<p>This algorithm wraps calls to <a class="reference internal" href="LoadRaw-v3.html#algm-loadraw"><span class="std std-ref">LoadRaw</span></a> and computes the counts (<span class="math">\(\mu \text{s}^{-1}\)</span>) using the
foil-cycling method described <a class="reference external" href="http://m.iopscience.iop.org/0957-0233/23/4/045902/pdf/0957-0233_23_4_045902.pdf">here</a>.</p>
<p>The output is point data and not a histogram.</p>
<div class="section" id="ip-file">
<h3><a class="toc-backref" href="#id8">IP File</a><a class="headerlink" href="#ip-file" title="Permalink to this headline">¶</a></h3>
<p>There is an option to specify an ascii instrument parameter file to specify new detector positions along with a <em>t0</em> delay
time parameter for each detector.</p>
</div>
<div class="section" id="information-on-vesuvio-operation">
<h3><a class="toc-backref" href="#id9">Information on Vesuvio operation</a><a class="headerlink" href="#information-on-vesuvio-operation" title="Permalink to this headline">¶</a></h3>
<p>Vesuvio as an instrument has the ability to analyse both forward and back scattering from the sample. In addition, when data is collected,
foils are put in front of, or remove from, the detectors. The foils are different for forward and back scattering. In forward scattering,
there are only 2 foils states, the foil is either in front of the detector (foil in) or not infront of the detector (foil out). In back
scattering there are 3 foil states. Like in forward scattering there is both a foil in and foil out state, but in addition to this there
is also a foil thick state which is where a thicker foil is placed in front of the detector.</p>
<p>Vesuvio allows for measurements to be taken in different periods:</p>
<ul class="simple">
<li>2 period data is for only analysing forward scattering (2 foil states - foil out/foil in)</li>
<li>3 period data is for only analysing back scattering (3 foil states - foil out/foil in/ foil thick)</li>
<li>6 period data is for both backward and forward scattering (combination of forward and back scattering states)</li>
</ul>
<p>When loading data from .RAW files using this algorithm, several differencing modes can be used:</p>
<ul class="simple">
<li>Single Difference: Foil In minus Foil Out (available in both forward and back scattering)</li>
<li>Thick Difference : Foil Thick minus Foil Out (only available in back scattering - as forward scattering has no foil Thick)</li>
<li>Double Difference: Foil In minus Foil Out combined with Foil Thick minus Foil Out (only available in back scattering - as forward scattering has no foil Thick)</li>
</ul>
<p>From the above modes of operation on Vesuvio we can deduce a table of valid combinations of scattering and differencing for each period.
This is shown in the tables below:</p>
</div>
<div class="section" id="period">
<h3><a class="toc-backref" href="#id10">2 period</a><a class="headerlink" href="#period" title="Permalink to this headline">¶</a></h3>
<p>Gold foils only move in forward scattering, so only differencing in forward scattering is valid.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="24%" />
<col width="23%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Scattering</th>
<th class="head">Single Difference</th>
<th class="head">Thick Difference</th>
<th class="head">Double Difference</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Forward</td>
<td>Valid</td>
<td>NEVER</td>
<td>NEVER</td>
</tr>
<tr class="row-odd"><td>Back</td>
<td>Not Valid</td>
<td>Not Valid</td>
<td>Not Valid</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id11">3 period</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Gold foils only move in back scattering, so only differencing in back scattering is valid.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="24%" />
<col width="23%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Scattering</th>
<th class="head">Single Difference</th>
<th class="head">Thick Difference</th>
<th class="head">Double Difference</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Forward</td>
<td>Not Valid</td>
<td>NEVER</td>
<td>NEVER</td>
</tr>
<tr class="row-odd"><td>Back</td>
<td>Valid</td>
<td>Valid</td>
<td>Valid</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h3><a class="toc-backref" href="#id12">6 period</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>All are valid (with the exclusion of Thick Difference and Double difference in forward scattering - never valid)</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="24%" />
<col width="23%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Scattering</th>
<th class="head">Single Difference</th>
<th class="head">Thick Difference</th>
<th class="head">Double Difference</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Forward</td>
<td>Valid</td>
<td>NEVER</td>
<td>NEVER</td>
</tr>
<tr class="row-odd"><td>Back</td>
<td>Valid</td>
<td>Valid</td>
<td>Valid</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id13">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Load a single file &amp; spectrum with default difference:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="mi">135</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Sum runs on single spectrum with default difference:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188-14193&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="mi">135</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Sum runs on a range of spectra with default difference:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188-14193&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="s2">&quot;135-142&quot;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">8</span>
</pre></div>
</div>
<p><strong>Sum runs and spectra on a range of spectra with default difference:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188-14193&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="s2">&quot;135-142&quot;</span><span class="p">,</span> <span class="n">SumSpectra</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Sum runs and spectra on a range of spectra using single difference method:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">tof</span> <span class="o">=</span> <span class="n">LoadVesuvio</span><span class="p">(</span><span class="s2">&quot;14188-14193&quot;</span><span class="p">,</span><span class="n">SpectrumList</span><span class="o">=</span><span class="s2">&quot;135-142&quot;</span><span class="p">,</span> <span class="n">SumSpectra</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                  <span class="n">Mode</span><span class="o">=</span><span class="s2">&quot;SingleDifference&quot;</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Number of spectra: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tof</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Number</span> <span class="n">of</span> <span class="n">spectra</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/DataHandling/Raw.html">DataHandling\Raw</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id14">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/5498c57ddbfd1fd2cfdfe331c04b104ba5040e83/Framework/PythonInterface/plugins/algorithms/LoadVesuvio.py">LoadVesuvio.py</a> <em>(last modified: 2020-03-27)</em></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="LoadTOFRawNexus-v1.html" title="Previous Chapter: LoadTOFRawNexus v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; LoadTOFRawNexus v1</span>
    </a>
  </li>
  <li>
    <a href="LoadVisionElasticBS-v1.html" title="Next Chapter: LoadVisionElasticBS v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">LoadVisionEla... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2021-06-03.<br/>
    </p>
  </div>
</footer>
  </body>
</html>