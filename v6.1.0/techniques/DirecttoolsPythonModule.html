<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>directtools</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ISIS Powder Diffraction Scripts - GEM Reference" href="ISISPowder-GEM-v1.html" />
    <link rel="prev" title="Data reduction for ILL’s direct geometry instruments" href="DirectILL.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.1</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="directtools">
<span id="directtools-python-module"></span><h1><a class="reference internal" href="#module-directtools" title="directtools"><code class="xref py py-mod docutils literal"><span class="pre">directtools</span></code></a><a class="headerlink" href="#directtools" title="Permalink to this headline">¶</a></h1>
<p><a class="reference internal" href="#module-directtools" title="directtools"><code class="xref py py-mod docutils literal"><span class="pre">directtools</span></code></a> is a Python module for quickly plotting standardized <span class="math">\(S(Q,E)\)</span> color fill plots as well as line profiles (cuts) in constant <span class="math">\(Q\)</span> and <span class="math">\(E\)</span>. The module also provides a few utility functions for inspecting and manipulating the <span class="math">\(S(Q,E)\)</span> workspace.</p>
<p>For a general introduction on using <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> with Mantid, see <a class="reference internal" href="../plotting/index.html#plotting"><span class="std std-ref">this introduction</span></a></p>
<p>The input workspaces are expected to have some specific sample logs, namely <code class="docutils literal"><span class="pre">instrument.name</span></code>, <code class="docutils literal"><span class="pre">Ei</span></code>, <code class="docutils literal"><span class="pre">run_number</span></code>, <code class="docutils literal"><span class="pre">start_time</span></code>, <code class="docutils literal"><span class="pre">sample.temperature</span></code>.</p>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Examples of some key functionality of <a class="reference internal" href="#module-directtools" title="directtools"><code class="xref py py-mod docutils literal"><span class="pre">directtools</span></code></a> is presented below. For a full reference of all available function and classes, see the <a class="reference internal" href="#reference">Reference</a> section below.</p>
<div class="section" id="plotsofqw">
<h3><cite>plotSofQW</cite><a class="headerlink" href="#plotsofqw" title="Permalink to this headline">¶</a></h3>
<p>The default parameters for <a class="reference internal" href="#directtools.plotSofQW" title="directtools.plotSofQW"><code class="xref py py-func docutils literal"><span class="pre">directtools.plotSofQW()</span></code></a> give a view of the <span class="math">\(S(Q,E)\)</span> workspace around the elastic peak with sensible limits for the axes and intensity:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">directtools</span> <span class="kn">as</span> <span class="nn">dt</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">DirectILLCollectData</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;ILL/IN4/084447.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">DirectILLReduction</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">plotSofQW</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../techniques/DirecttoolsPythonModule-1.py">Source code</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-1.png">png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-1.hires.png">hires.png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-1.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/DirecttoolsPythonModule-1.png" src="../_images/DirecttoolsPythonModule-1.png" />
</div>
<p>The <span class="math">\(Q\)</span>, <span class="math">\(E\)</span> and intensity limits can be changed using the optional parameters. The utility functions <a class="reference internal" href="#directtools.validQ" title="directtools.validQ"><code class="xref py py-func docutils literal"><span class="pre">directtools.validQ()</span></code></a> and <a class="reference internal" href="#directtools.nanminmax" title="directtools.nanminmax"><code class="xref py py-func docutils literal"><span class="pre">directtools.nanminmax()</span></code></a> might be helpful when determining suitable ranges:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">directtools</span> <span class="kn">as</span> <span class="nn">dt</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">DirectILLCollectData</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;ILL/IN4/084447.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">DirectILLReduction</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)</span>

<span class="n">EMin</span> <span class="o">=</span> <span class="o">-</span><span class="mf">20.</span>
<span class="n">QMax</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">validQ</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">,</span> <span class="n">EMin</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">VMax</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">dt</span><span class="o">.</span><span class="n">nanminmax</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">plotSofQW</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">,</span> <span class="n">QMax</span><span class="o">=</span><span class="n">QMax</span><span class="p">,</span> <span class="n">EMin</span><span class="o">=</span><span class="n">EMin</span><span class="p">,</span> <span class="n">VMax</span><span class="o">=</span><span class="n">VMax</span><span class="p">)</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../techniques/DirecttoolsPythonModule-2.py">Source code</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-2.png">png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-2.hires.png">hires.png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/DirecttoolsPythonModule-2.png" src="../_images/DirecttoolsPythonModule-2.png" />
</div>
</div>
<div class="section" id="cuts-in">
<h3>Cuts in <span class="math">\(S(Q,E)\)</span><a class="headerlink" href="#cuts-in" title="Permalink to this headline">¶</a></h3>
<p>An important aspect of examining the <span class="math">\(S(Q,E)\)</span> workspace is to plot cuts at constant <span class="math">\(Q\)</span> and <span class="math">\(E\)</span>. This can be done by <a class="reference internal" href="#directtools.plotconstQ" title="directtools.plotconstQ"><code class="xref py py-func docutils literal"><span class="pre">directtools.plotconstQ()</span></code></a> and <a class="reference internal" href="#directtools.plotconstE" title="directtools.plotconstE"><code class="xref py py-func docutils literal"><span class="pre">directtools.plotconstE()</span></code></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">directtools</span> <span class="kn">as</span> <span class="nn">dt</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="n">DirectILLCollectData</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;ILL/IN4/084447.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">DirectILLReduction</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)</span>

<span class="n">Q</span> <span class="o">=</span> <span class="mf">2.</span>
<span class="n">dQ</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="c1"># plotconstQ produces a warning on some versions of numpy.</span>
<span class="c1"># The &quot;with&quot; statement catches this warning so that the automated</span>
<span class="c1"># builds don&#39;t fail.</span>
<span class="k">with</span> <span class="n">warnings</span><span class="o">.</span><span class="n">catch_warnings</span><span class="p">():</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">simplefilter</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="ne">UserWarning</span><span class="p">)</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">cuts</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">plotconstQ</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">,</span> <span class="n">Q</span><span class="p">,</span> <span class="n">dQ</span><span class="p">)</span>
    <span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../techniques/DirecttoolsPythonModule-3.py">Source code</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-3.png">png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-3.hires.png">hires.png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-3.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/DirecttoolsPythonModule-3.png" src="../_images/DirecttoolsPythonModule-3.png" />
</div>
<p>Any of the workspace, cut centre or cut width arguments can be a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> instead. This enables data comparison:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">directtools</span> <span class="kn">as</span> <span class="nn">dt</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">DirectILLCollectData</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;ILL/IN4/084447.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">DirectILLReduction</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)</span>

<span class="n">Q1</span> <span class="o">=</span> <span class="mf">2.</span>
<span class="n">Q2</span> <span class="o">=</span> <span class="mf">3.</span>
<span class="n">dQ</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span><span class="p">,</span> <span class="n">cuts</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">plotconstQ</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">Q1</span><span class="p">,</span> <span class="n">Q2</span><span class="p">],</span> <span class="n">dQ</span><span class="p">)</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../techniques/DirecttoolsPythonModule-4.py">Source code</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-4.png">png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-4.hires.png">hires.png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-4.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/DirecttoolsPythonModule-4.png" src="../_images/DirecttoolsPythonModule-4.png" />
</div>
<p>The <a class="reference internal" href="#directtools.plotconstQ" title="directtools.plotconstQ"><code class="xref py py-func docutils literal"><span class="pre">directtools.plotconstQ()</span></code></a> and <a class="reference internal" href="#directtools.plotconstE" title="directtools.plotconstE"><code class="xref py py-func docutils literal"><span class="pre">directtools.plotconstE()</span></code></a> functions use <a class="reference internal" href="#directtools.plotcuts" title="directtools.plotcuts"><code class="xref py py-func docutils literal"><span class="pre">directtools.plotcuts()</span></code></a> to do the actual line profiles and plotting. The profiles are made by the <a class="reference internal" href="../algorithms/LineProfile-v1.html#algm-lineprofile"><span class="std std-ref">LineProfile v1</span></a> algorithm, and all three plotting functions return a list of the produced line profile workspace names.</p>
<p>If a line profile already exists, it can be plotted using <a class="reference internal" href="#directtools.plotprofiles" title="directtools.plotprofiles"><code class="xref py py-func docutils literal"><span class="pre">directtools.plotprofiles()</span></code></a>. This also accepts either a single line profile workspace or a list of workspaces enabling comparison:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">directtools</span> <span class="kn">as</span> <span class="nn">dt</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">DirectILLCollectData</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;ILL/IN4/084447.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">DirectILLReduction</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)</span>

<span class="n">E1</span> <span class="o">=</span> <span class="mf">8.</span>
<span class="n">dE</span> <span class="o">=</span> <span class="mf">2.</span>
<span class="n">cut1</span> <span class="o">=</span> <span class="n">LineProfile</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">,</span> <span class="n">E1</span><span class="p">,</span> <span class="n">dE</span><span class="p">,</span> <span class="s1">&#39;Horizontal&#39;</span><span class="p">)</span>
<span class="n">label1</span> <span class="o">=</span> <span class="s1">&#39;At E = {} meV&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">E1</span><span class="p">)</span>
<span class="n">E2</span> <span class="o">=</span> <span class="n">E1</span> <span class="o">-</span> <span class="mf">4.</span>
<span class="n">cut2</span> <span class="o">=</span> <span class="n">LineProfile</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">,</span> <span class="n">E2</span><span class="p">,</span> <span class="n">dE</span><span class="p">,</span> <span class="s1">&#39;Horizontal&#39;</span><span class="p">)</span>
<span class="n">label2</span> <span class="o">=</span> <span class="s1">&#39;At E = {} meV&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">E2</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">plotprofiles</span><span class="p">([</span><span class="n">cut1</span><span class="p">,</span> <span class="n">cut2</span><span class="p">],</span> <span class="p">[</span><span class="n">label1</span><span class="p">,</span> <span class="n">label2</span><span class="p">],</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;m&#39;</span><span class="p">)</span>
<span class="n">axes</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../techniques/DirecttoolsPythonModule-5.py">Source code</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-5.png">png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-5.hires.png">hires.png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-5.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/DirecttoolsPythonModule-5.png" src="../_images/DirecttoolsPythonModule-5.png" />
</div>
</div>
<div class="section" id="plotting-density-of-states">
<h3>Plotting density of states<a class="headerlink" href="#plotting-density-of-states" title="Permalink to this headline">¶</a></h3>
<p>The density of states data calculated by <a class="reference internal" href="../algorithms/ComputeIncoherentDOS-v1.html#algm-computeincoherentdos"><span class="std std-ref">ComputeIncoherentDOS</span></a> can be plotted by the <a class="reference internal" href="#directtools.plotDOS" title="directtools.plotDOS"><code class="xref py py-func docutils literal"><span class="pre">directtools.plotDOS()</span></code></a> function. The function accepts a single workspace or a list of workspaces as its arguments. The example below shows a comparison of densities of states calculated from <span class="math">\(S(Q,E)\)</span> and <span class="math">\(S(2\theta,E)\)</span>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">directtools</span> <span class="kn">as</span> <span class="nn">dt</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">DirectILLCollectData</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;ILL/IN4/084447.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">DirectILLReduction</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;SofQW&#39;</span><span class="p">,</span> <span class="n">OutputSofThetaEnergyWorkspace</span><span class="o">=</span><span class="s1">&#39;SofTW&#39;</span><span class="p">)</span>
<span class="n">dosFromStw</span> <span class="o">=</span> <span class="n">ComputeIncoherentDOS</span><span class="p">(</span><span class="s1">&#39;SofTW&#39;</span><span class="p">)</span>
<span class="n">dosFromSqw</span> <span class="o">=</span> <span class="n">ComputeIncoherentDOS</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">plotDOS</span><span class="p">([</span><span class="n">dosFromStw</span><span class="p">,</span> <span class="n">dosFromSqw</span><span class="p">],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[</span><span class="sa">r</span><span class="s1">&#39;from $S(2\theta, E)$&#39;</span><span class="p">,</span> <span class="sa">r</span><span class="s1">&#39;from $S(Q,E)$&#39;</span><span class="p">])</span>
<span class="c1">#fig.show()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../techniques/DirecttoolsPythonModule-6.py">Source code</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-6.png">png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-6.hires.png">hires.png</a>, <a class="reference external" href="../techniques/DirecttoolsPythonModule-6.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/DirecttoolsPythonModule-6.png" src="../_images/DirecttoolsPythonModule-6.png" />
</div>
</div>
<div class="section" id="convenience-tools">
<h3>Convenience tools<a class="headerlink" href="#convenience-tools" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="#directtools.SampleLogs" title="directtools.SampleLogs"><code class="xref py py-class docutils literal"><span class="pre">directtools.SampleLogs</span></code></a> is a convenience class to import the sample logs of a workspace into a ‘struct’ like object in Python:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">directtools</span> <span class="k">as</span> <span class="nn">dt</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="k">import</span> <span class="o">*</span>

<span class="n">DirectILLCollectData</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;ILL/IN4/084447.nxs&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">)</span>
<span class="n">DirectILLReduction</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span> <span class="n">OutputWorkspace</span><span class="o">=</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)</span>

<span class="c1"># Works on any workspace, not just S(Q,E).</span>
<span class="n">logs</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">SampleLogs</span><span class="p">(</span><span class="s1">&#39;SofQW&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">logs</span><span class="o">.</span><span class="n">instrument</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">logs</span><span class="o">.</span><span class="n">run_number</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>IN4
84447
</pre></div>
</div>
</div>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<div class="section" id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="directtools.SampleLogs">
<em class="property">class </em><code class="descclassname">directtools.</code><code class="descname">SampleLogs</code><span class="sig-paren">(</span><em>workspace</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.SampleLogs" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience class to access the sample logs of <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a>.</p>
<p>Upon initialization, this class adds the sample logs as data attributes to itself. The
attributes get their names from the logs. Log names containing dots result in nested
log objects. Thus, if a workspace contains logs <code class="docutils literal"><span class="pre">'a'</span></code> and <code class="docutils literal"><span class="pre">'b.c'</span></code>:</p>
<div class="code highlight-default"><div class="highlight"><pre><span></span><span class="n">logs</span> <span class="o">=</span> <span class="n">SampleLogs</span><span class="p">(</span><span class="n">workspace</span><span class="p">)</span>
<span class="c1"># This is equivalent of calling workspace.run().getProperty(&#39;a&#39;).value</span>
<span class="n">logs</span><span class="o">.</span><span class="n">a</span>
<span class="c1"># This is equivalent of calling workspace.run().getProperty(&#39;b.c&#39;).value</span>
<span class="n">logs</span><span class="o">.</span><span class="n">b</span><span class="o">.</span><span class="n">c</span>
</pre></div>
</div>
<dl class="method">
<dt id="directtools.SampleLogs.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>workspace</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.SampleLogs.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize a <cite>SampleLogs</cite> object.
Transform sample log entries from workspace into attributes of this object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>workspace</strong> (<a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a>) – the workspace from which to extract the sample logs</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-directtools">
<span id="functions"></span><h3>Functions<a class="headerlink" href="#module-directtools" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="directtools.box2D">
<code class="descclassname">directtools.</code><code class="descname">box2D</code><span class="sig-paren">(</span><em>xs</em>, <em>vertAxis</em>, <em>horMin=-inf</em>, <em>horMax=inf</em>, <em>vertMin=-inf</em>, <em>vertMax=inf</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.box2D" title="Permalink to this definition">¶</a></dt>
<dd><p>Return slicing for a 2D numpy array limited by given min and max values.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xs</strong> (a 2D <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.20)"><code class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></code></a>) – the 2D X data of a workspace from <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace.extractX" title="mantid.api.MatrixWorkspace.extractX"><code class="xref py py-func docutils literal"><span class="pre">mantid.api.MatrixWorkspace.extractX()</span></code></a></li>
<li><strong>vertAxis</strong> (a 1D <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.20)"><code class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></code></a>) – the vertical axis values of a workspace</li>
<li><strong>horMin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the left edge of the box</li>
<li><strong>horMax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the right edge of the box</li>
<li><strong>vertMin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the bottom edge of the box</li>
<li><strong>vertMax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the top edge of the box</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a tuple of two <a class="reference external" href="https://docs.python.org/3/library/functions.html#slice" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">slice</span></code></a> objects, the first one for vertical dimension, the second for horizontal.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.defaultrcparams">
<code class="descclassname">directtools.</code><code class="descname">defaultrcparams</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#directtools.defaultrcparams" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary of directtools default matplotlib rc parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">dict</span></code></a> of default <code class="xref py py-mod docutils literal"><span class="pre">matplotlib</span></code> rc parameters needed by <a class="reference internal" href="#module-directtools" title="directtools"><code class="xref py py-mod docutils literal"><span class="pre">directtools</span></code></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.dynamicsusceptibility">
<code class="descclassname">directtools.</code><code class="descname">dynamicsusceptibility</code><span class="sig-paren">(</span><em>workspace</em>, <em>temperature</em>, <em>outputName=None</em>, <em>zeroEnergyEpsilon=1e-06</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.dynamicsusceptibility" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert <span class="math">\(S(Q,E)\)</span> to susceptibility <span class="math">\(\chi''(Q,E)\)</span>.</p>
<ol class="arabic simple">
<li>If the X units are not in DeltaE, the workspace is transposed</li>
<li>The Y data in <em>workspace</em> is multiplied by <span class="math">\(1 - e^{\Delta E / (kT)}\)</span></li>
<li>Y data in the bin closest to 0 meV and within -<em>zeroEnergyEpsilon</em> &lt; <span class="math">\(\Delta E\)</span> &lt; <em>zeroEnergyEpsilon</em> is set to 0</li>
<li>If the input was transposed, transpose the output as well</li>
</ol>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workspace</strong> (<a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a>) – a <span class="math">\(S(Q,E)\)</span> workspace to convert</li>
<li><strong>temperature</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – temperature in Kelvin</li>
<li><strong>outputName</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a><em> or </em><a class="reference internal" href="../api/python/mantid/kernel/Direction.html#mantid.kernel.Direction.None" title="mantid.kernel.Direction.None"><em>None</em></a>) – name of the output workspace. If <code class="xref py py-class docutils literal"><span class="pre">None</span></code>, the output will be given some generated name.</li>
<li><strong>zeroEnergyEpsilon</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – if a bin center is within this value from 0, the bin’s value is set to zero.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a> containing <span class="math">\(\chi''(Q,E)\)</span></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.nanminmax">
<code class="descclassname">directtools.</code><code class="descname">nanminmax</code><span class="sig-paren">(</span><em>workspace</em>, <em>horMin=-inf</em>, <em>horMax=inf</em>, <em>vertMin=-inf</em>, <em>vertMax=inf</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.nanminmax" title="Permalink to this definition">¶</a></dt>
<dd><p>Return min and max intensities of a workspace ignoring NaNs.</p>
<p>The search region can be limited by <em>horMin</em>, <em>horMax</em>, <em>vertMin</em> and <em>vertMax</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workspace</strong> (<a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a>) – a workspace</li>
<li><strong>horMin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the left edge of the search region</li>
<li><strong>horMax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the right edge of the search region</li>
<li><strong>vertMin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the bottom edge of the search region</li>
<li><strong>vertMax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – the top edge of the search region</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a tuple containing the minimum and maximum</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.plotconstE">
<code class="descclassname">directtools.</code><code class="descname">plotconstE</code><span class="sig-paren">(</span><em>workspaces</em>, <em>E</em>, <em>dE</em>, <em>style='l'</em>, <em>keepCutWorkspaces=True</em>, <em>xscale='linear'</em>, <em>yscale='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.plotconstE" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot line profiles at constant energy transfer from <span class="math">\(S(Q,E)\)</span> workspace.</p>
<p>Creates cut workspaces using <a class="reference internal" href="../algorithms/LineProfile-v1.html#algm-lineprofile"><span class="std std-ref">LineProfile v1</span></a>, then plots the cuts. A list of workspaces,
constant energy transfers, or cut widths, or any combination thereof can be given as parameters.</p>
<p>The last entry in the returned tuple is a list of cut workspace names. This will be an empty list
is <em>keeCutWorkspaces</em> is set to <cite>False</cite> as the workspaces will not appear in the ADS.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workspaces</strong> (str, <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a> or a list thereof) – a single <span class="math">\(S(Q,E)\)</span> workspace or list of workspaces to cut</li>
<li><strong>E</strong> (float or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of floats) – a constant energy transfer or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> thereof</li>
<li><strong>dE</strong> (float or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of floats) – width of the cut or a list of widths</li>
<li><strong>style</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – plot style: ‘l’ for lines, ‘m’ for markers, ‘lm’ for both</li>
<li><strong>keepCutWorkspaces</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – whether or not keep the cut workspaces in the ADS</li>
<li><strong>xscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – horizontal axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
<li><strong>yscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – vertical axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A tuple of (<code class="xref py py-class docutils literal"><span class="pre">matplotlib.Figure</span></code>, <code class="xref py py-class docutils literal"><span class="pre">matplotlib.Axes</span></code>, a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of names)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.plotconstQ">
<code class="descclassname">directtools.</code><code class="descname">plotconstQ</code><span class="sig-paren">(</span><em>workspaces</em>, <em>Q</em>, <em>dQ</em>, <em>style='l'</em>, <em>keepCutWorkspaces=True</em>, <em>xscale='linear'</em>, <em>yscale='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.plotconstQ" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot line profiles at constant momentum transfer from <span class="math">\(S(Q,E)\)</span> workspace.</p>
<p>Creates cut workspaces using <a class="reference internal" href="../algorithms/LineProfile-v1.html#algm-lineprofile"><span class="std std-ref">LineProfile v1</span></a>, then plots the cuts. A list of workspaces,
constant momentum transfers, or cut widths, or any combination thereof can be given as parameters.</p>
<p>The last entry in the returned tuple is a list of cut workspace names. This will be an empty list
is <em>keeCutWorkspaces</em> is set to <cite>False</cite> as the workspaces will not appear in the ADS.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workspaces</strong> (str, <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a> or a list thereof) – a single <span class="math">\(S(Q,E)\)</span> workspace or list of workspaces to cut</li>
<li><strong>Q</strong> (float or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of floats) – a constant momentum transfer or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> thereof</li>
<li><strong>dQ</strong> (float or <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of floats) – width of the cut or a list of widths</li>
<li><strong>style</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – plot style: ‘l’ for lines, ‘m’ for markers, ‘lm’ for both</li>
<li><strong>keepCutWorkspaces</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – whether or not keep the cut workspaces in the ADS</li>
<li><strong>xscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – horizontal axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
<li><strong>yscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – vertical axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A tuple of (<code class="xref py py-class docutils literal"><span class="pre">matplotlib.Figure</span></code>, <code class="xref py py-class docutils literal"><span class="pre">matplotlib.Axes</span></code>, a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of names)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.plotcuts">
<code class="descclassname">directtools.</code><code class="descname">plotcuts</code><span class="sig-paren">(</span><em>direction</em>, <em>workspaces</em>, <em>cuts</em>, <em>widths</em>, <em>quantity</em>, <em>unit</em>, <em>style='l'</em>, <em>keepCutWorkspaces=True</em>, <em>xscale='linear'</em>, <em>yscale='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.plotcuts" title="Permalink to this definition">¶</a></dt>
<dd><p>Cut and plot multiple line profiles.</p>
<p>Creates cut workspaces using <a class="reference internal" href="../algorithms/LineProfile-v1.html#algm-lineprofile"><span class="std std-ref">LineProfile v1</span></a>, then plots the cuts. A list of workspaces,
cut centres, or cut widths, or any combination thereof can be given as parameters.</p>
<p>The last entry in the returned tuple is a list of cut workspace names. This will be an empty list
is <em>keeCutWorkspaces</em> is set to <cite>False</cite> as the workspaces will not appear in the ADS.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>direction</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – Cut direction. Only <code class="docutils literal"><span class="pre">'Horizontal'</span></code> and <code class="docutils literal"><span class="pre">'Vertical'</span></code> are accepted</li>
<li><strong>workspaces</strong> (str, <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a> or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> thereof) – a single workspace or a list thereof</li>
<li><strong>cuts</strong> (float or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> thereof) – the center of the cut or a list of centers</li>
<li><strong>widths</strong> (float or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> thereof) – the width of the cut or a list of widths</li>
<li><strong>quantity</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – name of the physical quantity along which the cut is made, used for legend label</li>
<li><strong>unit</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – unit of <em>quantity</em></li>
<li><strong>style</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – plot style: ‘l’ for lines, ‘m’ for markers, ‘lm’ for both</li>
<li><strong>keepCutWorkspaces</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.9)"><em>bool</em></a>) – whether or not keep the cut workspaces in the ADS</li>
<li><strong>xscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – horizontal axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
<li><strong>yscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – vertical axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A tuple of (<code class="xref py py-class docutils literal"><span class="pre">matplotlib.Figure</span></code>, <code class="xref py py-class docutils literal"><span class="pre">matplotlib.Axes</span></code>, a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of names)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.plotprofiles">
<code class="descclassname">directtools.</code><code class="descname">plotprofiles</code><span class="sig-paren">(</span><em>workspaces</em>, <em>labels=None</em>, <em>style='l'</em>, <em>xscale='linear'</em>, <em>yscale='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.plotprofiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot line profile workspaces.</p>
<p>Plots the given single histogram cut workspaces.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workspaces</strong> (str, <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a> or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> thereof) – a single workspace or a list thereof</li>
<li><strong>labels</strong> (str, a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of strings or None) – a list of cut labels for the plot legend</li>
<li><strong>style</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – plot style: ‘l’ for lines, ‘m’ for markers, ‘lm’ for both</li>
<li><strong>xscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – horizontal axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
<li><strong>yscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – vertical axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a tuple of (<code class="xref py py-mod docutils literal"><span class="pre">matplotlib.Figure</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">matplotlib.Axes</span></code>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.plotDOS">
<code class="descclassname">directtools.</code><code class="descname">plotDOS</code><span class="sig-paren">(</span><em>workspaces</em>, <em>labels=None</em>, <em>style='l'</em>, <em>xscale='linear'</em>, <em>yscale='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.plotDOS" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot density of state workspaces.</p>
<p>Plots the given DOS workspaces.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workspaces</strong> (str, <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a> or a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> thereof) – a single workspace or a list thereof</li>
<li><strong>labels</strong> (str, a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal"><span class="pre">list</span></code></a> of strings or None) – a list of labels for the plot legend</li>
<li><strong>style</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – plot style: ‘l’ for lines, ‘m’ for markers, ‘lm’ for both</li>
<li><strong>xscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – horizontal axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
<li><strong>yscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – vertical axis scaling: ‘linear’, ‘log’, ‘symlog’, ‘logit’</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a tuple of (<code class="xref py py-mod docutils literal"><span class="pre">matplotlib.Figure</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">matplotlib.Axes</span></code>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.plotSofQW">
<code class="descclassname">directtools.</code><code class="descname">plotSofQW</code><span class="sig-paren">(</span><em>workspace</em>, <em>QMin=0.0</em>, <em>QMax=None</em>, <em>EMin=None</em>, <em>EMax=None</em>, <em>VMin=0.0</em>, <em>VMax=None</em>, <em>colormap='jet'</em>, <em>colorscale='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.plotSofQW" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot a 2D <span class="math">\(S(Q,E)\)</span> workspace.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workspace</strong> (str or <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a>) – a workspace to plot</li>
<li><strong>QMin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference internal" href="../api/python/mantid/kernel/Direction.html#mantid.kernel.Direction.None" title="mantid.kernel.Direction.None"><em>None</em></a>) – minimum <span class="math">\(Q\)</span> to include in the plot</li>
<li><strong>QMax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference internal" href="../api/python/mantid/kernel/Direction.html#mantid.kernel.Direction.None" title="mantid.kernel.Direction.None"><em>None</em></a>) – maximum <span class="math">\(Q\)</span> to include in the plot</li>
<li><strong>EMin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference internal" href="../api/python/mantid/kernel/Direction.html#mantid.kernel.Direction.None" title="mantid.kernel.Direction.None"><em>None</em></a>) – minimum energy transfer to include in the plot</li>
<li><strong>EMax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference internal" href="../api/python/mantid/kernel/Direction.html#mantid.kernel.Direction.None" title="mantid.kernel.Direction.None"><em>None</em></a>) – maximum energy transfer to include in the plot</li>
<li><strong>VMin</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference internal" href="../api/python/mantid/kernel/Direction.html#mantid.kernel.Direction.None" title="mantid.kernel.Direction.None"><em>None</em></a>) – minimum intensity to show on the color bar</li>
<li><strong>VMax</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a><em> or </em><a class="reference internal" href="../api/python/mantid/kernel/Direction.html#mantid.kernel.Direction.None" title="mantid.kernel.Direction.None"><em>None</em></a>) – maximum intensity to show on the color bar</li>
<li><strong>colormap</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – name of the colormap</li>
<li><strong>colorscale</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – color map scaling: ‘linear’, ‘log’</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a tuple of (<code class="xref py py-mod docutils literal"><span class="pre">matplotlib.Figure</span></code>, <code class="xref py py-mod docutils literal"><span class="pre">matplotlib.Axes</span></code>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.subplots">
<code class="descclassname">directtools.</code><code class="descname">subplots</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.subplots" title="Permalink to this definition">¶</a></dt>
<dd><p>Return matplotlib figure and axes with Mantid projection.</p>
<p>The returned figure and axes have the proper projection to plot Mantid workspaces directly.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>kwargs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – keyword arguments that are directly passed to <a class="reference external" href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplots.html#matplotlib.pyplot.subplots" title="(in Matplotlib v3.4.1)"><code class="xref py py-func docutils literal"><span class="pre">matplotlib.pyplot.subplots()</span></code></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a tuple of (<code class="xref py py-class docutils literal"><span class="pre">matplotlib.Figure</span></code>, <code class="xref py py-class docutils literal"><span class="pre">matplotlib.Axes</span></code>)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.validQ">
<code class="descclassname">directtools.</code><code class="descname">validQ</code><span class="sig-paren">(</span><em>workspace</em>, <em>E=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.validQ" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <span class="math">\(Q\)</span> range at given energy transfer where <span class="math">\(S(Q,E)\)</span> is defined.</p>
<p><span class="math">\(S(Q,E)\)</span> is undefined when Y = NaN</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>workspace</strong> (str or <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a>) – A <span class="math">\(S(Q,E)\)</span> workspace to investigate</li>
<li><strong>E</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.9)"><em>float</em></a>) – energy transfer at which to evaluate the range</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a tuple of (<span class="math">\(Q_{min}\)</span>, <span class="math">\(Q_{max}\)</span>)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="directtools.wsreport">
<code class="descclassname">directtools.</code><code class="descname">wsreport</code><span class="sig-paren">(</span><em>workspace</em><span class="sig-paren">)</span><a class="headerlink" href="#directtools.wsreport" title="Permalink to this definition">¶</a></dt>
<dd><p>Print some useful information from sample logs.</p>
<p>The logs are expected to contain some ILL specific fields.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>workspace</strong> (str or <a class="reference internal" href="../api/python/mantid/api/MatrixWorkspace.html#mantid.api.MatrixWorkspace" title="mantid.api.MatrixWorkspace"><code class="xref py py-class docutils literal"><span class="pre">mantid.api.MatrixWorkspace</span></code></a>) – a workspace from which to extract the logs</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Category</strong>: <a class="reference external" href="categories/Techniques.html">Techniques</a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="DirectILL.html" title="Previous Chapter: Data reduction for ILL’s direct geometry instruments"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Data reductio...</span>
    </a>
  </li>
  <li>
    <a href="ISISPowder-GEM-v1.html" title="Next Chapter: ISIS Powder Diffraction Scripts - GEM Reference"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">ISIS Powder D... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
      Last updated on 2021-06-03.<br/>
    </p>
  </div>
</footer>
  </body>
</html>