<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Direct Inelastic Changes</title>
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '6.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Indirect Inelastic Changes" href="indirect_inelastic.html" />
    <link rel="prev" title="UI &amp; Usability Changes" href="ui.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.3</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="direct-inelastic-changes">
<h1>Direct Inelastic Changes<a class="headerlink" href="#direct-inelastic-changes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#improvements" id="id1">Improvements</a></li>
<li><a class="reference internal" href="#pychop" id="id2">PyChop</a></li>
<li><a class="reference internal" href="#crystal-field" id="id3">Crystal Field</a></li>
<li><a class="reference internal" href="#mlz-toftof" id="id4">MLZ &amp; TOFTOF</a></li>
</ul>
</div>
<div class="section" id="improvements">
<h2><a class="toc-backref" href="#id1">Improvements</a><a class="headerlink" href="#improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../algorithms/MDNormDirectSC-v1.html#algm-mdnormdirectsc"><span class="std std-ref">MDNormDirectSC</span></a> has an option to skip safety checks. This improves the speed when acting on workspace groups.</li>
<li>The <a class="reference internal" href="../../algorithms/ExportSpectraMask-v1.html#algm-exportspectramask"><span class="std std-ref">ExportSpectraMask</span></a> algorithm was added to Mantid, along with documentation, unit tests and a Python GUI.
The algorithm exports a list of masked spectra and the list can be saved as a single ISIS <em>.msk</em> file.
The export mask procedure is often used by instrument scientists in ISIS, and they had to initialize qtiGenie to do this operation before these changes.</li>
<li><a class="reference internal" href="../../algorithms/GetEiMonDet-v3.html#algm-geteimondet"><span class="std std-ref">GetEiMonDet</span></a> has had a complete rewrite. Version 2 utilises the elastic peak position data generated by <a class="reference internal" href="../../algorithms/FindEPP-v2.html#algm-findepp"><span class="std std-ref">FindEPP</span></a>. The detectors of interest are specified by their indices instead of their distance from the sample. The revised algorithm is able to deal with cases where neutrons arrive at the detectors in a later time frame.</li>
<li><a class="reference internal" href="../../algorithms/MaskDetectors-v1.html#algm-maskdetectors"><span class="std std-ref">MaskDetectors</span></a> has been modified to work on grouped spectra. If a detector of the workspace is masked then the relevant spectra of the target workspace become masked(zero). Masks defined by <em>.xml</em> files, produced by <a class="reference internal" href="../../algorithms/SaveMask-v1.html#algm-savemask"><span class="std std-ref">SaveMask</span></a> algorithm,  can be applied to workspaces containing mapped spectra that has been obtained from ISIS instruments.</li>
<li><a class="reference internal" href="../../algorithms/LoadMask-v1.html#algm-loadmask"><span class="std std-ref">LoadMask</span></a> was modified to accept a spectra mask and a spectra-detector map.
This allows the use of old legacy <em>.msk</em> files to generate a masked workspace, use old spectra masks on workspaces with different groupings and spectra-detector maps.</li>
<li>The algorithm <a class="reference internal" href="../../algorithms/MagFormFactorCorrection-v1.html#algm-magformfactorcorrection"><span class="std std-ref">MagFormFactorCorrection</span></a> will scale an input workspace by 1/<span class="math">\(|F(Q)|^2\)</span>, where <span class="math">\(F(Q)\)</span> is the magnetic form factor for a specified magnetic ion.</li>
</ul>
</div>
<div class="section" id="pychop">
<h2><a class="toc-backref" href="#id2">PyChop</a><a class="headerlink" href="#pychop" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="../../interfaces/direct/PyChop.html#pychop"><span class="std std-ref">PyChop</span></a> has been fixed and updated with a new Python commandline interface and a new GUI. Flux and resolution calculations for LET are now fully integrated into a single interface, and there is also support for calculating the resolution, flux and allowed <span class="math">\(E_i\)</span> in multi-rep mode.</li>
</ul>
</div>
<div class="section" id="crystal-field">
<h2><a class="toc-backref" href="#id3">Crystal Field</a><a class="headerlink" href="#crystal-field" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A fitting function was added (<a class="reference internal" href="../../fitting/fitfunctions/CrystalFieldMultiSpectrum.html#func-crystalfieldmultispectrum"><span class="std std-ref">CrystalFieldMultiSpectrum</span></a>) that fits crystal field parameters to multiple spectra simultaneously.</li>
<li>A preliminary python interface to the Crystal Field functionality was added (<a class="reference internal" href="../../interfaces/direct/Crystal Field Python Interface.html#crystal-field-python-interface"><span class="std std-ref">Crystal Field Python Interface</span></a>). It includes classes for defining a problem, performing a fit and basic plotting facilities.</li>
</ul>
</div>
<div class="section" id="mlz-toftof">
<h2><a class="toc-backref" href="#id4">MLZ &amp; TOFTOF</a><a class="headerlink" href="#mlz-toftof" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>A workflow gui for TOFTOF data reduction (#17075).
The gui is accessible through the <code class="docutils literal"><span class="pre">Interfaces</span> <span class="pre">/</span> <span class="pre">Direct</span> <span class="pre">/</span> <span class="pre">DGS</span> <span class="pre">Reduction</span></code> menu.
The first time the user is presented with a choice of facilities and instruments -
choose MLZ / TOFTOF. The choice can be changed later from (any) reduction gui by
<code class="docutils literal"><span class="pre">Tools</span> <span class="pre">/</span> <span class="pre">Change</span> <span class="pre">instrument</span> <span class="pre">...</span></code>.</li>
</ul>
<p><a class="reference external" href="http://github.com/mantidproject/mantid/pulls?q=is%3Apr+milestone%3A%22Release+3.8%22+is%3Amerged+label%3A%22Component%3A+Direct+Inelastic%22">Full list of changes on GitHub</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="ui.html" title="Previous Chapter: UI & Usability Changes"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; UI & Usabilit...</span>
    </a>
  </li>
  <li>
    <a href="indirect_inelastic.html" title="Next Chapter: Indirect Inelastic Changes"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Indirect Inel... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>