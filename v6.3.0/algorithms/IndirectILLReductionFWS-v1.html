<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>IndirectILLReductionFWS v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="IndirectILLReductionQENS v1" href="IndirectILLReductionQENS-v1.html" />
    <link rel="prev" title="IndirectILLReductionDIFF v1" href="IndirectILLReductionDIFF-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.3</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="indirectillreductionfws-v1">
<span id="algm-indirectillreductionfws"></span><span id="algm-indirectillreductionfws-v1"></span><h1>IndirectILLReductionFWS v1<a class="headerlink" href="#indirectillreductionfws-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id1">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/IndirectILLReductionFWS-v1_dlg.png"><img alt="../_images/IndirectILLReductionFWS-v1_dlg.png" class="screenshot" src="../_images/IndirectILLReductionFWS-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>IndirectILLReductionFWS</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id2">Summary</a><ul>
<li><a class="reference internal" href="#see-also" id="id3">See Also</a></li>
</ul>
</li>
<li><a class="reference internal" href="#properties" id="id4">Properties</a></li>
<li><a class="reference internal" href="#description" id="id5">Description</a></li>
<li><a class="reference internal" href="#input" id="id6">Input</a></li>
<li><a class="reference internal" href="#output" id="id7">Output</a></li>
<li><a class="reference internal" href="#workflow" id="id8">Workflow</a></li>
<li><a class="reference internal" href="#usage" id="id9">Usage</a></li>
<li><a class="reference internal" href="#source" id="id10">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id2">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Performs fixed-window scan (FWS) multiple file reduction (both elastic and inelastic) for ILL indirect geometry data, instrument IN16B.</p>
<div class="section" id="see-also">
<h3><a class="toc-backref" href="#id3">See Also</a><a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<p><a class="reference internal" href="IndirectILLReductionQENS-v1.html#algm-indirectillreductionqens"><span class="std std-ref">IndirectILLReductionQENS</span></a>, <a class="reference internal" href="IndirectILLEnergyTransfer-v1.html#algm-indirectillenergytransfer"><span class="std std-ref">IndirectILLEnergyTransfer</span></a></p>
</div>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id4">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="2%" />
<col width="6%" />
<col width="6%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Run</td>
<td>Input</td>
<td>list of str lists</td>
<td><em>Mandatory</em></td>
<td>Run number(s) of sample run(s). Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>BackgroundRun</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Run number(s) of background (empty can) run(s). Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-even"><td>CalibrationRun</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Run number(s) of vanadium calibration run(s). Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-odd"><td>CalibrationBackgroundRun</td>
<td>Input</td>
<td>list of str lists</td>
<td>&#160;</td>
<td>Run number(s) of background (empty can) run(s) for vanadium run. Allowed values: [‘nxs’]</td>
</tr>
<tr class="row-even"><td>Observable</td>
<td>Input</td>
<td>string</td>
<td>sample.temperature</td>
<td>Scanning observable, a Sample Log entry</td>
</tr>
<tr class="row-odd"><td>SortXAxis</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether or not to sort the x-axis</td>
</tr>
<tr class="row-even"><td>BackgroundScalingFactor</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Scaling factor for background subtraction</td>
</tr>
<tr class="row-odd"><td>CalibrationBackgroundScalingFactor</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Scaling factor for background subtraction for vanadium calibration</td>
</tr>
<tr class="row-even"><td>BackgroundOption</td>
<td>Input</td>
<td>string</td>
<td>Sum</td>
<td>Whether to sum or interpolate the background runs. Allowed values: [‘Sum’, ‘Interpolate’]</td>
</tr>
<tr class="row-odd"><td>CalibrationOption</td>
<td>Input</td>
<td>string</td>
<td>Sum</td>
<td>Whether to sum or interpolate the calibration runs. Allowed values: [‘Sum’, ‘Interpolate’]</td>
</tr>
<tr class="row-even"><td>CalibrationBackgroundOption</td>
<td>Input</td>
<td>string</td>
<td>Sum</td>
<td>Whether to sum or interpolate the background run for calibration runs. Allowed values: [‘Sum’, ‘Interpolate’]</td>
</tr>
<tr class="row-odd"><td>MapFile</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Filename of the detector grouping map file to use.  By default all the pixels will be summed per each tube.  Use .map or .xml file (see GroupDetectors documentation) only if different range is needed for each tube. Allowed values: [‘map’, ‘xml’]</td>
</tr>
<tr class="row-even"><td>ManualPSDIntegrationRange</td>
<td>Input</td>
<td>long list</td>
<td>1,128</td>
<td>Integration range of vertical pixels in each PSD tube.  By default all the pixels will be summed per each tube.  Use this option if the same range (other than default) is needed for all the tubes.</td>
</tr>
<tr class="row-odd"><td>Analyser</td>
<td>Input</td>
<td>string</td>
<td>silicon</td>
<td>Analyser crystal. Allowed values: [‘silicon’]</td>
</tr>
<tr class="row-even"><td>Reflection</td>
<td>Input</td>
<td>string</td>
<td>111</td>
<td>Analyser reflection. Allowed values: [‘111’, ‘311’]</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td>WorkspaceGroup</td>
<td><em>Mandatory</em></td>
<td>Output workspace group</td>
</tr>
<tr class="row-even"><td>SpectrumAxis</td>
<td>Input</td>
<td>string</td>
<td>SpectrumNumber</td>
<td>The spectrum axis conversion target. Allowed values: [‘SpectrumNumber’, ‘2Theta’, ‘Q’, ‘Q2’]</td>
</tr>
<tr class="row-odd"><td>DiscardSingleDetectors</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Whether to discard the spectra of single detectors.</td>
</tr>
<tr class="row-even"><td>ManualInelasticPeakChannels</td>
<td>Input</td>
<td>long list</td>
<td>-1,-1</td>
<td>The channel indices for the inelastic peak positions in the beginning and in the end of the spectra; by default the maxima of the monitor spectrum will be used for this. The intensities will be integrated symmetrically around each peak.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id5">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>This algorithm performs Fixed Window Scan (FWS) data reduction (both Elastic and Inelastic) for IN16B indirect geometry instrument at ILL.
It uses internally the <a class="reference internal" href="IndirectILLEnergyTransfer-v1.html#algm-indirectillenergytransfer"><span class="std std-ref">IndirectILLEnergyTransfer</span></a> algorithm.</p>
</div>
<div class="section" id="input">
<h2><a class="toc-backref" href="#id6">Input</a><a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h2>
<p>Multiple files following the syntax given in
<a class="reference internal" href="../api/python/mantid/api/MultipleFileProperty.html#mantid.api.MultipleFileProperty" title="mantid.api.MultipleFileProperty"><code class="xref py py-obj docutils literal"><span class="pre">MultipleFileProperty</span></code></a>.</p>
</div>
<div class="section" id="output">
<h2><a class="toc-backref" href="#id7">Output</a><a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<p>A <a class="reference internal" href="../concepts/WorkspaceGroup.html#workspacegroup"><span class="std std-ref">WorkspaceGroup</span></a> that contains as many workspaces as many distinct Doppler’s energy values were present in input files list (including E=0 for EFWS).
Each Workspace in the group will have the given observable as the x-axis and as many bins, as many files were given corresponding to the same energy.
Y-axis will be detector angle, and the values would be the intensities integrated over the whole spectra (for EFWS) or over the two peaks
(symmetric around each peak) at the beginning and the end of the spectra (for IFWS).
Scanning observable can be any numeric or time-stamp-like string parameter.
See <code class="docutils literal"><span class="pre">sample.*</span></code> or e.g. <code class="docutils literal"><span class="pre">start_time</span></code> in Sample Logs.
<code class="docutils literal"><span class="pre">BackgroundRun</span></code> s, <code class="docutils literal"><span class="pre">CalibrationBackgroundRun</span></code> s and <code class="docutils literal"><span class="pre">CalibrationRun</span></code> s will be averaged (default) or interpolated over all the observable points according to the option.
Interpolation is provided by <a class="reference internal" href="SplineInterpolation-v1.html#algm-splineinterpolation"><span class="std std-ref">SplineInterpolation</span></a>, which does cubic spline (or linear for 2 points only) interpolation inside the range and
flat extrapolation beyond the range. For the moment it does not give errors on interpolated results.
Interpolated subtraction or calibration is recommended only if there is a strong dependence on the observable and many measured points in the data to be interpolated.</p>
</div>
<div class="section" id="workflow">
<h2><a class="toc-backref" href="#id8">Workflow</a><a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h2>
<img alt="../_images/IndirectILLReductionFWS-v1_wkflw.svg" src="../_images/IndirectILLReductionFWS-v1_wkflw.svg" /></div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id9">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example: EFWS+IFWS</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ws</span> <span class="o">=</span> <span class="n">IndirectILLReductionFWS</span><span class="p">(</span><span class="n">Run</span><span class="o">=</span><span class="s1">&#39;ILL/IN16B/083072:083077.nxs&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Result is now a WorkspaceGroup, which has </span><span class="si">{:d}</span><span class="s2"> workspaces, one per each energy value&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="n">ws</span><span class="o">.</span><span class="n">getNumberOfEntries</span><span class="p">()))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;first item, called </span><span class="si">{}</span><span class="s2"> corresponds to energy value of </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">(),</span><span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;it has </span><span class="si">{:d}</span><span class="s2"> histograms and </span><span class="si">{:d}</span><span class="s2"> bins, one per each temperature&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
<span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">getNumberHistograms</span><span class="p">(),</span><span class="n">ws</span><span class="o">.</span><span class="n">getItem</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">blocksize</span><span class="p">()))</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>Result is now a WorkspaceGroup, which has 3 workspaces, one per each energy value
first item, called ws_0.0_red corresponds to energy value of 0.0
it has 18 histograms and 2 bins, one per each temperature
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Workflow/MIDAS.html">Workflow\MIDAS</a> | <a class="reference external" href="categories/Workflow/Inelastic.html">Workflow\Inelastic</a> | <a class="reference external" href="categories/Inelastic/Indirect.html">Inelastic\Indirect</a> | <a class="reference external" href="categories/Inelastic/Reduction.html">Inelastic\Reduction</a> | <a class="reference external" href="categories/ILL/Indirect.html">ILL\Indirect</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id10">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c7a0e2338713fd338893c4f24ed76cd968f52b11/Framework/PythonInterface/plugins/algorithms/WorkflowAlgorithms/IndirectILLReductionFWS.py">IndirectILLReductionFWS.py</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="IndirectILLReductionDIFF-v1.html" title="Previous Chapter: IndirectILLReductionDIFF v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; IndirectILLRe...</span>
    </a>
  </li>
  <li>
    <a href="IndirectILLReductionQENS-v1.html" title="Next Chapter: IndirectILLReductionQENS v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">IndirectILLRe... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>