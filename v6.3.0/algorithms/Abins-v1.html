<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Abins v1</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AbsorptionCorrection v1" href="AbsorptionCorrection-v1.html" />
    <link rel="prev" title="Algorithms" href="index.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.3</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="abins-v1">
<span id="algm-abins"></span><span id="algm-abins-v1"></span><h1>Abins v1<a class="headerlink" href="#abins-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="id3">
<span id="index-0"></span><a class="screenshot reference internal image-reference" href="../_images/Abins-v1_dlg.png"><img alt="../_images/Abins-v1_dlg.png" class="screenshot" src="../_images/Abins-v1_dlg.png" style="width: 349px;" /></a>
<p class="caption"><span class="caption-text"><strong>Abins</strong> dialog.</span></p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#credits" id="id4">Credits</a></li>
<li><a class="reference internal" href="#summary" id="id5">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id6">Properties</a></li>
<li><a class="reference internal" href="#description" id="id7">Description</a></li>
<li><a class="reference internal" href="#usage" id="id8">Usage</a></li>
<li><a class="reference internal" href="#source" id="id9">Source</a></li>
<li><a class="reference internal" href="#references" id="id10">References</a></li>
</ul>
</div>
<div class="section" id="credits">
<h2><a class="toc-backref" href="#id4">Credits</a><a class="headerlink" href="#credits" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Author:</dt>
<dd>Krzysztof Dymkowski, Adam Jackson</dd>
<dt>Contributors:</dt>
<dd>Sanghamitra Mukhopadhyay, Elliot Oram, Leonardo Bernasconi, Leandro Liborio</dd>
</dl>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id5">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculates inelastic neutron scattering against 1-D ω axis.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id6">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="2%" />
<col width="7%" />
<col width="3%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>VibrationalOrPhononFile</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>File with the data from a vibrational or phonon calculation. Allowed values: [‘phonon’, ‘out’, ‘outmol’, ‘log’, ‘xml’, ‘yaml’, ‘castep_bin’, ‘hdf5’]</td>
</tr>
<tr class="row-odd"><td>AbInitioProgram</td>
<td>Input</td>
<td>string</td>
<td>CASTEP</td>
<td>An ab initio program which was used for vibrational or phonon calculation. Allowed values: [‘CASTEP’, ‘CRYSTAL’, ‘DMOL3’, ‘FORCECONSTANTS’, ‘GAUSSIAN’, ‘VASP’]</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><span class="std std-ref">Workspace</span></a></td>
<td><em>Mandatory</em></td>
<td>Name to give the output workspace.</td>
</tr>
<tr class="row-odd"><td>TemperatureInKelvin</td>
<td>Input</td>
<td>number</td>
<td>10</td>
<td>Temperature in K for which dynamical structure factor S should be calculated.</td>
</tr>
<tr class="row-even"><td>BinWidthInWavenumber</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Width of bins used during rebining.</td>
</tr>
<tr class="row-odd"><td>SampleForm</td>
<td>Input</td>
<td>string</td>
<td>Powder</td>
<td>Form of the sample: Powder. Allowed values: [‘Powder’]</td>
</tr>
<tr class="row-even"><td>Atoms</td>
<td>Input</td>
<td>str list</td>
<td>&#160;</td>
<td>List of atoms to use to calculate partial S.If left blank, workspaces with S for all types of atoms will be calculated. Element symbols will be interpreted as a sum of all atoms of that element in the cell. ‘atomN’ or ‘atom_N’ (where N is a positive integer) will be interpreted as individual atoms, indexing from 1 following the order of the input data.</td>
</tr>
<tr class="row-odd"><td>SumContributions</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Sum the partial dynamical structure factors into a single workspace.</td>
</tr>
<tr class="row-even"><td>SaveAscii</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Write workspaces to .ascii files after computing them.</td>
</tr>
<tr class="row-odd"><td>ScaleByCrossSection</td>
<td>Input</td>
<td>string</td>
<td>Incoherent</td>
<td>Scale the partial dynamical structure factors by the scattering cross section. Allowed values: [‘Total’, ‘Incoherent’, ‘Coherent’]</td>
</tr>
<tr class="row-even"><td>QuantumOrderEventsNumber</td>
<td>Input</td>
<td>string</td>
<td>1</td>
<td>Number of quantum order effects included in the calculation (1 -&gt; FUNDAMENTALS, 2-&gt; first overtone + FUNDAMENTALS + 2nd order combinations. Allowed values: [‘1’, ‘2’]</td>
</tr>
<tr class="row-odd"><td>Autoconvolution</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>Estimate higher quantum orders by convolution with fundamental spectrum.</td>
</tr>
<tr class="row-even"><td>ExperimentalFile</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>File with the experimental inelastic spectrum to compare. Allowed values: [‘raw’, ‘dat’]</td>
</tr>
<tr class="row-odd"><td>Scale</td>
<td>Input</td>
<td>number</td>
<td>1</td>
<td>Scale the intensity by the given factor. Default is no scaling.</td>
</tr>
<tr class="row-even"><td>EnergyUnits</td>
<td>Input</td>
<td>string</td>
<td>cm-1</td>
<td>Energy units for output workspace and experimental file. Allowed values: [‘cm-1’, ‘meV’]</td>
</tr>
<tr class="row-odd"><td>Instrument</td>
<td>Input</td>
<td>string</td>
<td>TOSCA</td>
<td>Name of an instrument for which analysis should be performed. Allowed values: [‘TOSCA’, ‘Lagrange’]</td>
</tr>
<tr class="row-even"><td>Setting</td>
<td>Input</td>
<td>string</td>
<td>&#160;</td>
<td>Setting choice for this instrument (e.g. monochromator). Allowed values: [‘’, ‘All detectors (TOSCA)’, ‘Backward (TOSCA)’, ‘Forward (TOSCA)’, ‘Cu(220) (Lagrange)’, ‘Cu(331) (Lagrange)’, ‘Si(111) (Lagrange)’, ‘Si(311) (Lagrange)’]</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id7">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Abins is a plugin for Mantid which allows scientists to compare experimental and theoretical inelastic neutron
scattering spectra (INS).</p>
<p>Abins requires a file containing ab-initio phonon data to perform INS analysis.
Several formats are supported for phonon modes containing frequency and displacement data at given q-points: CASTEP (.phonon), CRYSTAL (.out), GAUSSIAN (.log), DMOL3 (.outmol) or VASP (.xml).
For VASP XML inputs, it is also permitted to use a “selective dynamics” in which some atoms are frozen.
These would typically form a rigid substrate (e.g. a noble metal surface) for an adsorbed molecule of lightweight atoms, and are omitted from the calculated spectrum.</p>
<p>Alternatively, force-constants data can be provided and a fine q-point mesh will be sampled automatically.
In this case the supported formats are CASTEP (.castep_bin generated with <code class="docutils literal"><span class="pre">phonon_write_force_constants</span> <span class="pre">=</span> <span class="pre">True</span></code>)
and Phonopy (<em>phonopy.yaml</em> file generated with <code class="docutils literal"><span class="pre">INCLUDE_ALL</span> <span class="pre">=</span> <span class="pre">.TRUE.</span></code>)</p>
<p>The user may also provide an experimental file with measured dynamical structure factor S in order to directly
compare theoretical and experimental spectra.
Abins produces one dimensional INS spectrum that can be compared against TOSCA, IN1-LAGRANGE and similar instruments;
a semi-empirical powder averaging model accounts for q- and energy-dependent intensity behaviour in this system.
The user-input temperature value is included in a Debye-Waller term, recreating the intensity fall-off with increasing
wavelength.
More information about the implemented working equations can be found <a class="reference internal" href="../concepts/DynamicalStructureFactorFromAbInitio.html#dynamicalstructurefactorfromabinitio"><span class="std std-ref">here</span></a>.</p>
<p>After successful analysis a user obtains a Mantid Workspace Group which stores theoretical spectra (and,
optionally, experimental data).
Currently a user can produce theoretical spectra for given atoms (e.g. ‘atom_1’, the first atom listed in the input
data) or types of atom (for example for benzene two element symbols: C, H) and for each quantum event (up to fourth
order).
Total theoretical spectra can also be generated, summing over all considered quantum events for that atom or element.
The user can also produce a total spectrum for the whole considered system.
The dynamical structure factor S is calculated for all atoms in the system and results are cached, so if no settings
have been changed then subsequent runs of Abins can quickly create more Mantid Workspaces without re-calculating any
spectra.</p>
<p>Abins is in constant development and suggestions for improvements are very welcome. For any such contributions please
contact Dr. Sanghamitra Mukhopadhyay.
If you are developing or hacking on Abins, see the <a class="reference internal" href="../concepts/AbinsImplementation.html#abinsimplementation"><span class="std std-ref">Abins: Implementation details</span></a> notes which outline some of the key conventions, practices and pitfalls.</p>
<p>If Abins is used as part of your data analysis routines, please cite the relevant reference <a class="footnote-reference" href="#id2" id="id1">[1]</a>.</p>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id8">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In Mantid this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - loading CASTEP phonon data:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">benzene_wrk</span> <span class="o">=</span> <span class="n">Abins</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CASTEP&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;benzene.phonon&quot;</span><span class="p">,</span>
                    <span class="n">QuantumOrderEventsNumber</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>


<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">benzene_wrk</span><span class="o">.</span><span class="n">getNames</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>benzene_wrk_C_total
benzene_wrk_C
benzene_wrk_H_total
benzene_wrk_H
</pre></div>
</div>
<p><strong>Example - loading CRYSTAL phonon data:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">wrk</span><span class="o">=</span><span class="n">Abins</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CRYSTAL&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;b3lyp.out&quot;</span><span class="p">,</span> <span class="n">QuantumOrderEventsNumber</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">wrk</span><span class="o">.</span><span class="n">getNames</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>wrk_C_total
wrk_C
wrk_H_total
wrk_H
wrk_N_total
wrk_N
wrk_Na_total
wrk_Na
wrk_O_total
wrk_O
</pre></div>
</div>
<p><strong>Example - calling AbINS with more arguments:</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">wrk_verbose</span><span class="o">=</span><span class="n">Abins</span><span class="p">(</span><span class="n">AbInitioProgram</span><span class="o">=</span><span class="s2">&quot;CASTEP&quot;</span><span class="p">,</span> <span class="n">VibrationalOrPhononFile</span><span class="o">=</span><span class="s2">&quot;benzene.phonon&quot;</span><span class="p">,</span>
                  <span class="n">ExperimentalFile</span><span class="o">=</span><span class="s2">&quot;benzene_experimental.dat&quot;</span><span class="p">,</span>
                  <span class="n">TemperatureInKelvin</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">BinWidthInWavenumber</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">SampleForm</span><span class="o">=</span><span class="s2">&quot;Powder&quot;</span><span class="p">,</span> <span class="n">Instrument</span><span class="o">=</span><span class="s2">&quot;TOSCA&quot;</span><span class="p">,</span>
                  <span class="n">Atoms</span><span class="o">=</span><span class="s2">&quot;H, atom1, atom2&quot;</span><span class="p">,</span> <span class="n">SumContributions</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">QuantumOrderEventsNumber</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">ScaleByCrossSection</span><span class="o">=</span><span class="s2">&quot;Incoherent&quot;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">wrk_verbose</span><span class="o">.</span><span class="n">getNames</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>experimental_wrk
wrk_verbose_total
wrk_verbose_H_total
wrk_verbose_H
wrk_verbose_atom_1_total
wrk_verbose_atom_1
wrk_verbose_atom_2_total
wrk_verbose_atom_2
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/AlgorithmIndex.html">AlgorithmIndex</a> | <a class="reference external" href="categories/Simulation.html">Simulation</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id9">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>Python: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c7a0e2338713fd338893c4f24ed76cd968f52b11/Framework/PythonInterface/plugins/algorithms/Abins.py">Abins.py</a></p>
</div>
<div class="section" id="references">
<h2><a class="toc-backref" href="#id10">References</a><a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td><ol class="first last upperalpha simple" start="11">
<li>Dymkowski, S. F. Parker, F. Fernandez-Alonso and S. Mukhopadhyay,  “AbINS: The modern software for INS interpretation” , Physica B, doi:10.1016/j.physb.2018.02.034 (2018).</li>
</ol>
</td></tr>
</tbody>
</table>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="index.html" title="Previous Chapter: Algorithms"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Algorithms</span>
    </a>
  </li>
  <li>
    <a href="AbsorptionCorrection-v1.html" title="Next Chapter: AbsorptionCorrection v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">AbsorptionCor... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>