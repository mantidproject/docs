<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>SANS TOML Files</title>
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.3.6/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="API" href="../api/index.html" />
    <link rel="prev" title="Data reduction for D7 instrument at the ILL" href="PolarisedDiffractionILL.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>6.3</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://docs.mantidproject.org/nightly/">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <p><span class="math">\(\renewcommand\AA{\unicode{x212B}}\)</span></p>
<div class="section" id="sans-toml-files">
<span id="sans-toml-v1-ref"></span><h1>SANS TOML Files<a class="headerlink" href="#sans-toml-files" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#general-notes" id="id1">General Notes</a></li>
<li><a class="reference internal" href="#format-changes" id="id2">Format Changes</a><ul>
<li><a class="reference internal" href="#v0-to-v1" id="id3">V0 to V1</a></li>
</ul>
</li>
<li><a class="reference internal" href="#conversion-from-legacy-user-files" id="id4">Conversion From Legacy User Files</a><ul>
<li><a class="reference internal" href="#layout" id="id5">Layout</a></li>
<li><a class="reference internal" href="#tips-for-converting" id="id6">Tips for converting</a></li>
<li><a class="reference internal" href="#back-mon-times" id="id7">BACK/MON/TIMES</a></li>
<li><a class="reference internal" href="#back-m-n-times-x-y" id="id8">BACK/M[n]/TIMES x y</a></li>
<li><a class="reference internal" href="#compatibility-on" id="id9">COMPATIBILITY ON</a></li>
<li><a class="reference internal" href="#det-corr-front-rear-x-y-z-rot-a" id="id10">DET/CORR [FRONT][REAR] [X][Y][Z][ROT] a</a></li>
<li><a class="reference internal" href="#det-lab-hab-merged-all" id="id11">DET/[LAB][HAB][MERGED][ALL]</a></li>
<li><a class="reference internal" href="#det-rescale-fit-x-y" id="id12">DET/RESCALE[/FIT] x y</a></li>
<li><a class="reference internal" href="#det-scale-x" id="id13">DET/SCALE x</a></li>
<li><a class="reference internal" href="#det-scale-x-y-fit" id="id14">DET/SCALE x y /FIT</a></li>
<li><a class="reference internal" href="#det-shift-x" id="id15">DET/SHIFT x</a></li>
<li><a class="reference internal" href="#det-shift-x-y-fit" id="id16">DET/SHIFT x y /FIT</a></li>
<li><a class="reference internal" href="#det-overlap-x-y" id="id17">DET/OVERLAP x y</a></li>
<li><a class="reference internal" href="#fit-centre-x-y" id="id18">FIT/CENTRE x y</a></li>
<li><a class="reference internal" href="#fit-mid" id="id19">FIT/MID</a></li>
<li><a class="reference internal" href="#fit-monitor-x-y" id="id20">FIT/MONITOR x y</a></li>
<li><a class="reference internal" href="#fit-trans-lin-x-y" id="id21">FIT/TRANS/LIN x y</a></li>
<li><a class="reference internal" href="#gravity-on" id="id22">GRAVITY/ON</a></li>
<li><a class="reference internal" href="#gravity-lextra-x" id="id23">GRAVITY/LEXTRA x</a></li>
<li><a class="reference internal" href="#l-eventstime-str" id="id24">L/EVENTSTIME str</a></li>
<li><a class="reference internal" href="#l-phi-nomirror-x-y" id="id25">L/PHI [/NOMIRROR] x y</a></li>
<li><a class="reference internal" href="#l-q-rebin-string" id="id26">L/Q rebin_string</a></li>
<li><a class="reference internal" href="#l-q-rcut-x" id="id27">L/Q/RCUT x</a></li>
<li><a class="reference internal" href="#l-q-wcut-x" id="id28">L/Q/WCUT x</a></li>
<li><a class="reference internal" href="#l-qxy-start-stop-step-lin" id="id29">L/QXY start stop step [/LIN]</a></li>
<li><a class="reference internal" href="#l-r-x-y-step" id="id30">L/R x y [step]</a></li>
<li><a class="reference internal" href="#l-sp" id="id31">L/SP</a></li>
<li><a class="reference internal" href="#l-wav-min-max-step-lin" id="id32">L/WAV min max step [/LIN]</a></li>
<li><a class="reference internal" href="#maskfile-str" id="id33">MASKFILE str</a></li>
<li><a class="reference internal" href="#mask-h" id="id34">MASK h</a></li>
<li><a class="reference internal" href="#mask-hx-hy" id="id35">MASK hx&gt;hy</a></li>
<li><a class="reference internal" href="#mask-v" id="id36">MASK v</a></li>
<li><a class="reference internal" href="#mask-vx-vy" id="id37">MASK vx&gt;vy</a></li>
<li><a class="reference internal" href="#mask-sn" id="id38">MASK Sn</a></li>
<li><a class="reference internal" href="#mask-t-x-y" id="id39">MASK/T x y</a></li>
<li><a class="reference internal" href="#mask-clear-time" id="id40">MASK/CLEAR[/TIME]</a></li>
<li><a class="reference internal" href="#mask-line-x-y" id="id41">MASK/LINE x y</a></li>
<li><a class="reference internal" href="#mask-line-a-b-c-d" id="id42">MASK/LINE a b c d</a></li>
<li><a class="reference internal" href="#mon-direct-filename" id="id43">MON/DIRECT=”filename”</a></li>
<li><a class="reference internal" href="#mon-flat-str" id="id44">MON/FLAT=str</a></li>
<li><a class="reference internal" href="#mon-length" id="id45">MON/LENGTH</a></li>
<li><a class="reference internal" href="#mon-trans-spectrum-n-interpolate" id="id46">MON [/TRANS] /SPECTRUM=n [/INTERPOLATE]</a></li>
<li><a class="reference internal" href="#qresol-a1-x" id="id47">QRESOL/A1=x</a></li>
<li><a class="reference internal" href="#qresol-a2-x" id="id48">QRESOL/A2=x</a></li>
<li><a class="reference internal" href="#qresol-deltar-x" id="id49">QRESOL/DELTAR=x</a></li>
<li><a class="reference internal" href="#qresol-moderator-filename-txt" id="id50">QRESOL/MODERATOR=filename.txt</a></li>
<li><a class="reference internal" href="#qresol-on-off" id="id51">QRESOL[/ON][/OFF]</a></li>
<li><a class="reference internal" href="#qresol-h1-x-h2-wx-w1-x-w2-x" id="id52">QRESOL[/H1=x][/H2=wx][/W1=x][/W2=x]</a></li>
<li><a class="reference internal" href="#sample-offset-x" id="id53">SAMPLE/OFFSET x</a></li>
<li><a class="reference internal" href="#set-centre-a-b" id="id54">set centre a b</a></li>
<li><a class="reference internal" href="#set-centre-a-b-c-d-main-hab" id="id55">set centre a b c d [/MAIN] [/HAB]</a></li>
<li><a class="reference internal" href="#set-scales-a-b-c-d" id="id56">set scales a b c d</a></li>
<li><a class="reference internal" href="#trans-transspec-n" id="id57">TRANS/TRANSSPEC=n</a></li>
<li><a class="reference internal" href="#trans-transpec-n-shift-a" id="id58">TRANS/TRANSPEC=n/SHIFT=a</a></li>
<li><a class="reference internal" href="#tubecalibfile-str" id="id59">TUBECALIBFILE=str</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="general-notes">
<h2><a class="toc-backref" href="#id1">General Notes</a><a class="headerlink" href="#general-notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Lengths are given in meters within TOML files, unlike previous legacy formats.</li>
</ul>
</div>
<div class="section" id="format-changes">
<h2><a class="toc-backref" href="#id2">Format Changes</a><a class="headerlink" href="#format-changes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="v0-to-v1">
<h3><a class="toc-backref" href="#id3">V0 to V1</a><a class="headerlink" href="#v0-to-v1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><em>normalisation</em> and <em>normalization</em> are both accepted and equivalent</li>
<li><em>detector.calibration</em> was renamed to <em>detector.correction</em></li>
<li><em>mask.beamstop_shadow</em> and <em>mask.mask_pixels</em> were moved to
<em>mask.spatial.beamstop_shadow</em> and <em>mask.spatial.mask_pixels</em></li>
<li><em>normalisation.all_monitors</em> was added to support <em>BACK/MON/TIMES</em></li>
<li><em>[gravity]</em> and <em>gravity.enabled</em> were merged into <em>instrument.configuration.gravity_enabled</em></li>
<li><em>detector.configuration.selected_detector</em> is now mandatory</li>
<li><em>detector.configuration.selected_detector</em> accepts <em>front</em> and <em>rear</em> instead of <em>HAB</em> and <em>LAB</em> respectively.</li>
<li><em>detector.configuration.all_centre</em> has been added to set the front and rear centre at the same time.</li>
</ul>
</div>
</div>
<div class="section" id="conversion-from-legacy-user-files">
<h2><a class="toc-backref" href="#id4">Conversion From Legacy User Files</a><a class="headerlink" href="#conversion-from-legacy-user-files" title="Permalink to this headline">¶</a></h2>
<div class="section" id="layout">
<h3><a class="toc-backref" href="#id5">Layout</a><a class="headerlink" href="#layout" title="Permalink to this headline">¶</a></h3>
<p>This section is designed like a reference that users can paste straight into
existing TOML files.</p>
<p><em>Note: TOML files use SI units rather than a mix of unit prefixes. For example,
you will need to convert any measurements in millimetres to meters.</em></p>
<p>The following is used to note optional qualifiers which were available in
the existing user file format: <code class="docutils literal"><span class="pre">[</span></code> <code class="docutils literal"><span class="pre">]</span></code>.</p>
<p>Examples are given in a way that they can be merged together where headers
match, for example these three examples:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  wavelength = {start = 2.0, step=0.125, stop=14.0, type = &quot;Lin&quot;}
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  [binning.1d_reduction]
    binning = &quot;0.02,0.05,0.5,-0.1,10.0&quot;
</pre></div>
</div>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  [binning.2d_reduction]
    step = 0.002
    stop = 0.1
    type = &quot;Lin&quot;
</pre></div>
</div>
<p>Are combined into the following when writing the TOML file:</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  wavelength = {start = 2.0, step=0.125, stop=14.0, type = &quot;Lin&quot;}

  [binning.1d_reduction]
    binning = &quot;0.02,0.05,0.5,-0.1,10.0&quot;

  [binning.2d_reduction]
    step = 0.002
    stop = 0.1
    type = &quot;Lin&quot;
</pre></div>
</div>
</div>
<div class="section" id="tips-for-converting">
<h3><a class="toc-backref" href="#id6">Tips for converting</a><a class="headerlink" href="#tips-for-converting" title="Permalink to this headline">¶</a></h3>
<p>For converting existing files I recommend the following process:</p>
<ul class="simple">
<li>Copy your existing user file</li>
<li>Remove any commented out lines (starting with <code class="docutils literal"><span class="pre">!</span></code>)</li>
<li>Go line by line with this guide adding to a <strong>blank</strong> TOML file</li>
<li>Delete each line from the copied user file as it’s converted</li>
</ul>
</div>
<div class="section" id="back-mon-times">
<h3><a class="toc-backref" href="#id7">BACK/MON/TIMES</a><a class="headerlink" href="#back-mon-times" title="Permalink to this headline">¶</a></h3>
<p>Note: This command subtracts the <em>same</em> background level from <em>all</em> monitors.
The continued use of this method of monitor correction is now deprecated.
See BACK/M[n]/TIMES.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[normalisation]
  [normalisation.all_monitors]
    background = [x, y]
    enabled = true
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>BACK/MON/TIMES 30000 40000
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[normalisation]
  [normalisation.all_monitors]
    background = [30000, 40000]
    enabled = true
</pre></div>
</div>
</div>
<div class="section" id="back-m-n-times-x-y">
<h3><a class="toc-backref" href="#id8">BACK/M[n]/TIMES x y</a><a class="headerlink" href="#back-m-n-times-x-y" title="Permalink to this headline">¶</a></h3>
<p>Note: This command subtracts the specified background level from the specified monitor.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span># Note: both &quot;normalisation&quot; and &quot;normalisation&quot; are both accepted
[normalisation]
  [normalisation.monitor.Mn]
    spectrum_number = n
    background = [x, y]
</pre></div>
</div>
<p><em>OR</em></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[transmission]
  [transmission.monitor.Mn]
    spectrum_number = n
        use_own_background = true
    background = [x, y]
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>BACK/M1/TIMES 30000 40000
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[normalisation]
  [normalisation.monitor.M1]
    spectrum_number = 1
    background = [30000.0, 40000.0]
</pre></div>
</div>
</div>
<div class="section" id="compatibility-on">
<h3><a class="toc-backref" href="#id9">COMPATIBILITY ON</a><a class="headerlink" href="#compatibility-on" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong>
Unsupported</p>
</div>
<div class="section" id="det-corr-front-rear-x-y-z-rot-a">
<h3><a class="toc-backref" href="#id10">DET/CORR [FRONT][REAR] [X][Y][Z][ROT] a</a><a class="headerlink" href="#det-corr-front-rear-x-y-z-rot-a" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.calibration.position]
    # Note fields can be added or omitted as required
    # This is the complete list of adjustments available
    front_x = a
    front_y = b
    front_z = c

    front_x_tilt = d
    front_y_tilt = e
    front_z_tilt = f

    front_rot = g
    front_side = h

    rear_x = a
    rear_y = b
    rear_z = c

    rear_x_tilt = d
    rear_y_tilt = e
    rear_z_tilt = f

    rear_rot = g
    rear_side = h
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DET/CORR REAR X 0.0
DET/CORR REAR Z 58
DET/CORR FRONT X -33
DET/CORR FRONT Y -20
DET/CORR FRONT Z -47
DET/CORR FRONT ROT 0.0
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.calibration.position]
    front_x = -0.033
    front_y = -0.020
    front_z = -0.047
    front_rot = 0.0
    rear_x = 0.0
    rear_z = 0.058
</pre></div>
</div>
</div>
<div class="section" id="det-lab-hab-merged-all">
<h3><a class="toc-backref" href="#id11">DET/[LAB][HAB][MERGED][ALL]</a><a class="headerlink" href="#det-lab-hab-merged-all" title="Permalink to this headline">¶</a></h3>
<p>Note: The group now refers to <em>LAB</em> and <em>HAB</em> as <em>rear</em> and <em>front</em> respectively.
All reduction types are lower case.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector.configuration]
  selected_detector = &quot;rear&quot;
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DET/HAB
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector.configuration]
  # Accepts &quot;front&quot;, &quot;rear&quot;, &quot;merged&quot;, or &quot;all&quot;.
  selected_detector = &quot;front&quot;
</pre></div>
</div>
</div>
<div class="section" id="det-rescale-fit-x-y">
<h3><a class="toc-backref" href="#id12">DET/RESCALE[/FIT] x y</a><a class="headerlink" href="#det-rescale-fit-x-y" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.rescale]
      min = x
      max = y
      use_fit = true  # or false
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DET/RESCALE/FIT 0.14 0.24
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.rescale]
    min = 0.14
    max = 0.24
    use_fit = true
</pre></div>
</div>
</div>
<div class="section" id="det-scale-x">
<h3><a class="toc-backref" href="#id13">DET/SCALE x</a><a class="headerlink" href="#det-scale-x" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.rescale]
      factor = x
      use_fit = false  # Must be false for single value
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DET/SCALE 0.123
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.rescale]
      factor = 0.123
      use_fit = false
</pre></div>
</div>
</div>
<div class="section" id="det-scale-x-y-fit">
<h3><a class="toc-backref" href="#id14">DET/SCALE x y /FIT</a><a class="headerlink" href="#det-scale-x-y-fit" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.rescale]
      min = x
      max = y
      use_fit = true  # Must be true for fitting
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DET/SCALE 0.1 0.2 /FIT
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.rescale]
      min = 0.1
      max = 0.2
      use_fit = true  # Must be true for fitting
</pre></div>
</div>
</div>
<div class="section" id="det-shift-x">
<h3><a class="toc-backref" href="#id15">DET/SHIFT x</a><a class="headerlink" href="#det-shift-x" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.shift]
      distance = x
      use_fit = false  # Must be false for single value
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DET/SHIFT 0.123
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.shift]
      distance = 0.123
      use_fit = false
</pre></div>
</div>
</div>
<div class="section" id="det-shift-x-y-fit">
<h3><a class="toc-backref" href="#id16">DET/SHIFT x y /FIT</a><a class="headerlink" href="#det-shift-x-y-fit" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.shift]
      min = x
      max = y
      use_fit = true  # Must be true for fitting
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DET/SHIFT 0.1 0.2 /FIT
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.shift]
      min = 0.1
      max = 0.2
      use_fit = true
</pre></div>
</div>
</div>
<div class="section" id="det-overlap-x-y">
<h3><a class="toc-backref" href="#id17">DET/OVERLAP x y</a><a class="headerlink" href="#det-overlap-x-y" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction]
  [reduction.merged.merge_range]
    min = x
    max = y
    use_fit = true
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>DET/OVERLAP 0.14 0.24
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[merged]
  [reduction.merged.merge_range]
      min = 0.14
      max = 0.24
      use_fit = true
</pre></div>
</div>
</div>
<div class="section" id="fit-centre-x-y">
<h3><a class="toc-backref" href="#id18">FIT/CENTRE x y</a><a class="headerlink" href="#fit-centre-x-y" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong>
Unsupported</p>
</div>
<div class="section" id="fit-mid">
<h3><a class="toc-backref" href="#id19">FIT/MID</a><a class="headerlink" href="#fit-mid" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong>
Unsupported</p>
</div>
<div class="section" id="fit-monitor-x-y">
<h3><a class="toc-backref" href="#id20">FIT/MONITOR x y</a><a class="headerlink" href="#fit-monitor-x-y" title="Permalink to this headline">¶</a></h3>
<p><em>Note:</em> This was only enabled for LOQ in source code, so
if you are not converting a LOQ file this should not be copied
as it will produce different results</p>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  prompt_peak = {start = x, stop = y}
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>FIT/MONITOR 19900 20500
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  prompt_peak = {start = 19900.0, stop = 20500.0}
</pre></div>
</div>
</div>
<div class="section" id="fit-trans-lin-x-y">
<h3><a class="toc-backref" href="#id21">FIT/TRANS/LIN x y</a><a class="headerlink" href="#fit-trans-lin-x-y" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[transmission]
  [transmission.fitting]
    enabled = true
    parameters = {lambda_min = x, lambda_max = x}
    # Can be: Linear / Logarithmic / Polynomial
    function = &quot;Linear&quot;
    # Only used when set to Polynomial
    polynomial_order = 2
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>FIT/TRANS/LIN 3.0 11.0
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[transmission]
  [transmission.fitting]
    enabled = true
    parameters = {lambda_min = 3.0, lambda_max = 11.0}
    function = &quot;Linear&quot;
</pre></div>
</div>
</div>
<div class="section" id="gravity-on">
<h3><a class="toc-backref" href="#id22">GRAVITY/ON</a><a class="headerlink" href="#gravity-on" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[instrument.configuration]
  gravity_enabled = true
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>GRAVITY/ON
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[instrument.configuration]
  gravity_enabled = true
</pre></div>
</div>
</div>
<div class="section" id="gravity-lextra-x">
<h3><a class="toc-backref" href="#id23">GRAVITY/LEXTRA x</a><a class="headerlink" href="#gravity-lextra-x" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[instrument.configuration]
  gravity_extra_length = x
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>GRAVITY/LEXTRA 2.0
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[instrument.configuration]
  gravity_extra_length = 2.0
</pre></div>
</div>
</div>
<div class="section" id="l-eventstime-str">
<h3><a class="toc-backref" href="#id24">L/EVENTSTIME str</a><a class="headerlink" href="#l-eventstime-str" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction.events]
  binning = &quot;str&quot;
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>L/EVENTSTIME 7000.0,500.0,60000.0
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[reduction.events]
  # A negative step (middle val) indicates Log
  binning = &quot;7000.0,500.0,60000.0&quot;
</pre></div>
</div>
</div>
<div class="section" id="l-phi-nomirror-x-y">
<h3><a class="toc-backref" href="#id25">L/PHI [/NOMIRROR] x y</a><a class="headerlink" href="#l-phi-nomirror-x-y" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.phi]
    mirror = bool
    start = x
    stop = y
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>L/PHI/NOMIRROR -45 45
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.phi]
    mirror = false
    start = x
    stop = y
</pre></div>
</div>
</div>
<div class="section" id="l-q-rebin-string">
<h3><a class="toc-backref" href="#id26">L/Q rebin_string</a><a class="headerlink" href="#l-q-rebin-string" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning.1d_reduction]
    # Negative indicates log
    binning = &quot;rebin_string&quot;
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>L/Q .02,0.05,0.5,-0.1,10
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  [binning.1d_reduction]
    # Negative indicates log
    binning = &quot;0.02,0.05,0.5,-0.1,10.0&quot;
</pre></div>
</div>
</div>
<div class="section" id="l-q-rcut-x">
<h3><a class="toc-backref" href="#id27">L/Q/RCUT x</a><a class="headerlink" href="#l-q-rcut-x" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning.1d_reduction]
    radius_cut = x
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>L/Q/RCUT 100
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  [binning.1d_reduction]
    radius_cut = 0.1
</pre></div>
</div>
</div>
<div class="section" id="l-q-wcut-x">
<h3><a class="toc-backref" href="#id28">L/Q/WCUT x</a><a class="headerlink" href="#l-q-wcut-x" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning.1d_reduction]
    wavelength_cut = x
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>L/Q/WCUT 8
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  [binning.1d_reduction]
    wavelength_cut = 8.0
</pre></div>
</div>
</div>
<div class="section" id="l-qxy-start-stop-step-lin">
<h3><a class="toc-backref" href="#id29">L/QXY start stop step [/LIN]</a><a class="headerlink" href="#l-qxy-start-stop-step-lin" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  [binning.2d_reduction]
    #binning MUST start at 0.0
    step = step
    stop = stop
    #type can be &quot;Lin&quot; or &quot;Log&quot;
    type = &quot;Lin&quot;
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>L/QXY 0 0.1 .002/lin
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  [binning.2d_reduction]
    step = 0.002
    stop = 0.1
    type = &quot;Lin&quot;
</pre></div>
</div>
</div>
<div class="section" id="l-r-x-y-step">
<h3><a class="toc-backref" href="#id30">L/R x y [step]</a><a class="headerlink" href="#l-r-x-y-step" title="Permalink to this headline">¶</a></h3>
<p>Note step was ignored previously.</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  radius_limit = {min = 0.038, max = -0.001}
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>L/R 38 -1
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  radius_limit = {min = 0.038, max = -0.001}
</pre></div>
</div>
</div>
<div class="section" id="l-sp">
<h3><a class="toc-backref" href="#id31">L/SP</a><a class="headerlink" href="#l-sp" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong>
Unsupported</p>
</div>
<div class="section" id="l-wav-min-max-step-lin">
<h3><a class="toc-backref" href="#id32">L/WAV min max step [/LIN]</a><a class="headerlink" href="#l-wav-min-max-step-lin" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>wavelength = {start = min, step = step, stop = max, type = &quot;Lin&quot;}
# Alternative for ranges
wavelength = {binning = &quot;min,max&quot;, step = step, type = &quot;RangeLin&quot;}
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>L/WAV 2.0 14.0 0.125/LIN
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[binning]
  # Only for &quot;Lin&quot;, &quot;Log&quot;
  wavelength = {start = 2.0, step=0.125, stop=14.0, type = &quot;Lin&quot;}
  # Only for &quot;RangeLin&quot; or &quot;RangeLog&quot;
  wavelength = {binning=&quot;2.0-7.0, 7.0-14.0&quot;, type = &quot;RangeLin&quot;}
</pre></div>
</div>
</div>
<div class="section" id="maskfile-str">
<h3><a class="toc-backref" href="#id33">MASKFILE str</a><a class="headerlink" href="#maskfile-str" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
mask_files = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>MASKFILE=a.xml,b.xml,c.xml
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
mask_files = [&quot;a.xml&quot;, &quot;b.xml&quot;, &quot;c.xml&quot;]
</pre></div>
</div>
</div>
<div class="section" id="mask-h">
<h3><a class="toc-backref" href="#id34">MASK h</a><a class="headerlink" href="#mask-h" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.spatial.rear]  # Or front
    detector_rows = [h1, h2, h3, ...hn]
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>mask/rear h100
mask/rear h200
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.spatial.rear]
    # Masks horizontal 100 and 200
    detector_rows = [100, 200]
</pre></div>
</div>
</div>
<div class="section" id="mask-hx-hy">
<h3><a class="toc-backref" href="#id35">MASK hx&gt;hy</a><a class="headerlink" href="#mask-hx-hy" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.spatial.rear]  # Or front
    detector_row_ranges = [[x, y]]
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>mask h126&gt;h127
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.spatial.rear]
    # Masks horizontal 126 AND 127
    # Also includes 130-135 to show multiple can be masked
    detector_row_ranges = [[126, 127], [130, 135]]
</pre></div>
</div>
</div>
<div class="section" id="mask-v">
<h3><a class="toc-backref" href="#id36">MASK v</a><a class="headerlink" href="#mask-v" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.spatial.rear]  # Or front
    detector_rows = [v1, v2, v3, ...vn]
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>mask/rear v100
mask/rear v200
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.spatial.rear]
    # Masks vertical 100 and 200
    detector_columns = [100, 200]
</pre></div>
</div>
</div>
<div class="section" id="mask-vx-vy">
<h3><a class="toc-backref" href="#id37">MASK vx&gt;vy</a><a class="headerlink" href="#mask-vx-vy" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.spatial.rear]  # Or front
    detector_column_ranges = [[x, y]]
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>mask v126&gt;v127
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.spatial.rear]
    # Masks vertical 126 AND 127
    # Also includes 130-135 to show multiple can be masked
    detector_column_ranges = [[126, 127], [130, 135]]
</pre></div>
</div>
</div>
<div class="section" id="mask-sn">
<h3><a class="toc-backref" href="#id38">MASK Sn</a><a class="headerlink" href="#mask-sn" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  mask_pixels = [n1, n2, ...n]
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>MASK S123
MASK S456
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  mask_pixels = [123, 456]
</pre></div>
</div>
</div>
<div class="section" id="mask-t-x-y">
<h3><a class="toc-backref" href="#id39">MASK/T x y</a><a class="headerlink" href="#mask-t-x-y" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.time]
    tof = [
        {start = x1, stop = y1},
        {start = x2, stop = y2},
        # ...etc
    ]
</pre></div>
</div>
<p><strong>Existing Example</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span># Note multiple lines can be collapsed into one section
MASK/T 19711.5 21228.5
MASK/T 39354.5 41348.5
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  [mask.time]
    tof = [
      {start = 19711.5, stop = 21228.5},
      {start = 39354.5, stop = 41348.5}
    ]
</pre></div>
</div>
</div>
<div class="section" id="mask-clear-time">
<h3><a class="toc-backref" href="#id40">MASK/CLEAR[/TIME]</a><a class="headerlink" href="#mask-clear-time" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong>
Unsupported</p>
</div>
<div class="section" id="mask-line-x-y">
<h3><a class="toc-backref" href="#id41">MASK/LINE x y</a><a class="headerlink" href="#mask-line-x-y" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>beamstop_shadow = {width = x, angle = y}
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>MASK/LINE 30 170
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  beamstop_shadow = {width = 0.03, angle = 170.0}
</pre></div>
</div>
</div>
<div class="section" id="mask-line-a-b-c-d">
<h3><a class="toc-backref" href="#id42">MASK/LINE a b c d</a><a class="headerlink" href="#mask-line-a-b-c-d" title="Permalink to this headline">¶</a></h3>
<p>Note: <em>c</em> and <em>d</em> representing x and y positions are already in meters in
legacy files.</p>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>beamstop_shadow = {width = a, angle = b, x_pos = c, y_pos = d}
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>MASK/LINE 30 170 0.3 0.1
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[mask]
  beamstop_shadow = {width = 0.03, angle = 170.0, x_pos=0.3, y_pos=0.1}
</pre></div>
</div>
</div>
<div class="section" id="mon-direct-filename">
<h3><a class="toc-backref" href="#id43">MON/DIRECT=”filename”</a><a class="headerlink" href="#mon-direct-filename" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.calibration.direct]
    rear_file = &quot;filename&quot;
    front_file = &quot;filename&quot;
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>MON/DIRECT=DIRECT_RUN524.dat
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.calibration.direct]
    rear_file = &quot;DIRECT_RUN524.dat&quot;
    front_file = &quot;DIRECT_RUN524.dat&quot;
</pre></div>
</div>
</div>
<div class="section" id="mon-flat-str">
<h3><a class="toc-backref" href="#id44">MON/FLAT=str</a><a class="headerlink" href="#mon-flat-str" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.calibration.flat]
    rear_file = &quot;str&quot;
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>MON/FLAT=&quot;flat_file.091&quot;
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.calibration.flat]
    rear_file = &quot;flat_file.091&quot;
</pre></div>
</div>
</div>
<div class="section" id="mon-length">
<h3><a class="toc-backref" href="#id45">MON/LENGTH</a><a class="headerlink" href="#mon-length" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong>
Unsupported</p>
</div>
<div class="section" id="mon-trans-spectrum-n-interpolate">
<h3><a class="toc-backref" href="#id46">MON [/TRANS] /SPECTRUM=n [/INTERPOLATE]</a><a class="headerlink" href="#mon-trans-spectrum-n-interpolate" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[normalisation]
  #Normalisation monitor

  # This name is used below so if there was a monitor called FOO1
  # this would work with it
  selected_monitor = &quot;M1&quot;

  [normalisation.monitor.M1]
    spectrum_number = n
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>MON/SPECTRUM=1
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[normalisation]
  #Normalisation monitor

  # This name is used below so if there was a monitor called FOO1
  # this would work with it
  selected_monitor = &quot;M1&quot;

  [normalisation.monitor.M1]
    spectrum_number = 1
</pre></div>
</div>
</div>
<div class="section" id="qresol-a1-x">
<h3><a class="toc-backref" href="#id47">QRESOL/A1=x</a><a class="headerlink" href="#qresol-a1-x" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  source_aperture = x
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>QRESOL/A1=30
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  source_aperture = 0.03
</pre></div>
</div>
</div>
<div class="section" id="qresol-a2-x">
<h3><a class="toc-backref" href="#id48">QRESOL/A2=x</a><a class="headerlink" href="#qresol-a2-x" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[instrument.configuration]
  sample_aperture_diameter = x
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>QRESOL/A2=20
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[instrument.configuration]
  sample_aperture_diameter = 0.02
</pre></div>
</div>
</div>
<div class="section" id="qresol-deltar-x">
<h3><a class="toc-backref" href="#id49">QRESOL/DELTAR=x</a><a class="headerlink" href="#qresol-deltar-x" title="Permalink to this headline">¶</a></h3>
<p>The virtual ring width of the detector in meters.
This is used to calculate the Q Resolution from TOF SANS Data on a per-pixel
in <a class="reference internal" href="../algorithms/TOFSANSResolutionByPixel-v1.html#algm-tofsansresolutionbypixel"><span class="std std-ref">TOFSANSResolutionByPixel v1</span></a>.</p>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  delta_r = x
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>QRESOL/DELTAR=10  # mm
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  delta_r = 0.01  # m
</pre></div>
</div>
</div>
<div class="section" id="qresol-moderator-filename-txt">
<h3><a class="toc-backref" href="#id50">QRESOL/MODERATOR=filename.txt</a><a class="headerlink" href="#qresol-moderator-filename-txt" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  moderator_file = filename.txt
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>QRESOL/MODERATOR=moderator_rkh_file.txt
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  moderator_file = moderator_rkh_file.txt
</pre></div>
</div>
</div>
<div class="section" id="qresol-on-off">
<h3><a class="toc-backref" href="#id51">QRESOL[/ON][/OFF]</a><a class="headerlink" href="#qresol-on-off" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  enabled = true  # Or false
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>QRESOL/ON
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  enabled = true  # Or false
</pre></div>
</div>
</div>
<div class="section" id="qresol-h1-x-h2-wx-w1-x-w2-x">
<h3><a class="toc-backref" href="#id52">QRESOL[/H1=x][/H2=wx][/W1=x][/W2=x]</a><a class="headerlink" href="#qresol-h1-x-h2-wx-w1-x-w2-x" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  h1 = x
  h2 = x
  w1 = x
  w2 = x
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>QRESOL/H1=16.0
QRESOL/H2=8.0
QRESOL/W1=16.0
QRESOL/W2=8.0
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[q_resolution]
  h1 = 16.0
  h2 = 8.0
  w1 = 16.0
  w2 = 8.0
</pre></div>
</div>
</div>
<div class="section" id="sample-offset-x">
<h3><a class="toc-backref" href="#id53">SAMPLE/OFFSET x</a><a class="headerlink" href="#sample-offset-x" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[instrument.configuration]
  sample_offset = n
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>SAMPLE/OFFSET -60
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[instrument.configuration]
  sample_offset = -0.06
</pre></div>
</div>
</div>
<div class="section" id="set-centre-a-b">
<h3><a class="toc-backref" href="#id54">set centre a b</a><a class="headerlink" href="#set-centre-a-b" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.configuration]
    all_centre = {x=a, y=b}
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>set centre 84.2 -196.5
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.configuration]
    # This will set both front and rear to the same centre values.
    all_centre = {x=a, y=b}
</pre></div>
</div>
</div>
<div class="section" id="set-centre-a-b-c-d-main-hab">
<h3><a class="toc-backref" href="#id55">set centre a b c d [/MAIN] [/HAB]</a><a class="headerlink" href="#set-centre-a-b-c-d-main-hab" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.configuration]
    front_centre = {x=a, y=b}
    rear_centre = {x=c, y=d}
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>set centre 84.2 -196.5 5.1 5.1 /MAIN
set centre 84.2 -196.5 /HAB
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.configuration]
    # Note for identical results the values will
    # only take a and b in the above example due to a bug
    # with the legacy user file parser
    front_centre = {x=0.0842, y=-0.1965}
    rear_centre = {x=0.0842, y=-0.1965}
</pre></div>
</div>
</div>
<div class="section" id="set-scales-a-b-c-d">
<h3><a class="toc-backref" href="#id56">set scales a b c d</a><a class="headerlink" href="#set-scales-a-b-c-d" title="Permalink to this headline">¶</a></h3>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.configuration]
    front_scale = b
    rear_scale = a
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>set scales 1.497 1.0 1.0 1.0 1.0
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]
  [detector.configuration]
    front_scale = 1.0
    rear_scale = 1.497
</pre></div>
</div>
</div>
<div class="section" id="trans-transspec-n">
<h3><a class="toc-backref" href="#id57">TRANS/TRANSSPEC=n</a><a class="headerlink" href="#trans-transspec-n" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[transmission]
  # Where Mn is arbitrary but must match the section label
  selected_monitor = &quot;Mn&quot;

  [transmission.monitor.Mn]
    spectrum_number = n
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>TRANS/TRANSPEC=3
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[transmission]
  selected_monitor = &quot;M3&quot;

  [transmission.monitor.M3]
    spectrum_number = 3
</pre></div>
</div>
</div>
<div class="section" id="trans-transpec-n-shift-a">
<h3><a class="toc-backref" href="#id58">TRANS/TRANSPEC=n/SHIFT=a</a><a class="headerlink" href="#trans-transpec-n-shift-a" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[transmission]
  # Where Mn is arbitrary but must match the section label
  selected_monitor = &quot;Mn&quot;

  [transmission.monitor.Mn]
    spectrum_number = n
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>TRANS/TRANSPEC=3/SHIFT=-58
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[transmission]
  selected_monitor = &quot;M3&quot;

  [transmission.monitor.M3]
    spectrum_number = 3
    shift = -0.058
</pre></div>
</div>
</div>
<div class="section" id="tubecalibfile-str">
<h3><a class="toc-backref" href="#id59">TUBECALIBFILE=str</a><a class="headerlink" href="#tubecalibfile-str" title="Permalink to this headline">¶</a></h3>
<p><strong>Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]

[detector.calibration.tube]
  file = &quot;str&quot;
</pre></div>
</div>
<p><strong>Existing Example:</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>TUBECALIBFILE=Tube.nxs
</pre></div>
</div>
<p><strong>Existing Replacement</strong></p>
<div class="highlight-none"><div class="highlight"><pre><span></span>[detector]

[detector.calibration.tube]
  file = &quot;Tube.nxs&quot;
</pre></div>
</div>
<p><strong>Category</strong>: <a class="reference external" href="categories/Techniques.html">Techniques</a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="PolarisedDiffractionILL.html" title="Previous Chapter: Data reduction for D7 instrument at the ILL"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Data reductio...</span>
    </a>
  </li>
  <li>
    <a href="../api/index.html" title="Next Chapter: API"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">API &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>