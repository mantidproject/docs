<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MDNormDirectSC v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="MDNormSCD v1" href="MDNormSCD-v1.html" />
    <link rel="prev" title="MDHistoToWorkspace2D v1" href="MDHistoToWorkspace2D-v1.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="mdnormdirectsc-v1">
<span id="algm-mdnormdirectsc"></span><span id="algm-mdnormdirectsc-v1"></span><h1>MDNormDirectSC v1<a class="headerlink" href="#mdnormdirectsc-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/MDNormDirectSC-v1_dlg.png"><img alt="../_images/MDNormDirectSC-v1_dlg.png" class="screenshot" src="../_images/MDNormDirectSC-v1_dlg.png" style="width: 270px;" /></a>
<p class="caption"><strong>MDNormDirectSC</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#usage" id="id4">Usage</a></li>
<li><a class="reference internal" href="#source" id="id5">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Calculate normalization for an MDEvent workspace for single crystal direct geometry inelastic measurement.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="3%" />
<col width="15%" />
<col width="4%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MDWorkspace.html#mdworkspace"><em>MDEventWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>An input MDWorkspace.</td>
</tr>
<tr class="row-odd"><td>AlignedDim0</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Binning parameters for the 0th dimension. Enter it as a comma-separated list of values with the format: &#8216;name,minimum,maximum,number_of_bins&#8217;. Leave blank for NONE.</td>
</tr>
<tr class="row-even"><td>AlignedDim1</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Binning parameters for the 1th dimension. Enter it as a comma-separated list of values with the format: &#8216;name,minimum,maximum,number_of_bins&#8217;. Leave blank for NONE.</td>
</tr>
<tr class="row-odd"><td>AlignedDim2</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Binning parameters for the 2th dimension. Enter it as a comma-separated list of values with the format: &#8216;name,minimum,maximum,number_of_bins&#8217;. Leave blank for NONE.</td>
</tr>
<tr class="row-even"><td>AlignedDim3</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Binning parameters for the 3th dimension. Enter it as a comma-separated list of values with the format: &#8216;name,minimum,maximum,number_of_bins&#8217;. Leave blank for NONE.</td>
</tr>
<tr class="row-odd"><td>AlignedDim4</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Binning parameters for the 4th dimension. Enter it as a comma-separated list of values with the format: &#8216;name,minimum,maximum,number_of_bins&#8217;. Leave blank for NONE.</td>
</tr>
<tr class="row-even"><td>AlignedDim5</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Binning parameters for the 5th dimension. Enter it as a comma-separated list of values with the format: &#8216;name,minimum,maximum,number_of_bins&#8217;. Leave blank for NONE.</td>
</tr>
<tr class="row-odd"><td>SolidAngleWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>An input workspace containing integrated vanadium (a measure of the solid angle).</td>
</tr>
<tr class="row-even"><td>SkipSafetyCheck</td>
<td>Input</td>
<td>boolean</td>
<td>False</td>
<td>If set to true, the algorithm does not check history if the workspace was modified since theConvertToMD algorithm was run, and assume that the direct geometry inelastic mode is used.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>A name for the output data MDHistoWorkspace.</td>
</tr>
<tr class="row-even"><td>OutputNormalizationWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/Workspace.html#workspace"><em>Workspace</em></a></td>
<td><em>Mandatory</em></td>
<td>A name for the output normalization MDHistoWorkspace.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The algorithm calculates a normalization MD workspace for single crystal direct geometry inelastic experiments.
Trajectories of each detector in reciprocal space are calculated, and the flux is integrated between intersections with each
MDBox. A brief introduction to the multi-dimensional data normalization can be found <a class="reference internal" href="../concepts/MDNorm.html#mdnorm"><em>here</em></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is an experimental algorithm in Release 3.3. Please check the nightly Mantid build, and the Mantid webpage
for better offline help and usage examples.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the MDEvent input workspace is generated from an event workspace, the algorithm gives the correct normalization
only if the event workspace is cropped and binned to the same energy transfer range. If the workspace is not cropped,
one might have events in places where the normalization is calculated to be 0.</p>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id4">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To run these usage examples please first download the
<a class="reference external" href="https://sourceforge.net/projects/mantid/files/Sample%20Data/UsageData.zip/download">usage data</a>,
and add these to your path. In MantidPlot this is done using <a class="reference external" href="http://www.mantidproject.org/ManageUserDirectories">Manage User Directories</a>.</p>
</div>
<p><strong>Example - MDNormDirectSC</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">mantid</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">config</span><span class="p">[</span><span class="s">&#39;default.facility&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;SNS&quot;</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">DGS_input_data</span><span class="o">=</span><span class="n">Load</span><span class="p">(</span><span class="s">&quot;CNCS_7860&quot;</span><span class="p">)</span>
<span class="c"># Keep events (SofPhiEIsDistribution=False)</span>
<span class="c"># Do not normalize by proton charge in DgsReduction</span>
<span class="n">DGS_output_data</span><span class="o">=</span><span class="n">DgsReduction</span><span class="p">(</span>
         <span class="n">SampleInputWorkspace</span><span class="o">=</span><span class="n">DGS_input_data</span><span class="p">,</span>
         <span class="n">SofPhiEIsDistribution</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
         <span class="n">IncidentBeamNormalisation</span><span class="o">=</span><span class="s">&quot;None&quot;</span><span class="p">,</span>
         <span class="n">EnergyTransferRange</span><span class="o">=</span><span class="s">&quot;-1.5,0.01,2.7&quot;</span><span class="p">,</span>
        <span class="p">)</span>
<span class="n">DGS_output_data</span><span class="o">=</span><span class="n">DGS_output_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">SetGoniometer</span><span class="p">(</span><span class="n">DGS_output_data</span><span class="p">,</span><span class="n">Axis0</span><span class="o">=</span><span class="s">&quot;10.,0,1,0,1&quot;</span><span class="p">)</span>
<span class="n">SetUB</span><span class="p">(</span><span class="n">DGS_output_data</span><span class="p">,</span> <span class="mf">5.</span><span class="p">,</span><span class="mf">3.2</span><span class="p">,</span><span class="mf">7.2</span><span class="p">)</span>
<span class="n">DGS_output_data</span><span class="o">=</span><span class="n">CropWorkspace</span><span class="p">(</span><span class="n">DGS_output_data</span><span class="p">,</span><span class="n">XMin</span><span class="o">=-</span><span class="mf">1.5</span><span class="p">,</span><span class="n">XMax</span><span class="o">=</span><span class="mf">2.7</span><span class="p">)</span>
<span class="n">MDE</span><span class="o">=</span><span class="n">ConvertToMD</span><span class="p">(</span><span class="n">DGS_output_data</span><span class="p">,</span>
        <span class="n">QDimensions</span><span class="o">=</span><span class="s">&quot;Q3D&quot;</span><span class="p">,</span>
        <span class="n">dEAnalysisMode</span><span class="o">=</span><span class="s">&quot;Direct&quot;</span><span class="p">,</span>
        <span class="n">Q3DFrames</span><span class="o">=</span><span class="s">&quot;HKL&quot;</span><span class="p">,</span>
        <span class="n">QConversionScales</span><span class="o">=</span><span class="s">&quot;HKL&quot;</span><span class="p">)</span>
<span class="n">histoData</span><span class="p">,</span><span class="n">histoNorm</span><span class="o">=</span><span class="n">MDNormDirectSC</span><span class="p">(</span><span class="n">MDE</span><span class="p">,</span>
        <span class="n">AlignedDim0</span><span class="o">=</span><span class="s">&quot;[H,0,0],-0.2,1.6,100&quot;</span><span class="p">,</span>
        <span class="n">AlignedDim1</span><span class="o">=</span><span class="s">&quot;DeltaE,-1.5,3.,100&quot;</span><span class="p">,</span>
        <span class="p">)</span>
<span class="n">normalized</span><span class="o">=</span><span class="n">histoData</span><span class="o">/</span><span class="n">histoNorm</span>
<span class="n">histoShape</span><span class="o">=</span><span class="n">histoNorm</span><span class="o">.</span><span class="n">getSignalArray</span><span class="p">()</span><span class="o">.</span><span class="n">shape</span>
<span class="k">print</span> <span class="s">&quot;The normalization workspace shape is (</span><span class="si">%d</span><span class="s">, </span><span class="si">%d</span><span class="s">)&quot;</span> <span class="o">%</span> <span class="n">histoShape</span>
<span class="k">print</span> <span class="s">&quot;Out of those elements, &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">nonzero</span><span class="p">(</span><span class="n">histoNorm</span><span class="o">.</span><span class="n">getSignalArray</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">size</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; are nonzero&quot;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">The</span> <span class="n">normalization</span> <span class="n">workspace</span> <span class="n">shape</span> <span class="ow">is</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">Out</span> <span class="n">of</span> <span class="n">those</span> <span class="n">elements</span><span class="p">,</span> <span class="mi">6712</span> <span class="n">are</span> <span class="n">nonzero</span>
</pre></div>
</div>
<p>The output would look like:</p>
<div class="figure">
<img alt="MDNormDirectSC.png" src="../_images/MDNormDirectSC.png" />
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/MDAlgorithms/Normalisation.html">MDAlgorithms\Normalisation</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id5">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c46a67d64e22c52f6c639900deb1c2a0efa0aa66/Framework/MDAlgorithms/src/MDNormDirectSC.cpp">MDNormDirectSC.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c46a67d64e22c52f6c639900deb1c2a0efa0aa66/Framework/MDAlgorithms/inc/MantidMDAlgorithms/MDNormDirectSC.h">MDNormDirectSC.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="MDHistoToWorkspace2D-v1.html" title="Previous Chapter: MDHistoToWorkspace2D v1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; MDHistoToWorkspa...</span>
    </a>
  </li>
  <li>
    <a href="MDNormSCD-v1.html" title="Next Chapter: MDNormSCD v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">MDNormSCD v1 &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>