<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ReflectometryReductionOne v1</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.1.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.8.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="" href="../index.html" />
    <link rel="next" title="ReflectometryReductionOneAuto v1" href="ReflectometryReductionOneAuto-v1.html" />
    <link rel="prev" title="RefinePowderInstrumentParameters v3" href="RefinePowderInstrumentParameters-v3.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head>
  <body>





  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="http://www.mantidproject.org"><img src="../_static/Mantid_Logo_Transparent.png">
           </a>
        <span class="navbar-text navbar-version pull-left"><b>3.8</b></span>
      </div>

      
        <div class="collapse navbar-collapse nav-collapse">
      
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
                <li><a href="http://www.mantidproject.org">Home</a></li>
                <li><a href="http://download.mantidproject.org">Download</a></li>
                <li><a href="http://www.mantidproject.org/Documentation">Documentation</a></li>
                <li><a href="http://www.mantidproject.org/Contact">Contact Us</a></li>
            
            
              
              
            
            
            
            
          </ul>
              
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
            </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="reflectometryreductionone-v1">
<span id="algm-reflectometryreductionone"></span><span id="algm-reflectometryreductionone-v1"></span><h1>ReflectometryReductionOne v1<a class="headerlink" href="#reflectometryreductionone-v1" title="Permalink to this headline">¶</a></h1>
<div class="figure align-right" id="index-0">
<a class="screenshot reference internal image-reference" href="../_images/ReflectometryReductionOne-v1_dlg.png"><img alt="../_images/ReflectometryReductionOne-v1_dlg.png" class="screenshot" src="../_images/ReflectometryReductionOne-v1_dlg.png" style="width: 290px;" /></a>
<p class="caption"><strong>ReflectometryReductionOne</strong> dialog.</p>
</div>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#summary" id="id1">Summary</a></li>
<li><a class="reference internal" href="#properties" id="id2">Properties</a></li>
<li><a class="reference internal" href="#description" id="id3">Description</a></li>
<li><a class="reference internal" href="#high-level-workflow" id="id4">High-Level Workflow</a></li>
<li><a class="reference internal" href="#low-level-workflow" id="id5">Low-Level Workflow</a><ul>
<li><a class="reference internal" href="#conversion-to-wavelength" id="id6">Conversion to Wavelength</a></li>
<li><a class="reference internal" href="#transmission-correction" id="id7">Transmission Correction</a><ul>
<li><a class="reference internal" href="#polynomial-correction" id="id8">Polynomial Correction</a></li>
</ul>
</li>
<li><a class="reference internal" href="#detector-position-correction" id="id9">Detector Position Correction</a></li>
<li><a class="reference internal" href="#convert-to-momentum-transfer-q" id="id10">Convert To Momentum Transfer (Q)</a><ul>
<li><a class="reference internal" href="#rebinning" id="id11">Rebinning</a></li>
<li><a class="reference internal" href="#scaling" id="id12">Scaling</a></li>
<li><a class="reference internal" href="#source-rotation" id="id13">Source Rotation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#usage" id="id14">Usage</a></li>
<li><a class="reference internal" href="#source" id="id15">Source</a></li>
</ul>
</div>
<div class="section" id="summary">
<h2><a class="toc-backref" href="#id1">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Reduces a single TOF/Lambda reflectometry run into a mod Q vs I/I0 workspace. Performs transmission corrections.</p>
</div>
<div class="section" id="properties">
<h2><a class="toc-backref" href="#id2">Properties</a><a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="2%" />
<col width="12%" />
<col width="6%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Direction</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>InputWorkspace</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Run to reduce.</td>
</tr>
<tr class="row-odd"><td>AnalysisMode</td>
<td>Input</td>
<td>string</td>
<td>PointDetectorAnalysis</td>
<td>The type of analysis to perform. Point detector or multi detector. Allowed values: [&#8216;PointDetectorAnalysis&#8217;, &#8216;MultiDetectorAnalysis&#8217;]</td>
</tr>
<tr class="row-even"><td>RegionOfInterest</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>Indices of the spectra a pair (lower, upper) that mark the ranges that correspond to the region of interest (reflected beam) in multi-detector mode.</td>
</tr>
<tr class="row-odd"><td>RegionOfDirectBeam</td>
<td>Input</td>
<td>int list</td>
<td>&nbsp;</td>
<td>Indices of the spectra a pair (lower, upper) that mark the ranges that correspond to the direct beam in multi-detector mode.</td>
</tr>
<tr class="row-even"><td>I0MonitorIndex</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>I0 monitor workspace index</td>
</tr>
<tr class="row-odd"><td>ProcessingInstructions</td>
<td>Input</td>
<td>string</td>
<td><em>Mandatory</em></td>
<td>Grouping pattern on workspace indexes to yield only the detectors of interest. See GroupDetectors for details.</td>
</tr>
<tr class="row-even"><td>WavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength minimum in angstroms</td>
</tr>
<tr class="row-odd"><td>WavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Mandatory</em></td>
<td>Wavelength maximum in angstroms</td>
</tr>
<tr class="row-even"><td>MonitorBackgroundWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength minimum for monitor background in angstroms.</td>
</tr>
<tr class="row-odd"><td>MonitorBackgroundWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength maximum for monitor background in angstroms.</td>
</tr>
<tr class="row-even"><td>MonitorIntegrationWavelengthMin</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength minimum for integration in angstroms.</td>
</tr>
<tr class="row-odd"><td>MonitorIntegrationWavelengthMax</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Wavelength maximum for integration in angstroms.</td>
</tr>
<tr class="row-even"><td>DetectorComponentName</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Name of the detector component i.e. point-detector. If these are not specified, the algorithm will attempt lookup using a standard naming convention.</td>
</tr>
<tr class="row-odd"><td>SampleComponentName</td>
<td>Input</td>
<td>string</td>
<td>&nbsp;</td>
<td>Name of the sample component i.e. some-surface-holder. If these are not specified, the algorithm will attempt lookup using a standard naming convention.</td>
</tr>
<tr class="row-even"><td>OutputWorkspace</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td><em>Mandatory</em></td>
<td>Output Workspace IvsQ.</td>
</tr>
<tr class="row-odd"><td>OutputWorkspaceWavelength</td>
<td>Output</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Output Workspace IvsLam. Intermediate workspace.</td>
</tr>
<tr class="row-even"><td>ThetaIn</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Final theta value in degrees. Optional, this value will be calculated internally and provided as ThetaOut if not provided.</td>
</tr>
<tr class="row-odd"><td>ThetaOut</td>
<td>Output</td>
<td>number</td>
<td>&nbsp;</td>
<td>Calculated final theta in degrees.</td>
</tr>
<tr class="row-even"><td>NormalizeByIntegratedMonitors</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Normalize by dividing by the integrated monitors.</td>
</tr>
<tr class="row-odd"><td>CorrectDetectorPositions</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Correct detector positions using ThetaIn (if given)</td>
</tr>
<tr class="row-even"><td>FirstTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>First transmission run, or the low wavelength transmission run if SecondTransmissionRun is also provided.</td>
</tr>
<tr class="row-odd"><td>SecondTransmissionRun</td>
<td>Input</td>
<td><a class="reference internal" href="../concepts/MatrixWorkspace.html#matrixworkspace"><em>MatrixWorkspace</em></a></td>
<td>&nbsp;</td>
<td>Second, high wavelength transmission run. Optional. Causes the FirstTransmissionRun to be treated as the low wavelength transmission run.</td>
</tr>
<tr class="row-even"><td>Params</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>A comma separated list of first bin boundary, width, last bin boundary. These parameters are used for stitching together transmission runs. Values are in wavelength (angstroms). This input is only needed if a SecondTransmission run is provided.</td>
</tr>
<tr class="row-odd"><td>StartOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Start wavelength for stitching transmission runs together</td>
</tr>
<tr class="row-even"><td>EndOverlap</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>End wavelength (angstroms) for stitching transmission runs together</td>
</tr>
<tr class="row-odd"><td>StrictSpectrumChecking</td>
<td>Input</td>
<td>boolean</td>
<td>True</td>
<td>Enforces spectrum number checking prior to normalization</td>
</tr>
<tr class="row-even"><td>CorrectionAlgorithm</td>
<td>Input</td>
<td>string</td>
<td>None</td>
<td>The type of correction to perform. Allowed values: [&#8216;None&#8217;, &#8216;PolynomialCorrection&#8217;, &#8216;ExponentialCorrection&#8217;]</td>
</tr>
<tr class="row-odd"><td>Polynomial</td>
<td>Input</td>
<td>dbl list</td>
<td>&nbsp;</td>
<td>Coefficients to be passed to the PolynomialCorrection algorithm.</td>
</tr>
<tr class="row-even"><td>C0</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>C0 value to be passed to the ExponentialCorrection algorithm.</td>
</tr>
<tr class="row-odd"><td>C1</td>
<td>Input</td>
<td>number</td>
<td>0</td>
<td>C1 value to be passed to the ExponentialCorrection algorithm.</td>
</tr>
<tr class="row-even"><td>ScaleFactor</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Factor you wish to scale Q workspace by.</td>
</tr>
<tr class="row-odd"><td>MomentumTransferMinimum</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Minimum Q value in IvsQ Workspace. Used for Rebinning the IvsQ Workspace</td>
</tr>
<tr class="row-even"><td>MomentumTransferStep</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Resolution value in IvsQ Workspace. Used for Rebinning the IvsQ Workspace. This value will be made minus to apply logarithmic rebinning. If you wish to have linear bin-widths then please provide a negative DQQ</td>
</tr>
<tr class="row-odd"><td>MomentumTransferMaximum</td>
<td>Input</td>
<td>number</td>
<td><em>Optional</em></td>
<td>Maximum Q value in IvsQ Workspace. Used for Rebinning the IvsQ Workspace</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id3">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Reduces a single TOF reflectometry run into a mod Q vs I/I0 workspace.
Performs transmission corrections. Handles both point detector and
multidetector cases. The algorithm can correct detector locations based
on an input theta value.</p>
<p>Historically the work performed by this algorithm was known as the Quick
script.</p>
<p>If <tt class="docutils literal"><span class="pre">MonitorBackgroundWavelengthMin</span></tt> and
<tt class="docutils literal"><span class="pre">MonitorBackgroundWavelengthMax</span></tt> are both set to <tt class="docutils literal"><span class="pre">0</span></tt>, then
background normalization will not be performed on the monitors.</p>
<p>The properties of this algorithm should be manually selected by the user. If you
wish to use the default values (found in the Instrument Defintion File) for the
properties of this algorithm, you may want to consider using
<a class="reference internal" href="ReflectometryReductionOneAuto-v1.html#algm-reflectometryreductiononeauto"><em>ReflectometryReductionOneAuto v1</em></a>.</p>
<p><a class="reference internal" href="ReflectometryReductionOneAuto-v1.html#algm-reflectometryreductiononeauto"><em>ReflectometryReductionOneAuto v1</em></a> also performs extra processing steps
such as Background subtraction and <a class="reference internal" href="PolarizationCorrection-v1.html#algm-polarizationcorrection"><em>PolarizationCorrection v1</em></a>. If you
want to know how these processing steps are used, please refer to the
<a class="reference internal" href="ReflectometryReductionOneAuto-v1.html#algm-reflectometryreductiononeauto"><em>ReflectometryReductionOneAuto v1</em></a> documentation.</p>
</div>
<div class="section" id="high-level-workflow">
<h2><a class="toc-backref" href="#id4">High-Level Workflow</a><a class="headerlink" href="#high-level-workflow" title="Permalink to this headline">¶</a></h2>
<p>The diagram below displays a high-level version of the algorithm workflow,
illustrating the main steps taking place in the ReflectometryReductionOne
algorithm. These individual steps are described in more detail in the next
sections.</p>
<img alt="../_images/ReflectometryReductionOne_HighLvl-v1_wkflw.png" src="../_images/ReflectometryReductionOne_HighLvl-v1_wkflw.png" />
</div>
<div class="section" id="low-level-workflow">
<h2><a class="toc-backref" href="#id5">Low-Level Workflow</a><a class="headerlink" href="#low-level-workflow" title="Permalink to this headline">¶</a></h2>
<div class="section" id="conversion-to-wavelength">
<h3><a class="toc-backref" href="#id6">Conversion to Wavelength</a><a class="headerlink" href="#conversion-to-wavelength" title="Permalink to this headline">¶</a></h3>
<p>The following diagram describes the steps taken in converting the input
workspace into units of wavelength and dividing its constituent detectors by
monitors.</p>
<img alt="../_images/ReflectometryReductionOne_ConvertToWavelength-v1_wkflw.png" src="../_images/ReflectometryReductionOne_ConvertToWavelength-v1_wkflw.png" />
<p>The default analysis mode is <em>PointDetectorAnalysis</em>. For PointAnalysisMode the
analysis can be roughly reduced to IvsLam = DetectorWS / sum(I0) /
TransmissionWS / sum(I0). For MultiDetectorAnalysis the analysis can be roughly
reduced to IvsLam = DetectorWS / RegionOfDirectBeamWS / sum(I0) / TransmissionWS
/ sum(I0).</p>
</div>
<div class="section" id="transmission-correction">
<h3><a class="toc-backref" href="#id7">Transmission Correction</a><a class="headerlink" href="#transmission-correction" title="Permalink to this headline">¶</a></h3>
<p>This diagram shows how the resultant workspace of the previous step is corrected
by either by provided transmission runs or by a specific correction algorithm.</p>
<img alt="../_images/ReflectometryReductionOne_TransmissionCorrection-v1_wkflw.png" src="../_images/ReflectometryReductionOne_TransmissionCorrection-v1_wkflw.png" />
<p>Transmission correction is a normalization step, which may be applied to both
<em>PointDetectorAnalysis</em> and <em>MultiDetectorAnalysis</em> reduction.</p>
<p>Transmission runs are expected to be in TOF. The spectra numbers in the
Transmission run workspaces must be the same as those in the Input Run
workspace. If two Transmission runs are provided then the Stitching
parameters associated with the transmission runs will also be required.
If a single Transmission run is provided, then no stitching parameters
will be needed.</p>
<p>The normalization by tranmission run(s) is optional.</p>
<p>The input workspace provided to the workflow in this instance is the original
<tt class="docutils literal"><span class="pre">InputWorkspace</span></tt> after conversion to wavelength and normalization by
monitors, as shown in the previous <tt class="docutils literal"><span class="pre">Conversion</span> <span class="pre">To</span> <span class="pre">Wavelength</span></tt> diagram.</p>
<p>The output workspace given is not the output to the whole algorithm. Rather it
will serve as the input workspace to the <tt class="docutils literal"><span class="pre">Polynomial</span> <span class="pre">Correction</span></tt>
workflow, where further steps will be applied to it.</p>
<div class="section" id="polynomial-correction">
<h4><a class="toc-backref" href="#id8">Polynomial Correction</a><a class="headerlink" href="#polynomial-correction" title="Permalink to this headline">¶</a></h4>
<p>If no Transmission runs are provided, then polynomial correction can be
performed instead. Polynomial correction is enabled by setting the
<tt class="docutils literal"><span class="pre">CorrectionAlgorithm</span></tt> property. If set to
<tt class="docutils literal"><span class="pre">PolynomialCorrection</span></tt> it runs the <a class="reference internal" href="PolynomialCorrection-v1.html#algm-polynomialcorrection"><em>PolynomialCorrection v1</em></a>
algorithm, with this algorithms <tt class="docutils literal"><span class="pre">Polynomial</span></tt> property used as its
<tt class="docutils literal"><span class="pre">Coefficients</span></tt> property.</p>
<p>If the <tt class="docutils literal"><span class="pre">CorrectionAlgorithm</span></tt> property is set to
<tt class="docutils literal"><span class="pre">ExponentialCorrection</span></tt>, then the <a class="reference internal" href="ExponentialCorrection-v1.html#algm-exponentialcorrection"><em>ExponentialCorrection v1</em></a>
algorithm is used, with C0 and C1 taken from the <tt class="docutils literal"><span class="pre">C0</span></tt> and <tt class="docutils literal"><span class="pre">C1</span></tt>
properties.</p>
</div>
</div>
<div class="section" id="detector-position-correction">
<h3><a class="toc-backref" href="#id9">Detector Position Correction</a><a class="headerlink" href="#detector-position-correction" title="Permalink to this headline">¶</a></h3>
<p>The diagram below describes how the input workspace is then corrected by
detector positions after transmission correction.</p>
<img alt="../_images/ReflectometryReductionOne_CorrectDetectorPositions-v1_wkflw.png" src="../_images/ReflectometryReductionOne_CorrectDetectorPositions-v1_wkflw.png" />
<p>Detector Position Correction is used for when the position of the detector
is not aligned with the reflected beamline. The correction algorithm used is
<a class="reference internal" href="SpecularReflectionPositionCorrect-v1.html#algm-specularreflectionpositioncorrect-v1"><em>SpecularReflectionPositionCorrect v1</em></a> which is a purely vertical
position correction.</p>
<p>The detector positions in this process are corrected in terms of
<tt class="docutils literal"><span class="pre">ThetaIn</span></tt>. In general, the detector posistions should always be
corrected unless the <tt class="docutils literal"><span class="pre">InputWorkspace</span></tt> already has the detectors in the
right positions. This can be achieved by running
<tt class="docutils literal"><span class="pre">MoveInstrumentComponent</span></tt> before <tt class="docutils literal"><span class="pre">ReflectometryReductionOne</span></tt>.</p>
</div>
<div class="section" id="convert-to-momentum-transfer-q">
<h3><a class="toc-backref" href="#id10">Convert To Momentum Transfer (Q)</a><a class="headerlink" href="#convert-to-momentum-transfer-q" title="Permalink to this headline">¶</a></h3>
<p>The last diagram describes the steps involved in converting the input workspace
from units of wavelength into momentum transfer (Q).</p>
<img alt="../_images/ReflectometryReductionOne_ConvertToMomentum-v1_wkflw.png" src="../_images/ReflectometryReductionOne_ConvertToMomentum-v1_wkflw.png" />
<p>ReflectometryReductionOne contains 2 post-processing options that will be
applied to the IvsQ workspace. These two options are <cite>Rebin</cite> and <cite>Scale</cite>.</p>
<div class="section" id="rebinning">
<h4><a class="toc-backref" href="#id11">Rebinning</a><a class="headerlink" href="#rebinning" title="Permalink to this headline">¶</a></h4>
<p>To Rebin your IvsQ workspace you will have to provide values for the following
properties: <cite>MomentumTransferMinimum</cite>, <cite>MomentumTransferStep</cite> and
<cite>MomentumTransferMaximum</cite>. These values will be appended to each other to form
your <a class="reference internal" href="Rebin-v1.html#algm-rebin"><em>Rebin v1</em></a> Params. These values correspond to your <cite>MinimumExtent</cite>,
<cite>BinWidth</cite> and <cite>MaximumExtent</cite> respectively.</p>
<p>If you provide a positive <cite>MomentumTransferStep</cite> value then the algorithm will
automatically negate this value which will allow for Logarithmic Rebinning.
Alternatively, a negative <cite>MomentumTransferStep</cite> will result in Linear
Rebinning. More details about the Rebinning process can be found in the
documentation for <a class="reference internal" href="Rebin-v1.html#algm-rebin"><em>Rebin v1</em></a>.</p>
<p>If no values are provided for <cite>MomentumTransferMinimum</cite> and
<cite>MomentumTransferMaximum</cite> then the algorithm will attempt to calculate these
values by using the equations below:</p>
<blockquote>
<div><p><img class="math" src="../_images/math/b8458e0595611ff1723e539e4b5c88afc6c27db5.png" alt="Q_{min} = 2 \, k \, sin \, \theta = \frac{4 \pi sin \theta}{\lambda_{max}}" style="vertical-align: -8px"/></p>
<p><img class="math" src="../_images/math/7c2202192b31e7296800560c1b37bd11bb944790.png" alt="Q_{max} = 2 \, k \, sin \, \theta = \frac{4 \pi sin \theta}{\lambda_{min}}" style="vertical-align: -8px"/></p>
</div></blockquote>
<p>Where <img class="math" src="../_images/math/9bc377d974d257caae9bbbf393c064f638fb8829.png" alt="\lambda_{min}" style="vertical-align: -3px"/> is the minimum extent of the <cite>IvsLambda</cite> Workspace
and <img class="math" src="../_images/math/be1374410423be771030e090c0d72f27d35ad81e.png" alt="\lambda_{max}" style="vertical-align: -3px"/> is the maximum extent of the <cite>IvsLambda</cite> Workspace.</p>
<p>If you have not provided a value for <cite>MomentumTransferStep</cite> then the algorithm
will use <a class="reference internal" href="CalculateResolution-v1.html#algm-calculateresolution"><em>CalculateResolution v1</em></a> to calculate this value for you.</p>
</div>
<div class="section" id="scaling">
<h4><a class="toc-backref" href="#id12">Scaling</a><a class="headerlink" href="#scaling" title="Permalink to this headline">¶</a></h4>
<p>To apply a scaling to the IvsQ workspace that has been produced by the
reduction, you will need to provide a value for the <cite>ScaleFactor</cite> property in
the algorithm. The default for this value is 1.0 and thus no scaling is applied
to the workspace. The scaling of the IvsQ workspace is performed in-place by the
<a class="reference internal" href="Scale-v1.html#algm-scale"><em>Scale v1</em></a> algorithm and your IvsQ workspace will be set to the product
of this algorithm.</p>
</div>
<div class="section" id="source-rotation">
<h4><a class="toc-backref" href="#id13">Source Rotation</a><a class="headerlink" href="#source-rotation" title="Permalink to this headline">¶</a></h4>
<p>In the workflow diagram above, after we produce the IvsLambda workspace, it may
be necessary to rotate the position of the source to match the value of
ThetaOut (<img class="math" src="../_images/math/7a707dcdc35a7da05d56b72a5d981151d48020bf.png" alt="\theta_f" style="vertical-align: -6px"/>).</p>
<p>Below we see the typical experimental setup for a Reflectometry instrument. The
source direction (Beam vector) is along the horizon. This setup is defined in
the Instrument Defintion File and this instrument setup will be attached to any
workspaces associated with that instrument. When we pass the IvsLambda workspace
to <a class="reference internal" href="ConvertUnits-v1.html#algm-convertunits"><em>ConvertUnits v1</em></a> to produce an IvsQ workspace,
<a class="reference internal" href="ConvertUnits-v1.html#algm-convertunits"><em>ConvertUnits v1</em></a> will assume that <img class="math" src="../_images/math/8e9bb7fd3766daf063d69d9836ac5185a40a45a7.png" alt="2\theta" style="vertical-align: 0px"/> is the angle between
the Beam vector and the sample-to-detector vector. When we have the typical
setup seen below, <img class="math" src="../_images/math/8e9bb7fd3766daf063d69d9836ac5185a40a45a7.png" alt="2\theta" style="vertical-align: 0px"/> will be exactly half the value we wish it to
be.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/CurrentExperimentSetupForReflectometry.png"><img alt="../_images/CurrentExperimentSetupForReflectometry.png" src="../_images/CurrentExperimentSetupForReflectometry.png" style="width: 650px; height: 250px;" /></a>
</div>
<p>We rotate the position of the Source (and therefore the Beam vector) in the
Instrument Defintion associated with the IvsLambda workspace until the condition
<img class="math" src="../_images/math/d4cb4929c591037a359b39556efe2c1069710534.png" alt="\theta_i = \theta_f" style="vertical-align: -6px"/> is satisfied. This will achieve the desired result
for <img class="math" src="../_images/math/8e9bb7fd3766daf063d69d9836ac5185a40a45a7.png" alt="2\theta" style="vertical-align: 0px"/> (see below for rotated source diagram). After
<a class="reference internal" href="ConvertUnits-v1.html#algm-convertunits"><em>ConvertUnits v1</em></a> has produced our IvsQ workspace, we will rotate the
position of the source back to its original position so that the experimental
setup remains unchanged for other algorithms that may need to manipulate/use it.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/RotatedExperimentSetupForReflectometry.png"><img alt="../_images/RotatedExperimentSetupForReflectometry.png" src="../_images/RotatedExperimentSetupForReflectometry.png" style="width: 650px; height: 250px;" /></a>
</div>
</div>
</div>
</div>
<div class="section" id="usage">
<h2><a class="toc-backref" href="#id14">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p><strong>Example - Reduce a Run</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">run</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="n">Filename</span><span class="o">=</span><span class="s">&#39;INTER00013460.nxs&#39;</span><span class="p">)</span>
<span class="c"># Basic reduction with no transmission run</span>
<span class="n">IvsQ</span><span class="p">,</span> <span class="n">IvsLam</span><span class="p">,</span> <span class="n">thetaOut</span> <span class="o">=</span> <span class="n">ReflectometryReductionOne</span><span class="p">(</span><span class="n">InputWorkspace</span><span class="o">=</span><span class="n">run</span><span class="p">,</span> <span class="n">ThetaIn</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">I0MonitorIndex</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">ProcessingInstructions</span><span class="o">=</span><span class="s">&#39;3:4&#39;</span><span class="p">,</span>
<span class="n">WavelengthMin</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">WavelengthMax</span><span class="o">=</span><span class="mf">17.0</span><span class="p">,</span>
<span class="n">MonitorBackgroundWavelengthMin</span><span class="o">=</span><span class="mf">15.0</span><span class="p">,</span> <span class="n">MonitorBackgroundWavelengthMax</span><span class="o">=</span><span class="mf">17.0</span><span class="p">,</span>
<span class="n">MonitorIntegrationWavelengthMin</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">MonitorIntegrationWavelengthMax</span><span class="o">=</span><span class="mf">10.0</span> <span class="p">)</span>

<span class="k">print</span> <span class="s">&quot;The first four IvsLam Y values are: [ </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s"> ]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">IvsLam</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;The first four IvsQ Y values are: [ </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s">, </span><span class="si">%.4e</span><span class="s"> ]&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">1</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">2</span><span class="p">],</span> <span class="n">IvsQ</span><span class="o">.</span><span class="n">readY</span><span class="p">(</span><span class="mi">0</span><span class="p">)[</span><span class="mi">3</span><span class="p">])</span>
<span class="k">print</span> <span class="s">&quot;Theta out is the same as theta in:&quot;</span><span class="p">,</span><span class="n">thetaOut</span>
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-none"><div class="highlight"><pre>The first four IvsLam Y values are: [ 0.0000e+00, 0.0000e+00, 7.8118e-07, 1.9346e-06 ]
The first four IvsQ Y values are: [ 6.2615e-04, 7.8498e-04, 9.2155e-04, 1.1042e-03 ]
Theta out is the same as theta in: 0.7
</pre></div>
</div>
<p><strong>Categories</strong>: <a class="reference external" href="categories/Algorithms.html">Algorithms</a> | <a class="reference external" href="categories/Reflectometry.html">Reflectometry</a></p>
</div>
<div class="section" id="source">
<h2><a class="toc-backref" href="#id15">Source</a><a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<p>C++ source: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c46a67d64e22c52f6c639900deb1c2a0efa0aa66/Framework/Algorithms/src/ReflectometryReductionOne.cpp">ReflectometryReductionOne.cpp</a></p>
<p>C++ header: <a class="reference external" href="https://github.com/mantidproject/mantid/blob/c46a67d64e22c52f6c639900deb1c2a0efa0aa66/Framework/Algorithms/inc/MantidAlgorithms/ReflectometryReductionOne.h">ReflectometryReductionOne.h</a></p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          
            
  <li>
    <a href="RefinePowderInstrumentParameters-v3.html" title="Previous Chapter: RefinePowderInstrumentParameters v3"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; RefinePowderInst...</span>
    </a>
  </li>
  <li>
    <a href="ReflectometryReductionOneAuto-v1.html" title="Next Chapter: ReflectometryReductionOneAuto v1"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">ReflectometryRed... &raquo;</span>
    </a>
  </li>
          
       
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
    </p>
  </div>
</footer>
  </body>
</html>